-- MySQL dump 10.13  Distrib 8.0.17, for Win64 (x86_64)
--
-- Host: phtfaw4p6a970uc0.cbetxkdyhwsb.us-east-1.rds.amazonaws.com    Database: dte9795h5zn8f7u9
-- ------------------------------------------------------
-- Server version	8.0.15

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
SET @MYSQLDUMP_TEMP_LOG_BIN = @@SESSION.SQL_LOG_BIN;
SET @@SESSION.SQL_LOG_BIN= 0;

--
-- GTID state at the beginning of the backup 
--

SET @@GLOBAL.GTID_PURGED=/*!80000 '+'*/ '';

--
-- Table structure for table `bank`
--

DROP TABLE IF EXISTS `bank`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `bank` (
  `BANK_NUM` varchar(10) NOT NULL,
  `BANK_NAME` varchar(255) NOT NULL,
  `BANK_ADDRESS` varchar(255) NOT NULL,
  `BANK_POSTCODE` varchar(5) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL DEFAULT '310',
  PRIMARY KEY (`BANK_NUM`),
  KEY `fk_BANK_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_BANK_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bank`
--

LOCK TABLES `bank` WRITE;
/*!40000 ALTER TABLE `bank` DISABLE KEYS */;
INSERT INTO `bank` VALUES ('BANK-2','OCBC BANK','18, Jalan Tun Perak, City Centre, Kuala Lumpur, Wilayah Persekutuan Kuala Lumpur','50050',310),('BANK-3','MAYBANK','C7, Jalan SS 15/4d, Ss 15, Subang Jaya, Selangor','47501',310);
/*!40000 ALTER TABLE `bank` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `bank_payment`
--

DROP TABLE IF EXISTS `bank_payment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `bank_payment` (
  `BANK_PAYMENT_NUM` varchar(10) NOT NULL,
  `BANK_NUM` varchar(10) NOT NULL,
  `CREDITOR_NUM` varchar(10) DEFAULT NULL,
  `BANK_PAYMENT_DATE` date NOT NULL,
  `BANK_PAYMENT_METHOD` varchar(45) DEFAULT NULL,
  `BANK_PAYMENT_TRANSACTION_ID` varchar(45) DEFAULT NULL,
  `BANK_PAYMENT_DESC` varchar(255) DEFAULT NULL,
  `BANK_PAYMENT_AMOUNT` decimal(10,2) NOT NULL,
  `GL_ACC_NUM` int(11) DEFAULT NULL,
  PRIMARY KEY (`BANK_PAYMENT_NUM`),
  KEY `fk_BANK_PAYMENT_BANK1_idx` (`BANK_NUM`),
  KEY `fk_BANK_PAYMENT_CREDITOR1_idx` (`CREDITOR_NUM`),
  KEY `fk_BANK_PAYMENT_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_BANK_PAYMENT_BANK1` FOREIGN KEY (`BANK_NUM`) REFERENCES `bank` (`BANK_NUM`),
  CONSTRAINT `fk_BANK_PAYMENT_CREDITOR1` FOREIGN KEY (`CREDITOR_NUM`) REFERENCES `creditor` (`CREDITOR_NUM`),
  CONSTRAINT `fk_BANK_PAYMENT_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bank_payment`
--

LOCK TABLES `bank_payment` WRITE;
/*!40000 ALTER TABLE `bank_payment` DISABLE KEYS */;
INSERT INTO `bank_payment` VALUES ('BP-2','BANK-2','CRED-1','2019-12-02','CHEQUE','OCBC0284',NULL,200.00,NULL);
/*!40000 ALTER TABLE `bank_payment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `bank_receipt`
--

DROP TABLE IF EXISTS `bank_receipt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `bank_receipt` (
  `BANK_RECEIPT_NUM` varchar(10) NOT NULL,
  `BANK_NUM` varchar(10) NOT NULL,
  `DEBTOR_NUM` varchar(10) DEFAULT NULL,
  `BANK_RECEIPT_DATE` date NOT NULL,
  `BANK_RECEIPT_METHOD` varchar(45) DEFAULT NULL,
  `BANK_RECEIPT_TRANSACTION_ID` varchar(45) DEFAULT NULL,
  `BANK_RECEIPT_DESC` varchar(255) DEFAULT NULL,
  `BANK_RECEIPT_AMOUNT` decimal(10,2) NOT NULL,
  `GL_ACC_NUM` int(11) DEFAULT NULL,
  PRIMARY KEY (`BANK_RECEIPT_NUM`),
  KEY `fk_BANK_RECEIPT_BANK1_idx` (`BANK_NUM`),
  KEY `fk_BANK_RECEIPT_DEBTOR1_idx` (`DEBTOR_NUM`),
  KEY `fk_BANK_RECEIPT_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_BANK_RECEIPT_BANK1` FOREIGN KEY (`BANK_NUM`) REFERENCES `bank` (`BANK_NUM`),
  CONSTRAINT `fk_BANK_RECEIPT_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`),
  CONSTRAINT `fk_BANK_RECEIPT_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `bank_receipt`
--

LOCK TABLES `bank_receipt` WRITE;
/*!40000 ALTER TABLE `bank_receipt` DISABLE KEYS */;
INSERT INTO `bank_receipt` VALUES ('BR-1','BANK-2','DEB-1','2019-12-11','CHEQUE','OCBC0281',NULL,500.00,NULL),('BR-2','BANK-2','DEB-2','2019-12-11','CHEQUE','OCBC0282',NULL,275.00,NULL),('BR-3','BANK-3',NULL,'2018-03-01','CHEQUE','MBB001','INITIAL CASH INFUSION FROM OWNER',500000.00,100);
/*!40000 ALTER TABLE `bank_receipt` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `cash_payment`
--

DROP TABLE IF EXISTS `cash_payment`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `cash_payment` (
  `CASH_PAYMENT_NUM` varchar(10) NOT NULL,
  `CREDITOR_NUM` varchar(10) DEFAULT NULL,
  `CASH_PAYMENT_DATE` date NOT NULL,
  `CASH_PAYMENT_METHOD` varchar(45) DEFAULT NULL,
  `CASH_PAYMENT_TRANSACTION_ID` varchar(45) DEFAULT NULL,
  `CASH_PAYMENT_DESC` varchar(255) DEFAULT NULL,
  `CASH_PAYMENT_AMOUNT` decimal(10,2) NOT NULL,
  `GL_ACC_NUM1` int(11) DEFAULT NULL,
  `GL_ACC_NUM2` int(11) NOT NULL DEFAULT '320',
  PRIMARY KEY (`CASH_PAYMENT_NUM`),
  KEY `fk_CASH_PAYMENT_CREDITOR1_idx` (`CREDITOR_NUM`),
  KEY `fk_CASH_PAYMENT_GL1_idx` (`GL_ACC_NUM1`),
  KEY `fk_CASH_PAYMENT_GL2_idx` (`GL_ACC_NUM2`),
  CONSTRAINT `fk_CASH_PAYMENT_CREDITOR1` FOREIGN KEY (`CREDITOR_NUM`) REFERENCES `creditor` (`CREDITOR_NUM`),
  CONSTRAINT `fk_CASH_PAYMENT_GL1` FOREIGN KEY (`GL_ACC_NUM1`) REFERENCES `gl` (`GL_ACC_NUM`),
  CONSTRAINT `fk_CASH_PAYMENT_GL2` FOREIGN KEY (`GL_ACC_NUM2`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `cash_payment`
--

LOCK TABLES `cash_payment` WRITE;
/*!40000 ALTER TABLE `cash_payment` DISABLE KEYS */;
INSERT INTO `cash_payment` VALUES ('CP-1',NULL,'2019-12-10','CASH','INV501','KEDAI HOCK SENG ADVERT',500.00,901,320),('CP-2',NULL,'2019-12-02','CASH',NULL,NULL,300.00,210,320),('CP-3','CRED-1','2020-01-08','CHEQUE',NULL,NULL,500.00,NULL,320);
/*!40000 ALTER TABLE `cash_payment` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `cash_receipt`
--

DROP TABLE IF EXISTS `cash_receipt`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `cash_receipt` (
  `CASH_RECEIPT_NUM` varchar(10) NOT NULL,
  `DEBTOR_NUM` varchar(10) DEFAULT NULL,
  `CASH_RECEIPT_DATE` date NOT NULL,
  `CASH_RECEIPT_METHOD` varchar(45) DEFAULT NULL,
  `CASH_RECEIPT_TRANSACTION_ID` varchar(45) DEFAULT NULL,
  `CASH_RECEIPT_DESC` varchar(255) DEFAULT NULL,
  `CASH_RECEIPT_AMOUNT` decimal(10,2) NOT NULL,
  `GL_ACC_NUM1` int(11) DEFAULT NULL,
  `GL_ACC_NUM2` int(11) NOT NULL DEFAULT '320',
  PRIMARY KEY (`CASH_RECEIPT_NUM`),
  KEY `fk_CASH_RECEIPT_GL1_idx` (`GL_ACC_NUM1`),
  KEY `fk_CASH_RECEIPT_DEBTOR1_idx` (`DEBTOR_NUM`),
  KEY `fk_CASH_RECEIPT_GL2_idx` (`GL_ACC_NUM2`),
  CONSTRAINT `fk_CASH_RECEIPT_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`),
  CONSTRAINT `fk_CASH_RECEIPT_GL1` FOREIGN KEY (`GL_ACC_NUM1`) REFERENCES `gl` (`GL_ACC_NUM`),
  CONSTRAINT `fk_CASH_RECEIPT_GL2` FOREIGN KEY (`GL_ACC_NUM2`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `cash_receipt`
--

LOCK TABLES `cash_receipt` WRITE;
/*!40000 ALTER TABLE `cash_receipt` DISABLE KEYS */;
INSERT INTO `cash_receipt` VALUES ('CR-1',NULL,'2019-12-02','CASH',NULL,'CASH',400.00,305,320),('CR-2','DEB-1','2019-12-09','CASH',NULL,'CASH',170.00,NULL,320);
/*!40000 ALTER TABLE `cash_receipt` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `credit_note`
--

DROP TABLE IF EXISTS `credit_note`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `credit_note` (
  `CREDIT_NOTE_NUM` varchar(10) NOT NULL,
  `CREDIT_NOTE_DATE` date NOT NULL,
  `CREDIT_NOTE_DESC` varchar(255) DEFAULT NULL,
  `DEBTOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`CREDIT_NOTE_NUM`),
  KEY `fk_CREDIT_NOTE_DEBTOR1_idx` (`DEBTOR_NUM`),
  KEY `fk_CREDIT_NOTE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_CREDIT_NOTE_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`),
  CONSTRAINT `fk_CREDIT_NOTE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `credit_note`
--

LOCK TABLES `credit_note` WRITE;
/*!40000 ALTER TABLE `credit_note` DISABLE KEYS */;
INSERT INTO `credit_note` VALUES ('CN-1','2020-01-31','DISCOUNT','DEB-3',560);
/*!40000 ALTER TABLE `credit_note` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `credit_noteline`
--

DROP TABLE IF EXISTS `credit_noteline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `credit_noteline` (
  `CREDIT_NOTE_NUM` varchar(10) NOT NULL,
  `CREDIT_NOTELINE_LINENUMBER` int(11) NOT NULL,
  `CREDIT_NOTELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `CREDIT_NOTELINE_STOCK_DESC` varchar(50) NOT NULL,
  `CREDIT_NOTELINE_STOCK_PRICE` decimal(10,2) NOT NULL,
  `CREDIT_NOTELINE_STOCK_QTY` int(11) NOT NULL,
  `CREDIT_NOTELINE_DISCOUNT` decimal(10,2) NOT NULL,
  `CREDIT_NOTELINE_SUBTOTAL` decimal(10,2) GENERATED ALWAYS AS (((`CREDIT_NOTELINE_STOCK_PRICE` * `CREDIT_NOTELINE_STOCK_QTY`) - `CREDIT_NOTELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`CREDIT_NOTE_NUM`,`CREDIT_NOTELINE_LINENUMBER`),
  KEY `fk_CREDIT_NOTELINE_CREDIT_NOTE1_idx` (`CREDIT_NOTE_NUM`),
  CONSTRAINT `fk_CREDIT_NOTELINE_CREDIT_NOTE1` FOREIGN KEY (`CREDIT_NOTE_NUM`) REFERENCES `credit_note` (`CREDIT_NOTE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `credit_noteline`
--

LOCK TABLES `credit_noteline` WRITE;
/*!40000 ALTER TABLE `credit_noteline` DISABLE KEYS */;
INSERT INTO `credit_noteline` (`CREDIT_NOTE_NUM`, `CREDIT_NOTELINE_LINENUMBER`, `CREDIT_NOTELINE_STOCK_NUM`, `CREDIT_NOTELINE_STOCK_DESC`, `CREDIT_NOTELINE_STOCK_PRICE`, `CREDIT_NOTELINE_STOCK_QTY`, `CREDIT_NOTELINE_DISCOUNT`) VALUES ('CN-1',1,NULL,'OVERALL DISCOUNT DUE TO MUPPETNESS',500.00,1,0.00);
/*!40000 ALTER TABLE `credit_noteline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `creditor`
--

DROP TABLE IF EXISTS `creditor`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `creditor` (
  `CREDITOR_NUM` varchar(10) NOT NULL,
  `CREDITOR_NAME` varchar(255) NOT NULL,
  `CREDITOR_ADDRESS` varchar(255) NOT NULL,
  `CREDITOR_POSTCODE` varchar(5) NOT NULL,
  `CREDITOR_PHONE` varchar(15) NOT NULL,
  `CREDITOR_FAX` varchar(15) DEFAULT NULL,
  `CREDITOR_OTHER_DESC` varchar(255) DEFAULT NULL,
  `CREDITOR_CREDIT_TERM` enum('COD','30','45','60','90') DEFAULT NULL,
  `GL_ACC_NUM` int(11) NOT NULL DEFAULT '400',
  PRIMARY KEY (`CREDITOR_NUM`),
  KEY `fk_CREDITOR_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_CREDITOR_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `creditor`
--

LOCK TABLES `creditor` WRITE;
/*!40000 ALTER TABLE `creditor` DISABLE KEYS */;
INSERT INTO `creditor` VALUES ('CRED-1','Mars Paint Marketing (M) Sdn Bhd','119, Jalan Kapar, Kawasan 18, Klang, Selangor','41400','03-3358 4561',NULL,NULL,'60',400),('CRED-2','Rotar Machinery Sdn Bhd','Jalan Pudu, WP, 227, Federal Territory of Kuala Lumpur','55100','03-2142 6590',NULL,NULL,'60',400),('CRED-3','Sime Kansai Paints Sdn Bhd','2, Solok Waja 2, Kawasan Perindustrian Bukit Raja, Klang, Selangor','41710','03-3343 4833',NULL,NULL,'60',400);
/*!40000 ALTER TABLE `creditor` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `debit_note`
--

DROP TABLE IF EXISTS `debit_note`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `debit_note` (
  `DEBIT_NOTE_NUM` varchar(10) NOT NULL,
  `DEBIT_NOTE_DATE` date NOT NULL,
  `DEBIT_NOTE_DESC` varchar(255) DEFAULT NULL,
  `DEBTOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`DEBIT_NOTE_NUM`),
  KEY `fk_DEBIT_NOTE_GL1_idx` (`GL_ACC_NUM`),
  KEY `fk_DEBIT_NOTE_DEBTOR1_idx` (`DEBTOR_NUM`),
  CONSTRAINT `fk_DEBIT_NOTE_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`),
  CONSTRAINT `fk_DEBIT_NOTE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `debit_note`
--

LOCK TABLES `debit_note` WRITE;
/*!40000 ALTER TABLE `debit_note` DISABLE KEYS */;
INSERT INTO `debit_note` VALUES ('DN-1','2020-01-28','UNDERCHARGED SALES + SOMETHING','DEB-3',500);
/*!40000 ALTER TABLE `debit_note` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `debit_noteline`
--

DROP TABLE IF EXISTS `debit_noteline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `debit_noteline` (
  `DEBIT_NOTE_NUM` varchar(10) NOT NULL,
  `DEBIT_NOTELINE_LINENUMBER` int(11) NOT NULL,
  `DEBIT_NOTELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `DEBIT_NOTELINE_STOCK_DESC` varchar(50) NOT NULL,
  `DEBIT_NOTELINE_STOCK_PRICE` decimal(10,2) NOT NULL,
  `DEBIT_NOTELINE_STOCK_QTY` int(11) NOT NULL,
  `DEBIT_NOTELINE_DISCOUNT` decimal(10,2) NOT NULL,
  `DEBIT_NOTELINE_SUBTOTAL` decimal(10,2) GENERATED ALWAYS AS (((`DEBIT_NOTELINE_STOCK_PRICE` * `DEBIT_NOTELINE_STOCK_QTY`) - `DEBIT_NOTELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`DEBIT_NOTE_NUM`,`DEBIT_NOTELINE_LINENUMBER`),
  KEY `fk_DEBIT_NOTELINE_DEBIT_NOTE1_idx` (`DEBIT_NOTE_NUM`),
  CONSTRAINT `fk_DEBIT_NOTELINE_DEBIT_NOTE1` FOREIGN KEY (`DEBIT_NOTE_NUM`) REFERENCES `debit_note` (`DEBIT_NOTE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `debit_noteline`
--

LOCK TABLES `debit_noteline` WRITE;
/*!40000 ALTER TABLE `debit_noteline` DISABLE KEYS */;
INSERT INTO `debit_noteline` (`DEBIT_NOTE_NUM`, `DEBIT_NOTELINE_LINENUMBER`, `DEBIT_NOTELINE_STOCK_NUM`, `DEBIT_NOTELINE_STOCK_DESC`, `DEBIT_NOTELINE_STOCK_PRICE`, `DEBIT_NOTELINE_STOCK_QTY`, `DEBIT_NOTELINE_DISCOUNT`) VALUES ('DN-1',1,NULL,'OVERALL UNDERCHARGED DUE TO PROBLEMS',550.00,1,0.00),('DN-1',2,NULL,'EXORA FRONT SKIRT',220.00,1,0.00);
/*!40000 ALTER TABLE `debit_noteline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `debtor`
--

DROP TABLE IF EXISTS `debtor`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `debtor` (
  `DEBTOR_NUM` varchar(10) NOT NULL,
  `DEBTOR_NAME` varchar(255) NOT NULL,
  `DEBTOR_ADDRESS` varchar(255) NOT NULL,
  `DEBTOR_POSTCODE` varchar(5) NOT NULL,
  `DEBTOR_PHONE` varchar(15) NOT NULL,
  `DEBTOR_FAX` varchar(15) DEFAULT NULL,
  `DEBTOR_OTHER_DESC` varchar(255) DEFAULT NULL,
  `DEBTOR_CREDIT_TERM` enum('COD','30','45','60','90') NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL DEFAULT '300',
  PRIMARY KEY (`DEBTOR_NUM`),
  KEY `fk_DEBTOR_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_DEBTOR_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `debtor`
--

LOCK TABLES `debtor` WRITE;
/*!40000 ALTER TABLE `debtor` DISABLE KEYS */;
INSERT INTO `debtor` VALUES ('DEB-1','Sipro Plastic Industries Sdn Bhd',' Lot 7, Jalan Bawang Putih 24/3 Section 24, Shah Alam, Selangor','40000','03-5541 8064',NULL,NULL,'60',300),('DEB-2','Teck See Plastic Sdn. Bhd.','Seksyen 15, Shah Alam, Selangor','40200','03-5510 3188',NULL,NULL,'30',300),('DEB-3','Proreka (M) Sdn. Bhd.','No. 17, Jalan Industri PBP 3, Taman Industri Pusat Bandar Puchong, Puchong, Selangor','47100','03-5882 2661',NULL,NULL,'60',300);
/*!40000 ALTER TABLE `debtor` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `delivery_order`
--

DROP TABLE IF EXISTS `delivery_order`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `delivery_order` (
  `DELIVERY_ORDER_NUM` varchar(10) NOT NULL,
  `DELIVERY_ORDER_DATE` date NOT NULL,
  `DELIVERY_ORDER_DESC` varchar(255) DEFAULT NULL,
  `DEBTOR_NUM` varchar(10) NOT NULL,
  PRIMARY KEY (`DELIVERY_ORDER_NUM`),
  KEY `fk_DELIVERY_ORDER_DEBTOR1_idx` (`DEBTOR_NUM`),
  CONSTRAINT `fk_DELIVERY_ORDER_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `delivery_order`
--

LOCK TABLES `delivery_order` WRITE;
/*!40000 ALTER TABLE `delivery_order` DISABLE KEYS */;
INSERT INTO `delivery_order` VALUES ('DO-1','2020-02-04','FIRST DELIVERY!','DEB-1');
/*!40000 ALTER TABLE `delivery_order` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `delivery_orderline`
--

DROP TABLE IF EXISTS `delivery_orderline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `delivery_orderline` (
  `DELIVERY_ORDER_NUM` varchar(10) NOT NULL,
  `DELIVERY_ORDERLINE_LINENUMBER` int(11) NOT NULL,
  `DELIVERY_ORDERLINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `DELIVERY_ORDERLINE_STOCK_DESC` varchar(50) NOT NULL,
  `DELIVERY_ORDERLINE_STOCK_QTY` int(11) NOT NULL,
  PRIMARY KEY (`DELIVERY_ORDER_NUM`,`DELIVERY_ORDERLINE_LINENUMBER`),
  KEY `fk_DELIVERY_ORDERLINE_DELIVERY_ORDER1_idx` (`DELIVERY_ORDER_NUM`),
  CONSTRAINT `fk_DELIVERY_ORDERLINE_DELIVERY_ORDER1` FOREIGN KEY (`DELIVERY_ORDER_NUM`) REFERENCES `delivery_order` (`DELIVERY_ORDER_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `delivery_orderline`
--

LOCK TABLES `delivery_orderline` WRITE;
/*!40000 ALTER TABLE `delivery_orderline` DISABLE KEYS */;
INSERT INTO `delivery_orderline` VALUES ('DO-1',1,'BUM-1','EXORA BUMPER',5),('DO-1',2,'X70-1','X70 BUMPER1',10),('DO-1',3,'BUM-1','EXORA BUMPER',1);
/*!40000 ALTER TABLE `delivery_orderline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `gl`
--

DROP TABLE IF EXISTS `gl`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `gl` (
  `GL_ACC_NUM` int(11) NOT NULL,
  `GL_DESC` varchar(45) NOT NULL,
  `GL_CATEGORY` varchar(45) NOT NULL,
  `GL_STATUS` varchar(25) NOT NULL,
  PRIMARY KEY (`GL_ACC_NUM`),
  KEY `GL_CATEGORY` (`GL_CATEGORY`),
  CONSTRAINT `gl_ibfk_1` FOREIGN KEY (`GL_CATEGORY`) REFERENCES `gl_category` (`GL_CATEGORY`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `gl`
--

LOCK TABLES `gl` WRITE;
/*!40000 ALTER TABLE `gl` DISABLE KEYS */;
INSERT INTO `gl` VALUES (100,'SHARE CAPITAL','EQUITY','NORMAL'),(150,'RESERVES','EQUITY','NORMAL'),(200,'FURNITURES AND FITTINGS','FIXED ASSETS','NORMAL'),(205,'ACCUM DEPRECIATION-FURNITURES AND FITTINGS','FIXED ASSETS','NORMAL'),(210,'OFFICE EQUIPMENTS','FIXED ASSETS','NORMAL'),(215,'ACCUM DEPRECIATION-OFFICE EQUIPMENTS','FIXED ASSETS','NORMAL'),(220,'MOTOR VEHICLES','FIXED ASSETS','NORMAL'),(225,'ACCUM DEPRECIATION-MOTOR VEHICLES','FIXED ASSETS','NORMAL'),(300,'DEBTOR','CURRENT ASSETS','SPECIAL'),(305,'OTHER DEBTOR','CURRENT ASSETS','NORMAL'),(310,'BANK','CURRENT ASSETS','SPECIAL'),(320,'CASH IN HAND','CURRENT ASSETS','DEFAULT'),(330,'STOCK','CURRENT ASSETS','NORMAL'),(340,'DEPOSIT AND PREPAYMENT','CURRENT ASSETS','NORMAL'),(400,'CREDITOR','CURRENT LIABILITIES','SPECIAL'),(405,'OTHER CREDITOR','CURRENT LIABILITIES','NORMAL'),(410,'ACCRUALS','CURRENT LIABILITIES','NORMAL'),(500,'SALES','SALES','NORMAL'),(510,'CASH SALES','SALES','NORMAL'),(550,'RETURN INWARDS','SALES ADJUSTMENTS','NORMAL'),(560,'DISCOUNTS ALLOWED','SALES ADJUSTMENTS','NORMAL'),(600,'OPENING STOCK','COST OF GOODS SOLD','NORMAL'),(610,'PURCHASES','COST OF GOODS SOLD','NORMAL'),(615,'PURCHASE RETURNS','COST OF GOODS SOLD','NORMAL'),(630,'CLOSING STOCK','COST OF GOODS SOLD','NORMAL'),(901,'ADVERTISEMENT','EXPENSES','NORMAL'),(902,'BANK CHARGES','EXPENSES','NORMAL'),(903,'DEPRECIATION OF FIXED ASSETS','EXPENSES','NORMAL'),(904,'SALARIES','EXPENSES','NORMAL'),(905,'TRAVELLING EXPENSES','EXPENSES','NORMAL'),(906,'UPKEEP OF MOTOR VEHICLES','EXPENSES','NORMAL'),(907,'WATER & ELECTRICITY','EXPENSES','NORMAL'),(908,'LOSS ON FOREIGN EXCHANGE','EXPENSES','NORMAL'),(909,'TELEPHONE CHARGES','EXPENSES','NORMAL'),(910,'PRINTING & STATIONERY','EXPENSES','NORMAL'),(911,'INTEREST EXPENSE','EXPENSES','NORMAL'),(912,'POSTAGES & STAMPS','EXPENSES','NORMAL'),(913,'COMMISSION & ALLOWANCES','EXPENSES','NORMAL'),(914,'OFFICE RENTAL','EXPENSES','NORMAL'),(915,'GENERAL EXPENSES','EXPENSES','NORMAL'),(950,'TAXATION','TAXATION','NORMAL');
/*!40000 ALTER TABLE `gl` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `gl_category`
--

DROP TABLE IF EXISTS `gl_category`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `gl_category` (
  `GL_CATEGORY` varchar(255) NOT NULL,
  `GL_AREA` enum('PROFIT AND LOSS','BALANCE SHEET') NOT NULL,
  `GL_ORDER` int(11) NOT NULL,
  PRIMARY KEY (`GL_CATEGORY`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `gl_category`
--

LOCK TABLES `gl_category` WRITE;
/*!40000 ALTER TABLE `gl_category` DISABLE KEYS */;
INSERT INTO `gl_category` VALUES ('COST OF GOODS SOLD','PROFIT AND LOSS',11),('CURRENT ASSETS','BALANCE SHEET',3),('CURRENT LIABILITIES','BALANCE SHEET',4),('EQUITY','BALANCE SHEET',7),('EXPENSES','PROFIT AND LOSS',13),('FIXED ASSETS','BALANCE SHEET',1),('LONG TERM LIABILITIES','BALANCE SHEET',5),('OTHER ASSETS','BALANCE SHEET',2),('OTHER INCOME','PROFIT AND LOSS',12),('OTHER LIABILITIES','BALANCE SHEET',6),('SALES','PROFIT AND LOSS',9),('SALES ADJUSTMENTS','PROFIT AND LOSS',10),('TAXATION','PROFIT AND LOSS',14);
/*!40000 ALTER TABLE `gl_category` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `journal`
--

DROP TABLE IF EXISTS `journal`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `journal` (
  `JOURNAL_NUM` varchar(10) NOT NULL,
  `JOURNAL_DATE` date NOT NULL,
  `JOURNAL_DESC` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`JOURNAL_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `journal`
--

LOCK TABLES `journal` WRITE;
/*!40000 ALTER TABLE `journal` DISABLE KEYS */;
INSERT INTO `journal` VALUES ('JNL-1','2020-01-31',NULL),('JNL-2','2019-12-04',NULL);
/*!40000 ALTER TABLE `journal` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `journalline`
--

DROP TABLE IF EXISTS `journalline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `journalline` (
  `JOURNAL_NUM` varchar(10) NOT NULL,
  `JOURNALLINE_LINENUMBER` int(11) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  `JOURNALLINE_GL_DESC` varchar(45) NOT NULL,
  `JOURNALLINE_DESC` varchar(255) DEFAULT NULL,
  `JOURNALLINE_DEBIT` decimal(10,2) DEFAULT NULL,
  `JOURNALLINE_CREDIT` decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (`JOURNALLINE_LINENUMBER`,`JOURNAL_NUM`),
  KEY `fk_JOURNALLINE_JOURNAL1_idx` (`JOURNAL_NUM`),
  KEY `fk_JOURNALLINE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_JOURNALLINE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`),
  CONSTRAINT `fk_JOURNALLINE_JOURNAL1` FOREIGN KEY (`JOURNAL_NUM`) REFERENCES `journal` (`JOURNAL_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `journalline`
--

LOCK TABLES `journalline` WRITE;
/*!40000 ALTER TABLE `journalline` DISABLE KEYS */;
INSERT INTO `journalline` VALUES ('JNL-1',1,320,'CASH IN HAND',NULL,500.00,NULL),('JNL-2',1,205,'ACCUM DEPRECIATION-FURNITURES AND FITTINGS',NULL,NULL,350.00),('JNL-1',2,320,'CASH IN HAND',NULL,NULL,500.00),('JNL-2',2,903,'DEPRECIATION OF FIXED ASSETS',NULL,350.00,NULL);
/*!40000 ALTER TABLE `journalline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_credit_note`
--

DROP TABLE IF EXISTS `purchase_credit_note`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_credit_note` (
  `PURCHASE_CREDIT_NOTE_NUM` varchar(10) NOT NULL,
  `PURCHASE_CREDIT_NOTE_DATE` date NOT NULL,
  `PURCHASE_CREDIT_NOTE_DESC` varchar(255) DEFAULT NULL,
  `CREDITOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`PURCHASE_CREDIT_NOTE_NUM`),
  KEY `fk_PURCHASE_CREDIT_NOTE_CREDITOR1_idx` (`CREDITOR_NUM`),
  KEY `fk_PURCHASE_CREDIT_NOTE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_PURCHASE_CREDIT_NOTE_CREDITOR1` FOREIGN KEY (`CREDITOR_NUM`) REFERENCES `creditor` (`CREDITOR_NUM`),
  CONSTRAINT `fk_PURCHASE_CREDIT_NOTE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_credit_note`
--

LOCK TABLES `purchase_credit_note` WRITE;
/*!40000 ALTER TABLE `purchase_credit_note` DISABLE KEYS */;
INSERT INTO `purchase_credit_note` VALUES ('PCN-1','2020-01-28','CN FROM MARS PAINT FOR BEING JACKASS!','CRED-1',610);
/*!40000 ALTER TABLE `purchase_credit_note` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_credit_noteline`
--

DROP TABLE IF EXISTS `purchase_credit_noteline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_credit_noteline` (
  `PURCHASE_CREDIT_NOTE_NUM` varchar(10) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_LINENUMBER` int(11) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `PURCHASE_CREDIT_NOTELINE_STOCK_DESC` varchar(50) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_STOCK_PRICE` decimal(10,2) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_STOCK_QTY` int(11) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_DISCOUNT` decimal(10,2) NOT NULL,
  `PURCHASE_CREDIT_NOTELINE_SUBTOTAL` varchar(45) GENERATED ALWAYS AS (((`PURCHASE_CREDIT_NOTELINE_STOCK_PRICE` * `PURCHASE_CREDIT_NOTELINE_STOCK_QTY`) - `PURCHASE_CREDIT_NOTELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`PURCHASE_CREDIT_NOTE_NUM`,`PURCHASE_CREDIT_NOTELINE_LINENUMBER`),
  KEY `fk_PURCHASE_CREDIT_NOTELINE_PURCHASE_CREDIT_NOTE1_idx` (`PURCHASE_CREDIT_NOTE_NUM`),
  CONSTRAINT `fk_PURCHASE_CREDIT_NOTELINE_PURCHASE_CREDIT_NOTE1` FOREIGN KEY (`PURCHASE_CREDIT_NOTE_NUM`) REFERENCES `purchase_credit_note` (`PURCHASE_CREDIT_NOTE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_credit_noteline`
--

LOCK TABLES `purchase_credit_noteline` WRITE;
/*!40000 ALTER TABLE `purchase_credit_noteline` DISABLE KEYS */;
INSERT INTO `purchase_credit_noteline` (`PURCHASE_CREDIT_NOTE_NUM`, `PURCHASE_CREDIT_NOTELINE_LINENUMBER`, `PURCHASE_CREDIT_NOTELINE_STOCK_NUM`, `PURCHASE_CREDIT_NOTELINE_STOCK_DESC`, `PURCHASE_CREDIT_NOTELINE_STOCK_PRICE`, `PURCHASE_CREDIT_NOTELINE_STOCK_QTY`, `PURCHASE_CREDIT_NOTELINE_DISCOUNT`) VALUES ('PCN-1',1,NULL,'BIG CN',300.00,1,0.00),('PCN-1',2,NULL,'second big cn',20.00,1,0.00);
/*!40000 ALTER TABLE `purchase_credit_noteline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_debit_note`
--

DROP TABLE IF EXISTS `purchase_debit_note`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_debit_note` (
  `PURCHASE_DEBIT_NOTE_NUM` varchar(10) NOT NULL,
  `PURCHASE_DEBIT_NOTE_DATE` date NOT NULL,
  `PURCHASE_DEBIT_NOTE_DESC` varchar(255) DEFAULT NULL,
  `CREDITOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`PURCHASE_DEBIT_NOTE_NUM`),
  KEY `fk_PURCHASE_DEBIT_NOTE_CREDITOR1_idx` (`CREDITOR_NUM`),
  KEY `fk_PURCHASE_DEBIT_NOTE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_PURCHASE_DEBIT_NOTE_CREDITOR1` FOREIGN KEY (`CREDITOR_NUM`) REFERENCES `creditor` (`CREDITOR_NUM`),
  CONSTRAINT `fk_PURCHASE_DEBIT_NOTE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_debit_note`
--

LOCK TABLES `purchase_debit_note` WRITE;
/*!40000 ALTER TABLE `purchase_debit_note` DISABLE KEYS */;
INSERT INTO `purchase_debit_note` VALUES ('PDN-1','2020-02-04','PURCHASE ADD ON KAO','CRED-1',610);
/*!40000 ALTER TABLE `purchase_debit_note` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_debit_noteline`
--

DROP TABLE IF EXISTS `purchase_debit_noteline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_debit_noteline` (
  `PURCHASE_DEBIT_NOTE_NUM` varchar(10) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_LINENUMBER` int(11) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `PURCHASE_DEBIT_NOTELINE_STOCK_DESC` varchar(50) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_STOCK_PRICE` decimal(10,2) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_STOCK_QTY` int(11) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_DISCOUNT` decimal(10,2) NOT NULL,
  `PURCHASE_DEBIT_NOTELINE_SUBTOTAL` decimal(10,2) GENERATED ALWAYS AS (((`PURCHASE_DEBIT_NOTELINE_STOCK_PRICE` * `PURCHASE_DEBIT_NOTELINE_STOCK_QTY`) - `PURCHASE_DEBIT_NOTELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`PURCHASE_DEBIT_NOTELINE_LINENUMBER`,`PURCHASE_DEBIT_NOTE_NUM`),
  KEY `fk_PURCHASE_DEBIT_NOTELINE_PURCHASE_DEBIT_NOTE1_idx` (`PURCHASE_DEBIT_NOTE_NUM`),
  CONSTRAINT `fk_PURCHASE_DEBIT_NOTELINE_PURCHASE_DEBIT_NOTE1` FOREIGN KEY (`PURCHASE_DEBIT_NOTE_NUM`) REFERENCES `purchase_debit_note` (`PURCHASE_DEBIT_NOTE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_debit_noteline`
--

LOCK TABLES `purchase_debit_noteline` WRITE;
/*!40000 ALTER TABLE `purchase_debit_noteline` DISABLE KEYS */;
INSERT INTO `purchase_debit_noteline` (`PURCHASE_DEBIT_NOTE_NUM`, `PURCHASE_DEBIT_NOTELINE_LINENUMBER`, `PURCHASE_DEBIT_NOTELINE_STOCK_NUM`, `PURCHASE_DEBIT_NOTELINE_STOCK_DESC`, `PURCHASE_DEBIT_NOTELINE_STOCK_PRICE`, `PURCHASE_DEBIT_NOTELINE_STOCK_QTY`, `PURCHASE_DEBIT_NOTELINE_DISCOUNT`) VALUES ('PDN-1',1,NULL,'OVERALL PURCHASE ADD ON ',550.00,1,0.00);
/*!40000 ALTER TABLE `purchase_debit_noteline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_invoice`
--

DROP TABLE IF EXISTS `purchase_invoice`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_invoice` (
  `PURCHASE_INVOICE_NUM` varchar(50) NOT NULL,
  `PURCHASE_INVOICE_DATE` date NOT NULL,
  `PURCHASE_INVOICE_DESC` varchar(255) DEFAULT NULL,
  `CREDITOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`PURCHASE_INVOICE_NUM`),
  KEY `fk_PURCHASE_INVOICE_CREDITOR1_idx` (`CREDITOR_NUM`),
  KEY `fk_PURCHASE_INVOICE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_PURCHASE_INVOICE_CREDITOR1` FOREIGN KEY (`CREDITOR_NUM`) REFERENCES `creditor` (`CREDITOR_NUM`),
  CONSTRAINT `fk_PURCHASE_INVOICE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_invoice`
--

LOCK TABLES `purchase_invoice` WRITE;
/*!40000 ALTER TABLE `purchase_invoice` DISABLE KEYS */;
INSERT INTO `purchase_invoice` VALUES ('INV-043511','2019-12-03','ADS','CRED-1',610),('INV-6571','2019-12-04',NULL,'CRED-2',610);
/*!40000 ALTER TABLE `purchase_invoice` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `purchase_invoiceline`
--

DROP TABLE IF EXISTS `purchase_invoiceline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `purchase_invoiceline` (
  `PURCHASE_INVOICE_NUM` varchar(50) NOT NULL,
  `PURCHASE_INVOICELINE_LINENUMBER` int(11) NOT NULL,
  `PURCHASE_INVOICELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `PURCHASE_INVOICELINE_STOCK_DESC` varchar(50) NOT NULL,
  `PURCHASE_INVOICELINE_STOCK_PRICE` decimal(10,2) NOT NULL DEFAULT '0.00',
  `PURCHASE_INVOICELINE_STOCK_QTY` int(11) NOT NULL DEFAULT '0',
  `PURCHASE_INVOICELINE_DISCOUNT` decimal(10,2) NOT NULL DEFAULT '0.00',
  `PURCHASE_INVOICELINE_SUBTOTAL` decimal(10,2) GENERATED ALWAYS AS (((`PURCHASE_INVOICELINE_STOCK_PRICE` * `PURCHASE_INVOICELINE_STOCK_QTY`) - `PURCHASE_INVOICELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`PURCHASE_INVOICE_NUM`,`PURCHASE_INVOICELINE_LINENUMBER`),
  KEY `fk_PURCHASE_INVOICELINE_PURCHASE_INVOICE1_idx` (`PURCHASE_INVOICE_NUM`),
  CONSTRAINT `fk_PURCHASE_INVOICELINE_PURCHASE_INVOICE1` FOREIGN KEY (`PURCHASE_INVOICE_NUM`) REFERENCES `purchase_invoice` (`PURCHASE_INVOICE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `purchase_invoiceline`
--

LOCK TABLES `purchase_invoiceline` WRITE;
/*!40000 ALTER TABLE `purchase_invoiceline` DISABLE KEYS */;
INSERT INTO `purchase_invoiceline` (`PURCHASE_INVOICE_NUM`, `PURCHASE_INVOICELINE_LINENUMBER`, `PURCHASE_INVOICELINE_STOCK_NUM`, `PURCHASE_INVOICELINE_STOCK_DESC`, `PURCHASE_INVOICELINE_STOCK_PRICE`, `PURCHASE_INVOICELINE_STOCK_QTY`, `PURCHASE_INVOICELINE_DISCOUNT`) VALUES ('INV-043511',1,NULL,'PAINT',5050.00,1,0.00),('INV-043511',2,NULL,'THINNER',350.00,2,0.00),('INV-6571',1,NULL,'COMPRESSOR SERVICE',1015.00,1,0.00);
/*!40000 ALTER TABLE `purchase_invoiceline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sales_invoice`
--

DROP TABLE IF EXISTS `sales_invoice`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sales_invoice` (
  `SALES_INVOICE_NUM` varchar(10) NOT NULL,
  `SALES_INVOICE_DATE` date NOT NULL,
  `SALES_INVOICE_DESC` varchar(255) DEFAULT NULL,
  `DEBTOR_NUM` varchar(10) NOT NULL,
  `GL_ACC_NUM` int(11) NOT NULL,
  PRIMARY KEY (`SALES_INVOICE_NUM`),
  KEY `fk_INVOICE_DEBTOR1_idx` (`DEBTOR_NUM`),
  KEY `fk_INVOICE_GL1_idx` (`GL_ACC_NUM`),
  CONSTRAINT `fk_INVOICE_DEBTOR1` FOREIGN KEY (`DEBTOR_NUM`) REFERENCES `debtor` (`DEBTOR_NUM`),
  CONSTRAINT `fk_INVOICE_GL1` FOREIGN KEY (`GL_ACC_NUM`) REFERENCES `gl` (`GL_ACC_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sales_invoice`
--

LOCK TABLES `sales_invoice` WRITE;
/*!40000 ALTER TABLE `sales_invoice` DISABLE KEYS */;
INSERT INTO `sales_invoice` VALUES ('SIPR-1','2020-01-02',NULL,'DEB-1',500),('SIPR-2','2020-01-03',NULL,'DEB-1',500),('TSP-1','2019-01-31',NULL,'DEB-2',500);
/*!40000 ALTER TABLE `sales_invoice` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `sales_invoiceline`
--

DROP TABLE IF EXISTS `sales_invoiceline`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `sales_invoiceline` (
  `SALES_INVOICE_NUM` varchar(10) NOT NULL,
  `SALES_INVOICELINE_LINENUMBER` int(11) NOT NULL,
  `SALES_INVOICELINE_STOCK_NUM` varchar(50) DEFAULT NULL,
  `SALES_INVOICELINE_STOCK_DESC` varchar(50) NOT NULL,
  `SALES_INVOICELINE_STOCK_PRICE` decimal(10,2) NOT NULL DEFAULT '0.00',
  `SALES_INVOICELINE_STOCK_QTY` int(11) NOT NULL DEFAULT '0',
  `SALES_INVOICELINE_DISCOUNT` decimal(10,2) NOT NULL DEFAULT '0.00',
  `SALES_INVOICELINE_SUBTOTAL` decimal(10,2) GENERATED ALWAYS AS (((`SALES_INVOICELINE_STOCK_PRICE` * `SALES_INVOICELINE_STOCK_QTY`) - `SALES_INVOICELINE_DISCOUNT`)) VIRTUAL,
  PRIMARY KEY (`SALES_INVOICE_NUM`,`SALES_INVOICELINE_LINENUMBER`),
  KEY `fk_INVOICELINE_INVOICE1_idx` (`SALES_INVOICE_NUM`),
  CONSTRAINT `fk_INVOICELINE_INVOICE1` FOREIGN KEY (`SALES_INVOICE_NUM`) REFERENCES `sales_invoice` (`SALES_INVOICE_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `sales_invoiceline`
--

LOCK TABLES `sales_invoiceline` WRITE;
/*!40000 ALTER TABLE `sales_invoiceline` DISABLE KEYS */;
INSERT INTO `sales_invoiceline` (`SALES_INVOICE_NUM`, `SALES_INVOICELINE_LINENUMBER`, `SALES_INVOICELINE_STOCK_NUM`, `SALES_INVOICELINE_STOCK_DESC`, `SALES_INVOICELINE_STOCK_PRICE`, `SALES_INVOICELINE_STOCK_QTY`, `SALES_INVOICELINE_DISCOUNT`) VALUES ('SIPR-1',1,'BUM-1','EXORA BUMPER',600.00,5,1.50),('SIPR-1',2,'FSKI-1','EXORA FRONT SKIRT',35.00,5,5.00),('SIPR-1',3,'SPL-1','EXORA SPOILER',25.00,5,0.00),('SIPR-2',1,'FSKI-1','EXORA FRONT SKIRT',1000.00,5,5.00),('SIPR-2',2,'SPL-1','EXORA SPOILER',25.00,5,5.00),('TSP-1',1,'BUM-1','EXORA BUMPER',55.00,5,0.00);
/*!40000 ALTER TABLE `sales_invoiceline` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `stock`
--

DROP TABLE IF EXISTS `stock`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `stock` (
  `STOCK_NUM` varchar(10) NOT NULL,
  `STOCK_DESC` varchar(50) NOT NULL,
  `STOCK_PRICE` decimal(10,2) DEFAULT NULL,
  `STOCK_MINPRICE` decimal(10,2) DEFAULT NULL,
  `STOCK_MAXPRICE` decimal(10,2) DEFAULT NULL,
  `STOCK_COST` decimal(10,2) DEFAULT NULL,
  `STOCK_MINQTY` int(11) DEFAULT NULL,
  `STOCK_MAXQTY` int(11) DEFAULT NULL,
  `STOCK_BALQTY` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`STOCK_NUM`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `stock`
--

LOCK TABLES `stock` WRITE;
/*!40000 ALTER TABLE `stock` DISABLE KEYS */;
INSERT INTO `stock` VALUES ('BUM-1','EXORA BUMPER',55.00,NULL,NULL,NULL,10,NULL,51),('FSKI-1','EXORA FRONT SKIRT',35.00,NULL,NULL,NULL,NULL,NULL,50),('SPL-1','EXORA SPOILER',25.00,NULL,NULL,NULL,NULL,NULL,50),('SS-1','EXORA SIDE SILL',35.00,NULL,NULL,NULL,NULL,NULL,50);
/*!40000 ALTER TABLE `stock` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `user`
--

DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `user` (
  `USER_USERNAME` varchar(20) NOT NULL,
  `USER_PASSWORD` varchar(20) NOT NULL,
  PRIMARY KEY (`USER_USERNAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `user`
--

LOCK TABLES `user` WRITE;
/*!40000 ALTER TABLE `user` DISABLE KEYS */;
INSERT INTO `user` VALUES ('protocount','password');
/*!40000 ALTER TABLE `user` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'dte9795h5zn8f7u9'
--
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_CREDIT_NOTE`(IN CREDIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM credit_noteline WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_PARAM;
DELETE FROM credit_note WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_DEBIT_NOTE`(IN DEBIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM debit_noteline WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_PARAM;
DELETE FROM debit_note WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_DELIVERY_ORDER` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_DELIVERY_ORDER`(IN DELIVERY_ORDER_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM delivery_orderline WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_PARAM;
DELETE FROM delivery_order WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_JOURNAL` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_JOURNAL`(IN JOURNAL_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM journalline WHERE JOURNAL_NUM=JOURNAL_NUM_PARAM;
DELETE FROM journal WHERE JOURNAL_NUM=JOURNAL_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_PURCHASE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_PURCHASE_CREDIT_NOTE`(IN PURCHASE_CREDIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM purchase_credit_noteline WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_PARAM;
DELETE FROM purchase_credit_note WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_PURCHASE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_PURCHASE_DEBIT_NOTE`(IN PURCHASE_DEBIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM purchase_debit_noteline WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_PARAM;
DELETE FROM purchase_debit_note WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_PURCHASE_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_PURCHASE_INVOICE`(IN PURCHASE_INVOICE_NUM_PARAM VARCHAR(50))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM purchase_invoiceline WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_PARAM;
DELETE FROM purchase_invoice WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `DELETE_SALES_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `DELETE_SALES_INVOICE`(IN SALES_INVOICE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
DELETE FROM sales_invoiceline WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_PARAM;
DELETE FROM sales_invoice WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_ACCOUNT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_ACCOUNT`(IN GL_CATEGORY VARCHAR(45),IN GL_ACC_NUM INT, IN GL_DESC VARCHAR(45))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO gl VALUES(GL_ACC_NUM,GL_DESC,GL_CATEGORY,'NORMAL');
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_BANK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_BANK`(IN BANK_NUM_PARAM VARCHAR(10),IN BANK_NAME_PARAM VARCHAR(255), IN BANK_ADDRESS_PARAM VARCHAR(255), IN BANK_POSTCODE_PARAM VARCHAR(5), IN GL_ACC_NUM INT, IN BANK_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO bank VALUES(BANK_NUM_PARAM,BANK_NAME_PARAM,BANK_ADDRESS_PARAM,BANK_POSTCODE_PARAM,DEFAULT);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_BANK_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_BANK_PAYMENT`(IN BANK_PAYMENT_NUM_PARAM VARCHAR(10),IN BANK_NUM_PARAM VARCHAR(10), IN CREDITOR_NUM_PARAM VARCHAR(10), IN BANK_PAYMENT_DATE_PARAM DATE, IN BANK_PAYMENT_METHOD_PARAM VARCHAR(45),IN BANK_PAYMENT_TRANSACTION_ID_PARAM VARCHAR(45),IN BANK_PAYMENT_DESC_PARAM VARCHAR(255),IN BANK_PAYMENT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM_PARAM INT,IN BANK_PAYMENT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO bank_payment VALUES(BANK_PAYMENT_NUM_PARAM,BANK_NUM_PARAM,CREDITOR_NUM_PARAM,BANK_PAYMENT_DATE_PARAM,BANK_PAYMENT_METHOD_PARAM,BANK_PAYMENT_TRANSACTION_ID_PARAM,BANK_PAYMENT_DESC_PARAM,BANK_PAYMENT_AMOUNT_PARAM,GL_ACC_NUM_PARAM);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_BANK_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_BANK_RECEIPT`(IN BANK_RECEIPT_NUM_PARAM VARCHAR(10),IN BANK_NUM_PARAM VARCHAR(10), IN DEBTOR_NUM_PARAM VARCHAR(10), IN BANK_RECEIPT_DATE_PARAM DATE, IN BANK_RECEIPT_METHOD_PARAM VARCHAR(45),IN BANK_RECEIPT_TRANSACTION_ID_PARAM VARCHAR(45),IN BANK_RECEIPT_DESC_PARAM VARCHAR(255),IN BANK_RECEIPT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM_PARAM INT,IN BANK_RECEIPT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO bank_receipt VALUES(BANK_RECEIPT_NUM_PARAM,BANK_NUM_PARAM,DEBTOR_NUM_PARAM,BANK_RECEIPT_DATE_PARAM,BANK_RECEIPT_METHOD_PARAM,BANK_RECEIPT_TRANSACTION_ID_PARAM,BANK_RECEIPT_DESC_PARAM,BANK_RECEIPT_AMOUNT_PARAM,GL_ACC_NUM_PARAM);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_CASH_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_CASH_PAYMENT`(IN CASH_PAYMENT_NUM_PARAM VARCHAR(10), IN CREDITOR_NUM_PARAM VARCHAR(10), IN CASH_PAYMENT_DATE_PARAM DATE, IN CASH_PAYMENT_METHOD_PARAM VARCHAR(45),IN CASH_PAYMENT_TRANSACTION_ID_PARAM VARCHAR(45),IN CASH_PAYMENT_DESC_PARAM VARCHAR(255),IN CASH_PAYMENT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM1_PARAM INT,IN GL_ACC_NUM2_PARAM INT,IN CASH_PAYMENT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO cash_payment VALUES(CASH_PAYMENT_NUM_PARAM,CREDITOR_NUM_PARAM,CASH_PAYMENT_DATE_PARAM,CASH_PAYMENT_METHOD_PARAM,CASH_PAYMENT_TRANSACTION_ID_PARAM,CASH_PAYMENT_DESC_PARAM,CASH_PAYMENT_AMOUNT_PARAM,GL_ACC_NUM1_PARAM,DEFAULT);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_CASH_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_CASH_RECEIPT`(IN CASH_RECEIPT_NUM_PARAM VARCHAR(10), IN DEBTOR_NUM_PARAM VARCHAR(10), IN CASH_RECEIPT_DATE_PARAM DATE, IN CASH_RECEIPT_METHOD_PARAM VARCHAR(45),IN CASH_RECEIPT_TRANSACTION_ID_PARAM VARCHAR(45),IN CASH_RECEIPT_DESC_PARAM VARCHAR(255),IN CASH_RECEIPT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM1_PARAM INT,IN GL_ACC_NUM2_PARAM INT,IN CASH_RECEIPT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO cash_receipt VALUES(CASH_RECEIPT_NUM_PARAM,DEBTOR_NUM_PARAM,CASH_RECEIPT_DATE_PARAM,CASH_RECEIPT_METHOD_PARAM,CASH_RECEIPT_TRANSACTION_ID_PARAM,CASH_RECEIPT_DESC_PARAM,CASH_RECEIPT_AMOUNT_PARAM,GL_ACC_NUM1_PARAM,DEFAULT);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_CREDITOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_CREDITOR`(IN CREDITOR_NUM_PARAM VARCHAR(10),IN CREDITOR_NAME_PARAM VARCHAR(255), IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN CREDITOR_POSTCODE_PARAM VARCHAR(5), IN CREDITOR_PHONE_PARAM VARCHAR(15),IN CREDITOR_FAX_PARAM VARCHAR(15),IN CREDITOR_OTHER_DESC_PARAM VARCHAR(255),IN CREDITOR_CREDIT_TERM_PARAM ENUM('COD', '30', '45', '60', '90'),IN GL_ACC_NUM INT,IN CREDITOR_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO creditor VALUES(CREDITOR_NUM_PARAM,CREDITOR_NAME_PARAM,CREDITOR_ADDRESS_PARAM,CREDITOR_POSTCODE_PARAM,CREDITOR_PHONE_PARAM,CREDITOR_FAX_PARAM,CREDITOR_OTHER_DESC_PARAM,CREDITOR_CREDIT_TERM_PARAM,DEFAULT);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_CREDIT_NOTE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN CREDIT_NOTE_NUM_PARAM VARCHAR(10), IN CREDIT_NOTE_DATE_PARAM DATE, IN CREDIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN CREDIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN CREDIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT credit_note VALUES(CREDIT_NOTE_NUM_PARAM,CREDIT_NOTE_DATE_PARAM,CREDIT_NOTE_DESC_PARAM,DEBTOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF CREDIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT credit_noteline VALUES ';

creditnoteline_loop:LOOP
IF REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(CREDIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE creditnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(CREDIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP creditnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_DEBIT_NOTE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DEBIT_NOTE_NUM_PARAM VARCHAR(10), IN DEBIT_NOTE_DATE_PARAM DATE, IN DEBIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN DEBIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN DEBIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT debit_note VALUES(DEBIT_NOTE_NUM_PARAM,DEBIT_NOTE_DATE_PARAM,DEBIT_NOTE_DESC_PARAM,DEBTOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF DEBIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT debit_noteline VALUES ';

debitnoteline_loop:LOOP
IF REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(DEBIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE debitnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(DEBIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP debitnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_DEBTOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_DEBTOR`(IN DEBTOR_NUM_PARAM VARCHAR(10),IN DEBTOR_NAME_PARAM VARCHAR(255), IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DEBTOR_POSTCODE_PARAM VARCHAR(5), IN DEBTOR_PHONE_PARAM VARCHAR(15),IN DEBTOR_FAX_PARAM VARCHAR(15),IN DEBTOR_OTHER_DESC_PARAM VARCHAR(255),IN DEBTOR_CREDIT_TERM_PARAM ENUM('COD', '30', '45', '60', '90'),IN GL_ACC_NUM_PARAM INT,IN DEBTOR_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO debtor VALUES(DEBTOR_NUM_PARAM,DEBTOR_NAME_PARAM,DEBTOR_ADDRESS_PARAM,DEBTOR_POSTCODE_PARAM,DEBTOR_PHONE_PARAM,DEBTOR_FAX_PARAM,DEBTOR_OTHER_DESC_PARAM,DEBTOR_CREDIT_TERM_PARAM,DEFAULT);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_DELIVERY_ORDER` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_DELIVERY_ORDER`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DELIVERY_ORDER_NUM_PARAM VARCHAR(10), IN DELIVERY_ORDER_DATE_PARAM DATE, IN DELIVERY_ORDER_DESC_PARAM VARCHAR(255), IN DELIVERY_ORDER_NUM_OLD_PARAM VARCHAR(10), IN DELIVERY_ORDERLINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT delivery_order VALUES(DELIVERY_ORDER_NUM_PARAM,DELIVERY_ORDER_DATE_PARAM,DELIVERY_ORDER_DESC_PARAM,DEBTOR_NUM_PARAM);

IF DELIVERY_ORDERLINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT delivery_orderline VALUES ';

deliveryorderline_loop:LOOP
IF REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',DELIVERY_ORDER_NUM_PARAM,'",',SUBSTRING(DELIVERY_ORDERLINE_PARAM,POS),')') INTO @STRNG;
LEAVE deliveryorderline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',DELIVERY_ORDER_NUM_PARAM,'",',SUBSTRING(DELIVERY_ORDERLINE_PARAM,POS,LENGTH),'),') INTO @STRNG;
SELECT (REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP deliveryorderline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_JOURNAL` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_JOURNAL`(IN JOURNAL_NUM_PARAM VARCHAR(10), IN JOURNAL_DATE_PARAM DATE,IN JOURNAL_DESC_PARAM VARCHAR(255), IN JOURNAL_NUM_OLD_PARAM VARCHAR(10), IN JOURNALLINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT journal VALUES(JOURNAL_NUM_PARAM,JOURNAL_DATE_PARAM,JOURNAL_DESC_PARAM);

IF JOURNALLINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT journalline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',JOURNAL_NUM_PARAM,'",',SUBSTRING(JOURNALLINE_PARAM,POS),')') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',JOURNAL_NUM_PARAM,'",',SUBSTRING(JOURNALLINE_PARAM,POS,LENGTH),'),') INTO @STRNG;
SELECT (REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_PURCHASE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_PURCHASE_CREDIT_NOTE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_CREDIT_NOTE_NUM_PARAM VARCHAR(10), IN PURCHASE_CREDIT_NOTE_DATE_PARAM DATE, IN PURCHASE_CREDIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN PURCHASE_CREDIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN PURCHASE_CREDIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT purchase_credit_note VALUES(PURCHASE_CREDIT_NOTE_NUM_PARAM,PURCHASE_CREDIT_NOTE_DATE_PARAM,PURCHASE_CREDIT_NOTE_DESC_PARAM,CREDITOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF PURCHASE_CREDIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_credit_noteline VALUES ';

purchasecreditnoteline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_CREDIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE purchasecreditnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_CREDIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP purchasecreditnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_PURCHASE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_PURCHASE_DEBIT_NOTE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_DEBIT_NOTE_NUM_PARAM VARCHAR(10), IN PURCHASE_DEBIT_NOTE_DATE_PARAM DATE, IN PURCHASE_DEBIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN PURCHASE_DEBIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN PURCHASE_DEBIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT purchase_debit_note VALUES(PURCHASE_DEBIT_NOTE_NUM_PARAM,PURCHASE_DEBIT_NOTE_DATE_PARAM,PURCHASE_DEBIT_NOTE_DESC_PARAM,CREDITOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF PURCHASE_DEBIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_debit_noteline VALUES ';

purchasedebitnoteline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_DEBIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE purchasedebitnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_DEBIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP purchasedebitnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_PURCHASE_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_PURCHASE_INVOICE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_INVOICE_NUM_PARAM VARCHAR(50), IN PURCHASE_INVOICE_DATE_PARAM DATE, IN PURCHASE_INVOICE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN PURCHASE_INVOICE_NUM_OLD_PARAM VARCHAR(50), IN PURCHASE_INVOICELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT purchase_invoice VALUES(PURCHASE_INVOICE_NUM_PARAM,PURCHASE_INVOICE_DATE_PARAM,PURCHASE_INVOICE_DESC_PARAM,CREDITOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF PURCHASE_INVOICELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_invoiceline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_INVOICE_NUM_PARAM,'",',SUBSTRING(PURCHASE_INVOICELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_INVOICE_NUM_PARAM,'",',SUBSTRING(PURCHASE_INVOICELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;

COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_SALES_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_SALES_INVOICE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN SALES_INVOICE_NUM_PARAM VARCHAR(10), IN SALES_INVOICE_DATE_PARAM DATE, IN SALES_INVOICE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN SALES_INVOICE_NUM_OLD_PARAM VARCHAR(10), IN SALES_INVOICELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;

INSERT sales_invoice VALUES(SALES_INVOICE_NUM_PARAM,SALES_INVOICE_DATE_PARAM,SALES_INVOICE_DESC_PARAM,DEBTOR_NUM_PARAM,GL_ACC_NUM_PARAM);

IF SALES_INVOICELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT sales_invoiceline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',SALES_INVOICE_NUM_PARAM,'",',SUBSTRING(SALES_INVOICELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',SALES_INVOICE_NUM_PARAM,'",',SUBSTRING(SALES_INVOICELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `INSERT_STOCK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `INSERT_STOCK`(IN STOCK_NUM_PARAM VARCHAR(10),IN STOCK_DESC_PARAM VARCHAR(255), IN STOCK_PRICE_PARAM DEC(10,2), IN STOCK_MINPRICE_PARAM DEC(10,2), IN STOCK_MAXPRICE_PARAM DEC(10,2),IN STOCK_COST_PARAM DEC(10,2),IN STOCK_MINQTY_PARAM INT,IN STOCK_MAXQTY_PARAM INT,IN STOCK_BALQTY_PARAM INT,IN STOCK_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
INSERT INTO stock VALUES(STOCK_NUM_PARAM,STOCK_DESC_PARAM,STOCK_PRICE_PARAM,STOCK_MINPRICE_PARAM,STOCK_MAXPRICE_PARAM,STOCK_COST_PARAM,STOCK_MINQTY_PARAM,STOCK_MAXQTY_PARAM,STOCK_BALQTY_PARAM);
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_ACCOUNT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_ACCOUNT`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;

SELECT GL_CATEGORY,GL_ACC_NUM,GL_DESC,GL_STATUS from gl_category left join gl using (GL_CATEGORY) order by GL_ORDER,GL_ACC_NUM;

COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_BALANCE_SHEET` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_BALANCE_SHEET`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;

SELECT GL_CATEGORY FROM gl_category WHERE GL_AREA='BALANCE SHEET' ORDER BY GL_ORDER;

SELECT GL_CATEGORY,GL_ACC_NUM,GL_DESC,NAME,DATE,ITEM,NUM,DEBIT,CREDIT FROM gl NATURAL JOIN gl_category NATURAL JOIN (
(SELECT debtor.GL_ACC_NUM,DEBTOR_NAME AS NAME, SALES_INVOICE_DATE AS DATE, 'SALES INVOICE' AS ITEM, SALES_INVOICE_NUM AS NUM,SUM(SALES_INVOICELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM debtor JOIN sales_invoice USING(DEBTOR_NUM) NATURAL JOIN sales_invoiceline GROUP BY SALES_INVOICE_NUM)
UNION ALL(SELECT debtor.GL_ACC_NUM,DEBTOR_NAME AS NAME, DEBIT_NOTE_DATE AS DATE, 'DEBIT NOTE' AS ITEM, DEBIT_NOTE_NUM AS NUM,SUM(DEBIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM debtor JOIN debit_note USING(DEBTOR_NUM) NATURAL JOIN debit_noteline GROUP BY DEBIT_NOTE_NUM)
UNION ALL(SELECT debtor.GL_ACC_NUM,DEBTOR_NAME AS NAME, CREDIT_NOTE_DATE AS DATE, 'CREDIT NOTE' AS ITEM, CREDIT_NOTE_NUM AS NUM,NULL AS DEBIT,SUM(CREDIT_NOTELINE_SUBTOTAL) AS CREDIT FROM debtor JOIN credit_note USING(DEBTOR_NUM) NATURAL JOIN credit_noteline GROUP BY CREDIT_NOTE_NUM)
UNION ALL(SELECT creditor.GL_ACC_NUM,CREDITOR_NAME AS NAME, PURCHASE_INVOICE_DATE AS DATE, 'PURCHASE INVOICE' AS ITEM, PURCHASE_INVOICE_NUM AS NUM,NULL AS DEBIT,SUM(PURCHASE_INVOICELINE_SUBTOTAL) AS CREDIT FROM creditor JOIN purchase_invoice USING(CREDITOR_NUM) NATURAL JOIN purchase_invoiceline GROUP BY PURCHASE_INVOICE_NUM)
UNION ALL(SELECT creditor.GL_ACC_NUM,CREDITOR_NAME AS NAME, PURCHASE_DEBIT_NOTE_DATE AS DATE, 'PURCHASE DEBIT NOTE' AS ITEM, PURCHASE_DEBIT_NOTE_NUM AS NUM,NULL AS DEBIT,SUM(PURCHASE_DEBIT_NOTELINE_SUBTOTAL) AS CREDIT FROM creditor JOIN purchase_debit_note USING(CREDITOR_NUM) NATURAL JOIN purchase_debit_noteline GROUP BY PURCHASE_DEBIT_NOTE_NUM)
UNION ALL(SELECT creditor.GL_ACC_NUM,CREDITOR_NAME AS NAME, PURCHASE_CREDIT_NOTE_DATE AS DATE, 'PURCHASE CREDIT NOTE' AS ITEM, PURCHASE_CREDIT_NOTE_NUM AS NUM,SUM(PURCHASE_CREDIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM creditor JOIN purchase_credit_note USING(CREDITOR_NUM) NATURAL JOIN purchase_credit_noteline GROUP BY PURCHASE_CREDIT_NOTE_NUM)
UNION ALL(SELECT debtor.GL_ACC_NUM, DEBTOR_NAME AS NAME, BANK_RECEIPT_DATE AS DATE, 'BANK RECEIPT' AS ITEM, BANK_RECEIPT_NUM AS NUM, NULL AS DEBIT, BANK_RECEIPT_AMOUNT AS CREDIT FROM debtor JOIN bank_receipt USING (DEBTOR_NUM))
UNION ALL(SELECT creditor.GL_ACC_NUM, CREDITOR_NAME AS NAME, BANK_PAYMENT_DATE AS DATE, 'BANK PAYMENT' AS ITEM, BANK_PAYMENT_NUM AS NUM, BANK_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM creditor JOIN bank_payment USING (CREDITOR_NUM))
UNION ALL(SELECT debtor.GL_ACC_NUM, DEBTOR_NAME AS NAME, CASH_RECEIPT_DATE AS DATE, 'CASH RECEIPT' AS ITEM, CASH_RECEIPT_NUM AS NUM, NULL AS DEBIT, CASH_RECEIPT_AMOUNT AS CREDIT FROM debtor JOIN cash_receipt USING (DEBTOR_NUM))
UNION ALL(SELECT creditor.GL_ACC_NUM, CREDITOR_NAME AS NAME, CASH_PAYMENT_DATE AS DATE, 'CASH PAYMENT' AS ITEM, CASH_PAYMENT_NUM AS NUM, CASH_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM creditor JOIN cash_payment USING (CREDITOR_NUM))
UNION ALL(SELECT bank.GL_ACC_NUM, BANK_NAME AS NAME, BANK_RECEIPT_DATE AS DATE, 'BANK RECEIPT' AS ITEM, BANK_RECEIPT_NUM AS NUM, BANK_RECEIPT_AMOUNT AS DEBIT, NULL AS CREDIT FROM bank JOIN bank_receipt USING (BANK_NUM))
UNION ALL(SELECT bank.GL_ACC_NUM, BANK_NAME AS NAME, BANK_PAYMENT_DATE AS DATE, 'BANK PAYMENT' AS ITEM, BANK_PAYMENT_NUM AS NUM, NULL AS DEBIT, BANK_PAYMENT_AMOUNT AS CREDIT FROM bank JOIN bank_payment USING (BANK_NUM))
UNION ALL(SELECT GL_ACC_NUM, NULL AS NAME, BANK_RECEIPT_DATE AS DATE, 'BANK RECEIPT' AS ITEM, BANK_RECEIPT_NUM AS NUM, NULL AS DEBIT, BANK_RECEIPT_AMOUNT AS CREDIT FROM bank_receipt)
UNION ALL(SELECT GL_ACC_NUM, NULL AS NAME, BANK_PAYMENT_DATE AS DATE, 'BANK PAYMENT' AS ITEM, BANK_PAYMENT_NUM AS NUM, BANK_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM bank_payment)
UNION ALL(SELECT GL_ACC_NUM2, NULL AS NAME, CASH_RECEIPT_DATE AS DATE, 'CASH RECEIPT' AS ITEM, CASH_RECEIPT_NUM AS NUM, CASH_RECEIPT_AMOUNT AS DEBIT, NULL AS CREDIT FROM cash_receipt)
UNION ALL(SELECT GL_ACC_NUM2, NULL AS NAME, CASH_PAYMENT_DATE AS DATE, 'CASH PAYMENT' AS ITEM, CASH_PAYMENT_NUM AS NUM, NULL AS DEBIT, CASH_PAYMENT_AMOUNT AS CREDIT FROM cash_payment)
UNION ALL(SELECT GL_ACC_NUM1, NULL AS NAME, CASH_RECEIPT_DATE AS DATE, 'CASH RECEIPT' AS ITEM, CASH_RECEIPT_NUM AS NUM, NULL AS DEBIT, CASH_RECEIPT_AMOUNT AS CREDIT FROM cash_receipt)
UNION ALL(SELECT GL_ACC_NUM1, NULL AS NAME, CASH_PAYMENT_DATE AS DATE, 'CASH PAYMENT' AS ITEM, CASH_PAYMENT_NUM AS NUM, CASH_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM cash_payment)
UNION ALL(SELECT GL_ACC_NUM, NULL AS NAME, JOURNAL_DATE AS DATE, 'JOURNAL' AS ITEM, JOURNAL_NUM AS NUM, JOURNALLINE_DEBIT AS DEBIT, JOURNALLINE_CREDIT AS CREDIT FROM journal NATURAL JOIN journalline)
) T1 WHERE GL_AREA='BALANCE SHEET' ORDER BY GL_ORDER,GL_ACC_NUM,DATE;

SELECT GL_CATEGORY,GL_ACC_NUM,GL_DESC,DATE,ITEM,NUM,DEBIT,CREDIT FROM gl NATURAL JOIN gl_category NATURAL JOIN (
(SELECT GL_ACC_NUM,SALES_INVOICE_DATE AS DATE, 'SALES INVOICE' AS ITEM, SALES_INVOICE_NUM AS NUM,NULL AS DEBIT, SUM(SALES_INVOICELINE_SUBTOTAL) AS CREDIT FROM sales_invoice NATURAL JOIN sales_invoiceline GROUP BY SALES_INVOICE_NUM)
UNION ALL(SELECT GL_ACC_NUM,DEBIT_NOTE_DATE AS DATE, 'DEBIT NOTE' AS ITEM, DEBIT_NOTE_NUM AS NUM,NULL AS DEBIT, SUM(DEBIT_NOTELINE_SUBTOTAL) AS CREDIT FROM debit_note NATURAL JOIN debit_noteline GROUP BY DEBIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,CREDIT_NOTE_DATE AS DATE, 'CREDIT NOTE' AS ITEM, CREDIT_NOTE_NUM AS NUM,SUM(CREDIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM credit_note NATURAL JOIN credit_noteline GROUP BY CREDIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_INVOICE_DATE AS DATE, 'PURCHASE INVOICE' AS ITEM, PURCHASE_INVOICE_NUM AS NUM,SUM(PURCHASE_INVOICELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM purchase_invoice NATURAL JOIN purchase_invoiceline GROUP BY PURCHASE_INVOICE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_DEBIT_NOTE_DATE AS DATE, 'PURCHASE DEBIT NOTE' AS ITEM, PURCHASE_DEBIT_NOTE_NUM AS NUM,SUM(PURCHASE_DEBIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM purchase_debit_note NATURAL JOIN purchase_debit_noteline GROUP BY PURCHASE_DEBIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_CREDIT_NOTE_DATE AS DATE, 'PURCHASE CREDIT NOTE' AS ITEM, PURCHASE_CREDIT_NOTE_NUM AS NUM,NULL AS DEBIT,SUM(PURCHASE_CREDIT_NOTELINE_SUBTOTAL) AS CREDIT FROM purchase_credit_note NATURAL JOIN purchase_credit_noteline GROUP BY PURCHASE_CREDIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM, BANK_RECEIPT_DATE AS DATE, 'BANK RECEIPT' AS ITEM, BANK_RECEIPT_NUM AS NUM, NULL AS DEBIT, BANK_RECEIPT_AMOUNT AS CREDIT FROM bank_receipt)
UNION ALL(SELECT GL_ACC_NUM, BANK_PAYMENT_DATE AS DATE, 'BANK PAYMENT' AS ITEM, BANK_PAYMENT_NUM AS NUM, BANK_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM bank_payment)
UNION ALL(SELECT GL_ACC_NUM1, CASH_RECEIPT_DATE AS DATE, 'CASH RECEIPT' AS ITEM, CASH_RECEIPT_NUM AS NUM, NULL AS DEBIT, CASH_RECEIPT_AMOUNT AS CREDIT FROM cash_receipt)
UNION ALL(SELECT GL_ACC_NUM1, CASH_PAYMENT_DATE AS DATE, 'CASH PAYMENT' AS ITEM, CASH_PAYMENT_NUM AS NUM, CASH_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM cash_payment)
UNION ALL(SELECT GL_ACC_NUM, JOURNAL_DATE AS DATE, 'JOURNAL' AS ITEM, JOURNAL_NUM AS NUM, JOURNALLINE_DEBIT AS DEBIT, JOURNALLINE_CREDIT AS CREDIT FROM journal NATURAL JOIN journalline)
) T1 WHERE GL_AREA='PROFIT AND LOSS' ORDER BY GL_ORDER,GL_ACC_NUM,DATE;

COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_BANK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_BANK`(IN BANK_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,BANK_NUM AS BANK_NUM_OLD FROM bank WHERE BANK_NUM=BANK_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_BANK_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_BANK_PAYMENT`(IN BANK_PAYMENT_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,BANK_PAYMENT_NUM AS BANK_PAYMENT_NUM_OLD FROM bank_payment WHERE BANK_PAYMENT_NUM=BANK_PAYMENT_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_BANK_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_BANK_RECEIPT`(IN BANK_RECEIPT_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,BANK_RECEIPT_NUM AS BANK_RECEIPT_NUM_OLD FROM bank_receipt WHERE BANK_RECEIPT_NUM=BANK_RECEIPT_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_CASH_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_CASH_PAYMENT`(IN CASH_PAYMENT_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,CASH_PAYMENT_NUM AS CASH_PAYMENT_NUM_OLD FROM cash_payment WHERE CASH_PAYMENT_NUM=CASH_PAYMENT_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_CASH_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_CASH_RECEIPT`(IN CASH_RECEIPT_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,CASH_RECEIPT_NUM AS CASH_RECEIPT_NUM_OLD FROM cash_receipt WHERE CASH_RECEIPT_NUM=CASH_RECEIPT_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_CREDITOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_CREDITOR`(IN CREDITOR_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,CREDITOR_NUM AS CREDITOR_NUM_OLD FROM creditor WHERE CREDITOR_NUM=CREDITOR_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_CREDIT_NOTE`(IN CREDIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DEBTOR_ADDRESS, CREDIT_NOTE_NUM,CREDIT_NOTE_DATE,CREDIT_NOTE_DESC, credit_note.GL_ACC_NUM, CREDIT_NOTE_NUM AS CREDIT_NOTE_NUM_OLD FROM debtor JOIN credit_note USING (DEBTOR_NUM) WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_PARAM;
SELECT CREDIT_NOTELINE_LINENUMBER,CREDIT_NOTELINE_STOCK_NUM,CREDIT_NOTELINE_STOCK_DESC,CREDIT_NOTELINE_STOCK_PRICE,CREDIT_NOTELINE_STOCK_QTY,CREDIT_NOTELINE_DISCOUNT FROM credit_noteline WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_CREDIT_NOTELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_CREDIT_NOTELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, CREDIT_NOTE_NUM,CREDIT_NOTE_DATE,CREDIT_NOTE_DESC, SUM(CREDIT_NOTELINE_SUBTOTAL) AS CREDIT_NOTE_SUBTOTAL FROM debtor JOIN credit_note USING(DEBTOR_NUM) LEFT JOIN credit_noteline USING (CREDIT_NOTE_NUM) GROUP BY CREDIT_NOTE_NUM ORDER BY CREDIT_NOTE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_DEBIT_NOTE`(IN DEBIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DEBTOR_ADDRESS, DEBIT_NOTE_NUM,DEBIT_NOTE_DATE,DEBIT_NOTE_DESC, debit_note.GL_ACC_NUM, DEBIT_NOTE_NUM AS DEBIT_NOTE_NUM_OLD FROM debtor JOIN debit_note USING (DEBTOR_NUM) WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_PARAM;
SELECT DEBIT_NOTELINE_LINENUMBER,DEBIT_NOTELINE_STOCK_NUM,DEBIT_NOTELINE_STOCK_DESC,DEBIT_NOTELINE_STOCK_PRICE,DEBIT_NOTELINE_STOCK_QTY,DEBIT_NOTELINE_DISCOUNT FROM debit_noteline WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_DEBIT_NOTELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_DEBIT_NOTELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DEBIT_NOTE_NUM,DEBIT_NOTE_DATE,DEBIT_NOTE_DESC, SUM(DEBIT_NOTELINE_SUBTOTAL) AS DEBIT_NOTE_SUBTOTAL FROM debtor JOIN debit_note USING(DEBTOR_NUM) LEFT JOIN debit_noteline USING (DEBIT_NOTE_NUM) GROUP BY DEBIT_NOTE_NUM ORDER BY DEBIT_NOTE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_DEBTOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_DEBTOR`(IN DEBTOR_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,DEBTOR_NUM AS DEBTOR_NUM_OLD FROM debtor WHERE DEBTOR_NUM=DEBTOR_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_DELIVERY_ORDER` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_DELIVERY_ORDER`(IN DELIVERY_ORDER_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DEBTOR_ADDRESS, DELIVERY_ORDER_NUM,DELIVERY_ORDER_DATE,DELIVERY_ORDER_DESC, DELIVERY_ORDER_NUM AS DELIVERY_ORDER_NUM_OLD FROM debtor JOIN delivery_order USING (DEBTOR_NUM) WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_PARAM;
SELECT DELIVERY_ORDERLINE_LINENUMBER,DELIVERY_ORDERLINE_STOCK_NUM,DELIVERY_ORDERLINE_STOCK_DESC,DELIVERY_ORDERLINE_STOCK_QTY FROM delivery_orderline WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_DELIVERY_ORDERLIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_DELIVERY_ORDERLIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DELIVERY_ORDER_NUM,DELIVERY_ORDER_DATE,DELIVERY_ORDER_DESC FROM debtor JOIN delivery_order USING(DEBTOR_NUM) LEFT JOIN delivery_orderline USING (DELIVERY_ORDER_NUM) GROUP BY DELIVERY_ORDER_NUM ORDER BY DELIVERY_ORDER_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_JOURNAL` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_JOURNAL`(IN JOURNAL_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT JOURNAL_NUM, JOURNAL_DATE, JOURNAL_DESC, JOURNAL_NUM AS JOURNAL_NUM_OLD FROM journal WHERE JOURNAL_NUM=JOURNAL_NUM_PARAM;
SELECT JOURNALLINE_LINENUMBER,GL_ACC_NUM,JOURNALLINE_GL_DESC,JOURNALLINE_DESC,JOURNALLINE_DEBIT,JOURNALLINE_CREDIT FROM journalline WHERE JOURNAL_NUM=JOURNAL_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_JOURNALLIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_JOURNALLIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT JOURNAL_NUM,JOURNAL_DATE,JOURNAL_DESC, SUM(JOURNALLINE_DEBIT) AS NET_TOTAL FROM journal LEFT JOIN journalline USING (JOURNAL_NUM) GROUP BY JOURNAL_NUM ORDER BY JOURNAL_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PROFIT_AND_LOSS` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PROFIT_AND_LOSS`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;

SELECT GL_CATEGORY FROM gl_category WHERE GL_AREA='PROFIT AND LOSS' ORDER BY GL_ORDER;

SELECT GL_CATEGORY,GL_ACC_NUM,GL_DESC,DATE,ITEM,NUM,DEBIT,CREDIT FROM gl NATURAL JOIN gl_category NATURAL JOIN (
(SELECT GL_ACC_NUM,SALES_INVOICE_DATE AS DATE, 'SALES INVOICE' AS ITEM, SALES_INVOICE_NUM AS NUM,NULL AS DEBIT, SUM(SALES_INVOICELINE_SUBTOTAL) AS CREDIT FROM sales_invoice NATURAL JOIN sales_invoiceline GROUP BY SALES_INVOICE_NUM)
UNION ALL(SELECT GL_ACC_NUM,DEBIT_NOTE_DATE AS DATE, 'DEBIT NOTE' AS ITEM, DEBIT_NOTE_NUM AS NUM,NULL AS DEBIT, SUM(DEBIT_NOTELINE_SUBTOTAL) AS CREDIT FROM debit_note NATURAL JOIN debit_noteline GROUP BY DEBIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,CREDIT_NOTE_DATE AS DATE, 'CREDIT NOTE' AS ITEM, CREDIT_NOTE_NUM AS NUM,SUM(CREDIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM credit_note NATURAL JOIN credit_noteline GROUP BY CREDIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_INVOICE_DATE AS DATE, 'PURCHASE INVOICE' AS ITEM, PURCHASE_INVOICE_NUM AS NUM,SUM(PURCHASE_INVOICELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM purchase_invoice NATURAL JOIN purchase_invoiceline GROUP BY PURCHASE_INVOICE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_DEBIT_NOTE_DATE AS DATE, 'PURCHASE DEBIT NOTE' AS ITEM, PURCHASE_DEBIT_NOTE_NUM AS NUM,SUM(PURCHASE_DEBIT_NOTELINE_SUBTOTAL) AS DEBIT,NULL AS CREDIT FROM purchase_debit_note NATURAL JOIN purchase_debit_noteline GROUP BY PURCHASE_DEBIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM,PURCHASE_CREDIT_NOTE_DATE AS DATE, 'PURCHASE CREDIT NOTE' AS ITEM, PURCHASE_CREDIT_NOTE_NUM AS NUM,NULL AS DEBIT,SUM(PURCHASE_CREDIT_NOTELINE_SUBTOTAL) AS CREDIT FROM purchase_credit_note NATURAL JOIN purchase_credit_noteline GROUP BY PURCHASE_CREDIT_NOTE_NUM)
UNION ALL(SELECT GL_ACC_NUM, BANK_RECEIPT_DATE AS DATE, 'BANK RECEIPT' AS ITEM, BANK_RECEIPT_NUM AS NUM, NULL AS DEBIT, BANK_RECEIPT_AMOUNT AS CREDIT FROM bank_receipt)
UNION ALL(SELECT GL_ACC_NUM, BANK_PAYMENT_DATE AS DATE, 'BANK PAYMENT' AS ITEM, BANK_PAYMENT_NUM AS NUM, BANK_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM bank_payment)
UNION ALL(SELECT GL_ACC_NUM1, CASH_RECEIPT_DATE AS DATE, 'CASH RECEIPT' AS ITEM, CASH_RECEIPT_NUM AS NUM, NULL AS DEBIT, CASH_RECEIPT_AMOUNT AS CREDIT FROM cash_receipt)
UNION ALL(SELECT GL_ACC_NUM1, CASH_PAYMENT_DATE AS DATE, 'CASH PAYMENT' AS ITEM, CASH_PAYMENT_NUM AS NUM, CASH_PAYMENT_AMOUNT AS DEBIT, NULL AS CREDIT FROM cash_payment)
UNION ALL(SELECT GL_ACC_NUM, JOURNAL_DATE AS DATE, 'JOURNAL' AS ITEM, JOURNAL_NUM AS NUM, JOURNALLINE_DEBIT AS DEBIT, JOURNALLINE_CREDIT AS CREDIT FROM journal NATURAL JOIN journalline)
) T1 WHERE GL_AREA='PROFIT AND LOSS' ORDER BY GL_ORDER,GL_ACC_NUM,DATE;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_CREDIT_NOTE`(IN PURCHASE_CREDIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, CREDITOR_ADDRESS, PURCHASE_CREDIT_NOTE_NUM,PURCHASE_CREDIT_NOTE_DATE,PURCHASE_CREDIT_NOTE_DESC, purchase_credit_note.GL_ACC_NUM, PURCHASE_CREDIT_NOTE_NUM AS PURCHASE_CREDIT_NOTE_NUM_OLD FROM creditor JOIN purchase_credit_note USING (CREDITOR_NUM) WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_PARAM;
SELECT PURCHASE_CREDIT_NOTELINE_LINENUMBER,PURCHASE_CREDIT_NOTELINE_STOCK_NUM,PURCHASE_CREDIT_NOTELINE_STOCK_DESC,PURCHASE_CREDIT_NOTELINE_STOCK_PRICE,PURCHASE_CREDIT_NOTELINE_STOCK_QTY,PURCHASE_CREDIT_NOTELINE_DISCOUNT FROM purchase_credit_noteline WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_CREDIT_NOTELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_CREDIT_NOTELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, PURCHASE_CREDIT_NOTE_NUM,PURCHASE_CREDIT_NOTE_DATE,PURCHASE_CREDIT_NOTE_DESC, SUM(PURCHASE_CREDIT_NOTELINE_SUBTOTAL) AS PURCHASE_CREDIT_NOTE_SUBTOTAL FROM creditor JOIN purchase_credit_note USING(CREDITOR_NUM) LEFT JOIN purchase_credit_noteline USING (PURCHASE_CREDIT_NOTE_NUM) GROUP BY PURCHASE_CREDIT_NOTE_NUM ORDER BY PURCHASE_CREDIT_NOTE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_DEBIT_NOTE`(IN PURCHASE_DEBIT_NOTE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, CREDITOR_ADDRESS, PURCHASE_DEBIT_NOTE_NUM,PURCHASE_DEBIT_NOTE_DATE,PURCHASE_DEBIT_NOTE_DESC, purchase_debit_note.GL_ACC_NUM, PURCHASE_DEBIT_NOTE_NUM AS PURCHASE_DEBIT_NOTE_NUM_OLD FROM creditor JOIN purchase_debit_note USING (CREDITOR_NUM) WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_PARAM;
SELECT PURCHASE_DEBIT_NOTELINE_LINENUMBER,PURCHASE_DEBIT_NOTELINE_STOCK_NUM,PURCHASE_DEBIT_NOTELINE_STOCK_DESC,PURCHASE_DEBIT_NOTELINE_STOCK_PRICE,PURCHASE_DEBIT_NOTELINE_STOCK_QTY,PURCHASE_DEBIT_NOTELINE_DISCOUNT FROM purchase_debit_noteline WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_DEBIT_NOTELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_DEBIT_NOTELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, PURCHASE_DEBIT_NOTE_NUM,PURCHASE_DEBIT_NOTE_DATE,PURCHASE_DEBIT_NOTE_DESC, SUM(PURCHASE_DEBIT_NOTELINE_SUBTOTAL) AS PURCHASE_DEBIT_NOTE_SUBTOTAL FROM creditor JOIN purchase_debit_note USING(CREDITOR_NUM) LEFT JOIN purchase_debit_noteline USING (PURCHASE_DEBIT_NOTE_NUM) GROUP BY PURCHASE_DEBIT_NOTE_NUM ORDER BY PURCHASE_DEBIT_NOTE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_INVOICE`(IN PURCHASE_INVOICE_NUM_PARAM VARCHAR(50))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, CREDITOR_ADDRESS, PURCHASE_INVOICE_NUM,PURCHASE_INVOICE_DATE,PURCHASE_INVOICE_DESC,purchase_invoice.GL_ACC_NUM,PURCHASE_INVOICE_NUM AS PURCHASE_INVOICE_NUM_OLD FROM creditor JOIN purchase_invoice USING (CREDITOR_NUM) WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_PARAM;
SELECT PURCHASE_INVOICELINE_LINENUMBER,PURCHASE_INVOICELINE_STOCK_NUM,PURCHASE_INVOICELINE_STOCK_DESC,PURCHASE_INVOICELINE_STOCK_PRICE,PURCHASE_INVOICELINE_STOCK_QTY,PURCHASE_INVOICELINE_DISCOUNT FROM purchase_invoiceline WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_PURCHASE_INVOICELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_PURCHASE_INVOICELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT CREDITOR_NUM, CREDITOR_NAME, PURCHASE_INVOICE_NUM,PURCHASE_INVOICE_DATE,purchase_invoice.GL_ACC_NUM, PURCHASE_INVOICE_DESC, SUM(PURCHASE_INVOICELINE_SUBTOTAL) AS PURCHASE_INVOICE_SUBTOTAL FROM creditor JOIN purchase_invoice USING(CREDITOR_NUM) LEFT JOIN purchase_invoiceline USING(PURCHASE_INVOICE_NUM) GROUP BY PURCHASE_INVOICE_NUM ORDER BY PURCHASE_INVOICE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_SALES_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_SALES_INVOICE`(IN SALES_INVOICE_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, DEBTOR_ADDRESS, SALES_INVOICE_NUM,SALES_INVOICE_DATE,SALES_INVOICE_DESC, sales_invoice.GL_ACC_NUM, SALES_INVOICE_NUM AS SALES_INVOICE_NUM_OLD FROM debtor JOIN sales_invoice USING (DEBTOR_NUM) WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_PARAM;
SELECT SALES_INVOICELINE_LINENUMBER,SALES_INVOICELINE_STOCK_NUM,SALES_INVOICELINE_STOCK_DESC,SALES_INVOICELINE_STOCK_PRICE,SALES_INVOICELINE_STOCK_QTY,SALES_INVOICELINE_DISCOUNT FROM sales_invoiceline WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_SALES_INVOICELIST` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_SALES_INVOICELIST`()
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT DEBTOR_NUM, DEBTOR_NAME, SALES_INVOICE_NUM,SALES_INVOICE_DATE,SALES_INVOICE_DESC, SUM(SALES_INVOICELINE_SUBTOTAL) AS SALES_INVOICE_SUBTOTAL FROM debtor JOIN sales_invoice USING(DEBTOR_NUM) LEFT JOIN sales_invoiceline USING (SALES_INVOICE_NUM) GROUP BY SALES_INVOICE_NUM ORDER BY SALES_INVOICE_NUM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `SELECT_STOCK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `SELECT_STOCK`(IN STOCK_NUM_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
SELECT *,STOCK_NUM AS STOCK_NUM_OLD FROM stock WHERE STOCK_NUM=STOCK_NUM_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_ACCOUNT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_ACCOUNT`(IN GL_ACC_NUM_OLD_PARAM INT,IN GL_CATEGORY_PARAM VARCHAR(45), IN GL_ACC_NUM_PARAM INT, IN GL_DESC_PARAM VARCHAR(45))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE gl SET GL_ACC_NUM=GL_ACC_NUM_PARAM, GL_DESC=GL_DESC_PARAM, GL_CATEGORY=GL_CATEGORY_PARAM,GL_STATUS='NORMAL' WHERE GL_ACC_NUM=GL_ACC_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_BANK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_BANK`(IN BANK_NUM_PARAM VARCHAR(10),IN BANK_NAME_PARAM VARCHAR(255), IN BANK_ADDRESS_PARAM VARCHAR(255), IN BANK_POSTCODE_PARAM VARCHAR(5),IN GL_ACC_NUM_PARAM INT,IN BANK_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE bank SET BANK_NUM=BANK_NUM_PARAM,BANK_NAME=BANK_NAME_PARAM,BANK_ADDRESS=BANK_ADDRESS_PARAM,BANK_POSTCODE=BANK_POSTCODE_PARAM,GL_ACC_NUM=DEFAULT WHERE BANK_NUM=BANK_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_BANK_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_BANK_PAYMENT`(IN BANK_PAYMENT_NUM_PARAM VARCHAR(10),IN BANK_NUM_PARAM VARCHAR(10), IN CREDITOR_NUM_PARAM VARCHAR(10), IN BANK_PAYMENT_DATE_PARAM DATE, IN BANK_PAYMENT_METHOD_PARAM VARCHAR(45),IN BANK_PAYMENT_TRANSACTION_ID_PARAM VARCHAR(45),IN BANK_PAYMENT_DESC_PARAM VARCHAR(255),IN BANK_PAYMENT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM_PARAM INT,IN BANK_PAYMENT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE bank_payment SET BANK_PAYMENT_NUM=BANK_PAYMENT_NUM_PARAM,BANK_NUM=BANK_NUM_PARAM,CREDITOR_NUM=CREDITOR_NUM_PARAM,BANK_PAYMENT_DATE=BANK_PAYMENT_DATE_PARAM,BANK_PAYMENT_METHOD=BANK_PAYMENT_METHOD_PARAM,BANK_PAYMENT_TRANSACTION_ID=BANK_PAYMENT_TRANSACTION_ID_PARAM,BANK_PAYMENT_DESC=BANK_PAYMENT_DESC_PARAM,BANK_PAYMENT_AMOUNT=BANK_PAYMENT_AMOUNT_PARAM,GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE BANK_PAYMENT_NUM=BANK_PAYMENT_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_BANK_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_BANK_RECEIPT`(IN BANK_RECEIPT_NUM_PARAM VARCHAR(10),IN BANK_NUM_PARAM VARCHAR(10), IN DEBTOR_NUM_PARAM VARCHAR(10), IN BANK_RECEIPT_DATE_PARAM DATE, IN BANK_RECEIPT_METHOD_PARAM VARCHAR(45),IN BANK_RECEIPT_TRANSACTION_ID_PARAM VARCHAR(45),IN BANK_RECEIPT_DESC_PARAM VARCHAR(255),IN BANK_RECEIPT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM_PARAM INT,IN BANK_RECEIPT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE bank_receipt SET BANK_RECEIPT_NUM=BANK_RECEIPT_NUM_PARAM,BANK_NUM=BANK_NUM_PARAM,DEBTOR_NUM=DEBTOR_NUM_PARAM,BANK_RECEIPT_DATE=BANK_RECEIPT_DATE_PARAM,BANK_RECEIPT_METHOD=BANK_RECEIPT_METHOD_PARAM,BANK_RECEIPT_TRANSACTION_ID=BANK_RECEIPT_TRANSACTION_ID_PARAM,BANK_RECEIPT_DESC=BANK_RECEIPT_DESC_PARAM,BANK_RECEIPT_AMOUNT=BANK_RECEIPT_AMOUNT_PARAM,GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE BANK_RECEIPT_NUM=BANK_RECEIPT_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_CASH_PAYMENT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_CASH_PAYMENT`(IN CASH_PAYMENT_NUM_PARAM VARCHAR(10), IN CREDITOR_NUM_PARAM VARCHAR(10), IN CASH_PAYMENT_DATE_PARAM DATE, IN CASH_PAYMENT_METHOD_PARAM VARCHAR(45),IN CASH_PAYMENT_TRANSACTION_ID_PARAM VARCHAR(45),IN CASH_PAYMENT_DESC_PARAM VARCHAR(255),IN CASH_PAYMENT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM1_PARAM INT,IN GL_ACC_NUM2_PARAM INT,IN CASH_PAYMENT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE cash_payment SET CASH_PAYMENT_NUM=CASH_PAYMENT_NUM_PARAM,CREDITOR_NUM=CREDITOR_NUM_PARAM,CASH_PAYMENT_DATE=CASH_PAYMENT_DATE_PARAM,CASH_PAYMENT_METHOD=CASH_PAYMENT_METHOD_PARAM,CASH_PAYMENT_TRANSACTION_ID=CASH_PAYMENT_TRANSACTION_ID_PARAM,CASH_PAYMENT_DESC=CASH_PAYMENT_DESC_PARAM,CASH_PAYMENT_AMOUNT=CASH_PAYMENT_AMOUNT_PARAM,GL_ACC_NUM1=GL_ACC_NUM1_PARAM,GL_ACC_NUM2=DEFAULT WHERE CASH_PAYMENT_NUM=CASH_PAYMENT_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_CASH_RECEIPT` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_CASH_RECEIPT`(IN CASH_RECEIPT_NUM_PARAM VARCHAR(10), IN DEBTOR_NUM_PARAM VARCHAR(10), IN CASH_RECEIPT_DATE_PARAM DATE, IN CASH_RECEIPT_METHOD_PARAM VARCHAR(45),IN CASH_RECEIPT_TRANSACTION_ID_PARAM VARCHAR(45),IN CASH_RECEIPT_DESC_PARAM VARCHAR(255),IN CASH_RECEIPT_AMOUNT_PARAM DECIMAL(10,2),IN GL_ACC_NUM1_PARAM INT,IN GL_ACC_NUM2_PARAM INT,IN CASH_RECEIPT_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE cash_receipt SET CASH_RECEIPT_NUM=CASH_RECEIPT_NUM_PARAM,DEBTOR_NUM=DEBTOR_NUM_PARAM,CASH_RECEIPT_DATE=CASH_RECEIPT_DATE_PARAM,CASH_RECEIPT_METHOD=CASH_RECEIPT_METHOD_PARAM,CASH_RECEIPT_TRANSACTION_ID=CASH_RECEIPT_TRANSACTION_ID_PARAM,CASH_RECEIPT_DESC=CASH_RECEIPT_DESC_PARAM,CASH_RECEIPT_AMOUNT=CASH_RECEIPT_AMOUNT_PARAM,GL_ACC_NUM1=GL_ACC_NUM1_PARAM,GL_ACC_NUM2=DEFAULT WHERE CASH_RECEIPT_NUM=CASH_RECEIPT_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_CREDITOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_CREDITOR`(IN CREDITOR_NUM_PARAM VARCHAR(10),IN CREDITOR_NAME_PARAM VARCHAR(255), IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN CREDITOR_POSTCODE_PARAM VARCHAR(5), IN CREDITOR_PHONE_PARAM VARCHAR(15),IN CREDITOR_FAX_PARAM VARCHAR(15),IN CREDITOR_OTHER_DESC_PARAM VARCHAR(255),IN CREDITOR_CREDIT_TERM_PARAM ENUM('COD', '30', '45', '60', '90'), IN GL_ACC_NUM_PARAM INT, IN CREDITOR_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE creditor SET CREDITOR_NUM=CREDITOR_NUM_PARAM, CREDITOR_NAME=CREDITOR_NAME_PARAM, CREDITOR_ADDRESS=CREDITOR_ADDRESS_PARAM,CREDITOR_POSTCODE=CREDITOR_POSTCODE_PARAM,CREDITOR_PHONE=CREDITOR_PHONE_PARAM,CREDITOR_FAX=CREDITOR_FAX_PARAM,CREDITOR_OTHER_DESC=CREDITOR_OTHER_DESC_PARAM,CREDITOR_CREDIT_TERM=CREDITOR_CREDIT_TERM_PARAM,GL_ACC_NUM=DEFAULT WHERE CREDITOR_NUM=CREDITOR_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_CREDIT_NOTE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN CREDIT_NOTE_NUM_PARAM VARCHAR(10), IN CREDIT_NOTE_DATE_PARAM DATE, IN CREDIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, CREDIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN CREDIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM credit_noteline WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_OLD_PARAM;
UPDATE credit_note SET CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_PARAM, CREDIT_NOTE_DATE=CREDIT_NOTE_DATE_PARAM, CREDIT_NOTE_DESC=CREDIT_NOTE_DESC_PARAM, DEBTOR_NUM=DEBTOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE CREDIT_NOTE_NUM=CREDIT_NOTE_NUM_OLD_PARAM;

IF CREDIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT credit_noteline VALUES ';

creditnoteline_loop:LOOP
IF REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(CREDIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE creditnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(CREDIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(CREDIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP creditnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_DEBIT_NOTE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DEBIT_NOTE_NUM_PARAM VARCHAR(10), IN DEBIT_NOTE_DATE_PARAM DATE, IN DEBIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, DEBIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN DEBIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM debit_noteline WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_OLD_PARAM;
UPDATE debit_note SET DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_PARAM, DEBIT_NOTE_DATE=DEBIT_NOTE_DATE_PARAM, DEBIT_NOTE_DESC=DEBIT_NOTE_DESC_PARAM, DEBTOR_NUM=DEBTOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE DEBIT_NOTE_NUM=DEBIT_NOTE_NUM_OLD_PARAM;

IF DEBIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT debit_noteline VALUES ';

debitnoteline_loop:LOOP
IF REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(DEBIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE debitnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(DEBIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(DEBIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP debitnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_DEBTOR` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_DEBTOR`(IN DEBTOR_NUM_PARAM VARCHAR(10),IN DEBTOR_NAME_PARAM VARCHAR(255), IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DEBTOR_POSTCODE_PARAM VARCHAR(5), IN DEBTOR_PHONE_PARAM VARCHAR(15),IN DEBTOR_FAX_PARAM VARCHAR(15),IN DEBTOR_OTHER_DESC_PARAM VARCHAR(255),IN DEBTOR_CREDIT_TERM_PARAM ENUM('COD', '30', '45', '60', '90'),IN GL_ACC_NUM_PARAM INT,IN DEBTOR_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE debtor SET DEBTOR_NUM=DEBTOR_NUM_PARAM, DEBTOR_NAME=DEBTOR_NAME_PARAM,DEBTOR_ADDRESS=DEBTOR_ADDRESS_PARAM,DEBTOR_POSTCODE=DEBTOR_POSTCODE_PARAM,DEBTOR_PHONE=DEBTOR_PHONE_PARAM,DEBTOR_FAX=DEBTOR_FAX_PARAM,DEBTOR_OTHER_DESC=DEBTOR_OTHER_DESC_PARAM,DEBTOR_CREDIT_TERM=DEBTOR_CREDIT_TERM_PARAM,GL_ACC_NUM=DEFAULT WHERE DEBTOR_NUM=DEBTOR_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_DELIVERY_ORDER` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_DELIVERY_ORDER`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN DELIVERY_ORDER_NUM_PARAM VARCHAR(10), IN DELIVERY_ORDER_DATE_PARAM DATE, IN DELIVERY_ORDER_DESC_PARAM VARCHAR(255), DELIVERY_ORDER_NUM_OLD_PARAM VARCHAR(10), IN DELIVERY_ORDERLINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM delivery_orderline WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_OLD_PARAM;
UPDATE delivery_order SET DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_PARAM, DELIVERY_ORDER_DATE=DELIVERY_ORDER_DATE_PARAM, DELIVERY_ORDER_DESC=DELIVERY_ORDER_DESC_PARAM, DEBTOR_NUM=DEBTOR_NUM_PARAM WHERE DELIVERY_ORDER_NUM=DELIVERY_ORDER_NUM_OLD_PARAM;

IF DELIVERY_ORDERLINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT delivery_orderline VALUES ';

deliveryorderline_loop:LOOP
IF REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',DELIVERY_ORDER_NUM_PARAM,'",',SUBSTRING(DELIVERY_ORDERLINE_PARAM,POS),')') INTO @STRNG;
LEAVE deliveryorderline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',DELIVERY_ORDER_NUM_PARAM,'",',SUBSTRING(DELIVERY_ORDERLINE_PARAM,POS,LENGTH),'),') INTO @STRNG;
SELECT (REGEXP_INSTR(DELIVERY_ORDERLINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP deliveryorderline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_JOURNAL` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_JOURNAL`(IN JOURNAL_NUM_PARAM VARCHAR(10), IN JOURNAL_DATE_PARAM DATE,IN JOURNAL_DESC_PARAM VARCHAR(255), IN JOURNAL_NUM_OLD_PARAM VARCHAR(10), IN JOURNALLINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM journalline WHERE JOURNAL_NUM=JOURNAL_NUM_OLD_PARAM;
UPDATE journal SET JOURNAL_NUM=JOURNAL_NUM_PARAM, JOURNAL_DATE=JOURNAL_DATE_PARAM, JOURNAL_DESC=JOURNAL_DESC_PARAM WHERE JOURNAL_NUM=JOURNAL_NUM_OLD_PARAM;

IF JOURNALLINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT journalline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',JOURNAL_NUM_PARAM,'",',SUBSTRING(JOURNALLINE_PARAM,POS),')') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',JOURNAL_NUM_PARAM,'",',SUBSTRING(JOURNALLINE_PARAM,POS,LENGTH),'),') INTO @STRNG;
SELECT (REGEXP_INSTR(JOURNALLINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_PURCHASE_CREDIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_PURCHASE_CREDIT_NOTE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_CREDIT_NOTE_NUM_PARAM VARCHAR(10), IN PURCHASE_CREDIT_NOTE_DATE_PARAM DATE, IN PURCHASE_CREDIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, PURCHASE_CREDIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN PURCHASE_CREDIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM purchase_credit_noteline WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_OLD_PARAM;
UPDATE purchase_credit_note SET PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_PARAM, PURCHASE_CREDIT_NOTE_DATE=PURCHASE_CREDIT_NOTE_DATE_PARAM, PURCHASE_CREDIT_NOTE_DESC=PURCHASE_CREDIT_NOTE_DESC_PARAM, CREDITOR_NUM=CREDITOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE PURCHASE_CREDIT_NOTE_NUM=PURCHASE_CREDIT_NOTE_NUM_OLD_PARAM;

IF PURCHASE_CREDIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_credit_noteline VALUES ';

purchasecreditnoteline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_CREDIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE purchasecreditnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_CREDIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_CREDIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_CREDIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP purchasecreditnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_PURCHASE_DEBIT_NOTE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_PURCHASE_DEBIT_NOTE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_DEBIT_NOTE_NUM_PARAM VARCHAR(10), IN PURCHASE_DEBIT_NOTE_DATE_PARAM DATE, IN PURCHASE_DEBIT_NOTE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, PURCHASE_DEBIT_NOTE_NUM_OLD_PARAM VARCHAR(10), IN PURCHASE_DEBIT_NOTELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM purchase_debit_noteline WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_OLD_PARAM;
UPDATE purchase_debit_note SET PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_PARAM, PURCHASE_DEBIT_NOTE_DATE=PURCHASE_DEBIT_NOTE_DATE_PARAM, PURCHASE_DEBIT_NOTE_DESC=PURCHASE_DEBIT_NOTE_DESC_PARAM, CREDITOR_NUM=CREDITOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE PURCHASE_DEBIT_NOTE_NUM=PURCHASE_DEBIT_NOTE_NUM_OLD_PARAM;

IF PURCHASE_DEBIT_NOTELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_debit_noteline VALUES ';

purchasedebitnoteline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_DEBIT_NOTELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE purchasedebitnoteline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_DEBIT_NOTE_NUM_PARAM,'",',SUBSTRING(PURCHASE_DEBIT_NOTELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_DEBIT_NOTELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP purchasedebitnoteline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_PURCHASE_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_PURCHASE_INVOICE`(IN CREDITOR_NUM_PARAM VARCHAR(10), IN CREDITOR_NAME_PARAM VARCHAR(255),IN CREDITOR_ADDRESS_PARAM VARCHAR(255), IN PURCHASE_INVOICE_NUM_PARAM VARCHAR(50), IN PURCHASE_INVOICE_DATE_PARAM DATE, IN PURCHASE_INVOICE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, IN PURCHASE_INVOICE_NUM_OLD_PARAM VARCHAR(50), IN PURCHASE_INVOICELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM purchase_invoiceline WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_OLD_PARAM;
UPDATE purchase_invoice SET PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_PARAM, PURCHASE_INVOICE_DATE=PURCHASE_INVOICE_DATE_PARAM, PURCHASE_INVOICE_DESC=PURCHASE_INVOICE_DESC_PARAM, CREDITOR_NUM=CREDITOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE PURCHASE_INVOICE_NUM=PURCHASE_INVOICE_NUM_OLD_PARAM;

IF PURCHASE_INVOICELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT purchase_invoiceline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',PURCHASE_INVOICE_NUM_PARAM,'",',SUBSTRING(PURCHASE_INVOICELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',PURCHASE_INVOICE_NUM_PARAM,'",',SUBSTRING(PURCHASE_INVOICELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(PURCHASE_INVOICELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_SALES_INVOICE` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_SALES_INVOICE`(IN DEBTOR_NUM_PARAM VARCHAR(10), IN DEBTOR_NAME_PARAM VARCHAR(255),IN DEBTOR_ADDRESS_PARAM VARCHAR(255), IN SALES_INVOICE_NUM_PARAM VARCHAR(10), IN SALES_INVOICE_DATE_PARAM DATE, IN SALES_INVOICE_DESC_PARAM VARCHAR(255), IN GL_ACC_NUM_PARAM INT, SALES_INVOICE_NUM_OLD_PARAM VARCHAR(10), IN SALES_INVOICELINE_PARAM VARCHAR(255))
BEGIN
DECLARE POS INT DEFAULT 1;
DECLARE LENGTH INT DEFAULT 0;
DECLARE DONE VARCHAR(20) DEFAULT 'NO';

DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;

START TRANSACTION;
DELETE FROM sales_invoiceline WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_OLD_PARAM;
UPDATE sales_invoice SET SALES_INVOICE_NUM=SALES_INVOICE_NUM_PARAM, SALES_INVOICE_DATE=SALES_INVOICE_DATE_PARAM, SALES_INVOICE_DESC=SALES_INVOICE_DESC_PARAM, DEBTOR_NUM=DEBTOR_NUM_PARAM, GL_ACC_NUM=GL_ACC_NUM_PARAM WHERE SALES_INVOICE_NUM=SALES_INVOICE_NUM_OLD_PARAM;

IF SALES_INVOICELINE_PARAM IS NOT NULL THEN 
BEGIN
SET @STRNG ='INSERT sales_invoiceline VALUES ';

invoiceline_loop:LOOP
IF REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS)=0 THEN 
BEGIN
SELECT CONCAT(@STRNG,'("',SALES_INVOICE_NUM_PARAM,'",',SUBSTRING(SALES_INVOICELINE_PARAM,POS),',DEFAULT)') INTO @STRNG;
LEAVE invoiceline_loop;
END;
ELSE 
BEGIN 
SELECT (REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS) - POS) INTO LENGTH;
SELECT CONCAT(@STRNG,'("',SALES_INVOICE_NUM_PARAM,'",',SUBSTRING(SALES_INVOICELINE_PARAM,POS,LENGTH),',DEFAULT),') INTO @STRNG;
SELECT (REGEXP_INSTR(SALES_INVOICELINE_PARAM,'=',POS)+1) INTO POS;
END;
END IF;
END LOOP invoiceline_loop;

PREPARE stmt FROM @STRNG;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END;
END IF;



COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `UPDATE_STOCK` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`kq3t6gnblzf5bmjy`@`%` PROCEDURE `UPDATE_STOCK`(IN STOCK_NUM_PARAM VARCHAR(10),IN STOCK_DESC_PARAM VARCHAR(255), IN STOCK_PRICE_PARAM DEC(10,2), IN STOCK_MINPRICE_PARAM DEC(10,2), IN STOCK_MAXPRICE_PARAM DEC(10,2),IN STOCK_COST_PARAM DEC(10,2),IN STOCK_MINQTY_PARAM INT,IN STOCK_MAXQTY_PARAM INT,IN STOCK_BALQTY_PARAM INT, IN STOCK_NUM_OLD_PARAM VARCHAR(10))
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
BEGIN
ROLLBACK;
RESIGNAL;
END;
START TRANSACTION;
UPDATE stock SET STOCK_NUM=STOCK_NUM_PARAM, STOCK_DESC=STOCK_DESC_PARAM,STOCK_PRICE=STOCK_PRICE_PARAM,STOCK_MINPRICE=STOCK_MINPRICE_PARAM,STOCK_MAXPRICE=STOCK_MAXPRICE_PARAM,STOCK_COST=STOCK_COST_PARAM,STOCK_MINQTY=STOCK_MINQTY_PARAM,STOCK_MAXQTY=STOCK_MAXQTY_PARAM,STOCK_BALQTY=STOCK_BALQTY_PARAM WHERE STOCK_NUM=STOCK_NUM_OLD_PARAM;
COMMIT;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
SET @@SESSION.SQL_LOG_BIN = @MYSQLDUMP_TEMP_LOG_BIN;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2020-02-25 18:36:25

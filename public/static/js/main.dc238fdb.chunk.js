(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/accounting.6c69fc79.svg"},,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/030-presentation.9ad5731f.svg"},function(e,t){e.exports.sort=function(e,t,a){var n=1;return"desc"===a&&(n=-1),e.sort((function(e,a){return n*(e[t]+"").localeCompare(a[t]+"","en",{numeric:!0})}))},e.exports.sortDate=function(e,t,a){var n=1;return"desc"===a&&(n=-1),e.sort((function(e,a){return Date(e[t])<Date(a[t])?-1*n:Date(e[t])>Date(a[t])?1*n:0*n}))}},function(e,t,a){e.exports=a.p+"static/media/006-call.9c57f732.svg"},function(e,t,a){e.exports=a.p+"static/media/009-conversation.ffa9f5dd.svg"},function(e,t,a){e.exports=a.p+"static/media/020-folders.f1018bc0.svg"},function(e,t,a){e.exports=a.p+"static/media/027-money.dbb6986e.svg"},function(e,t,a){e.exports=a.p+"static/media/011-calendar.870b8a62.svg"},function(e,t,a){e.exports=a.p+"static/media/017-send.af12eb54.svg"},function(e,t,a){e.exports=a.p+"static/media/015-contact.b34b750a.svg"},function(e,t,a){e.exports=a(46)},,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),o=a.n(l),c=a(1),i=a(11),s=a(3);var m=function(e){var t=Object(n.useState)(window.innerWidth<768),a=Object(c.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){var e=window.matchMedia("(max-width: 768px)"),t=function(e){e.matches?l(!0):l(!1)};return e.addListener((function(e){return t(e)})),e.removeListener((function(e){return t(e)}))}),[]),e.render(r)},d=a(13),u=a.n(d),p=r.a.createContext();var f=function(e){var t=Object(n.useContext)(p).changeAuth,a=" navbar-light bg-light";return"dark"===e.theme&&(a=" navbar-dark bg-dark"),r.a.createElement("nav",{className:"navbar navbar-expand-md"+a},r.a.createElement(s.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:u.a,style:{width:"35px",height:"35px"},alt:"logo",className:"d-inline-block"}),"ProtoCount"),r.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarText"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"File"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Exit and Logout"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"General Maintenance"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Company Profile"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"User Maintenance"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Credit Term Maintenance"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Currency Maintenance"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"Tools"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Backup"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Restore"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"Help"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"About ProtoCount Accounting")))),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){return t(!1)}},"Log Out")))};var E=function(e){var t,a;return t=e.items.map((function(e){return r.a.createElement(s.b,{className:"list-group-item list-group-item-action list-group-item-dark",key:e,to:e.replace(/[ _]/g,"")},e)})),a=e.reportItems.map((function(e){return r.a.createElement(s.b,{className:"list-group-item list-group-item-action list-group-item-dark",key:e,to:e.replace(/[ _]/g,"")},e)})),r.a.createElement("div",{className:"card border-0 bg-dark text-light rounded-0"},r.a.createElement("div",{className:"card-header",style:{backgroundColor:"rgba(0,0,0,0)"}},r.a.createElement("a",{href:"#"+e.name.replace(/ /g,"-"),"data-toggle":"collapse",className:"text-decoration-none text-reset"},r.a.createElement("h6",null,e.name,r.a.createElement("img",{src:e.img,className:"ml-3",style:{width:"25px"},alt:e.name})))),r.a.createElement("div",{className:"list-group list-group-flush collapse",id:e.name.replace(/ /g,"-"),"data-parent":"#"+e.parent},t,a.length>0?r.a.createElement("a",{href:"#"+e.name.replace(/ /g,"-")+"-report","data-toggle":"collapse",className:"list-group-item bg-secondary text-decoration-none text-reset"},r.a.createElement("h6",null,"Report")):null,r.a.createElement("div",{className:"list-group collapse",id:e.name.replace(/ /g,"-")+"-report"},a)))},g=r.a.createContext();var b=function(e){var t=Object(n.useContext)(g).isLoading;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},t?r.a.createElement("div",{className:"position-fixed d-flex justify-content-center align-items-center vh-100 vw-100",style:{top:0,left:0,zIndex:"100000",backgroundColor:"rgba(255,255,255,0.6"}},r.a.createElement("div",{className:"spinner-grow",style:{width:"4rem",height:"4rem"}},r.a.createElement("span",{className:"sr-only"}))):null,r.a.createElement("div",{className:"col-md-9 order-md-last px-0"},r.a.createElement(f,null),r.a.createElement("div",null,e.children)),r.a.createElement("div",{className:"col-md-3 order-md-first px-0 d-print-none"},r.a.createElement(Yt,{largeScreenStyle:!0}))))};function h(e){return r.a.createElement(b,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row flex-column align-items-center justify-content-center",style:{height:"80vh"}},r.a.createElement("div",null,r.a.createElement("img",{src:u.a,alt:"logo",style:{maxWidth:"50%"},className:"d-block mx-auto"})),r.a.createElement("h1",{className:"text-center d-none d-md-block"},"ProtoCount Accounting Software"),r.a.createElement("h3",{className:"text-center d-md-none"},"ProtoCount Accounting Software"),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Fully functional accounting app."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Blazing Fast with Client-Side routing."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Functionality easily extended."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Responsive interface (incl. Mobile)."))))}h.description="Dashboard",h.path="/Dashboard";var N=h,v=a(24),y=a.n(v),x=a(2),D=a(5),O=a(10);var C=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(null),i=Object(c.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)(null),u=Object(c.a)(d,2),p=u[0],f=u[1],E=Object(n.useContext)(g),b=(E.isLoading,E.changeIsLoading);return Object(n.useEffect)((function(){r&&r.url&&(b(!0),fetch(r.url,r.init).then((function(e){if(e.ok)return e.json();throw new Error("HTTP Error, status code = "+e.status+",status = "+e.statusText)})).then((function(e){m(e),f(null),b(!1)})).catch((function(e){f(e),m(null),b(!1)})))}),[r]),[{data:s,error:p},l]},w=a(25);var S=function(e){return e?(""+e).replace(/(\d)(?=(?:\d{3})+(?:\.|$))|(\.\d\d?)\d*$/g,(function(e,t,a){return a||t+","})):""};var j=function(e){if(e){e=new Date(e);var t=Number(e.getMonth())+1<10?"0"+(Number(e.getMonth())+1):Number(e.getMonth())+1;return(e.getDate()<10?"0"+e.getDate():e.getDate())+"-"+t+"-"+e.getFullYear()}return""};var L=function(e){var t,a,l,o,s=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}),m=Object(c.a)(s,2),d=m[0],u=d.data,f=d.error,E=m[1],g=C(null),b=Object(c.a)(g,2),h=b[0],N=h.data,v=h.error,y=b[1],L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useContext)(p).changeAuth,k=Object(n.useState)(""),A=Object(c.a)(k,2),F=A[0],q=A[1],M=Object(n.useState)(""),U=Object(c.a)(M,2),V=U[0],_=U[1],B=Object(n.useState)([]),J=Object(c.a)(B,2),G=J[0],Y=J[1],Q=Object(n.useState)(null),H=Object(c.a)(Q,2),z=H[0],W=H[1],X=Object(i.g)();function $(t){t?X.push("./"+e.createItemPath+"?item="+e.item+"&id="+t[e.item.toUpperCase()+"_NUM"]):X.push("./"+e.createItemPath)}return Object(n.useEffect)((function(){u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),T(!1)):u&&P({data:u.data?u.data.map((function(e){return Object.assign({},e,{selected:!0})})):null,field:u.field?u.field.map((function(e){return e.name})):null,error:u.error})}),[u,f]),Object(n.useEffect)((function(){N&&!1===N.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),T(!1)):!N||N.error||v?(N&&N.error||v)&&W(r.a.createElement("div",{className:"alert alert-warning"},N&&N.error?"DELETE failed errno: "+N.error.errno+" code: "+N.error.code+" message: "+N.error.sqlMessage:null,v?"DELETE failed: "+v:null)):(alert("Delete Successful!"),W(null),Y([]),R.data.forEach((function(t){document.getElementById(t[e.item.toUpperCase()+"_NUM"]).checked=!1})),E({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}))}),[N,v]),R&&R.field&&(t=R.field.map((function(e){return r.a.createElement("option",{key:e,value:e},e.replace(/_/g," "))})),a=R.field.map((function(e){var t;return r.a.createElement("th",(t={key:e,style:{}},Object(D.a)(t,"style",{cursor:"pointer"}),Object(D.a)(t,"className","text-nowrap"),Object(D.a)(t,"data-order","asc"),Object(D.a)(t,"onClick",(function(t){t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),P(Object(O.a)({},R,{data:Object(w.sort)(R.data,e,t.target.getAttribute("data-order"))})),"asc"===t.target.getAttribute("data-order")?(document.getElementById(e.replace(/_/g," ")).classList.remove("fa-caret-up"),document.getElementById(e.replace(/_/g," ")).classList.add("fa-caret-down")):(document.getElementById(e.replace(/_/g," ")).classList.remove("fa-caret-down"),document.getElementById(e.replace(/_/g," ")).classList.add("fa-caret-up"))})),t),e.replace(/_/g," "),r.a.createElement("i",{id:e.replace(/_/g," "),className:"fa fa-caret-down ml-2"}))}))),R&&R.data&&(l=R.data.map((function(t,a){return t.selected?r.a.createElement("tr",{key:t[e.item.toUpperCase()+"_NUM"]},r.a.createElement("td",{className:"align-baseline py-2"},r.a.createElement("input",{type:"checkbox",id:t[e.item.toUpperCase()+"_NUM"],onChange:function(a){var n=G.indexOf(t[e.item.toUpperCase()+"_NUM"]);a.target.checked?Y([].concat(Object(x.a)(G),[t[e.item.toUpperCase()+"_NUM"]])):-1!==n&&Y([].concat(Object(x.a)(G.slice(0,n)),Object(x.a)(G.slice(n+1))))}})),r.a.createElement("td",{className:"align-baseline py-2"},r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){return $(t)}},"VIEW")),R&&R.field?R.field.map((function(e){return r.a.createElement("td",{className:"text-nowrap align-baseline py-2",key:Math.random()},-1!==e.indexOf("DATE")?j(t[e]):"number"===typeof t[e]?S(t[e]):t[e])})):null):null}))),o=!R||R.error||f?R&&R.error||f?r.a.createElement("div",{className:"alert alert-warning"},R&&R.error?"<DATABASE ERROR> errno: "+R.error.errno+" code: "+R.error.code+" message: "+R.error.sqlMessage:null,f?"OTHER ERROR "+f.name+" "+f.message:null):null:r.a.createElement("div",{className:"overflow-auto",style:{maxHeight:"50vh"}},r.a.createElement("table",{id:"table",className:"table table-bordered table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},r.a.createElement("input",{type:"checkbox",onChange:function(t){if(t.target.checked){var a=[];R.data.forEach((function(t){document.getElementById(t[e.item.toUpperCase()+"_NUM"]).checked=!0,a.push(t[e.item.toUpperCase()+"_NUM"])})),Y(a)}else R.data.forEach((function(t){document.getElementById(t[e.item.toUpperCase()+"_NUM"]).checked=!1})),Y([])}})),r.a.createElement("th",null),a)),r.a.createElement("tbody",null,l))),e.render({searchCriteriaList:t,result:o,onItemClick:$,refresh:function(){W(null),Y([]),R.data.forEach((function(t){document.getElementById(t[e.item.toUpperCase()+"_NUM"]).checked=!1})),E({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}})},search:F,searchChange:function(e){if(R&&R.data){var t=R.data.map((function(t){return""!==e.target.value?new RegExp(e.target.value,"g").test(t[V])?Object.assign({},t,{selected:!0}):Object.assign({},t,{selected:!1}):Object.assign({},t,{selected:!0})}));P({data:t,field:R.field,error:R.error})}q(e.target.value)},searchCriteria:V,searchCriteriaChange:function(e){_(e.target.value)},deleteList:function(){window.confirm("Confirm Delete?")&&y({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,id:G}),credentials:"include"}})},errorDeleteDisplay:z,itemsToBeDeleted:G})};var I=function(e){return r.a.createElement("div",{className:"container py-2"},r.a.createElement("h3",null,e.description),r.a.createElement("button",{className:"btn btn-primary mr-3",onClick:function(){return e.onItemClick()}},"Create New Item"),r.a.createElement("form",{className:"form-inline my-3"},r.a.createElement("label",{htmlFor:"search"},"Find Item"),r.a.createElement("input",{type:"text",onChange:function(t){return e.searchChange(t)},id:"search",placeholder:"Search...",className:"form-control mx-sm-3",value:e.search}),r.a.createElement("label",{htmlFor:"search-criteria",className:"mt-2 mt-md-0"},"Search Criteria"),r.a.createElement("select",{className:"form-control mx-sm-3",value:e.searchCriteria,onChange:e.searchCriteriaChange},r.a.createElement("option",{value:""}," -select an option- "),e.searchCriteriaList),r.a.createElement("small",{className:"text-muted form-text mt-3 mt-md-0"},"Search is CASE SENSITIVE")),r.a.createElement("h5",null,"List of "+e.listname),r.a.createElement("div",{className:"mb-3"},r.a.createElement("button",{className:"btn btn-outline-info mr-2",onClick:e.refresh},"Refresh"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.itemsToBeDeleted.length?e.deleteList():alert("No items selected!")}},"Delete")),e.errorDeleteDisplay,e.result)};function R(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./DeliveryOrderItem",item:"delivery_order",render:function(e){return r.a.createElement(I,Object.assign({description:R.description,listname:R.description},e))}}))}R.description="Delivery Order",R.path="/DeliveryOrder";var P=R;function T(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./SalesInvoiceItem",item:"sales_invoice",render:function(e){return r.a.createElement(I,Object.assign({description:T.description,listname:T.description},e))}}))}T.description="Sales Invoice",T.path="/SalesInvoice";var k=T;function A(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./DebitNoteItem",item:"debit_note",render:function(e){return r.a.createElement(I,Object.assign({description:A.description,listname:A.description},e))}}))}A.description="Debit Note",A.path="/DebitNote";var F=A;function q(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./CreditNoteItem",item:"credit_note",render:function(e){return r.a.createElement(I,Object.assign({description:q.description,listname:q.description},e))}}))}q.description="Credit Note",q.path="/CreditNote";var M=q;function U(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Sales Report"))}U.description="Sales Report",U.path="/SalesReport";var V=U;var _=function(e){var t=Object(n.useState)(e.url.item&&e.url.id?"UPDATE/DELETE":"INSERT"),a=Object(c.a)(t,1)[0],l=Object(n.useState)("UPDATE/DELETE"===a),o=Object(c.a)(l,2),s=o[0],m=o[1],d=C("UPDATE/DELETE"===a?{url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.url.item,id:e.url.id}),credentials:"include"}}:null),u=Object(c.a)(d,1)[0],f=u.data,E=u.error,g=C({url:"./getIDList",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}),b=Object(c.a)(g,1)[0],h=b.data,N=b.error,v=C(null),y=Object(c.a)(v,2),D=y[0],w=D.data,S=D.error,j=y[1],L=C(null),I=Object(c.a)(L,2),R=I[0],P=R.data,T=R.error,k=I[1],A=C(null),F=Object(c.a)(A,2),q=F[0],M=q.data,U=q.error,V=F[1],_=Object(n.useState)({IDPrefix:[],IDPrefixLatestNumber:[],currentIDPrefix:"",minIDNumber:1}),B=Object(c.a)(_,2),J=B[0],G=B[1],Y=Object(n.useContext)(p).changeAuth,Q=Object(i.g)();Object(n.useEffect)((function(){if(f&&!1===f.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1);else if(f&&f.field&&f.data[0]){var t=[];f.field.forEach((function(e,a){t=[].concat(Object(x.a)(t.slice(0,a)),[f.data[0][e.name]?f.data[0][e.name]:""],Object(x.a)(t.slice(a+1,t.length)))})),G((function(t){return Object(O.a)({},t,{currentIDPrefix:f.data[0][e.item.toUpperCase()+"_NUM"].substring(0,f.data[0][e.item.toUpperCase()+"_NUM"].indexOf("-"))})})),e.changeInputState(t),e.changeParamOutstanding&&e.changeParamOutstanding(e.paramOutstanding(t[e.debtorCreditorNumPosition],t[e.oldNumPosition]))}}),[f,E]),Object(n.useEffect)((function(){if(h&&!1===h.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1);else if(h&&h.data&&h.field){var t=[],a=[];h.data.forEach((function(e){var n=e[h.field[0].name].match(/[^-]+/)[0],r=parseInt(e[h.field[0].name].substring(e[h.field[0].name].indexOf("-")+1));-1===t.indexOf(n)?(t.push(n),a.push(r)):r&&r>a[t.indexOf(n)]&&(a[t.indexOf(n)]=r)})),G((function(e){return Object(O.a)({},e,{IDPrefix:t,IDPrefixLatestNumber:a})}))}w&&!1===w.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):w&&!w.error&&(alert("Insert Successful!"),Q.push(e.successPath)),M&&!1===M.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):M&&!M.error&&(alert("Update Successful!"),Q.push(e.successPath)),P&&!1===P.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):P&&!P.error&&(alert("Delete Successful!"),Q.push(e.successPath))}),[h,N,w,S,M,U,P,T]);var H=null;return(f&&f.error||E||h&&h.error||N||w&&w.error||S||P&&P.error||T||M&&M.error||U)&&(H=r.a.createElement("div",{className:"alert alert-warning"},f&&f.error?"Data RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"Data RETRIEVAL for item failed "+E:null,w&&w.error?"Data INSERT for item failed errno: "+w.error.errno+" code: "+w.error.code+" message: "+w.error.sqlMessage:null,S?"Data INSERT for item failed "+S:null,M&&M.error?"Data UPDATE for item failed errno: "+M.error.errno+" code: "+M.error.code+" message: "+M.error.sqlMessage:null,U?"Data UPDATE for item failed "+U:null,P&&P.error?"Data DELETE for item failed errno: "+P.error.errno+" code: "+P.error.code+" message: "+P.error.sqlMessage:null,T?"Data DELETE for item failed "+T:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"ID RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"ID RETRIEVAL for item failed "+N:null)),e.children({usage:a,disabled:s,changeDisabled:m,onInsert:function(){j({url:"./InsertItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,param:e.inputState}),credentials:"include"}})},onUpdate:function(){V({url:"./UpdateItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,param:e.inputState}),credentials:"include"}})},onDelete:function(){window.confirm("Confirm Delete?")&&k({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,id:[e.url.id]}),credentials:"include"}})},errorDisplay:H,inputNumberRender:function(t){return r.a.createElement("div",{className:t.layout+" input-group"},r.a.createElement("input",{type:"text",maxLength:10,value:J.currentIDPrefix,required:!0,className:"form-control \r col-5 col-md-4",pattern:"[A-Za-z]+",title:"Use Alphabets only (Max 4)",disabled:s,onChange:function(e){var a=J.IDPrefix.indexOf(e.target.value);-1!==a?(G(Object(O.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:J.IDPrefixLatestNumber[a]+1})),t.onChange("",t.position)):(G(Object(O.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:1})),t.onChange("",t.position))}}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:s,onChange:function(e){var a=J.IDPrefix.indexOf(e.target.value);-1!==a?(G(Object(O.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:J.IDPrefixLatestNumber[a]+1})),t.onChange("",t.position)):(G(Object(O.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:1})),t.onChange("",t.position))}},r.a.createElement("option",{value:""},"-select an option- "),J.IDPrefix.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e+" | Latest Number: "+J.IDPrefixLatestNumber[t])}))),r.a.createElement("input",{type:"number",id:t.labelID,max:"999999999",value:e.inputState[t.position].substring(e.inputState[t.position].indexOf("-")+1),onChange:function(e){return t.onChange(J.currentIDPrefix+"-"+e.target.value,t.position)},disabled:s,required:!0,className:"form-control",placeholder:"Next Number : "+J.minIDNumber,min:J.minIDNumber}))}})};var B=function(e){var t=Object(i.g)();return r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-1 my-1"},"Submit"),"UPDATE/DELETE"===e.usage?r.a.createElement("button",{type:"button",onClick:function(t){e.changeDisabled(!1)},className:"btn btn-outline-primary mx-1 my-1"},"Edit"):null,"UPDATE/DELETE"===e.usage?r.a.createElement("button",{type:"button",onClick:function(t){e.onDelete()},className:"btn btn-danger mx-1 my-1"},"Delete"):null,e.path?r.a.createElement("button",{type:"button",onClick:function(a){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.5"),t.push(e.path)},className:"btn btn-info mx-1 my-1"},"Preview"):null)};var J=function(e){var t=Object(i.g)(),a=e.topLeftInput?e.topLeftInput.map((function(e,t){return r.a.createElement("p",{className:"my-2",key:t},e)})):null,n=e.topRightField&&e.topRightInput?e.topRightField.map((function(t,a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"col-6 h6"},t),r.a.createElement("div",{className:"col-1"},":"),r.a.createElement("div",{className:"col-4 h6"},e.topRightInput[a]))})):null,l=e.bottomField?e.bottomField.map((function(e){return r.a.createElement("th",{className:"text-nowrap",key:e},e)})):null,o=e.bottomInput?e.bottomInput.map((function(t,a){return r.a.createElement("tr",{key:a},t.map((function(e,t){return r.a.createElement("td",{key:t},e)})),e.calculateSubtotal?r.a.createElement("td",null,S(e.calculateSubtotal(a))):null)})):null;return r.a.createElement("div",{className:"container py-5",style:{maxWidth:"800px"}},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),t.push(e.backPath)}},"Back"),r.a.createElement("div",{className:"jumbotron",style:{padding:0}},r.a.createElement("h1",{className:"text-center"},e.description)),r.a.createElement("div",{className:"row",style:{margin:0}},r.a.createElement("div",{className:"col-6 jumbotron h5",style:{marginBottom:0}},a),r.a.createElement("div",{className:"col-6 py-5"},n)),r.a.createElement("hr",{className:"border border-secondary my-3"}),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,l)),r.a.createElement("tbody",null,o)),r.a.createElement("h3",{className:"text-right px-3"},"Total: "+S(e.calculateTotal())),r.a.createElement("hr",{className:"border border-secondary"}),r.a.createElement("p",{className:"text-center"},e.footer))};function G(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=7,g=Object(n.useState)(null),h=Object(c.a)(g,2),N=h[0],v=h[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(["","","","","","","",[]]),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(i.h)().path,k=Object(n.useContext)(p).changeAuth;function A(e,t){P([].concat(Object(x.a)(R.slice(0,t)),[e],Object(x.a)(R.slice(t+1))))}function F(e,t,a,n){P(R.slice(0,t).concat([R[t].slice(0,a).concat([R[t][a].slice(0,n).concat(e).concat(R[t][a].slice(n+1))]).concat(R[t].slice(a+1))]).concat(R.slice(t+1)))}function q(){var e=0;return R[E].forEach((function(t,a){""!==R[E][a][3]&&(e+=parseInt(R[E][a][3]))})),e}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),k(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),k(!1)):u&&u.data&&u.field&&w(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))})))}),[o,s,u,f]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||f)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null)),r.a.createElement(_,{inputState:R,changeInputState:P,url:t,item:"delivery_order",successPath:"/DeliveryOrder"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(T,"/Preview")},r.a.createElement(J,{description:G.description,backPath:G.path,topLeftInput:[R[1],R[2]],topRightField:[G.description+" No","Date","Other Description"],topRightInput:[R[3],j(R[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:R[E],calculateTotal:q,footer:"Goods sold are neither returnable or refundable. Otherwise a cancellation fee of 20% on purchase price will be imposed."})),r.a.createElement(i.b,{exact:!0,path:T},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+G.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:R[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),P([e.target.value,t,a].concat(Object(x.a)(R.slice(3,R.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:R[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:R[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"deliveryOrderNumber",className:"mt-3"},"Delivery Order Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:A,layout:"",position:3,labelID:"deliveryOrderNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:R[4],onChange:function(e){return A(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return A(e.target.value,5)},value:R[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return P(R.slice(0,E).concat([R[E].slice(0).concat([[R[E].length+1,"","",""]])]).concat(R.slice(E+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Delivery Order Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return P(R.slice(0,E).concat([R[E].slice(0,R[E].length-1)]).concat(R.slice(E+1)))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 50px",paddingLeft:10,paddingRight:10}},"Line Number"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 50px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty")),function(e){return R[E].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNumber",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNumber",className:"col form-control rounded-0 text-center",value:R[E][a][0]?R[E][a][0]:"",onChange:function(e){return e},style:{flex:"1 0 50px",paddingLeft:10,paddingRight:0},disabled:e}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 50px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",className:"form-control rounded-0",disabled:e,style:{paddingLeft:10},value:R[E][a][1]?R[E][a][1]:"",onChange:function(e){return F(e.target.value,E,a,1)}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e,onChange:function(e){var t="";u.data.forEach((function(a){a[u.field[0].name]===e.target.value&&(t=a[u.field[1].name]?a[u.field[1].name]:"")})),P(R.slice(0,E).concat([R[E].slice(0,a).concat([R[E][a].slice(0,1).concat(e.target.value).concat(t).concat(R[E][a].slice(3))]).concat(R[E].slice(a+1))]).concat(R.slice(E+1)))}},r.a.createElement("option",{value:""},"-select an option- "),O)),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:R[E][a][2],onChange:function(e){return F(e.target.value,E,a,2)},disabled:e,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:"1",id:"qty",className:"col form-control rounded-0 text-center",value:R[E][a][3],onChange:function(e){return F(e.target.value,E,a,3)},disabled:e,style:{flex:"1 0 75px",paddingLeft:10,paddingRight:0}}))}))}(a)),r.a.createElement("h5",{className:"text-right my-3"},"Total: "+S(q())))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(T,"/Preview")}))))),r.a.createElement(i.a,{to:G.path}))}))}G.description="Delivery Order",G.path="/DeliveryOrderItem";var Y=G;var Q=function(e){function t(t,a,n,r){e.changeInputState(e.inputState.slice(0,a).concat([e.inputState[a].slice(0,n).concat([e.inputState[a][n].slice(0,r).concat(t).concat(e.inputState[a][n].slice(r+1))]).concat(e.inputState[a].slice(n+1))]).concat(e.inputState.slice(a+1)))}return r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Line No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Price"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Discount"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Subtotal")),e.inputState[e.linePosition].map((function(a,n){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:n},r.a.createElement("label",{htmlFor:"lineNumber",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNumber",className:"col form-control rounded-0",value:e.inputState[e.linePosition][n][0],onChange:function(e){return e},style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0},disabled:e.disabled}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",className:"form-control rounded-0",disabled:e.disabled,style:{paddingLeft:10},value:e.inputState[e.linePosition][n][1]?e.inputState[e.linePosition][n][1]:"",onChange:function(a){return t(a.target.value,e.linePosition,n,1)}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e.disabled,onChange:function(t){var a="",r="";e.dataSelectStock.data.forEach((function(n){n[e.dataSelectStock.field[0].name]===t.target.value&&(a=n[e.dataSelectStock.field[1].name]?n[e.dataSelectStock.field[1].name]:"",r=n[e.dataSelectStock.field[2].name]?n[e.dataSelectStock.field[2].name]:"")})),e.changeInputState(e.inputState.slice(0,e.linePosition).concat([e.inputState[e.linePosition].slice(0,n).concat([e.inputState[e.linePosition][n].slice(0,1).concat(t.target.value).concat(a).concat(r).concat(e.inputState[e.linePosition][n].slice(4))]).concat(e.inputState[e.linePosition].slice(n+1))]).concat(e.inputState.slice(e.linePosition+1)))}},r.a.createElement("option",{value:""},"-select an option- "),e.stockList)),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:e.inputState[e.linePosition][n][2],onChange:function(a){return t(a.target.value,e.linePosition,n,2)},disabled:e.disabled,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"price",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:".01",id:"price",className:"col form-control rounded-0",value:e.inputState[e.linePosition][n][3],onChange:function(a){return t(a.target.value,e.linePosition,n,3)},disabled:e.disabled,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:"1",id:"qty",className:"col form-control rounded-0",value:e.inputState[e.linePosition][n][4],onChange:function(a){return t(a.target.value,e.linePosition,n,4)},disabled:e.disabled,style:{flex:"1 0 75px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"discount",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:".01",id:"discount",className:"col form-control rounded-0",value:e.inputState[e.linePosition][n][5],onChange:function(a){return t(a.target.value,e.linePosition,n,5)},disabled:e.disabled,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"subtotal",className:"sr-only"}),r.a.createElement("input",{type:"text",step:".01",disabled:!0,id:"subtotal",className:"col form-control rounded-0",value:S(e.calculateSubtotal(n)),style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}))})))};function H(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"sales_invoice"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=9,y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(["","","","","","","COD","","",[]]),M=Object(c.a)(q,2),U=M[0],V=M[1],G=Object(i.h)().path,Y=Object(n.useContext)(p).changeAuth;function z(e,t){V([].concat(Object(x.a)(U.slice(0,t)),[e],Object(x.a)(U.slice(t+1))))}function W(e){return""!==U[v][e][3]&&""!==U[v][e][4]&&""!==U[v][e][5]?(parseFloat(U[v][e][3])*parseFloat(U[v][e][4])-parseFloat(U[v][e][5])).toFixed(2):""}function X(){var e=0;return U[v].forEach((function(t,a){""!==U[v][a][3]&&""!==U[v][a][4]&&""!==U[v][a][5]&&(e+=parseFloat(U[v][a][3])*parseFloat(U[v][a][4])-parseFloat(U[v][a][5]))})),+e.toFixed(2)}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):o&&o.data&&o.field&&w(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):u&&u.data&&u.field&&P(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):h&&h.data&&h.field&&F(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var $=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N)&&($=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null)),r.a.createElement(_,{inputState:U,changeInputState:V,url:t,item:"sales_invoice",successPath:"/SalesInvoice"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(G,"/Preview")},r.a.createElement(J,{description:H.description,backPath:H.path,topLeftInput:[U[1],U[2]],topRightField:[H.description+" No","Date","Credit Term","Other Description"],topRightInput:[U[3],j(U[4]),"COD"===U[6]?"C.O.D.":U[6]+" Days",U[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:U[v],calculateSubtotal:W,calculateTotal:X,footer:"NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days."})),r.a.createElement(i.b,{exact:!0,path:G},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+H.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,$,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:U[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(x.a)(U.slice(3,6)),[n],Object(x.a)(U.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),O)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:U[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:U[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"invoiceNumber",className:"mt-3"},"Invoice Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:z,layout:"",position:3,labelID:"invoiceNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:U[4],onChange:function(e){return z(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:U[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){z(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),A)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return z(e.target.value,6)},value:U[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return z(e.target.value,5)},value:U[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0).concat([[U[v].length+1,"","","",0,0]])]).concat(U.slice(v+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Invoice Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0,U[v].length-1)]).concat(U.slice(v+1)))}},"-")),r.a.createElement(Q,{linePosition:v,disabled:a,inputState:U,changeInputState:V,dataSelectStock:u,stockList:R,calculateSubtotal:W})),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+S(X()))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(G,"/Preview")}))))),r.a.createElement(i.a,{to:H.path}))}))}H.description="Sales Invoice",H.path="/SalesInvoiceItem";var z=H;function W(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debit_note"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=9,y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(["","","","","","","COD","","",[]]),M=Object(c.a)(q,2),U=M[0],V=M[1],G=Object(i.h)().path,Y=Object(n.useContext)(p).changeAuth;function H(e,t){V([].concat(Object(x.a)(U.slice(0,t)),[e],Object(x.a)(U.slice(t+1))))}function z(e){return""!==U[v][e][3]&&""!==U[v][e][4]&&""!==U[v][e][5]?(parseFloat(U[v][e][3])*parseFloat(U[v][e][4])-parseFloat(U[v][e][5])).toFixed(2):""}function X(){var e=0;return U[v].forEach((function(t,a){""!==U[v][a][3]&&""!==U[v][a][4]&&""!==U[v][a][5]&&(e+=parseFloat(U[v][a][3])*parseFloat(U[v][a][4])-parseFloat(U[v][a][5]))})),+e.toFixed(2)}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):o&&o.data&&o.field&&w(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):u&&u.data&&u.field&&P(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):h&&h.data&&h.field&&F(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var $=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N)&&($=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null)),r.a.createElement(_,{inputState:U,changeInputState:V,url:t,item:"debit_note",successPath:"/DebitNote"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(G,"/Preview")},r.a.createElement(J,{description:W.description,backPath:W.path,topLeftInput:[U[1],U[2]],topRightField:[W.description+" No","Date","Credit Term","Other Description"],topRightInput:[U[3],j(U[4]),"COD"===U[6]?"C.O.D.":U[6]+" Days",U[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:U[v],calculateSubtotal:z,calculateTotal:X,footer:"NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days."})),r.a.createElement(i.b,{exact:!0,path:G},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+W.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,$,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:U[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(x.a)(U.slice(3,6)),[n],Object(x.a)(U.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),O)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:U[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:U[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"debitNoteNumber",className:"mt-3"},"Debit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:H,layout:"",position:3,labelID:"debitNoteNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:U[4],onChange:function(e){return H(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:U[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){H(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),A)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return H(e.target.value,6)},value:U[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return H(e.target.value,5)},value:U[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0).concat([[U[v].length+1,"","","",0,0]])]).concat(U.slice(v+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Debit Note Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0,U[v].length-1)]).concat(U.slice(v+1)))}},"-")),r.a.createElement(Q,{linePosition:v,disabled:a,inputState:U,changeInputState:V,dataSelectStock:u,stockList:R,calculateSubtotal:z})),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+S(X()))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(G,"/Preview")}))))),r.a.createElement(i.a,{to:W.path}))}))}W.description="Debit Note",W.path="/DebitNoteItem";var X=W;var $=function(e){var t=e.dataSelectOutstanding?e.dataSelectOutstanding.field[0].name:null,a=e.dataSelectOutstanding?e.dataSelectOutstanding.field[1].name:null,n=e.dataSelectOutstanding?e.dataSelectOutstanding.field[2].name:null,l=e.dataSelectOutstanding?e.dataSelectOutstanding.field[3].name:null,o=e.dataSelectOutstanding?e.dataSelectOutstanding.field[4].name:null,c=e.dataSelectOutstanding?e.dataSelectOutstanding.field[5].name:null,i=0,s=1;function m(t,a,n,r){e.changeInputState(e.inputState.slice(0,a).concat([e.inputState[a].slice(0,n).concat([e.inputState[a][n].slice(0,r).concat(t).concat(e.inputState[a][n].slice(r+1))]).concat(e.inputState[a].slice(n+1))]).concat(e.inputState.slice(a+1)))}function d(t,a){e.changeInputState(e.inputState.slice(0,a).concat([e.inputState[a].slice(0,e.inputState[a].length).concat([t])]).concat(e.inputState.slice(a+1)))}function u(t,a){e.changeInputState(e.inputState.slice(0,t).concat([e.inputState[t].slice(0,a).concat(e.inputState[t].slice(a+1))]).concat(e.inputState.slice(t+1)))}function p(a,n){e.inputState[n].length>1?e.inputState[n].forEach((function(r,l){r[i]===a[t]?a[c]>e.calculateUnappliedAmount()?m(e.calculateUnappliedAmount(),n,l,s):m(a[c],n,l,s):a[c]>e.calculateUnappliedAmount()?d([a[t],e.calculateUnappliedAmount()],n):d([a[t],a[c]],n)})):a[c]>e.calculateUnappliedAmount()?d([a[t],e.calculateUnappliedAmount()],n):d([a[t],a[c]],n)}function f(a,n){var r=!0;return e.inputState[n].forEach((function(n){n[i]!==a[t]||e.disabled||(r=!1)})),r}function E(a,n){var r=null;return e.inputState[n].forEach((function(e,n){e[i]===a[t]&&(r=n)})),r}function g(a,n){var r=!1;return e.inputState[n]&&e.inputState[n].forEach((function(e){e[i]===a[t]&&(r=!0)})),r}return r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap ",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Doc No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10}},"Name"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Type"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Date"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Original"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Outstanding"),r.a.createElement("h6",{className:"col mx-2",style:{flex:"0 0 15px",paddingLeft:0,paddingRight:0}}),r.a.createElement("h6",{className:"col",style:{flex:"1 0 100px",paddingLeft:10,paddingRight:10}},"Pay")),e.dataSelectOutstanding?e.dataSelectOutstanding.data.map((function(d,b){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:d[t]},r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[t]),r.a.createElement("p",{className:"col border my-0 text-truncate",style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[a]),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[n]),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[l]),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},S(d[o])),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},S(d[c])),r.a.createElement("label",{htmlFor:"pay",className:"sr-only"}),r.a.createElement("input",{type:"checkbox",id:"pay",style:{flex:"0 0 15px"},checked:d[n]===e.offsetDescriptionOne?g(d,e.offsetPositionOne):g(d,e.offsetPositionTwo),disabled:e.disabled,className:"col form-control mx-2",onChange:function(a){e.changeErrorUnappliedAmount(null),a.target.checked?e.calculateUnappliedAmount()>0&&(d[n]===e.offsetDescriptionOne?p(d,e.offsetPositionOne):p(d,e.offsetPositionTwo)):d[n]===e.offsetDescriptionOne?e.inputState[e.offsetPositionOne].forEach((function(a,n){a[i]===d[t]&&u(e.offsetPositionOne,n)})):e.inputState[e.offsetPositionTwo].forEach((function(a,n){a[i]===d[t]&&u(e.offsetPositionTwo,n)}))}}),r.a.createElement("label",{htmlFor:"payAmount",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"payAmount",style:{flex:"1 0 90px",height:"auto",paddingLeft:10,paddingRight:10},className:"col form-control",min:"0",step:".01",value:d[n]===e.offsetDescriptionOne?e.inputState[e.offsetPositionOne][E(d,e.offsetPositionOne)]?""+e.inputState[e.offsetPositionOne][E(d,e.offsetPositionOne)][s]:"":e.inputState[e.offsetPositionTwo][E(d,e.offsetPositionTwo)]?""+e.inputState[e.offsetPositionTwo][E(d,e.offsetPositionTwo)][s]:"",disabled:d[n]===e.offsetDescriptionOne?f(d,e.offsetPositionOne):f(d,e.offsetPositionTwo),onChange:function(a){e.changeErrorUnappliedAmount(null),parseFloat(a.target.value)>e.calculateUnappliedAmount(d[t])?d[n]===e.offsetDescriptionOne?m(e.calculateUnappliedAmount(d[t]),e.offsetPositionOne,E(d,e.offsetPositionOne),s):m(e.calculateUnappliedAmount(d[t]),e.offsetPositionTwo,E(d,e.offsetPositionTwo),s):d[n]===e.offsetDescriptionOne?m(parseFloat(a.target.value),e.offsetPositionOne,E(d,e.offsetPositionOne),s):m(parseFloat(a.target.value),e.offsetPositionTwo,E(d,e.offsetPositionTwo),s)}}))})):null)};function Z(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"credit_note"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=C(null),y=Object(c.a)(v,2),D=y[0],O=D.data,w=D.error,L=y[1],I=9,R=10,P=11,T=0,k=1,A=Object(n.useState)(null),F=Object(c.a)(A,2),q=F[0],M=F[1],U=Object(n.useState)(null),V=Object(c.a)(U,2),G=V[0],Y=V[1],H=Object(n.useState)(null),z=Object(c.a)(H,2),W=z[0],X=z[1],K=Object(n.useState)(null),ee=Object(c.a)(K,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(["","","","","","","COD","","",[],[],[]]),re=Object(c.a)(ne,2),le=re[0],oe=re[1],ce=Object(i.h)().path,ie=Object(n.useContext)(p).changeAuth;function se(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function me(e,t){oe([].concat(Object(x.a)(le.slice(0,t)),[e],Object(x.a)(le.slice(t+1))))}function de(e){return""!==le[I][e][3]&&""!==le[I][e][4]&&""!==le[I][e][5]?(parseFloat(le[I][e][3])*parseFloat(le[I][e][4])-parseFloat(le[I][e][5])).toFixed(2):""}function ue(){var e=0;return le[I].forEach((function(t,a){""!==le[I][a][3]&&""!==le[I][a][4]&&""!==le[I][a][5]&&(e+=parseFloat(le[I][a][3])*parseFloat(le[I][a][4])-parseFloat(le[I][a][5]))})),+e.toFixed(2)}function pe(e){return le[P].reduce((function(t,a){return e===a[T]?t:t-a[k]}),le[R].reduce((function(t,a){return e===a[T]?t:t-a[k]}),ue()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):o&&o.data&&o.field&&M(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):u&&u.data&&u.field&&Y(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):h&&h.data&&h.field&&X(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){O&&!1===O.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1))}),[O,w]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var fe=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N||O&&O.error||w)&&(fe=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),O&&O.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+O.error.errno+" code: "+O.error.code+" message: "+O.error.sqlMessage:null,w?"Debtor Outstanding List RETRIEVAL for item failed "+w:null)),r.a.createElement(_,{inputState:le,changeInputState:oe,url:t,item:"credit_note",successPath:"/CreditNote",paramOutstanding:se,changeParamOutstanding:L,debtorCreditorNumPosition:0,oldNumPosition:8},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(ce,"/Preview")},r.a.createElement(J,{description:Z.description,backPath:Z.path,topLeftInput:[le[1],le[2]],topRightField:[Z.description+" No","Date","Credit Term","Other Description"],topRightInput:[le[3],j(le[4]),"COD"===le[6]?"C.O.D.":le[6]+" Days",le[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:le[I],calculateSubtotal:de,calculateTotal:ue})),r.a.createElement(i.b,{exact:!0,path:ce},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Z.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,fe,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:le[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),oe([e.target.value,t,a].concat(Object(x.a)(le.slice(3,6)),[n],Object(x.a)(le.slice(7)))),L(se(e.target.value,le[8]))}},r.a.createElement("option",{value:""}," -select an option- "),q)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:le[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:le[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"creditNoteNumber",className:"mt-3"},"Credit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:me,layout:"",position:3,labelID:"creditNoteNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:le[4],onChange:function(e){return me(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:le[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){me(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),W)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return me(e.target.value,6)},value:le[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return me(e.target.value,5)},value:le[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){oe(le.slice(0,I).concat([le[I].slice(0).concat([[le[I].length+1,"","","",0,0]])]).concat(le.slice(I+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Credit Note Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return oe(le.slice(0,I).concat([le[I].slice(0,le[I].length-1)]).concat(le.slice(I+1)))}},"-")),r.a.createElement(Q,{linePosition:I,disabled:a,inputState:le,changeInputState:oe,dataSelectStock:u,stockList:G,calculateSubtotal:de})),r.a.createElement("h5",{className:"text-right mt-3 mb-4 col-12"},"Total: "+S(ue())),r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(pe()))),te,r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Sales Invoice / Debit Note")),r.a.createElement($,{dataSelectOutstanding:O,inputState:le,changeInputState:oe,disabled:a,calculateUnappliedAmount:pe,calculateTotal:ue,offsetPositionOne:R,offsetPositionTwo:P,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:ae}))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(ce,"/Preview")}))))),r.a.createElement(i.a,{to:Z.path}))}))}Z.description="Credit Note",Z.path="/CreditNoteItem";var K=Z,ee=a(26),te=a.n(ee);function ae(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./PurchaseReturnItem",item:"purchase_return",render:function(e){return r.a.createElement(I,Object.assign({description:ae.description,listname:ae.description},e))}}))}ae.description="Purchase Return",ae.path="/PurchaseReturn";var ne=ae;function re(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./PurchaseInvoiceItem",item:"purchase_invoice",render:function(e){return r.a.createElement(I,Object.assign({description:re.description,listname:re.description},e))}}))}re.description="Purchase Invoice",re.path="/PurchaseInvoice";var le=re;function oe(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./PurchaseDebitNoteItem",item:"purchase_debit_note",render:function(e){return r.a.createElement(I,Object.assign({description:oe.description,listname:oe.description},e))}}))}oe.description="Purchase Debit Note",oe.path="/PurchaseDebitNote";var ce=oe;function ie(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./PurchaseCreditNoteItem",item:"purchase_credit_note",render:function(e){return r.a.createElement(I,Object.assign({description:ie.description,listname:ie.description},e))}}))}ie.description="Purchase Credit Note",ie.path="/PurchaseCreditNote";var se=ie;function me(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Purchase Report"))}me.description="Purchase Report",me.path="/PurchaseReport";var de=me;function ue(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Supplier Price List Report"))}ue.description="Supplier Price List Report",ue.path="/SupplierPriceListReport";var pe=ue;function fe(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=7,g=Object(n.useState)(null),h=Object(c.a)(g,2),N=h[0],v=h[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(["","","","","","","",[]]),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(i.h)().path,k=Object(n.useContext)(p).changeAuth;function A(e,t){P([].concat(Object(x.a)(R.slice(0,t)),[e],Object(x.a)(R.slice(t+1))))}function F(e,t,a,n){P(R.slice(0,t).concat([R[t].slice(0,a).concat([R[t][a].slice(0,n).concat(e).concat(R[t][a].slice(n+1))]).concat(R[t].slice(a+1))]).concat(R.slice(t+1)))}function q(){var e=0;return R[E].forEach((function(t,a){""!==R[E][a][3]&&(e+=parseInt(R[E][a][3]))})),e}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),k(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),k(!1)):u&&u.data&&u.field&&w(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))})))}),[o,s,u,f]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||f)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null)),r.a.createElement(_,{inputState:R,changeInputState:P,url:t,item:"purchase_return",successPath:"/PurchaseReturn"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(T,"/Preview")},r.a.createElement(J,{description:fe.description,backPath:fe.path,topLeftInput:[R[1],R[2]],topRightField:[fe.description+" No","Date","Other Description"],topRightInput:[R[3],j(R[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:R[E],calculateTotal:q,footer:""})),r.a.createElement(i.b,{exact:!0,path:T},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+fe.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:R[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),P([e.target.value,t,a].concat(Object(x.a)(R.slice(3,R.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:R[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:R[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseReturnNumber",className:"mt-3"},"Purchase Return Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:A,layout:"",position:3,labelID:"purchaseReturnNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:R[4],onChange:function(e){return A(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return A(e.target.value,5)},value:R[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return P(R.slice(0,E).concat([R[E].slice(0).concat([[R[E].length+1,"","",""]])]).concat(R.slice(E+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Purchase Return Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return P(R.slice(0,E).concat([R[E].slice(0,R[E].length-1)]).concat(R.slice(E+1)))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 50px",paddingLeft:10,paddingRight:10}},"Line Number"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 50px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty")),function(e){return R[E].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNumber",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNumber",className:"col form-control rounded-0 text-center",value:R[E][a][0]?R[E][a][0]:"",onChange:function(e){return e},style:{flex:"1 0 50px",paddingLeft:10,paddingRight:0},disabled:e}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 50px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",className:"form-control rounded-0",disabled:e,style:{paddingLeft:10},value:R[E][a][1]?R[E][a][1]:"",onChange:function(e){return F(e.target.value,E,a,1)}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e,onChange:function(e){var t="";u.data.forEach((function(a){a[u.field[0].name]===e.target.value&&(t=a[u.field[1].name]?a[u.field[1].name]:"")})),P(R.slice(0,E).concat([R[E].slice(0,a).concat([R[E][a].slice(0,1).concat(e.target.value).concat(t).concat(R[E][a].slice(3))]).concat(R[E].slice(a+1))]).concat(R.slice(E+1)))}},r.a.createElement("option",{value:""},"-select an option- "),O)),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:R[E][a][2],onChange:function(e){return F(e.target.value,E,a,2)},disabled:e,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:"1",id:"qty",className:"col form-control rounded-0 text-center",value:R[E][a][3],onChange:function(e){return F(e.target.value,E,a,3)},disabled:e,style:{flex:"1 0 75px",paddingLeft:10,paddingRight:0}}))}))}(a)),r.a.createElement("h5",{className:"text-right my-3"},"Total: "+S(q())))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(T,"/Preview")}))))),r.a.createElement(i.a,{to:fe.path}))}))}fe.description="Purchase Return",fe.path="/PurchaseReturnItem";var Ee=fe;function ge(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_invoice"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=9,y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(["","","","","","","COD","","",[]]),M=Object(c.a)(q,2),U=M[0],V=M[1],G=Object(i.h)().path,Y=Object(n.useContext)(p).changeAuth;function H(e,t){V([].concat(Object(x.a)(U.slice(0,t)),[e],Object(x.a)(U.slice(t+1,U.length))))}function z(e){return""!==U[v][e][3]&&""!==U[v][e][4]&&""!==U[v][e][5]?(parseFloat(U[v][e][3])*parseFloat(U[v][e][4])-parseFloat(U[v][e][5])).toFixed(2):""}function W(){var e=0;return U[v].forEach((function(t,a){""!==U[v][a][3]&&""!==U[v][a][4]&&""!==U[v][a][5]&&(e+=parseFloat(U[v][a][3])*parseFloat(U[v][a][4])-parseFloat(U[v][a][5]))})),+e.toFixed(2)}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):o&&o.data&&o.field&&w(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},(e[o.field[0].name]?e[o.field[0].name]:"")+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):u&&u.data&&u.field&&P(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},(e[u.field[0].name]?e[u.field[0].name]:"")+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):h&&h.data&&h.field&&F(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var X=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N)&&(X=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null)),r.a.createElement(_,{inputState:U,changeInputState:V,url:t,item:"purchase_invoice",successPath:"/PurchaseInvoice"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(G,"/Preview")},r.a.createElement(J,{description:ge.description,backPath:ge.path,topLeftInput:[U[1],U[2]],topRightField:[ge.description+" No","Date","Credit Term","Other Description"],topRightInput:[U[3],j(U[4]),"COD"===U[6]?"C.O.D.":U[6]+" Days",U[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:U[v],calculateSubtotal:z,calculateTotal:W})),r.a.createElement(i.b,{exact:!0,path:G},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ge.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,X,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:U[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(x.a)(U.slice(3,6)),[n],Object(x.a)(U.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),O)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:U[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:U[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseInvoiceNumber",className:"mt-3"},"Purchase Invoice Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseInvoiceNumber",maxLength:"50",value:U[3],onChange:function(e){return H(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:U[4],onChange:function(e){return H(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"GLCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"GLCode",value:U[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){return H(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),A)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return H(e.target.value,6)},value:U[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return H(e.target.value,5)},value:U[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",disabled:a,className:"btn btn-primary",onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0).concat([[U[v].length+1,"","","",0,0]])]).concat(U.slice(v+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Invoice Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0,U[v].length-1)]).concat(U.slice(v+1)))}},"-")),r.a.createElement(Q,{linePosition:v,disabled:a,inputState:U,changeInputState:V,dataSelectStock:u,stockList:R,calculateSubtotal:z})),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+S(W()))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(G,"/Preview")}))))),r.a.createElement(i.a,{to:ge.path}))}))}ge.description="Purchase Invoice",ge.path="/PurchaseInvoiceItem";var be=ge;function he(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_debit_note"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=9,y=Object(n.useState)(null),D=Object(c.a)(y,2),O=D[0],w=D[1],L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(["","","","","","","COD","","",[]]),M=Object(c.a)(q,2),U=M[0],V=M[1],G=Object(i.h)().path,Y=Object(n.useContext)(p).changeAuth;function H(e,t){V([].concat(Object(x.a)(U.slice(0,t)),[e],Object(x.a)(U.slice(t+1))))}function z(e){return""!==U[v][e][3]&&""!==U[v][e][4]&&""!==U[v][e][5]?(parseFloat(U[v][e][3])*parseFloat(U[v][e][4])-parseFloat(U[v][e][5])).toFixed(2):""}function W(){var e=0;return U[v].forEach((function(t,a){""!==U[v][a][3]&&""!==U[v][a][4]&&""!==U[v][a][5]&&(e+=parseFloat(U[v][a][3])*parseFloat(U[v][a][4])-parseFloat(U[v][a][5]))})),+e.toFixed(2)}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):o&&o.data&&o.field&&w(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):u&&u.data&&u.field&&P(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Y(!1)):h&&h.data&&h.field&&F(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var X=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N)&&(X=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null)),r.a.createElement(_,{inputState:U,changeInputState:V,url:t,item:"purchase_debit_note",successPath:"/PurchaseDebitNote"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(G,"/Preview")},r.a.createElement(J,{description:he.description,backPath:he.path,topLeftInput:[U[1],U[2]],topRightField:[he.description+" No","Date","Credit Term","Other Description"],topRightInput:[U[3],j(U[4]),"COD"===U[6]?"C.O.D.":U[6]+" Days",U[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:U[v],calculateSubtotal:z,calculateTotal:W})),r.a.createElement(i.b,{exact:!0,path:G},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+he.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,X,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:U[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(x.a)(U.slice(3,6)),[n],Object(x.a)(U.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),O)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:U[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:U[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseDebitNoteNumber",className:"mt-3"},"Purchase Debit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseDebitNoteNumber",maxLength:"50",value:U[3],onChange:function(e){return H(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:U[4],onChange:function(e){return H(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:U[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){H(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),A)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return H(e.target.value,6)},value:U[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return H(e.target.value,5)},value:U[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-8 offset-2 col-md-6 offset-md-3 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0).concat([[U[v].length+1,"","","",0,0]])]).concat(U.slice(v+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Purchase Debit Note Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return V(U.slice(0,v).concat([U[v].slice(0,U[v].length-1)]).concat(U.slice(v+1)))}},"-")),r.a.createElement(Q,{linePosition:v,disabled:a,inputState:U,changeInputState:V,dataSelectStock:u,stockList:R,calculateSubtotal:z})),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+S(W()))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(G,"/Preview")}))))),r.a.createElement(i.a,{to:he.path}))}))}he.description="Purchase Debit Note",he.path="/PurchaseDebitNoteItem";var Ne=he;function ve(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_credit_note"}),credentials:"include"}}),g=Object(c.a)(E,1)[0],h=g.data,N=g.error,v=C(null),y=Object(c.a)(v,2),D=y[0],O=D.data,w=D.error,L=y[1],I=9,R=10,P=11,T=0,k=1,A=Object(n.useState)(null),F=Object(c.a)(A,2),q=F[0],M=F[1],U=Object(n.useState)(null),V=Object(c.a)(U,2),G=V[0],Y=V[1],H=Object(n.useState)(null),z=Object(c.a)(H,2),W=z[0],X=z[1],Z=Object(n.useState)(null),K=Object(c.a)(Z,2),ee=K[0],te=K[1],ae=Object(n.useState)(["","","","","","","COD","","",[],[],[]]),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],oe=Object(i.h)().path,ce=Object(n.useContext)(p).changeAuth;function ie(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function se(e,t){le([].concat(Object(x.a)(re.slice(0,t)),[e],Object(x.a)(re.slice(t+1))))}function me(e){return""!==re[I][e][3]&&""!==re[I][e][4]&&""!==re[I][e][5]?(parseFloat(re[I][e][3])*parseFloat(re[I][e][4])-parseFloat(re[I][e][5])).toFixed(2):""}function de(){var e=0;return re[I].forEach((function(t,a){""!==re[I][a][3]&&""!==re[I][a][4]&&""!==re[I][a][5]&&(e+=parseFloat(re[I][a][3])*parseFloat(re[I][a][4])-parseFloat(re[I][a][5]))})),+e.toFixed(2)}function ue(e){return re[P].reduce((function(t,a){return e===a[T]?t:t-a[k]}),re[R].reduce((function(t,a){return e===a[T]?t:t-a[k]}),de()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):o&&o.data&&o.field&&M(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):u&&u.data&&u.field&&Y(u.data.map((function(e){return r.a.createElement("option",{key:e[u.field[0].name],value:e[u.field[0].name]},e[u.field[0].name]+" | "+(e[u.field[1].name]?e[u.field[1].name]:"")+" | "+(e[u.field[2].name]?e[u.field[2].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):h&&h.data&&h.field&&X(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))})))}),[o,s,u,f,h,N]),Object(n.useEffect)((function(){O&&!1===O.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1))}),[O,w]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var pe=null;return(o&&o.error||s||u&&u.error||f||h&&h.error||N||O&&O.error||w)&&(pe=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Stock List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"GL Code List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),O&&O.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+O.error.errno+" code: "+O.error.code+" message: "+O.error.sqlMessage:null,w?"Creditor Outstanding List RETRIEVAL for item failed "+w:null)),r.a.createElement(_,{inputState:re,changeInputState:le,url:t,item:"purchase_credit_note",successPath:"/PurchaseCreditNote",paramOutstanding:ie,changeParamOutstanding:L,debtorCreditorNumPosition:0,oldNumPosition:8},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(oe,"/Preview")},r.a.createElement(J,{description:ve.description,backPath:"."+ve.path,topLeftInput:[re[1],re[2]],topRightField:[ve.description+" No","Date","Credit Term","Other Description"],topRightInput:[re[3],j(re[4]),"COD"===re[6]?"C.O.D.":re[6]+" Days",re[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:re[I],calculateSubtotal:me,calculateTotal:de})),r.a.createElement(i.b,{exact:!0,path:oe},r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ve.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,pe,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:re[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),le([e.target.value,t,a].concat(Object(x.a)(re.slice(3,6)),[n],Object(x.a)(re.slice(7)))),L(ie(e.target.value,re[8]))}},r.a.createElement("option",{value:""}," -select an option- "),q)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:re[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:re[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseCreditNoteNumber",className:"mt-3"},"Purchase Credit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseCreditNoteNumber",maxLength:"50",value:re[3],onChange:function(e){return se(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:re[4],onChange:function(e){return se(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:re[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){se(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),W)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return se(e.target.value,6)},value:re[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return se(e.target.value,5)},value:re[5],disabled:a,className:"form-control"})),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-6 offset-md-3 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return le(re.slice(0,I).concat([re[I].slice(0).concat([[re[I].length+1,"","","",0,0]])]).concat(re.slice(I+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Purchase Credit Note Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return le(re.slice(0,I).concat([re[I].slice(0,re[I].length-1)]).concat(re.slice(I+1)))}},"-")),r.a.createElement(Q,{linePosition:I,disabled:a,inputState:re,changeInputState:le,dataSelectStock:u,stockList:G,calculateSubtotal:me})),r.a.createElement("h5",{className:"text-right mt-3 mb-4 col-12"},"Total: "+S(de())),r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(ue()))),ee,r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Purchase Invoice / Purchase Debit Note")),r.a.createElement($,{dataSelectOutstanding:O,inputState:re,changeInputState:le,disabled:a,calculateUnappliedAmount:ue,calculateTotal:de,offsetPositionOne:R,offsetPositionTwo:P,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:te}))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(oe,"/Preview")}))))),r.a.createElement(i.a,{to:ve.path}))}))}ve.description="Purchase Credit Note",ve.path="/PurchaseCreditNoteItem";var ye=ve,xe=a(27),De=a.n(xe);function Oe(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./StockItem",item:"stock",render:function(e){return r.a.createElement(I,Object.assign({description:Oe.description,listname:"Stock Item"},e))}}))}Oe.description="Stock Item Maintenance",Oe.path="/StockItemMaintenance";var Ce=Oe;function we(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Stock Card Report"))}we.description="Stock Card Report",we.path="/StockCardReport";var Se=we;function je(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Stock Aging Report"))}je.description="Stock Aging Report",je.path="/StockAgingReport";var Le=je;function Ie(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(x.a)(o.slice(0,t)),[e],Object(x.a)(o.slice(t+1,o.length))))}return r.a.createElement(_,{inputState:o,changeInputState:i,url:t,item:"stock",successPath:"/StockItemMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ie.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"itemNumber"},"Item Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"itemNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"description"},"Description ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"description",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Price")),r.a.createElement("label",{htmlFor:"sellingPrice",className:"col-12"},"Selling Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"sellingPrice",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"minPrice",className:"col-12"},"Min Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"minPrice",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"maxPrice",className:"col-12"},"Max Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"maxPrice",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,className:"form-control"})),r.a.createElement("small",{className:"text-warning"},"2 decimal places only")),r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Cost")),r.a.createElement("label",{htmlFor:"standardCost",className:"col-12"},"Standard Cost:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"standardCost",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("small",{className:"text-warning"},"2 decimal places only")),r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Stock Level")),r.a.createElement("label",{htmlFor:"minQTY",className:"col-12"},"Min Quantity(Re-order Level):"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:"1",id:"minQTY",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"maxQTY",className:"col-12"},"Max Quantity:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:"1",id:"maxQTY",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"balanceQTY",className:"col-12"},"Balance Quantity: ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:"1",id:"balanceQTY",onChange:function(e){return s(e.target.value,8)},value:o[8],disabled:a,required:!0,className:"form-control"})),r.a.createElement("small",{className:"text-warning"},"round numbers only"))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Ie.description="Stock Item",Ie.path="/StockItem";var Re=Ie,Pe=a(28),Te=a.n(Pe);function ke(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./BankItem",item:"bank",render:function(e){return r.a.createElement(I,Object.assign({description:ke.description,listname:"Bank"},e))}}))}ke.description="Bank Maintenance",ke.path="/BankMaintenance";var Ae=ke;function Fe(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./BankReceiptItem",item:"bank_receipt",render:function(e){return r.a.createElement(I,Object.assign({description:Fe.description,listname:Fe.description},e))}}))}Fe.description="Bank Receipt",Fe.path="/BankReceipt";var qe=Fe;function Me(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./BankPaymentItem",item:"bank_payment",render:function(e){return r.a.createElement(I,Object.assign({description:Me.description,listname:Me.description},e))}}))}Me.description="Bank Payment",Me.path="/BankPayment";var Ue=Me;function Ve(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./CashReceiptItem",item:"cash_receipt",render:function(e){return r.a.createElement(I,Object.assign({description:Ve.description,listname:Ve.description},e))}}))}Ve.description="Cash Receipt",Ve.path="/CashReceipt";var _e=Ve;function Be(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./CashPaymentItem",item:"cash_payment",render:function(e){return r.a.createElement(I,Object.assign({description:Be.description,listname:Be.description},e))}}))}Be.description="Cash Payment",Be.path="/CashPayment";var Je=Be;function Ge(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(x.a)(o.slice(0,t)),[e],Object(x.a)(o.slice(t+1,o.length))))}return r.a.createElement(_,{inputState:o,changeInputState:i,url:t,item:"bank",successPath:"/BankMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ge.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"bankCode"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankName"},"Bank Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"bankName",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankAddress"},"Bank Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"bankAddress",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankPostcode"},"Bank Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"bankPostcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"}))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Ge.description="Bank Item",Ge.path="/BankItem";var Ye=Ge;function Qe(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank_receipt"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,f=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],g=E.data,h=E.error,N=C(null),v=Object(c.a)(N,2),y=v[0],D=y.data,O=y.error,w=v[1],j=7,L=10,I=11,R=0,P=1,T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(null),M=Object(c.a)(q,2),U=M[0],V=M[1],J=Object(n.useState)(null),G=Object(c.a)(J,2),Y=G[0],Q=G[1],H=Object(n.useState)(null),z=Object(c.a)(H,2),W=z[0],X=z[1],Z=Object(n.useState)(!0),K=Object(c.a)(Z,2),ee=K[0],te=K[1],ae=Object(n.useState)(["","","","","","","","","","",[],[]]),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],oe=Object(n.useContext)(p).changeAuth;function ce(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function ie(e,t){le([].concat(Object(x.a)(re.slice(0,t)),[e],Object(x.a)(re.slice(t+1,re.length))))}function se(){return+re[j]}function me(e){return re[I].reduce((function(t,a){return e===a[R]?t:t-a[P]}),re[L].reduce((function(t,a){return e===a[R]?t:t-a[P]}),se()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):o&&o.data&&o.field&&F(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):d&&d.data&&d.field&&V(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),g&&!1===g.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):g&&g.data&&g.field&&Q(g.data.map((function(e){return r.a.createElement("option",{key:e[g.field[0].name],value:e[g.field[0].name]},(e[g.field[0].name]?e[g.field[0].name]:"")+" | "+(e[g.field[1].name]?e[g.field[1].name]:""))}))),""!==re[8]&&te(!1)}),[o,i,d,u,g,h,re[8]]),Object(n.useEffect)((function(){D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1))}),[D,O]);var de=null;return(o&&o.error||i||d&&d.error||u||g&&g.error||h||D&&D.error||O)&&(de=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Debtor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),g&&g.error?"Bank List RETRIEVAL for item failed errno: "+g.error.errno+" code: "+g.error.code+" message: "+g.error.sqlMessage:null,h?"Bank List RETRIEVAL for item failed "+h:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,O?"Debtor Outstanding List RETRIEVAL for item failed "+O:null)),r.a.createElement(_,{inputState:re,changeInputState:le,url:t,item:"bank_receipt",successPath:"/BankReceipt",paramOutstanding:ce,changeParamOutstanding:w,debtorCreditorNumPosition:2,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Qe.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,de,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==me()&&ee?X(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:ee,disabled:a,id:"isDebtorPayment",onChange:function(e){te(!ee),le([].concat(Object(x.a)(re.slice(0,2)),[""],Object(x.a)(re.slice(3,8)),[""],Object(x.a)(re.slice(9,L)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isDebtorPayment"},"Debtor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!ee},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor")),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:re[2],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:re[2],onChange:function(e){ie(e.target.value,2),w(ce(e.target.value,re[9]))}},r.a.createElement("option",{value:""}," -select an option- "),A))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||ee},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:re[8],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ie(e.target.value,8)}},r.a.createElement("option",{value:""}," -select an option- "),U))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:ie,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"bankCode",value:re[1],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ie(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),Y))),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:re[3],onChange:function(e){return ie(e.target.value,3)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return ie(e.target.value,4)},value:re[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return ie(e.target.value,5)},value:re[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return ie(e.target.value,6)},value:re[6],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return ie(e.target.value,7)},value:re[7],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),ee?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(me()))):null,W,ee?r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Sales Invoice / Debit Note")),r.a.createElement($,{dataSelectOutstanding:D,inputState:re,changeInputState:le,disabled:a,calculateUnappliedAmount:me,calculateTotal:se,offsetPositionOne:L,offsetPositionTwo:I,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:X})):null),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}Qe.description="Bank Receipt",Qe.path="/BankReceiptItem";var He=Qe;function ze(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank_payment"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,f=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank"}),credentials:"include"}}),E=Object(c.a)(f,2),g=E[0],h=g.data,N=g.error,v=(E[1],C(null)),y=Object(c.a)(v,2),D=y[0],O=D.data,w=D.error,j=y[1],L=7,I=10,R=11,P=0,T=1,k=Object(n.useState)(null),A=Object(c.a)(k,2),F=A[0],q=A[1],M=Object(n.useState)(null),U=Object(c.a)(M,2),V=U[0],J=U[1],G=Object(n.useState)(null),Y=Object(c.a)(G,2),Q=Y[0],H=Y[1],z=Object(n.useState)(null),W=Object(c.a)(z,2),X=W[0],Z=W[1],K=Object(n.useState)(!0),ee=Object(c.a)(K,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(["","","","","","","","","","",[],[]]),re=Object(c.a)(ne,2),le=re[0],oe=re[1],ce=Object(n.useContext)(p).changeAuth;function ie(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function se(e,t){oe([].concat(Object(x.a)(le.slice(0,t)),[e],Object(x.a)(le.slice(t+1,le.length))))}function me(){return+le[L]}function de(e){return le[R].reduce((function(t,a){return e===a[P]?t:t-a[T]}),le[I].reduce((function(t,a){return e===a[P]?t:t-a[T]}),me()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):o&&o.data&&o.field&&q(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):d&&d.data&&d.field&&J(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),h&&!1===h.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1)):h&&h.data&&h.field&&H(h.data.map((function(e){return r.a.createElement("option",{key:e[h.field[0].name],value:e[h.field[0].name]},(e[h.field[0].name]?e[h.field[0].name]:"")+" | "+(e[h.field[1].name]?e[h.field[1].name]:""))}))),""!==le[8]&&ae(!1)}),[o,i,d,u,h,N,le[8]]),Object(n.useEffect)((function(){O&&!1===O.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ce(!1))}),[O,w]);var ue=null;return(o&&o.error||i||d&&d.error||u||h&&h.error||N||O&&O.error||w)&&(ue=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Creditor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"Bank List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"Bank List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),O&&O.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+O.error.errno+" code: "+O.error.code+" message: "+O.error.sqlMessage:null,w?"Creditor Outstanding List RETRIEVAL for item failed "+w:null)),r.a.createElement(_,{inputState:le,changeInputState:oe,url:t,item:"bank_payment",successPath:"/BankPayment",paramOutstanding:ie,changeParamOutstanding:j,debtorCreditorNumPosition:2,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ze.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,ue,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==de()&&te?Z(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:te,disabled:a,id:"isCreditorPayment",onChange:function(e){ae(!te),oe([].concat(Object(x.a)(le.slice(0,2)),[""],Object(x.a)(le.slice(3,8)),[""],Object(x.a)(le.slice(9,I)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isCreditorPayment"},"Creditor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!te},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor")),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:le[2],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:le[2],onChange:function(e){se(e.target.value,2),j(ie(e.target.value,le[9]))}},r.a.createElement("option",{value:""}," -select an option- "),F))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||te},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:le[8],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){se(e.target.value,8)}},r.a.createElement("option",{value:""}," -select an option- "),V))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:se,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"bankCode",value:le[1],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){se(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),Q))),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:le[3],onChange:function(e){return se(e.target.value,3)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return se(e.target.value,4)},value:le[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return se(e.target.value,5)},value:le[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return se(e.target.value,6)},value:le[6],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return se(e.target.value,7)},value:le[7],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),te?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(de()))):null,X,te?r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Purchase Invoice / Purchase Debit Note")),r.a.createElement($,{dataSelectOutstanding:O,inputState:le,changeInputState:oe,disabled:a,calculateUnappliedAmount:de,calculateTotal:me,offsetPositionOne:I,offsetPositionTwo:R,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:Z})):null),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}ze.description="Bank Payment",ze.path="/BankPaymentItem";var We=ze;function Xe(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"cash_receipt"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,f=C(null),E=Object(c.a)(f,2),g=E[0],h=g.data,N=g.error,v=E[1],y=6,D=10,O=11,w=0,j=1,L=Object(n.useState)(null),I=Object(c.a)(L,2),R=I[0],P=I[1],T=Object(n.useState)(null),k=Object(c.a)(T,2),A=k[0],F=k[1],q=Object(n.useState)(null),M=Object(c.a)(q,2),U=M[0],V=M[1],J=Object(n.useState)(!0),G=Object(c.a)(J,2),Y=G[0],Q=G[1],H=Object(n.useState)(["","","","","","","","","","",[],[]]),z=Object(c.a)(H,2),W=z[0],X=z[1],Z=Object(n.useContext)(p).changeAuth;function K(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function ee(e,t){X([].concat(Object(x.a)(W.slice(0,t)),[e],Object(x.a)(W.slice(t+1,W.length))))}function te(){return+W[y]}function ae(e){return W[O].reduce((function(t,a){return e===a[w]?t:t-a[j]}),W[D].reduce((function(t,a){return e===a[w]?t:t-a[j]}),te()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Z(!1)):o&&o.data&&o.field&&P(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Z(!1)):d&&d.data&&d.field&&F(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),""!==W[7]&&Q(!1)}),[o,i,d,u,W[7]]),Object(n.useEffect)((function(){h&&!1===h.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Z(!1))}),[h,N]);var ne=null;return(o&&o.error||i||d&&d.error||u||h&&h.error||N)&&(ne=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Debtor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),h&&h.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+h.error.errno+" code: "+h.error.code+" message: "+h.error.sqlMessage:null,N?"Debtor Outstanding List RETRIEVAL for item failed "+N:null)),r.a.createElement(_,{inputState:W,changeInputState:X,url:t,item:"cash_receipt",successPath:"/CashReceipt",paramOutstanding:K,changeParamOutstanding:v,debtorCreditorNumPosition:1,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Xe.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,ne,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==ae()&&Y?V(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:Y,disabled:a,id:"isDebtorPayment",onChange:function(e){Q(!Y),X([].concat(Object(x.a)(W.slice(0,1)),[""],Object(x.a)(W.slice(2,7)),[""],Object(x.a)(W.slice(8,D)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isDebtorPayment"},"Debtor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!Y},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor")),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:W[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:W[1],onChange:function(e){ee(e.target.value,1),v(K(e.target.value,W[9]))}},r.a.createElement("option",{value:""}," -select an option- "),R))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||Y},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:W[7],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ee(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),A))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:ee,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:W[2],onChange:function(e){return ee(e.target.value,2)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return ee(e.target.value,3)},value:W[3],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return ee(e.target.value,4)},value:W[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return ee(e.target.value,5)},value:W[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return ee(e.target.value,6)},value:W[6],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),Y?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(ae()))):null,U,Y?r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Sales Invoice / Debit Note")),r.a.createElement($,{dataSelectOutstanding:h,inputState:W,changeInputState:X,disabled:a,calculateUnappliedAmount:ae,calculateTotal:te,offsetPositionOne:D,offsetPositionTwo:O,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:V})):null),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}Xe.description="Cash Receipt",Xe.path="/CashReceiptItem";var $e=Xe;function Ze(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,2),o=l[0],i=o.data,s=o.error,m=(l[1],C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"cash_payment"}),credentials:"include"}})),d=Object(c.a)(m,2),u=d[0],f=u.data,E=u.error,g=(d[1],C(null)),h=Object(c.a)(g,2),N=h[0],v=N.data,y=N.error,D=h[1],O=6,w=10,j=11,L=0,I=1,R=Object(n.useState)(null),P=Object(c.a)(R,2),T=P[0],k=P[1],A=Object(n.useState)(null),F=Object(c.a)(A,2),q=F[0],M=F[1],U=Object(n.useState)(null),V=Object(c.a)(U,2),J=V[0],G=V[1],Y=Object(n.useState)(!0),Q=Object(c.a)(Y,2),H=Q[0],z=Q[1],W=Object(n.useState)(["","","","","","","","","","",[],[]]),X=Object(c.a)(W,2),Z=X[0],K=X[1],ee=Object(n.useContext)(p).changeAuth;function te(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function ae(e,t){K([].concat(Object(x.a)(Z.slice(0,t)),[e],Object(x.a)(Z.slice(t+1,Z.length))))}function ne(){return+Z[O]}function re(e){return Z[j].reduce((function(t,a){return e===a[L]?t:t-a[I]}),Z[w].reduce((function(t,a){return e===a[L]?t:t-a[I]}),ne()))}Object(n.useEffect)((function(){i&&!1===i.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ee(!1)):i&&i.data&&i.field&&k(i.data.map((function(e){return r.a.createElement("option",{key:e[i.field[0].name],value:e[i.field[0].name]},e[i.field[0].name]+" | "+(e[i.field[1].name]?e[i.field[1].name]:""))}))),f&&!1===f.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ee(!1)):f&&f.data&&f.field&&M(f.data.map((function(e){return r.a.createElement("option",{key:e[f.field[0].name],value:e[f.field[0].name]},(e[f.field[0].name]?e[f.field[0].name]:"")+" | "+(e[f.field[1].name]?e[f.field[1].name]:""))}))),""!==Z[7]&&z(!1)}),[i,s,f,E,Z[7]]),Object(n.useEffect)((function(){v&&!1===v.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ee(!1))}),[v,y]);var le=null;return(i&&i.error||s||f&&f.error||E||v&&v.error||y)&&(le=r.a.createElement("div",{className:"alert alert-warning"},i&&i.error?"Creditor List RETRIEVAL for item failed errno: "+i.error.errno+" code: "+i.error.code+" message: "+i.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),f&&f.error?"GL Code List RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"GL Code List RETRIEVAL for item failed "+E:null,r.a.createElement("br",null),r.a.createElement("br",null),v&&v.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+v.error.errno+" code: "+v.error.code+" message: "+v.error.sqlMessage:null,y?"Creditor Outstanding List RETRIEVAL for item failed "+y:null)),r.a.createElement(_,{inputState:Z,changeInputState:K,url:t,item:"cash_payment",successPath:"/CashPayment",paramOutstanding:te,changeParamOutstanding:D,debtorCreditorNumPosition:1,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ze.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,le,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==re()&&H?G(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:H,disabled:a,id:"isCreditorPayment",onChange:function(e){z(!H),K([].concat(Object(x.a)(Z.slice(0,1)),[""],Object(x.a)(Z.slice(2,7)),[""],Object(x.a)(Z.slice(8,w)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isCreditorPayment"},"Creditor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!H},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor")),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:Z[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:Z[1],onChange:function(e){ae(e.target.value,1),D(te(e.target.value,Z[9]))}},r.a.createElement("option",{value:""}," -select an option- "),T))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||H},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:Z[7],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ae(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),q))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:ae,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:Z[2],onChange:function(e){return ae(e.target.value,2)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return ae(e.target.value,3)},value:Z[3],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return ae(e.target.value,4)},value:Z[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return ae(e.target.value,5)},value:Z[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return ae(e.target.value,6)},value:Z[6],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),H?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+S(re()))):null,J,H?r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-10 offset-1 col-md-4 offset-md-4 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," Purchase Invoice / Purchase Debit Note")),r.a.createElement($,{dataSelectOutstanding:v,inputState:Z,changeInputState:K,disabled:a,calculateUnappliedAmount:re,calculateTotal:ne,offsetPositionOne:w,offsetPositionTwo:j,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:G})):null),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}Ze.description="Cash Payment",Ze.path="/CashPaymentItem";var Ke=Ze,et=a(29),tt=a.n(et);function at(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./DebtorItem",item:"debtor",render:function(e){return r.a.createElement(I,Object.assign({description:at.description,listname:"Debtor"},e))}}))}at.description="Debtor Maintenance",at.path="/DebtorMaintenance";var nt=at,rt=a(4),lt=a.n(rt);var ot=function(e){var t=e.resultInput,a=t.currDate,n=t.debtorID,l=t.agingMonths,o=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),o.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" as at "+j(e.resultInput.currDate)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},"Debtor No."),r.a.createElement("th",{className:"align-top"},"Name"),e.withDetails?r.a.createElement("th",null):null,e.withDetails?r.a.createElement("th",null):null,r.a.createElement("th",{className:"align-top"},"Current"),e.populateTableMonthsHeader(e.resultInput.agingMonths),r.a.createElement("th",{className:"align-top"},"> "+e.resultInput.agingMonths+" Month"),r.a.createElement("th",{className:"align-top"},"Total Overdue"),r.a.createElement("th",{className:"align-top"},"Balance")),e.withDetails?r.a.createElement("tr",{className:"border-bottom border-secondary text-secondary"},r.a.createElement("th",{className:"align-top"},"Doc No."),r.a.createElement("th",{className:"align-top"},"Doc Date"),r.a.createElement("th",{className:"align-top"},"Type"),r.a.createElement("th",{className:"align-top"},"Due Date"),r.a.createElement("th",{colSpan:4+e.resultInput.agingMonths})):null,e.withDetails?r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-secondary",colSpan:8+e.resultInput.agingMonths})):r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-top border-secondary",colSpan:6+e.resultInput.agingMonths}))),function(t,a,n){var l=e.dataSelectDebtorAging.data,o=e.dataSelectDebtorAging.field,c=o[0].name,i=o[1].name,s=o[2].name,m=o[3].name,d=o[4].name,u=o[5].name,p=o[6].name,f=[],E=[];return l.forEach((function(o){-1!==a.indexOf(o[c])&&-1===f.indexOf(o[c])&&(f.push(o[c]),E.push(r.a.createElement("tbody",{key:o[c],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},o[c]),r.a.createElement("th",{className:"align-top"},o[i]),e.withDetails?r.a.createElement("th",null):null,e.withDetails?r.a.createElement("th",null):null,r.a.createElement("th",{className:"align-top"},S(l.reduce((function(a,n){return n[c]===o[c]&&new Date(n[m])<=new Date(t)&&e.calculateAgingCurrentAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u])?a+n[u]:a}),0))),e.populateMonthsAmount(t,o[c],Number(n),"table"),r.a.createElement("th",{className:"align-top"},S(l.reduce((function(a,r){return r[c]===o[c]&&e.calculateAgingRemainderAmount(t,r[p]&&"COD"!==r[p]?e.getFormattedDate(new Date(new Date(r[m]).setDate(new Date(r[m]).getDate()+Number(r[p])))):r[m],r[u],Number(n))?a+r[u]:a}),0))),r.a.createElement("th",{className:"align-top"},S(l.reduce((function(e,a){return a[c]===o[c]&&new Date(a[m])<=new Date(t)?e+a[u]:e}),0)-l.reduce((function(a,n){return n[c]===o[c]&&new Date(n[m])<=new Date(t)&&e.calculateAgingCurrentAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u])?a+n[u]:a}),0))),r.a.createElement("th",{className:"align-top"},S(l.reduce((function(e,a){return a[c]===o[c]&&new Date(a[m])<=new Date(t)?e+a[u]:e}),0)))),e.withDetails?l.map((function(a,l){return a[c]===o[c]&&new Date(a[m])<=new Date(t)?r.a.createElement("tr",{key:a[s]},r.a.createElement("td",{className:"align-top"},a[s]),r.a.createElement("td",{className:"align-top"},j(a[m])),r.a.createElement("td",{className:"align-top"},a[d]),r.a.createElement("td",{className:"align-top"},a[p]&&"COD"!==a[p]?j(e.getFormattedDate(new Date(new Date(a[m]).setDate(new Date(a[m]).getDate()+Number(a[p]))))):j(a[m])),r.a.createElement("td",{className:"align-top"},S(e.calculateAgingCurrentAmount(t,a[p]&&"COD"!==a[p]?e.getFormattedDate(new Date(new Date(a[m]).setDate(new Date(a[m]).getDate()+Number(a[p])))):a[m],a[u]))),e.populateTableMonthsAmount(t,a[p]&&"COD"!==a[p]?e.getFormattedDate(new Date(new Date(a[m]).setDate(new Date(a[m]).getDate()+Number(a[p])))):a[m],a[u],Number(n)),r.a.createElement("td",{className:"align-top"},S(e.calculateAgingRemainderAmount(t,a[p]&&"COD"!==a[p]?e.getFormattedDate(new Date(new Date(a[m]).setDate(new Date(a[m]).getDate()+Number(a[p])))):a[m],a[u],Number(n)))),r.a.createElement("td",{className:"align-top"}),r.a.createElement("td",{className:"align-top"})):null})):null)))})),E}(a,n,l)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function ct(e){var t,a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=C({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor_aging"}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,f=d.error,E=Object(n.useState)(null),g=Object(c.a)(E,2),h=g[0],N=g[1],v=Object(n.useState)(ae(new Date)),y=Object(c.a)(v,2),x=y[0],O=y[1],w=Object(n.useState)([]),L=Object(c.a)(w,2),I=L[0],R=L[1],P=Object(n.useState)(3),T=Object(c.a)(P,2),k=T[0],A=T[1],F=Object(n.useState)(null),q=Object(c.a)(F,2),M=q[0],U=q[1],V=Object(n.useState)([]),_=Object(c.a)(V,2),B=_[0],J=_[1],G=Object(n.useState)(!1),Y=Object(c.a)(G,2),Q=Y[0],H=Y[1],z=Object(n.useState)(!1),W=Object(c.a)(z,2),X=W[0],$=W[1],Z=Object(i.h)().path,K=Object(n.useContext)(p).changeAuth,ee=Object(i.g)(),te=M&&M.agingMonths?714+90*M.agingMonths:"auto";function ae(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function ne(e,t,a,n){for(var l=[],o=u.data,c=u.field,i=c[0].name,s=c[3].name,m=c[5].name,d=c[6].name,p=function(a){var c=o.reduce((function(n,r){return r[i]===t&&ce(e,r[d]&&"COD"!==r[d]?ae(new Date(new Date(r[s]).setDate(new Date(r[s]).getDate()+Number(r[d])))):r[s],r[m],a)?n+r[m]:n}),0);"table"!==n?l.push(r.a.createElement("p",{className:"mb-0",key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},c?S(c):"")):l.push(r.a.createElement("th",{className:"align-top",key:a},c?S(c):""))},f=1;f<+a+1;f++)p(f);return l}function re(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("th",{key:a,className:"text-nowrap align-top"},a+" Month"));return t}function le(e,t,a,n){for(var l=[],o=1;o<+n+1;o++)l.push(r.a.createElement("td",{className:"text-nowrap align-top",key:o},S(ce(e,t,a,o))));return l}function oe(e,t,a){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1,0)?a:""}function ce(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1+n,0)&&e>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n,0)?a:""}function ie(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n+1,0)?a:""}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),K(!1)):o&&o.data&&o.field&&N(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" "+(e[o.field[1].name]?e[o.field[1].name]:""))})))}),[o,s]),Object(n.useEffect)((function(){u&&!1===u.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),K(!1))}),[u,f]),Object(n.useEffect)((function(){B&&B.forEach((function(e){lt()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),lt()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[M]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(o&&o.error||s||u&&u.error||f)&&r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Debtor Aging RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,f?"Debtor Aging RETRIEVAL for item failed "+f:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Z,"/Preview")},M?r.a.createElement(ot,{backPath:ct.path,description:ct.description,resultInput:M,withDetails:Q,dataSelectDebtorAging:u,populateTableMonthsHeader:re,populateTableMonthsAmount:le,calculateAgingCurrentAmount:oe,populateMonthsAmount:ne,calculateAgingRemainderAmount:ie,getFormattedDate:ae}):r.a.createElement(i.a,{to:ct.path})),r.a.createElement(i.b,{exact:!0,path:Z},r.a.createElement(b,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,ct.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),$(!1),U({currDate:x,debtorID:I,agingMonths:k}),J(I.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"date"},"Date"),r.a.createElement("input",(t={type:"date",id:"date",required:!0,onChange:function(e){return O(e.target.value)},value:x},Object(D.a)(t,"required",!0),Object(D.a)(t,"className","form-control col-md-2 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"agingMonths"},"Aging Month(s)"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-md-2",required:!0,value:k,onChange:function(e){return A(e.target.value)}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,size:"3",value:I,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),R(t)}},h)),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("div",{className:"form-check offset-md-2"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"allDebtorID",onChange:function(e){e.target.checked?R(o.data.map((function(e){return e[o.field[0].name]}))):R([])}}),r.a.createElement("label",{htmlFor:"allDebtorID",style:{paddingLeft:0},className:"form-check-label"},"All Debtor ID"))),r.a.createElement("fieldset",{className:"form-group pb-3 border border-secondary rounded col-md-6"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"witDetails",onChange:function(e){e.target.checked?H(!0):H(!1)},checked:Q}),r.a.createElement("label",{htmlFor:"witDetails",className:"form-check-label"},"With Details"))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return U(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){M?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),ee.push("./DebtorAgingReport/Preview")):$(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),X?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),M?r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{transform:"rotateX(180deg)"}},r.a.createElement("h5",{className:"py-2"},"Result"),r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0,width:te}},r.a.createElement("h6",{style:{flex:"1 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Debtor No."),r.a.createElement("h6",{style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Name"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Current"),function(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("h6",{key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},a+" Month"));return t}(M.agingMonths),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"> "+M.agingMonths+" Month"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Total Overdue"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Balance")),function(e,t,a){var n=u.data,l=u.field,o=l[0].name,c=l[1].name,i=l[2].name,s=l[3].name,m=l[4].name,d=l[5].name,p=l[6].name,f=[],E=[];return n.forEach((function(l){-1!==t.indexOf(l[o])&&-1===f.indexOf(l[o])&&(f.push(l[o]),E.push(r.a.createElement("div",{key:l[o]},r.a.createElement("div",{className:"d-flex",style:{width:te,cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+l[o].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1",style:{flex:"1 0 14px",paddingLeft:10,paddingRight:10},id:"plusminus"+l[o].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},l[o]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},l[c]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},S(n.reduce((function(t,a){return a[o]===l[o]&&new Date(a[s])<=new Date(e)&&oe(e,a[p]&&"COD"!==a[p]?ae(new Date(new Date(a[s]).setDate(new Date(a[s]).getDate()+Number(a[p])))):a[s],a[d])?t+a[d]:t}),0))),ne(e,l[o],Number(a)),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},S(n.reduce((function(t,n){return n[o]===l[o]&&ie(e,n[p]&&"COD"!==n[p]?ae(new Date(new Date(n[s]).setDate(new Date(n[s]).getDate()+Number(n[p])))):n[s],n[d],Number(a))?t+n[d]:t}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},S(n.reduce((function(t,a){return a[o]===l[o]&&new Date(a[s])<=new Date(e)?t+a[d]:t}),0)-n.reduce((function(t,a){return a[o]===l[o]&&new Date(a[s])<=new Date(e)&&oe(e,a[p]&&"COD"!==a[p]?ae(new Date(new Date(a[s]).setDate(new Date(a[s]).getDate()+Number(a[p])))):a[s],a[d])?t+a[d]:t}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},S(n.reduce((function(t,a){return a[o]===l[o]&&new Date(a[s])<=new Date(e)?t+a[d]:t}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",style:{width:te},id:l[o].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{id:"table",className:"table-dark table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"Doc No."),r.a.createElement("th",{className:"text-nowrap"},"Doc Date"),r.a.createElement("th",{className:"text-nowrap"},"Type"),r.a.createElement("th",{className:"text-nowrap"},"Due Date"),r.a.createElement("th",{className:"text-nowrap"},"Current"),re(a),r.a.createElement("th",{className:"text-nowrap"},"> "+a+" Month"))),r.a.createElement("tbody",null,n.map((function(t,n){return t[o]===l[o]&&new Date(t[s])<=new Date(e)?r.a.createElement("tr",{key:t[i],style:{cursor:"pointer"},onClick:function(e){return ee.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(t[m].toLowerCase(),t[i]))}},r.a.createElement("td",{className:"text-nowrap"},t[i]),r.a.createElement("td",{className:"text-nowrap"},j(t[s])),r.a.createElement("td",{className:"text-nowrap"},t[m]),r.a.createElement("td",{className:"text-nowrap"},t[p]&&"COD"!==t[p]?j(ae(new Date(new Date(t[s]).setDate(new Date(t[s]).getDate()+Number(t[p]))))):j(t[s])),r.a.createElement("td",{className:"text-nowrap"},S(oe(e,t[p]&&"COD"!==t[p]?ae(new Date(new Date(t[s]).setDate(new Date(t[s]).getDate()+Number(t[p])))):t[s],t[d]))),le(e,t[p]&&"COD"!==t[p]?ae(new Date(new Date(t[s]).setDate(new Date(t[s]).getDate()+Number(t[p])))):t[s],t[d],Number(a)),r.a.createElement("td",{className:"text-nowrap"},S(ie(e,t[p]&&"COD"!==t[p]?ae(new Date(new Date(t[s]).setDate(new Date(t[s]).getDate()+Number(t[p])))):t[s],t[d],Number(a))))):null}))))))))})),E}(M.currDate,M.debtorID,M.agingMonths))):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:ct.path}))}ct.description="Debtor Aging Report",ct.path="/DebtorAgingReport";var it=ct;var st=function(e){var t,a=Object(i.g)(),n=e.topLeftInput?e.topLeftInput.map((function(e,t){return r.a.createElement("p",{className:"my-2",key:t},e)})):null,l=e.topRightField&&e.topRightInput?e.topRightField.map((function(t,a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"col-5 h6"},t),r.a.createElement("div",{className:"col-1"},":"),r.a.createElement("div",{className:"col-5 h6"},e.topRightInput[a]))})):null;function o(e,t){for(var a=[],n=t+1;n<+e+1;n++)a.push(r.a.createElement("th",{key:n,className:"text-nowrap text-center"},n+" Month"));return a}function c(e,t){for(var a=[],n=t+1;n<+e+1;n++)a.push(r.a.createElement("td",{key:n,className:"text-nowrap text-center"},S(s(n))));return a}function s(t){var a=e.data,n=e.field,r=n[0].name,l=n[4].name,o=n[5].name;return a.reduce((function(a,n){var c=new Date(new Date(e.dateEnd).getFullYear(),new Date(e.dateEnd).getMonth(),new Date(e.dateEnd).getDate(),0),i=new Date(new Date(n[r]).getFullYear(),new Date(n[r]).getMonth(),new Date(n[r]).getDate(),0);return i<=new Date(c.getFullYear(),Number(c.getMonth())+1-t,0)&&i>new Date(c.getFullYear(),Number(c.getMonth())-t,0)?n[l]?a+n[l]:a-n[o]:a}),0)}function m(t){for(var a,n,r=0,l=+t+1;l<(a=new Date(e.dateStartForAging),(n=new Date(e.dateEnd)).getMonth()-a.getMonth()+12*(n.getFullYear()-a.getFullYear())+1);l++)r+=s(l);return r+e.dbBroughtForwardAmount}return r.a.createElement("div",{className:"container py-5",style:{maxWidth:800}},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),a.push(e.backPath)}},"Back"),r.a.createElement("div",{className:"jumbotron",style:{padding:0}},r.a.createElement("h3",{className:"text-center"},e.description)),r.a.createElement("div",{className:"row",style:{margin:0}},r.a.createElement("div",{className:"col-6 jumbotron h6 py-4",style:{marginBottom:0}},n),r.a.createElement("div",{className:"col-6 py-4"},l)),r.a.createElement("hr",null),e.populateDebtor(!0),r.a.createElement("h6",{className:"text-center"},"Aged Analysis"),(t=e.agingMonths,r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap text-center"},"Current"),o(t<=6?t:6,0),t<=6?r.a.createElement("th",{className:"text-nowrap text-center"},"> "+t+" Month"):null)),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-nowrap text-center"},S(s(0))),c(t<=6?t:6,0),t<=6?r.a.createElement("td",{className:"text-nowrap text-center"},S(m(t))):null)),r.a.createElement("thead",null,r.a.createElement("tr",null,t<=6?null:o(t,6),t<=6?null:r.a.createElement("th",{className:"text-nowrap text-center"},"> "+t+" Month"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,t<=6?null:c(t,6),t<=6?null:r.a.createElement("td",{className:"text-nowrap text-center"},S(m(t))))))))};function mt(e){var t,a,l=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=C(null),u=Object(c.a)(d,2),f=u[0],E=f.data,g=f.error,h=u[1],N=Object(n.useState)(null),v=Object(c.a)(N,2),y=v[0],O=v[1],w=Object(n.useState)(""),L=Object(c.a)(w,2),I=L[0],R=L[1],P=Object(n.useState)((new Date).getFullYear()+"-01-01"),T=Object(c.a)(P,2),k=T[0],A=T[1],F=Object(n.useState)(oe(new Date)),q=Object(c.a)(F,2),M=q[0],U=q[1],V=Object(n.useState)({}),_=Object(c.a)(V,2),B=_[0],J=_[1],G=12,Y=Object(n.useState)(6),Q=Object(c.a)(Y,2),H=Q[0],z=Q[1],W=Object(n.useState)(null),X=Object(c.a)(W,2),$=X[0],Z=X[1],K=Object(n.useState)(!1),ee=Object(c.a)(K,2),te=ee[0],ae=ee[1],ne=Object(i.h)().path,re=Object(n.useContext)(p).changeAuth,le=Object(i.g)();function oe(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function ce(e,t){return new Date(e)<new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1)?e:oe(new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1))}function ie(e){var t=B.data[0][0][B.field[0][0].name],a=B.data[1],n=B.field[1],l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=a.reduce((function(e,t){return new Date(t[l])<new Date(B.dateStart)?t[s]?e+t[s]:e-t[m]:e}),0)+t;return r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"Date"),r.a.createElement("th",{className:"text-nowrap"},"Doc No."),r.a.createElement("th",{className:"text-nowrap"},"Ref."),r.a.createElement("th",{className:"text-nowrap"},"Type"),r.a.createElement("th",{className:"text-nowrap"},"Dr"),r.a.createElement("th",{className:"text-nowrap"},"Cr"),r.a.createElement("th",{className:"text-nowrap"},"Balance"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6"},"B/F"),r.a.createElement("td",null,S(d))),a.map((function(t,a){if(new Date(t[l])>=new Date(B.dateStart)&&new Date(t[l])<=new Date(B.dateEnd))return t[s]&&(d+=t[s]),t[m]&&(d-=t[m]),r.a.createElement("tr",{key:a,style:e?null:{cursor:"pointer"},onClick:function(a){e?a.preventDefault():le.push("/"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(t[i].toLowerCase(),t[o]))}},r.a.createElement("td",{className:"text-nowrap"},j(t[l])),r.a.createElement("td",{className:"text-nowrap"},t[o]),r.a.createElement("td",{className:"text-nowrap"},t[c]),r.a.createElement("td",{className:"text-nowrap"},t[i]),r.a.createElement("td",{className:"text-nowrap"},S(t[s])),r.a.createElement("td",{className:"text-nowrap"},S(t[m])),r.a.createElement("td",{className:"text-nowrap"},S(d)))})))),e?r.a.createElement("p",{className:"h5 text-right jumbotron py-2"},r.a.createElement("span",null,"Account Balance: "),r.a.createElement("span",null,S(d))):null)}Object(n.useEffect)((function(){s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),re(!1)):s&&s.data&&s.field&&O(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" "+(e[s.field[1].name]?e[s.field[1].name]:""))})))}),[s,m]),Object(n.useEffect)((function(){E&&!1===E.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),re(!1)):E&&E.data&&E.field&&J({data:E.data,field:E.field,dateStart:k,dateEnd:M,debtorID:I})}),[E,g]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(s&&s.error||m||E&&E.error||g)&&r.a.createElement("div",{className:"alert alert-warning"},s&&s.error?"Debtor List RETRIEVAL for item failed errno: "+s.error.errno+" code: "+s.error.code+" message: "+s.error.sqlMessage:null,m?"Debtor List RETRIEVAL for item failed "+m:null,r.a.createElement("br",null),r.a.createElement("br",null),E&&E.error?"Debtor Statement RETRIEVAL for item failed errno: "+E.error.errno+" code: "+E.error.code+" message: "+E.error.sqlMessage:null,g?"Debtor Statement RETRIEVAL for item failed "+g:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(ne,"/Preview")},B.data?r.a.createElement(st,{backPath:mt.path,description:"Debtor Statement",topLeftInput:Object(x.a)($.slice(0,2)),topRightField:["Statement Date","Credit Term"],topRightInput:[j(B.dateStart)+" to "+j(B.dateEnd),"COD"===$[2]?"C.O.D.":$[2]+" days"],populateDebtor:ie,data:B.data[1],field:B.field[1],dateEnd:B.dateEnd,agingMonths:H,dateStartForAging:ce(B.dateStart,B.dateEnd),dbBroughtForwardAmount:B.data[0][0][B.field[0][0].name]}):r.a.createElement(i.a,{to:mt.path})),r.a.createElement(i.b,{exact:!0,path:ne},r.a.createElement(b,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,mt.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ae(!1),h({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor_statement",param:[ce(k,M),M,I]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(M)?(alert("Invalid Date Start Entry"),A((new Date).getFullYear()+"-01-01")):A(e.target.value)},value:k},Object(D.a)(t,"required",!0),Object(D.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(k)?(alert("Invalid Date End Entry"),U(oe(new Date))):U(e.target.value)},value:M},Object(D.a)(a,"required",!0),Object(D.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,value:I,onChange:function(e){var t="",a="",n="";s.data.forEach((function(r){r[s.field[0].name]===e.target.value&&(t=r[s.field[1].name]?r[s.field[1].name]:"",a=r[s.field[2].name]?r[s.field[2].name]:"",n=r[s.field[7].name]?r[s.field[7].name]:"")})),R(e.target.value),Z([t,a,n])}},r.a.createElement("option",{value:""}," -select an option- "),y)),r.a.createElement("fieldset",{className:"form-group form-row pb-3 border border-secondary rounded col-md-6 mx-0"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"col-md-12 form-row"},r.a.createElement("label",{className:"col-6 col-md-4 col-form-label",htmlFor:"agingMonths"},"Aging Months"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-3 col-md-2",required:!0,value:H,onChange:function(e){return z(e.target.value)}},r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"9"},"9"),r.a.createElement("option",{value:"12"},"12")))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return J({})}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){B.data?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),le.push("./DebtorStatementReport/Preview")):ae(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),te?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),B.data?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result"),ie()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:mt.path}))}mt.description="Debtor Statement Report",mt.path="/DebtorStatementReport";var dt=mt;function ut(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Debtor Collection Report"))}ut.description="Debtor Collection Report",ut.path="/DebtorCollectionReport";var pt=ut;function ft(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","COD","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(x.a)(o.slice(0,t)),[e],Object(x.a)(o.slice(t+1,o.length))))}return r.a.createElement(_,{inputState:o,changeInputState:i,url:t,item:"debtor",successPath:"/DebtorMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ft.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"debtorNumber"},"Debtor Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"debtorNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"name"},"Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"address"},"Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"address",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"postcode"},"Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"postcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"phone"},"Phone ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"phone",maxLength:"15",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"fax"},"Fax"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"fax",maxLength:"15",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"creditTerm"},"Credit Term"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{id:"creditTerm",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"otherDesc"},"Other Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"otherDesc",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"}))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}ft.description="Debtor Item",ft.path="/DebtorItem";var Et=ft,gt=a(30),bt=a.n(gt);function ht(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./CreditorItem",item:"creditor",render:function(e){return r.a.createElement(I,Object.assign({description:ht.description,listname:"Creditor"},e))}}))}ht.description="Creditor Maintenance",ht.path="/CreditorMaintenance";var Nt=ht;function vt(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Creditor Aging Report"))}vt.description="Creditor Aging Report",vt.path="/CreditorAgingReport";var yt=vt;function xt(e){return r.a.createElement(b,null,r.a.createElement("h1",null,"Creditor Balance Report"))}xt.description="Creditor Balance Report",xt.path="/CreditorBalanceReport";var Dt=xt;function Ot(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","COD","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(x.a)(o.slice(0,t)),[e],Object(x.a)(o.slice(t+1,o.length))))}return r.a.createElement(_,{inputState:o,changeInputState:i,url:t,item:"creditor",successPath:"/CreditorMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ot.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"creditorNumber"},"Creditor Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"creditorNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"name"},"Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"address"},"Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"address",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"postcode"},"Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"postcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"phone"},"Phone ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"phone",maxLength:"15",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"fax"},"Fax"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"fax",maxLength:"15",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"creditTerm"},"Credit Term"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{id:"creditTerm",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"otherDesc"},"Other Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"otherDesc",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"}))),r.a.createElement(B,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Ot.description="Creditor Item",Ot.path="/CreditorItem";var Ct=Ot,wt=a(31),St=a.n(wt);function jt(e){var t,a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}),l=Object(c.a)(a,2),o=l[0],i=o.data,s=o.error,m=l[1],d=Object(n.useState)(null),u=Object(c.a)(d,2),f=u[0],E=u[1],g=Object(n.useState)(null),h=Object(c.a)(g,2),N=h[0],v=h[1],y=Object(n.useState)(null),O=Object(c.a)(y,2),w=O[0],S=O[1],j=Object(n.useState)(["","",""]),L=Object(c.a)(j,2),I=L[0],R=L[1],P=Object(n.useState)(["","","",""]),T=Object(c.a)(P,2),k=T[0],A=T[1],F=Object(n.useState)(null),q=Object(c.a)(F,2),M=q[0],U=q[1],V=Object(n.useState)([]),_=Object(c.a)(V,2),B=_[0],J=_[1],G=C(null),Y=Object(c.a)(G,2),Q=Y[0],H=Q.data,z=Q.error,W=Y[1],X=C(null),$=Object(c.a)(X,2),Z=$[0],K=Z.data,ee=Z.error,te=$[1],ae=C(null),ne=Object(c.a)(ae,2),re=ne[0],le=re.data,oe=re.error,ce=ne[1],ie=Object(n.useContext)(p).changeAuth;function se(e,t){R([].concat(Object(x.a)(I.slice(0,t)),[e],Object(x.a)(I.slice(t+1))))}function me(e,t){A([].concat(Object(x.a)(k.slice(0,t)),[e],Object(x.a)(k.slice(t+1))))}Object(n.useEffect)((function(){i&&!1===i.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):i&&i.data&&i.field&&U(function(e,t){var a=t[0].name,n=t[1].name,l=t[2].name,o=t[3].name,c=[],i=[];return e.forEach((function(t){-1===c.indexOf(t[a])&&(c.push(t[a]),i.push(r.a.createElement("div",{key:t[a]},r.a.createElement("div",{className:"row py-1 bg-dark text-white",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+t[a].replace(/[ ._()]/g,"")},r.a.createElement("p",{className:"col-1"},r.a.createElement("i",{id:"plusminus"+t[a].replace(/[ ._()]/g,""),className:"fa fa-plus-square mt-1 text-white"})),r.a.createElement("p",{className:"col"},t[a])),r.a.createElement("div",{className:"collapse navbar-collapse bg-secondary",style:{marginLeft:"-15px",marginRight:"-15px"},id:t[a].replace(/[ ._()]/g,"")},e.map((function(e,c){if(e[a]===t[a])return r.a.createElement("div",{className:"row py-1 border-bottom border-white text-white",style:{margin:0},key:e[n]},r.a.createElement("div",{className:"offset-1 col-5 col-lg-7"},e[l]),r.a.createElement("p",{className:"col-3 col-lg-2"},e[n]),"NORMAL"===e[o]?r.a.createElement("div",{className:"col-3 col-lg-2"},r.a.createElement("button",{className:"btn btn-info",onClick:function(t){te({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",id:e[n]}),credentials:"include"}})}},"Del")):null)}))))))})),E(c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),v(e.map((function(e){if("NORMAL"===e[o])return r.a.createElement("option",{key:e[n]?e[n]:Math.random(),value:e[n]},e[n]+" | "+e[l])}))),J(c.map((function(e){return e.replace(/[ ._()]/g,"")}))),S(e.map((function(e){return e[n]+""}))),i}(i.data[0],i.field[0]))}),[i,s]),Object(n.useEffect)((function(){H&&!1===H.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):H&&!H.error&&(alert("Insert Successful!"),R(["","",""]),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[H,z]),Object(n.useEffect)((function(){le&&!1===le.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):le&&!le.error&&(alert("Update Successful!"),A(["","","",""]),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[le,oe]),Object(n.useEffect)((function(){K&&!1===K.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ie(!1)):K&&!K.error&&(alert("Delete Successful!"),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[K,ee]),Object(n.useEffect)((function(){B&&M&&B.forEach((function(e){lt()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),lt()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[M]);var de=null;return(i&&i.error||s||H&&H.error||z||le&&le.error||oe||K&&K.error||ee)&&(de=r.a.createElement("div",{className:"alert alert-warning"},i&&i.error?"Account List RETRIEVAL for item failed errno: "+i.error.errno+" code: "+i.error.code+" message: "+i.error.sqlMessage:null,s?"Account List RETRIEVAL for item failed "+s:null,H&&H.error?"Data INSERT for item failed errno: "+H.error.errno+" code: "+H.error.code+" message: "+H.error.sqlMessage:null,z?"Data INSERT for item failed "+z:null,le&&le.error?"Data UPDATE for item failed errno: "+le.error.errno+" code: "+le.error.code+" message: "+le.error.sqlMessage:null,oe?"Data UPDATE for item failed "+oe:null,K&&K.error?"Data DELETE for item failed errno: "+K.error.errno+" code: "+K.error.code+" message: "+K.error.sqlMessage:null,ee?"Data DELETE for item failed "+ee:null)),r.a.createElement(b,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Account Maintenance"),de,r.a.createElement("section",{className:"container px-0"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:function(e){e.preventDefault(),-1!==w.indexOf(I[1])&&alert("Account Code Already Exist! Please amend"),W({url:"./InsertItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",param:I}),credentials:"include"}})}},r.a.createElement("fieldset",{className:"px-3 form-group border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Create Account")),r.a.createElement("label",{className:"mt-3",htmlFor:"createGLCategory"},"GL Category"),r.a.createElement("select",{id:"createGLCategory",required:!0,className:"form-control",onChange:function(e){se(e.target.value,0)}},r.a.createElement("option",{value:""}," -select an option- "),f),r.a.createElement("label",{htmlFor:"accountCode",className:"mt-3"},"Account Code"),r.a.createElement("input",{id:"accountCode",type:"number",required:!0,min:"100",max:"999",className:"form-control",value:I[1],onChange:function(e){return se(e.target.value,1)}}),r.a.createElement("label",{htmlFor:"createDescription",className:"mt-3"},"Description"),r.a.createElement("input",(t={id:"createDescription",type:"text",required:!0,maxLength:"45"},Object(D.a)(t,"required",!0),Object(D.a)(t,"className","form-control"),Object(D.a)(t,"value",I[2]),Object(D.a)(t,"onChange",(function(e){return se(e.target.value,2)})),t)),r.a.createElement("button",{type:"submit",className:"btn btn-success text-white mt-3"},"Create"))),r.a.createElement("form",{className:"col-md-6",onSubmit:function(e){e.preventDefault(),-1!==w.indexOf(k[2])&&k[2]!==k[0]&&alert("Account Code Already Exist! Please amend"),ce({url:"./UpdateItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",param:k}),credentials:"include"}})}},r.a.createElement("fieldset",{className:"px-3 form-group border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Update Account")),r.a.createElement("label",{className:"mt-3",htmlFor:"existingGLCode"},"Existing GL Code"),r.a.createElement("select",{id:"existingGLCode",required:!0,className:"form-control",value:k[0],onChange:function(e){var t="",a="";i.data[0].forEach((function(n){n[i.field[0][1].name]+""===e.target.value&&(t=n[i.field[0][0].name]?n[i.field[0][0].name]:"",a=n[i.field[0][2].name]?n[i.field[0][2].name]:"")})),A([e.target.value,t,e.target.value,a])}},r.a.createElement("option",{value:""}," -select an option- "),N),r.a.createElement("label",{className:"mt-3",htmlFor:"updateGLCategory"},"GL Category"),r.a.createElement("select",{id:"updateGLCategory",required:!0,className:"form-control",value:k[1],onChange:function(e){me(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),f),r.a.createElement("label",{htmlFor:"newAccountCode",className:"mt-3"},"New Account Code"),r.a.createElement("input",{id:"newAccountCode",type:"number",required:!0,min:"100",max:"999",className:"form-control",value:k[2],onChange:function(e){me(e.target.value,2)}}),r.a.createElement("label",{htmlFor:"updateDescription",className:"mt-3"},"Description"),r.a.createElement("input",{id:"updateDescription",type:"text",required:!0,maxLength:"45",className:"form-control",value:k[3],onChange:function(e){me(e.target.value,3)}}),r.a.createElement("button",{type:"submit",className:"btn btn-warning text-white mt-3"},"Update"))))),r.a.createElement("section",{className:"container my-5"},r.a.createElement("div",{className:"row text-white bg-info rounded-top py-2"},r.a.createElement("button",{className:"col-1 btn btn-info",onClick:function(e){return B.forEach((function(e){return lt()("#"+e).collapse("hide")}))}},r.a.createElement("i",{className:"fa fa-minus-square text-white"})),r.a.createElement("h6",{className:"col-5 col-lg-7 pt-2"},"Description"),r.a.createElement("h6",{className:"col-3 col-lg-2 pt-2"},"Account Code"),r.a.createElement("h6",{className:"col-3 col-lg-2 pt-2"},"Delete?")),M)))}jt.description="Account Maintenance",jt.path="/AccountMaintenance";var Lt=jt;function It(e){return r.a.createElement(b,null,r.a.createElement(L,{createItemPath:"./JournalItem",item:"journal",render:function(e){return r.a.createElement(I,Object.assign({description:It.description,listname:"Journal"},e))}}))}It.description="Journal Entry",It.path="/JournalEntry";var Rt=It;function Pt(e){var t=Object(n.useState)(function(){var e=new Date;return e.getFullYear()+(e.getMonth()+1<10?"-0"+(e.getMonth()+1):"-"+(e.getMonth()+1))+(e.getDate()<10?"-0"+e.getDate():"-"+e.getDate())}()),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),d=m[0],u=m[1],p=Object(i.g)();return r.a.createElement(b,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Profit And Loss Statement"),r.a.createElement("small",{className:"text-warning"},"* required"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.push("./ProfitAndLossItem?date="+l+"&companyTitle="+d)}},r.a.createElement("div",{className:"form-group form-row mt-5"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return o(e.target.value)},value:l,required:!0,className:"form-control"})),r.a.createElement("small",{className:"form-text text-muted"},"*required")),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"companyTitle"},"Company Title"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"companyTitle",onChange:function(e){return u(e.target.value)},value:d,className:"form-control"}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Preview"))))}Pt.description="Profit And Loss",Pt.path="/ProfitAndLoss";var Tt=Pt;function kt(e){var t=Object(n.useState)(function(){var e=new Date;return e.getFullYear()+(e.getMonth()+1<10?"-0"+(e.getMonth()+1):"-"+(e.getMonth()+1))+(e.getDate()<10?"-0"+e.getDate():"-"+e.getDate())}()),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),d=m[0],u=m[1],p=Object(i.g)();return r.a.createElement(b,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Balance Sheet Statement"),r.a.createElement("small",{className:"text-warning"},"* required"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.push("./BalanceSheetItem?date="+l+"&companyTitle="+d)}},r.a.createElement("div",{className:"form-group form-row mt-5"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return o(e.target.value)},value:l,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"companyTitle"},"Company Title"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"companyTitle",onChange:function(e){return u(e.target.value)},value:d,className:"form-control"}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Preview"))))}kt.description="Balance Sheet",kt.path="/BalanceSheet";var At=kt;function Ft(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=C({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"journal"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=4,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],f=d[1],E=Object(n.useState)(["","","","",[]]),g=Object(c.a)(E,2),h=g[0],N=g[1],v=Object(n.useState)(!1),y=Object(c.a)(v,2),D=y[0],O=y[1],w=Object(n.useContext)(p).changeAuth;function j(e,t){N([].concat(Object(x.a)(h.slice(0,t)),[e],Object(x.a)(h.slice(t+1))))}function L(e,t,a,n){N(h.slice(0,t).concat([h[t].slice(0,a).concat([h[t][a].slice(0,n).concat(e).concat(h[t][a].slice(n+1))]).concat(h[t].slice(a+1))]).concat(h.slice(t+1)))}function I(){var e=0;return h[s].forEach((function(t,a){h[s][a][4]&&(e+=parseFloat(h[s][a][4]))})),+e.toFixed(2)}function R(){var e=0;return h[s].forEach((function(t,a){h[s][a][5]&&(e+=parseFloat(h[s][a][5]))})),+e.toFixed(2)}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),w(!1)):o&&o.data&&o.field&&f(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},(e[o.field[0].name]?e[o.field[0].name]:"")+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))})))}),[o,i]);var P=null;return(o&&o.error||i)&&(P=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"GL Code List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"GL Code List RETRIEVAL for item failed "+i:null)),r.a.createElement(_,{inputState:h,changeInputState:N,url:t,item:"journal",successPath:"/JournalEntry"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(b,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ft.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,P,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"journalNumber"},"Journal Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:j,layout:"col-md-4",position:0,labelID:"journalNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"data"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return j(e.target.value,1)},value:h[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"description",onChange:function(e){return j(e.target.value,2)},value:h[2],disabled:a,className:"form-control"}))),r.a.createElement("fieldset",{className:"form-group border border-secondary pb-4 rounded px-3"},r.a.createElement("legend",{className:"col-form-label col-8 offset-2 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return N(h.slice(0,s).concat([h[s].slice(0).concat([[h[s].length+1,"","","","0","0"]])]).concat(h.slice(s+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Journal Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return N(h.slice(0,s).concat([h[s].slice(0,h[s].length-1)]).concat(h.slice(s+1)))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Line Number"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"GL Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"GL Desc"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Other Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Debit"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Credit")),function(e){return h[s].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNumber",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNumber",className:"col form-control rounded-0 text-center",value:h[s][a][0]?h[s][a][0]:"",onChange:function(e){return e},style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0},disabled:e}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"glCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"glCode",required:!0,className:"form-control rounded-0",disabled:e,style:{paddingLeft:10},value:h[s][a][1]?h[s][a][1]:"",onChange:function(e){return e}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e,onChange:function(e){var t="";o.data.forEach((function(a){a[o.field[0].name]==e.target.value&&(t=a[o.field[1].name]?a[o.field[1].name]:"")})),N(h.slice(0,s).concat([h[s].slice(0,a).concat([h[s][a].slice(0,1).concat(e.target.value).concat(t).concat(h[s][a].slice(3))]).concat(h[s].slice(a+1))]).concat(h.slice(s+1)))}},r.a.createElement("option",{value:""},"-select an option- "),u)),r.a.createElement("label",{htmlFor:"glDescription",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"glDescription",required:!0,className:"col form-control rounded-0",value:h[s][a][2]?h[s][a][2]:"",onChange:function(e){return e},disabled:e,style:{flex:"1 0 120px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"otherDescription",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"otherDescription",className:"col form-control rounded-0",value:h[s][a][3]?h[s][a][3]:"",onChange:function(e){return L(e.target.value,s,a,3)},disabled:e,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"debit",className:"sr-only"}),r.a.createElement("input",{type:"number",min:"0",step:".01",id:"debit",className:"col form-control rounded-0 text-center",value:h[s][a][4]?h[s][a][4]:"",onChange:function(e){return L(e.target.value,s,a,4)},disabled:e,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"credit",className:"sr-only"}),r.a.createElement("input",{type:"number",min:"0",step:".01",id:"credit",className:"col form-control rounded-0 text-center",value:h[s][a][5]?h[s][a][5]:"",onChange:function(e){return L(e.target.value,s,a,5)},disabled:e,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}))}))}(a)),D?r.a.createElement("div",{className:"alert alert-danger mt-3"},"Journal Debit and Credit Entries not balanced!"):null,r.a.createElement("h5",{className:"text-right my-3"},"Total Debit: "+S(I())),r.a.createElement("h5",{className:"text-right my-3"},"Total Crebit: "+S(R()))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){I()!==R()&&(e.preventDefault(),O(!0))},className:"btn btn-primary mx-1 my-1"},"Submit"),"UPDATE/DELETE"===t?r.a.createElement("button",{type:"button",onClick:function(e){n(!1)},className:"btn btn-outline-primary mx-1 my-1"},"Edit"):null,"UPDATE/DELETE"===t?r.a.createElement("button",{type:"button",onClick:function(e){i()},className:"btn btn-danger mx-1 my-1"},"Delete"):null))))}))}Ft.description="Journal",Ft.path="/JournalItem";var qt=Ft;function Mt(e){var t={date:new URLSearchParams(e.location.search).get("date"),companyTitle:new URLSearchParams(e.location.search).get("companyTitle")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"profit_and_loss"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],f=d[1],E=Object(n.useState)(0),g=Object(c.a)(E,2),h=g[0],N=g[1],v=Object(n.useState)(null),y=Object(c.a)(v,2),x=y[0],D=y[1],O=Object(n.useState)(0),w=Object(c.a)(O,2),L=w[0],I=w[1],R=Object(n.useState)(0),P=Object(c.a)(R,2),T=P[0],k=P[1],A=Object(n.useState)([]),F=Object(c.a)(A,2),q=F[0],M=F[1],U=Object(n.useContext)(p).changeAuth,V=Object(i.g)();function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=n[0].name,l=n[3].name,o=n[6].name,c=n[7].name;return a.reduce((function(a,n){return new Date(n[l])<=new Date(t.date)&&new Date(n[l])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&-1!==e.indexOf(n[r])?a+n[c]-n[o]:a}),0)}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.map((function(e){var l=function(e,a,n){var l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=n[6].name,u=n[7].name,p=[],f=[];return a.forEach((function(n){n[l]===e&&-1===p.indexOf(n[o])&&new Date(n[i])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(n[i])<=new Date(t.date)&&(p.push(n[o]),f.push(r.a.createElement("div",{key:n[o]},r.a.createElement("div",{className:"row",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+n[c].replace(/[ ._()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1 col-1",id:"plusminus"+n[c].replace(/[ ._()]/g,"")}),r.a.createElement("p",{className:"col-2 mb-0"},n[o]),r.a.createElement("p",{className:"col-6 mb-0"},n[c]),r.a.createElement("p",{className:"col-3 text-right mb-0"},S(a.reduce((function(e,a){return a[o]===n[o]&&new Date(a[i])<=new Date(t.date)&&new Date(a[i])>=new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[u]-a[d]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:n[c].replace(/[ ._()]/g,"")},r.a.createElement("table",{id:"table",className:"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"DATE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM TYPE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM NUMBER"),r.a.createElement("th",{className:"text-nowrap"},"DR"),r.a.createElement("th",{className:"text-nowrap"},"CR"))),r.a.createElement("tbody",null,a.map((function(e,a){return e[o]===n[o]&&new Date(e[i])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(e[i])<=new Date(t.date)?r.a.createElement("tr",{key:a,style:{cursor:"pointer"},onClick:function(t){return V.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(e[s].toLowerCase(),e[m]))}},r.a.createElement("td",{className:"text-nowrap"},j(e[i])),r.a.createElement("td",{className:"text-nowrap"},e[s]),r.a.createElement("td",{className:"text-nowrap"},e[m]),r.a.createElement("td",{className:"text-nowrap"},S(e[d])),r.a.createElement("td",{className:"text-nowrap"},S(e[u]))):null}))))))))})),f}(e,a,n);if(l.length>0)return r.a.createElement("section",{key:e},r.a.createElement("h6",null,r.a.createElement("u",null,e)),l,r.a.createElement("p",{className:"h6 text-right "},r.a.createElement("u",null,"TOTAL : "+S(_([e],a,n)))))}))}Object(n.useEffect)((function(){if(o&&!1===o.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),U(!1);else if(o&&o.data&&o.field){var e=o.data[0].map((function(e){return e[o.field[0][0].name]})),t=[];f(B(e.slice(0,4),o.data[1],o.field[1])),N(S(_(e.slice(0,4),o.data[1],o.field[1]))),D(B(e.slice(4),o.data[1],o.field[1])),I(S(_(e.slice(4),o.data[1],o.field[1]))),k(S(_(e,o.data[1],o.field[1]))),o.data[1].forEach((function(e){-1===t.indexOf(e[o.field[1][2].name].replace(/[ ._()]/g,""))&&t.push(e[o.field[1][2].name].replace(/[ ._()]/g,""))})),M(t)}}),[o,s]),Object(n.useEffect)((function(){q&&u&&x&&q.forEach((function(e){lt()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),lt()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[u,x]);var J=null;return(o&&o.error||s)&&(J=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Profit and Loss Data RETRIEVAL failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Profit and Loss Data RETRIEVAL failed "+s:null)),r.a.createElement(b,null,r.a.createElement("div",{className:"container py-3 py-md-5 px-md-5 position-relative"},r.a.createElement("h4",{className:"text-center"},t.companyTitle),r.a.createElement("h4",{className:"text-center mb-4"},"Profit And Loss as at "+t.date),J,r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{className:"btn btn-dark mr-2",onClick:function(e){return q.forEach((function(e){return lt()("#"+e).collapse("show")}))}}," ",r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return q.forEach((function(e){return lt()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),u,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.3)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"GROSS PROFIT TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},h)),x,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.3)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"EXPENSES TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},L)),r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET PROFIT"),r.a.createElement("p",{className:"col text-right my-2 h6"},T))))}Mt.description="Profit And Loss",Mt.path="/ProfitAndLossItem";var Ut=Mt;function Vt(e){var t={date:new URLSearchParams(e.location.search).get("date"),companyTitle:new URLSearchParams(e.location.search).get("companyTitle")},a=C({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"balance_sheet"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],f=d[1],E=Object(n.useState)(0),g=Object(c.a)(E,2),h=g[0],N=g[1],v=Object(n.useState)(null),y=Object(c.a)(v,2),x=y[0],D=y[1],O=Object(n.useState)(0),w=Object(c.a)(O,2),L=w[0],I=w[1],R=Object(n.useState)(0),P=Object(c.a)(R,2),T=P[0],k=P[1],A=Object(n.useState)(0),F=Object(c.a)(A,2),q=F[0],M=F[1],U=Object(n.useState)([]),V=Object(c.a)(U,2),_=V[0],B=V[1],J=Object(n.useContext)(p).changeAuth,G=Object(i.g)();function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=n[0].name,o=n[4].name,c=n[7].name,i=n[8].name;return a.reduce((function(a,n){return new Date(n[o])<=new Date(t.date)&&-1!==e.indexOf(n[l])?r?a+n[i]-n[c]:a+n[c]-n[i]:a}),0)}function Q(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return e.map((function(e){var o=function(e,a,n,l){var o=n[0].name,c=n[1].name,i=n[2].name,s=n[3].name,m=n[4].name,d=n[5].name,u=n[6].name,p=n[7].name,f=n[8].name,E=[],g=[];function b(e){return a.reduce((function(a,n){return e[s]&&n[s]===e[s]&&new Date(n[m])<new Date(new Date(t.date).getFullYear()+"-01-01")?a+n[p]-n[f]:!e[s]&&n[c]===e[c]&&new Date(n[m])<new Date(new Date(t.date).getFullYear()+"-01-01")?a+n[p]-n[f]:a}),0)}return a.forEach((function(n){n[o]===e&&-1===E.indexOf(n[c])&&(E.push(n[c]),g.push(r.a.createElement("div",{key:n[c]},r.a.createElement("div",{className:"row background",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+n[i].replace(/[ ._()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1 col-1",id:"plusminus"+n[i].replace(/[ ._()]/g,"")}),r.a.createElement("p",{className:"col-2 mb-0"},n[c]),r.a.createElement("p",{className:"col-6 mb-0"},n[i]),r.a.createElement("p",{className:"col text-right mb-0"},S(a.reduce((function(e,a){return a[c]===n[c]&&new Date(a[m])<=new Date(t.date)?l?e+a[f]-a[p]:e+a[p]-a[f]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:n[i].replace(/[ ._()]/g,"")},n[s]?function(e){var n=[];return a.map((function(o){return o[c]===e[c]&&-1===n.indexOf(o[s])?(n.push(o[s]),r.a.createElement("div",{key:o[s]},r.a.createElement("div",{className:"row my-1 py-1 rounded bg-secondary text-white",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+o[s].replace(/[ ._()]/g,"")},r.a.createElement("p",{className:"col-1"},r.a.createElement("i",{className:"fa fa-plus-square mt-1 ",id:"plusminus"+o[s].replace(/[ ._()]/g,"")})),r.a.createElement("p",{className:"h6 col-5 mb-0"},o[s]),r.a.createElement("p",{className:"h6 col text-right mb-0"},S(a.reduce((function(e,a){return a[s]===o[s]&&new Date(a[m])<=new Date(t.date)?l?e+a[f]-a[p]:e+a[p]-a[f]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 row pl-3 pl-md-5 pr-2",id:o[s].replace(/[ ._()]/g,"")},r.a.createElement("table",{id:"table",className:"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"DATE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM TYPE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM NUMBER"),r.a.createElement("th",{className:"text-nowrap"},"DR"),r.a.createElement("th",{className:"text-nowrap"},"CR"))),r.a.createElement("tbody",null,b(o)>=0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},"B/F"),r.a.createElement("td",{colSpan:"2"},S(b(o)))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"B/F"),r.a.createElement("td",{colSpan:"1"},S(-b(o)))),a.map((function(a,n){return a[c]===e[c]&&a[s]===o[s]&&new Date(a[m])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(a[m])<=new Date(t.date)?r.a.createElement("tr",{key:n,style:{cursor:"pointer"},onClick:function(e){return G.push("./"+Q(a[d].toLowerCase(),a[u]))}},r.a.createElement("td",{className:"text-nowrap"},j(a[m])),r.a.createElement("td",{className:"text-nowrap"},a[d]),r.a.createElement("td",{className:"text-nowrap"},a[u]),r.a.createElement("td",{className:"text-nowrap"},S(a[p])),r.a.createElement("td",{className:"text-nowrap"},S(a[f]))):null}))))))):null}))}(n):r.a.createElement("table",{id:"table",className:"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"DATE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM TYPE"),r.a.createElement("th",{className:"text-nowrap"},"ITEM NUMBER"),r.a.createElement("th",{className:"text-nowrap"},"DR"),r.a.createElement("th",{className:"text-nowrap"},"CR"))),r.a.createElement("tbody",null,b(n)>=0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},"B/F"),r.a.createElement("td",{colSpan:"2"},S(b(n)))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"B/F"),r.a.createElement("td",{colSpan:"1"},S(-b(n)))),a.map((function(e,a){return e[c]===n[c]&&new Date(e[m])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(e[m])<=new Date(t.date)?r.a.createElement("tr",{key:a,style:{cursor:"pointer"},onClick:function(t){return G.push("./"+Q(e[d].toLowerCase(),e[u]))}},r.a.createElement("td",{className:"text-nowrap"},j(e[m])),r.a.createElement("td",{className:"text-nowrap"},e[d]),r.a.createElement("td",{className:"text-nowrap"},e[u]),r.a.createElement("td",{className:"text-nowrap"},S(e[p])),r.a.createElement("td",{className:"text-nowrap"},S(e[f]))):null}))))))))})),g}(e,a,n,l);if(o.length>0)return r.a.createElement("section",{key:e},r.a.createElement("h6",null,r.a.createElement("u",null,e)),o,r.a.createElement("p",{className:"h6 text-right my-1"},r.a.createElement("u",null,"TOTAL : "+S(Y([e],a,n,l)))))}))}Object(n.useEffect)((function(){if(o&&!1===o.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),J(!1);else if(o&&o.data&&o.field){var e=o.data[0].map((function(e){return e[o.field[0][0].name]})),a=function(e,a){var n=a[3].name,r=a[6].name,l=a[7].name;return e.reduce((function(e,a){return new Date(a[n])<=new Date(t.date)&&new Date(a[n])>=new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[l]-a[r]:e}),0)}(o.data[2],o.field[2]),n=function(e,a){var n=a[3].name,r=a[6].name,l=a[7].name;return e.reduce((function(e,a){return new Date(a[n])<=new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[l]-a[r]:e}),0)}(o.data[2],o.field[2]),r=[];f(H(e.slice(0,6),o.data[1],o.field[1],!1)),N(S(Y(e.slice(0,6),o.data[1],o.field[1],!1))),D(H(e.slice(6),o.data[1],o.field[1],!0)),k(S(a)),M(S(n)),I(S(Y(e.slice(6),o.data[1],o.field[1],!0)+a+n)),o.data[1].forEach((function(e){-1===r.indexOf(e[o.field[1][2].name].replace(/[ ._()]/g,""))?r.push(e[o.field[1][2].name].replace(/[ ._()]/g,"")):e[o.field[1][3].name]&&-1===r.indexOf(e[o.field[1][3].name].replace(/[ ._()]/g,""))&&r.push(e[o.field[1][3].name].replace(/[ ._()]/g,""))})),B(r)}}),[o,s]),Object(n.useEffect)((function(){_&&u&&x&&_.forEach((function(e){lt()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),lt()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&lt()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[u,x]);var z=null;return(o&&o.error||s)&&(z=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Balance Sheet Data RETRIEVAL failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Balance Sheet Data RETRIEVAL failed "+s:null)),r.a.createElement(b,null,r.a.createElement("div",{className:"container py-3 py-md-5 px-md-5 position-relative"},r.a.createElement("h4",{className:"text-center"},t.companyTitle),r.a.createElement("h4",{className:"text-center mb-4"},"Balance Sheet as at "+t.date),z,r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{className:"btn btn-dark mr-2",onClick:function(e){return _.forEach((function(e){return lt()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return _.forEach((function(e){return lt()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),u,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET ASSETS TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},h)),x,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col mb-0"},"PROFIT AND LOSS"),r.a.createElement("p",{className:"col mb-0 text-right"},T)),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col mb-0"},"RETAINED EARNINGS"),r.a.createElement("p",{className:"col mb-0 text-right"},q)),r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET EQUITY TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},L))))}Vt.description="Balance Sheet",Vt.path="/BalanceSheetItem";var _t=Vt,Bt=a(32),Jt=a.n(Bt),Gt=[{name:"Dashboard",svg:y.a,process:[N],item:[],report:[]},{name:"Sales",svg:te.a,process:[P,k,F,M],item:[Y,z,X,K],report:[V]},{name:"Purchase",svg:De.a,process:[ne,le,ce,se],item:[Ee,be,Ne,ye],report:[de,pe]},{name:"Inventory",svg:Te.a,process:[Ce],item:[Re],report:[Se,Le]},{name:"Bank and Cash",svg:tt.a,process:[Ae,qe,Ue,_e,Je],item:[Ye,He,We,$e,Ke],report:[]},{name:"Accounts Receivable",svg:bt.a,process:[nt],item:[Et],report:[it,dt,pt]},{name:"Accounts Payable",svg:St.a,process:[Nt],item:[Ct],report:[yt,Dt]},{name:"General Ledger",svg:Jt.a,process:[Lt,Rt,Tt,At],item:[qt,Ut,_t],report:[]}];var Yt=function(e){var t=Gt.map((function(e){var t=[],a=[];return e.process.forEach((function(e){return t.push(e.description)})),e.report.forEach((function(e){return a.push(e.description)})),r.a.createElement(E,{key:e.name,name:e.name,img:e.svg,parent:"accordion",items:t,reportItems:a})}));return r.a.createElement("aside",{id:"accordion",className:"accordion "+(e.largeScreenStyle?"d-none":"d-block")+" d-md-block bg-dark "+(e.largeScreenStyle?"position-sticky vh-100 overflow-auto":""),style:{top:"0"}},r.a.createElement("h2",{className:"text-warning d-none d-md-block ",style:{padding:"0.75rem 1.25rem"}},"Accounting ",r.a.createElement("span",{className:"text-info"},"Software "),r.a.createElement("small",{className:"text-light d-block",style:{fontSize:"40%"}},"@coded by Mseong")),r.a.createElement("h4",{className:"text-warning d-md-none",style:{padding:"0.75rem 1.25rem"}},"Accounting ",r.a.createElement("span",{className:"text-info"},"Software "),r.a.createElement("small",{className:"text-light d-block",style:{fontSize:"40%"}},"@coded by Mseong")),t)};var Qt=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 order-md-last px-0"},r.a.createElement(f,null)),r.a.createElement("div",{className:"col-md-3 order-md-first px-0"},r.a.createElement(Yt,null))))};var Ht=function(e){var t=C(null),a=Object(c.a)(t,2),l=a[0],o=l.data,i=l.error,s=a[1],m=Object(n.useContext)(p).changeAuth,d=Object(n.useContext)(g).isLoading,f=Object(n.useState)(""),E=Object(c.a)(f,2),b=E[0],h=E[1],N=Object(n.useState)(""),v=Object(c.a)(N,2),y=v[0],x=v[1];return Object(n.useEffect)((function(){o&&!0===o.auth&&m(!0)}),[o,i]),r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"row"},d?r.a.createElement("div",{className:"position-fixed d-flex justify-content-center align-items-center vh-100 vw-100",style:{top:0,left:0,zIndex:"100000",backgroundColor:"rgba(255,255,255,0.6"}},r.a.createElement("div",{className:"spinner-grow",style:{width:"4rem",height:"4rem"}},r.a.createElement("span",{className:"sr-only"}))):null,r.a.createElement("div",{className:"col-10 offset-1 col-md-4 offset-md-4"},r.a.createElement("div",{className:"jumbotron min-vh-100",style:{marginBottom:0}},r.a.createElement("h1",{className:"my-5"},"Login",r.a.createElement("img",{src:u.a,alt:"logo",style:{width:"35px",height:"35px"},className:"d-inline-block mx-3"})),o&&!1===o.auth||i?r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?o.error.code+o.error.type:null,o&&o.message?o.message:null,i?i.name+" "+i.message:null):null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s({url:"./userAuth",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:y}),credentials:"include"}})}},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",id:"username",value:b,onChange:function(e){return h(e.target.value)},required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",id:"password",value:y,onChange:function(e){return x(e.target.value)},required:!0,className:"form-control"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-3"},"Submit"))))))};var zt=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),d=Object(c.a)(o,2),u=d[0],f=d[1],E=[];return Gt.forEach((function(e){e.process.forEach((function(e){return E.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))})),e.item.forEach((function(e){return E.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))})),e.report.forEach((function(e){return E.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))}))})),r.a.createElement(s.a,null,r.a.createElement(p.Provider,{value:{auth:a,changeAuth:l}},r.a.createElement(g.Provider,{value:{isLoading:u,changeIsLoading:f}},r.a.createElement(m,{render:function(e){return r.a.createElement(i.d,null,a?null:r.a.createElement(i.b,{path:"/Login"},r.a.createElement(Ht,null)),a?null:r.a.createElement(i.a,{to:"/Login"}),E,e?r.a.createElement(i.b,{path:"/",render:Qt}):r.a.createElement(i.a,{to:"/DashBoard"}))}}))))};a(42),a(44),a(45);o.a.render(r.a.createElement(zt,null),document.getElementById("root"))}],[[33,1,2]]]);
//# sourceMappingURL=main.dc238fdb.chunk.js.map
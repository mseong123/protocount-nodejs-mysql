{"version":3,"sources":["Protocount/Shared/accounting.svg","Protocount/Shared/svg/030-presentation.svg","Protocount/Shared/svg/006-call.svg","Protocount/Shared/svg/009-conversation.svg","Protocount/Shared/svg/020-folders.svg","Protocount/Shared/svg/027-money.svg","Protocount/Shared/svg/011-calendar.svg","Protocount/Shared/svg/017-send.svg","Protocount/Shared/svg/015-contact.svg","Protocount/Shared/Media.js","Protocount/Shared/authContext.js","Protocount/Shared/Navbar.js","Protocount/Shared/SubPanel.js","Protocount/Shared/isLoadingContext.js","Protocount/Shared/AppLayout.js","Protocount/Dashboard/Dashboard.js","Protocount/Shared/useFetch.js","Protocount/Shared/sort.js","Protocount/Shared/numberFormatParser.js","Protocount/Shared/dateFormatParser.js","Protocount/Shared/Process.js","Protocount/Shared/ProcessLayout.js","Protocount/Sales/DeliveryOrder.js","Protocount/Sales/DeliveryReturn.js","Protocount/Sales/SalesInvoice.js","Protocount/Sales/DebitNote.js","Protocount/Sales/CreditNote.js","Protocount/Sales/SalesReport.js","Protocount/Shared/Item.js","Protocount/Shared/ItemButton.js","Protocount/Shared/preview/DocumentOne.js","Protocount/Shared/LineRenderQtyOnly.js","Protocount/Sales/DeliveryOrderItem.js","Protocount/Sales/DeliveryReturnItem.js","Protocount/Shared/LineRender.js","Protocount/Shared/ReceiptPaymentHistoryRender.js","Protocount/Sales/SalesInvoiceItem.js","Protocount/Sales/DebitNoteItem.js","Protocount/Shared/OffsetRender.js","Protocount/Sales/CreditNoteItem.js","Protocount/Purchase/GoodsReceivedNote.js","Protocount/Purchase/PurchaseReturn.js","Protocount/Purchase/PurchaseInvoice.js","Protocount/Purchase/PurchaseDebitNote.js","Protocount/Purchase/PurchaseCreditNote.js","Protocount/Purchase/PurchaseReport.js","Protocount/Purchase/SupplierPriceListReport.js","Protocount/Purchase/GoodsReceivedNoteItem.js","Protocount/Purchase/PurchaseReturnItem.js","Protocount/Purchase/PurchaseInvoiceItem.js","Protocount/Purchase/PurchaseDebitNoteItem.js","Protocount/Purchase/PurchaseCreditNoteItem.js","Protocount/Inventory/StockItemMaintenance.js","Protocount/Inventory/StockCardReport.js","Protocount/Inventory/StockAgingReport.js","Protocount/Inventory/StockItem.js","Protocount/BankAndCash/BankMaintenance.js","Protocount/BankAndCash/BankReceipt.js","Protocount/BankAndCash/BankPayment.js","Protocount/BankAndCash/CashReceipt.js","Protocount/BankAndCash/CashPayment.js","Protocount/BankAndCash/BankItem.js","Protocount/BankAndCash/BankReceiptItem.js","Protocount/BankAndCash/BankPaymentItem.js","Protocount/BankAndCash/CashReceiptItem.js","Protocount/BankAndCash/CashPaymentItem.js","Protocount/AccountsReceivable/DebtorMaintenance.js","Protocount/Shared/setPageSize.js","Protocount/Shared/preview/DebtorCreditorAgingOne.js","Protocount/AccountsReceivable/DebtorAgingReport.js","Protocount/Shared/preview/DebtorCreditorStatementOne.js","Protocount/AccountsReceivable/DebtorStatementReport.js","Protocount/Shared/preview/DebtorCollectionOne.js","Protocount/AccountsReceivable/DebtorCollectionReport.js","Protocount/AccountsReceivable/DebtorItem.js","Protocount/AccountsPayable/CreditorMaintenance.js","Protocount/AccountsPayable/CreditorAgingReport.js","Protocount/AccountsPayable/CreditorBalanceReport.js","Protocount/AccountsPayable/CreditorItem.js","Protocount/GeneralLedger/AccountMaintenance.js","Protocount/GeneralLedger/JournalEntry.js","Protocount/GeneralLedger/ProfitAndLoss.js","Protocount/GeneralLedger/BalanceSheet.js","Protocount/GeneralLedger/JournalItem.js","Protocount/GeneralLedger/ProfitAndLossItem.js","Protocount/GeneralLedger/BalanceSheetItem.js","Protocount/Shared/ComponentSummary.js","Protocount/Shared/SidePanel.js","Protocount/Main/Main.js","Protocount/Login/Login.js","Protocount/App.js","index.js"],"names":["module","exports","Media","props","useState","window","innerWidth","screenIsSmall","changeMedia","useEffect","x","matchMedia","handler","e","matches","addListener","removeListener","render","authContext","React","createContext","Navbar","changeAuth","useContext","modify","theme","className","to","src","logo","style","width","height","alt","data-toggle","data-target","id","href","type","onClick","SubPanel","items","reportItems","map","item","key","replace","backgroundColor","name","img","data-parent","parent","length","isLoadingContext","AppLayout","isLoading","top","left","zIndex","children","largeScreenStyle","Dashboard","maxWidth","description","path","useFetch","fetchParam","param","changeParam","data","changeData","error","changeError","changeIsLoading","url","fetch","init","then","response","ok","json","Error","status","statusText","catch","sortData","property","order","sort_order","sort","a","b","localeCompare","numeric","numberFormatParser","num","m","s1","s2","dateFormatParser","date","Date","month","Number","getMonth","getDate","getFullYear","Process","searchCriteriaList","fieldList","dataList","result","method","headers","body","JSON","stringify","credentials","dataSelect","errorSelect","changeParamSelect","dataDelete","errorDelete","changeParamDelete","filteredData","changeFilteredData","search","changeSearch","searchCriteria","changeSearchCriteria","itemsToBeDeleted","changeItemsToBeDeleted","errorDeleteDisplay","changeErrorDeleteDisplay","history","useHistory","docNum","onItemClick","push","createItemPath","auth","alert","Object","assign","selected","field","errno","code","sqlMessage","forEach","document","getElementById","checked","value","cursor","data-order","target","setAttribute","getAttribute","classList","remove","add","i","onChange","targetPosition","indexOf","slice","Math","random","message","maxHeight","array","refresh","searchChange","newData","RegExp","test","searchCriteriaChange","deleteList","confirm","ProcessLayout","htmlFor","placeholder","listname","DeliveryOrder","list","DeliveryReturn","SalesInvoice","DebitNote","CreditNote","SalesReport","Item","usage","disabled","changeDisabled","dataIDList","errorIDList","dataInsert","errorInsert","changeParamInsert","dataUpdate","errorUpdate","changeParamUpdate","IDPrefix","IDPrefixLatestNumber","currentIDPrefix","minIDNumber","IDInfo","changeIDInfo","inputStateToBePrePopulated","state","toUpperCase","substring","changeInputState","changeParamOutstanding","paramOutstanding","debtorCreditorNumPosition","oldNumPosition","prefixList","prefixLatestNumberList","ID","parsedPrefix","match","parsedPrefixNumber","parseInt","successPath","errorDisplay","onInsert","inputState","onUpdate","onDelete","inputNumberRender","inputNumberProps","layout","maxLength","required","pattern","title","matchedIndex","position","flex","labelID","max","min","ItemButton","querySelector","DocumentOne","topLeftInput","input","topRightArea","topRightField","topRightInput","bottomField","bottomInput","itemline","calculateSubtotal","backPath","padding","margin","marginBottom","calculateTotal","footer","LineRenderQtyOnly","stockNum","dataSelectStock","stockDesc","stockBalQty","onChangeLineInput","lineNumber","innerOrder","concat","addStockControlItem","itemCode","Qty","stockControlPosition","findIndex","removeStockControlItem","calculateFinalQty","stockDirection","find","item2","reduce","console","log","linePosition","lineDescription","marginLeft","marginRight","paddingLeft","paddingRight","lineSet","some","stockDescription","stockList","paddingTop","border","every","step","minWidth","lineAlreadyFiltered","stockNum1","populateNegativeStockBalanceTable","DeliveryOrderItem","URLSearchParams","location","get","dataSelectDebtor","errorSelectDebtor","errorSelectStock","debtorList","changeDebtorList","changeStockList","useRouteMatch","total","deliveryorderlineSet","stockPrice","setScale","addEventListener","removeEventListener","errorDisplayExtension","exact","onSubmit","preventDefault","debtorName","debtorAddress","DeliveryReturnItem","deliveryreturnlineSet","LineRender","price","ReceiptPaymentHistoryRender","dataSelectReceiptPaymentHistory","amount","historyDescription","string","WIPstring","split","toLowerCase","substr","join","encodeURIComponent","createLink","paddingBottom","SalesInvoiceItem","dataSelectGLCode","errorSelectGLCode","dataSelectReceiptHistory","errorSelectReceiptHistory","GLCodeList","changeGLCodeList","parseFloat","debtorDefaultCreditTerm","creditTermPosition","calculateOutstanding","DebitNoteItem","OffsetRender","dataSelectOutstanding","original","outstanding","offsetDocNumPosition","offsetAmountPosition","onChangeOffsetInput","onAddOffsetInput","onRemoveOffsetInput","innerIndexOfArrayToBeRemoved","onChangeCheck","offsetPosition","calculateUnappliedAmount","checkPayAmountDisabled","getOffsetInputStateArrayPosition","offsetDescription","offsetDescriptionOne","offsetPositionOne","offsetPositionTwo","changeErrorUnappliedAmount","CreditNoteItem","dataSelectDebtorOutstanding","errorSelectDebtorOutstanding","changeParamDebtorOutstanding","offsetPositionSalesInvoice","offsetPositionDebitNote","errorUnappliedAmount","paramDebtorOutstanding","debtorNum","oldNum","exclude","offsetDescriptionTwo","GoodsReceivedNote","PurchaseReturn","PurchaseInvoice","PurchaseDebitNote","PurchaseCreditNote","PurchaseReport","SupplierPriceListReport","GoodsReceivedNoteItem","dataSelectCreditor","errorSelectCreditor","creditorList","changeCreditorList","goodsreceivednotelineSet","creditorName","creditorAddress","PurchaseReturnItem","purchasereturnlineSet","PurchaseInvoiceItem","dataSelectPaymentHistory","errorSelectPaymentHistory","creditorDefaultCreditTerm","PurchaseDebitNoteItem","PurchaseCreditNoteItem","dataSelectCreditorOutstanding","errorSelectCreditorOutstanding","changeParamCreditorOutstanding","offsetPositionPurchaseInvoice","offsetPositionPurchaseDebitNote","paramCreditorOutstanding","creditorNum","lineset","StockItemMaintenance","StockCardReport","StockAgingReport","StockItem","BankMaintenance","BankReceipt","BankPayment","CashReceipt","CashPayment","BankItem","BankReceiptItem","dataSelectBank","errorSelectBank","amountPosition","bankList","changeBankList","isDebtorPayment","changeIsDebtorPayment","debtorNumPosition","glPosition","BankPaymentItem","isCreditorPayment","changeIsCreditorPayment","creditorNumPosition","CashReceiptItem","CashPaymentItem","DebtorMaintenance","setPageSize","cssPageSize","innerHTML","createElement","head","appendChild","DebtorCreditorAgingOne","resultInput","currDate","agingMonths","withDetails","populateTableMonthsHeader","colSpan","dataDetail","docDate","creditTerm","debtorAlreadyParsed","calculateAgingCurrentAmount","getFormattedDate","setDate","populateMonthsAmount","calculateAgingRemainderAmount","populateTableMonthsAmount","populateDebtor","DebtorAgingReport","dataSelectDebtorAging","errorSelectDebtorAging","changeParamDebtorAging","changeCurrDate","debtorID","changeDebtorID","changeAgingMonths","changeResultInput","collapsibleElementID","changeCollapsibleElementID","changeWithDetails","sortCriteriaList","changeSortCriteriaList","detailSortCriteriaList","changeDetailSortCriteriaList","sortCriteria","changeSortCriteria","detailSortCriteria","changeDetailSortCriteria","generateReportWarning","changeGenerateReportWarning","calculatedWidth","months","monthAmount","calculateAgingMonthsAmount","dueDate","newObject","filter","dataPreview","$","on","currentTarget","removeClass","addClass","setPage","size","multiple","Array","from","options","option","transform","collapse","populateMonthsHeader","overflowY","overflowX","sortedData","DebtorCreditorStatementOne","monthsAlreadyPopulated","calculateAgingMonthAmount","dr","cr","dateEnd","calculateAgingMonthRemainderAmount","dateFrom","dateTo","dateStartForAging","dbBroughtForwardAmount","DebtorStatementReport","dataSelectDebtorStatement","errorSelectDebtorStatement","changeParamDebtorStatement","dateStart","changeDateStart","changeDateEnd","agingMonthsMax","debtorOtherInfo","changeDebtorOtherInfo","getDateStartForAging","preview","ref","balance","DebtorCollectionOne","withReceiptDetails","transactionID","receiptData","receiptField","receiptDocNum","receiptDataDocNum","receiptDataType","receiptDataDate","receiptDataCreditTerm","receiptDataAmount","receiptAmount","Fragment","item3","populateResult","DebtorCollectionReport","dataSelectDebtorCollection","errorSelectDebtorCollection","changeParamDebtorCollection","changeWithReceiptDetails","receiptAlreadyParsed","DebtorItem","CreditorMaintenance","CreditorAgingReport","CreditorBalanceReport","CreditorItem","AccountMaintenance","dataSelectAccount","errorSelectAccount","changeParamSelectAccount","GLCategoryList","changeGLCategoryList","GLAccountList","changeGLAccountList","GLAccountArray","changeGLAccountArray","inputStateCreate","changeInputStateCreate","inputStateUpdate","changeInputStateUpdate","accounts","changeAccounts","onChangeCreate","onChangeUpdate","glCategory","glAccount","glDesc","glStatus","glCategoryAlreadyParsed","category","populateAccount","GLCategory","GLDesc","JournalEntry","ProfitAndLoss","getCurrentDate","changeDate","companyTitle","changeCompanyTitle","BalanceSheet","JournalItem","notBalanced","changeNotBalanced","onChangeJournallineInput","calculateDebitTotal","journallineSet","calculateCreditTotal","glDescription","journallineListRender","ProfitAndLossItem","dataSelectProfitAndLoss","errorSelectProfitAndLoss","changeSortedData","grossProfit","changeGrossProfit","grossProfitTotal","changeGrossProfitTotal","expenses","changeExpenses","expensesTotal","changeExpensesTotal","netProfit","changeNetProfit","printFormat","changePrintFormat","calculateCategoryTotal","itemDate","itemDebit","itemCredit","populateCategory","sortedData1","itemType","itemNumber","glAccountAlreadyParsed","glDescAlreadyParsed","BalanceSheetItem","dataSelectBalanceSheet","errorSelectBalanceSheet","netAssets","changeNetAssets","netAssetsTotal","changeNetAssetsTotal","netEquity","changeNetEquity","netEquityTotal","changeNetEquityTotal","currentProfitAndLoss","changeCurrentProfitAndLoss","retainedEarnings","changeRetainedEarnings","debitCreditOpposite","itemName","getBroughtForwardAmount","targetItem","itemNameAlreadyParsed","populateItemName","calculateCurrentProfitAndLoss","calculateRetainedEarnings","ComponentSummary","svg","DashboardSVG","process","report","SalesSVG","PurchaseSVG","InventorySVG","BankAndCashSVG","AccountsReceivableSVG","AccountsPayableSVG","GeneralLedgerSVG","SidePanel","SubPanelList","SubPanelListItems","SubPanelListReportItems","component","fontSize","Main","Login","username","changeUsername","password","changePassword","App","appRoutes","Provider","ReactDOM"],"mappings":"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","file":"static/js/main.6fb9ec89.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/accounting.6c69fc79.svg\";","module.exports = __webpack_public_path__ + \"static/media/030-presentation.9ad5731f.svg\";","module.exports = __webpack_public_path__ + \"static/media/006-call.9c57f732.svg\";","module.exports = __webpack_public_path__ + \"static/media/009-conversation.ffa9f5dd.svg\";","module.exports = __webpack_public_path__ + \"static/media/020-folders.f1018bc0.svg\";","module.exports = __webpack_public_path__ + \"static/media/027-money.dbb6986e.svg\";","module.exports = __webpack_public_path__ + \"static/media/011-calendar.870b8a62.svg\";","module.exports = __webpack_public_path__ + \"static/media/017-send.af12eb54.svg\";","module.exports = __webpack_public_path__ + \"static/media/015-contact.b34b750a.svg\";","import {useEffect,useState} from 'react';\r\n\r\n/*Media component for setting screenIsSmall state during initial mounting and also attach matchMedia listener that fires when screen width \r\n<768px or >768px and changes state when that happens. */\r\n\r\nfunction Media (props) {\r\n    const [screenIsSmall,changeMedia]=useState(window.innerWidth<768? true:false)\r\n\r\n    useEffect(()=>{\r\n        \r\n        const x=window.matchMedia('(max-width: 768px)');\r\n        const handler=(e)=>{\r\n            if (e.matches) changeMedia(true) \r\n            else changeMedia(false)\r\n        }\r\n        x.addListener((e)=>handler(e))\r\n            \r\n        \r\n        return x.removeListener((e)=>handler(e))\r\n    },[])\r\n    \r\n    return props.render(screenIsSmall);\r\n}\r\nexport default Media;","import React from 'react';\r\n\r\nconst authContext=React.createContext();\r\n\r\nexport default authContext;","import React,{useContext} from 'react';\r\nimport logo from './accounting.svg';\r\nimport authContext from './authContext';\r\nimport {Link} from 'react-router-dom'\r\n\r\nfunction Navbar(props) {\r\n    const {changeAuth} = useContext(authContext);\r\n    let modify=' navbar-light bg-light';\r\n    if (props.theme==='dark') \r\n      modify=' navbar-dark bg-dark'\r\n\r\n    return (\r\n    <nav className={'navbar navbar-expand-md'+modify}>\r\n      <Link className='navbar-brand' to='/'>\r\n        <img src={logo} style={{width:'35px',height:'35px'}} alt='logo' className='d-inline-block' />\r\n        ProtoCount\r\n      </Link>\r\n      <button className='navbar-toggler' data-toggle='collapse' data-target='#navbarText'>\r\n        <span className='navbar-toggler-icon'></span>\r\n      </button>\r\n      <div className='collapse navbar-collapse' id='navbarText'>\r\n        <ul className='navbar-nav mr-auto'>\r\n          <li className='nav-item dropdown'>\r\n            <a href='#' className='nav-link dropdown-toggle' data-toggle='dropdown'>File</a>\r\n            <div className='dropdown-menu'>\r\n              <a href='#' className='dropdown-item'>Exit and Logout</a>\r\n            </div>\r\n          </li>\r\n          <li className='nav-item dropdown'>\r\n            <a href='#' className='nav-link dropdown-toggle' data-toggle='dropdown'>General Maintenance</a>\r\n            <div className='dropdown-menu'>\r\n              <a href='#' className='dropdown-item'>Company Profile</a>\r\n              <a href='#' className='dropdown-item'>User Maintenance</a>\r\n              <div className='dropdown-divider'></div>\r\n              <a href='#' className='dropdown-item'>Credit Term Maintenance</a>\r\n              <a href='#' className='dropdown-item'>Currency Maintenance</a>\r\n            </div>\r\n          </li>\r\n          <li className='nav-item dropdown'>\r\n            <a href='#' className='nav-link dropdown-toggle' data-toggle='dropdown'>Tools</a>\r\n            <div className='dropdown-menu'>\r\n              <a href='#' className='dropdown-item'>Backup</a>\r\n              <a href='#' className='dropdown-item'>Restore</a>\r\n            </div>\r\n          </li>\r\n          <li className='nav-item dropdown'>\r\n            <a href='#' className='nav-link dropdown-toggle' data-toggle='dropdown'>Help</a>\r\n            <div className='dropdown-menu'>\r\n              <a href='#' className='dropdown-item'>About ProtoCount Accounting</a>\r\n            </div>\r\n          </li>\r\n          \r\n          \r\n        </ul>\r\n        <button type='button' className='btn btn-dark' onClick={()=>changeAuth(false)}>Log Out</button>\r\n      </div>\r\n      \r\n    </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom'\r\n\r\nfunction SubPanel (props) {\r\n    let items;\r\n    let reportItems;\r\n    \r\n    items = props.items.map(item=> (\r\n        <Link className='list-group-item list-group-item-action list-group-item-dark' key={item} to={item.replace(/[ _]/g,'')}>{item}</Link>\r\n    ))\r\n    reportItems = props.reportItems.map(item=>(\r\n        <Link className='list-group-item list-group-item-action list-group-item-dark' key={item} to={item.replace(/[ _]/g,'')}>{item}</Link>\r\n    ))\r\n\r\n    return (\r\n    <div className='card border-0 bg-dark text-light rounded-0'>\r\n        <div className='card-header' style={{backgroundColor:'rgba(0,0,0,0)'}}>\r\n            <a href={'#'+props.name.replace(/[ ]/g,'-')/*replace nonalphanumeric strings for links to work*/} data-toggle='collapse' className='text-decoration-none text-reset'>\r\n                <h6>\r\n                    {props.name}<img src={props.img} className='ml-3' style={{width:'25px'}} alt={props.name}/>\r\n                </h6>\r\n            </a>\r\n        </div>\r\n        \r\n        <div className='list-group list-group-flush collapse' id={props.name.replace(/[ ]/g,'-')/*replace nonalphanumeric strings for links to work*/ } data-parent={\"#\"+props.parent}>\r\n            {items}\r\n            {reportItems.length>0? \r\n                (<a href={'#'+props.name.replace(/[ ]/g,'-')+'-report'} data-toggle='collapse' className='list-group-item bg-secondary text-decoration-none text-reset'>\r\n                    <h6>Report</h6>\r\n                </a>) : null\r\n            }\r\n            <div className='list-group collapse' id={props.name.replace(/[ ]/g,'-')+'-report'}>\r\n                {reportItems}\r\n            </div>\r\n        </div>\r\n        \r\n        \r\n    </div>\r\n    \r\n    )\r\n}\r\n\r\nexport default SubPanel","import React from 'react';\r\n\r\nconst isLoadingContext=React.createContext();\r\n\r\nexport default isLoadingContext;","import React,{useContext} from 'react';\r\nimport Navbar from './Navbar';\r\nimport SidePanel from './SidePanel';\r\nimport isLoadingContext from './isLoadingContext'\r\n\r\nfunction AppLayout(props) {\r\n    const {isLoading} = useContext(isLoadingContext);\r\n\r\n    return (\r\n            <div className='container-fluid'>\r\n                <div className='row'>\r\n                    {isLoading?\r\n                    <div className='position-fixed d-flex justify-content-center align-items-center vh-100 vw-100' \r\n                    style={{top:0,left:0,zIndex:'100000',backgroundColor:'rgba(255,255,255,0.6'}}>\r\n                        <div className='spinner-grow' style={{width:'4rem',height:'4rem'}}><span className='sr-only'></span></div>\r\n                    </div>:null}\r\n                    <div className='col-md-9 order-md-last px-0'>\r\n                        <Navbar/>\r\n                        \r\n                        <div>{props.children}</div>\r\n                        \r\n                    </div>\r\n                    <div className='col-md-3 order-md-first px-0 d-print-none' >\r\n                        <SidePanel largeScreenStyle={true}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default AppLayout;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport logo from '../Shared/accounting.svg';\r\n\r\nfunction Dashboard(props) {\r\n    return (\r\n            <AppLayout>\r\n                <div className='container' >\r\n                    \r\n                    <div className='row flex-column align-items-center justify-content-center' style={{height:'80vh'}}>\r\n                        <div >\r\n                            <img src={logo} alt='logo' style={{maxWidth:'50%'}} className='d-block mx-auto' />\r\n                        </div>\r\n                        \r\n                        <h1 className='text-center d-none d-md-block'>ProtoCount Accounting Software</h1>\r\n                        <h3 className='text-center d-md-none'>ProtoCount Accounting Software</h3>\r\n                        <p className='lead text-info text-center m-0'>Fully functional accounting app.</p>\r\n                        <p className='lead text-info text-center m-0'>Blazing Fast with Client-Side routing.</p>\r\n                        <p className='lead text-info text-center m-0'>Functionality easily extended.</p>\r\n                        <p className='lead text-info text-center m-0'>Responsive interface (incl. Mobile).</p>\r\n                    </div>\r\n                    \r\n                    \r\n\r\n                </div>\r\n            </AppLayout>\r\n    )\r\n}\r\n\r\nDashboard.description='Dashboard';\r\nDashboard.path='/Dashboard';\r\n\r\nexport default Dashboard;","import {useState,useEffect,useContext} from 'react'\r\nimport isLoadingContext from './isLoadingContext'\r\n\r\n/*a generic fetch hook for fetching all types of data. All known ERRORS occuring in APP, ExpressJS server and DB is handled and stored in \r\ndata and error state below.  Handle the data and error response in the originating component itself. */\r\nfunction useFetch(fetchParam) {\r\n    const [param,changeParam]=useState(fetchParam);\r\n    const [data,changeData] = useState(null);\r\n    const [error,changeError]=useState(null);\r\n    const {isLoading,changeIsLoading} = useContext(isLoadingContext);\r\n    \r\n\r\n    \r\n    useEffect(()=>{\r\n        if(param && param.url) {\r\n            changeIsLoading(true)\r\n            fetch(param.url,param.init).then(\r\n                (response)=>{\r\n                    if (!response.ok) {\r\n                        //http error will be caught below in catch()\r\n                        throw new Error('HTTP Error, status code = '+response.status + ',status = '+response.statusText)\r\n                    } else {\r\n                        //make sure all ExpressJS response is in object(application/json) and not text or any other format\r\n                        return response.json();\r\n                    }\r\n                }\r\n            ).then(\r\n                response=>{\r\n                    changeData(response);//DB related errors will be included in the response as response.error\r\n                    \r\n                    changeError(null)/* ***data and error state is mutually exclusive, reset the error state to null when resolved because\r\n                    useFetch can be used multiple times within a component for different url and usage*/\r\n                    changeIsLoading(false)\r\n                }\r\n            ).catch(\r\n                \r\n                /*catch for 1) network error (as per fetch API spec which will resolve as reject) such as unresolved URL and\r\n                ExpressJS server instance failure(can be caused by Async error in ExpressJS not caught by default error handlers in ExpressJS)\r\n                2) above HTTP status errors. This will include synchronous errors caught and handled by default error handler in ExpressJS \r\n                (response status set to 500) and 3)catch all for internal logic error within fetch promise chain.\r\n                DOESN'T INCLUDE DB RETURNED ERRORS-this is included in data above. */\r\n                error=>{\r\n                    changeError(error);\r\n                    changeData(null)//reset data state to null when error happen. See above for reason***. \r\n                    changeIsLoading(false)\r\n                }\r\n            )\r\n            }\r\n    },[param])\r\n\r\nreturn [{data,error},changeParam];\r\n}\r\n\r\nexport default useFetch;","function sortData(data,property,order) {\r\n    let sort_order = 1;\r\n    if(order === \"desc\") \r\n        sort_order = -1;\r\n    \r\n    return [...data].sort((a,b)=>\r\n        sort_order*(a[property]+'').localeCompare((b[property]+''),'en',{numeric:true})\r\n   )\r\n}\r\n\r\n/*\r\nfunction sortDate(data,property,order) {\r\n    let sort_order = 1;\r\n    if(order === \"desc\") \r\n        sort_order = -1;\r\n\r\n    return [...data].sort((a, b)=>{\r\n        if(Date(a[property]) < Date(b[property]))\r\n                return -1 * sort_order;\r\n        \r\n        else if( Date(a[property]) > Date(b[property]))\r\n                return 1 * sort_order;\r\n        \r\n        else\r\n                return 0 * sort_order;\r\n        \r\n    })\r\n}\r\n*/\r\n\r\n\r\n\r\nexport default sortData;\r\n\r\n\r\n","function numberFormatParser(num){\r\n  if(num)\r\n    return ('' + num).replace(\r\n      /(\\d)(?=(?:\\d{3})+(?:\\.|$))|(\\.\\d\\d?)\\d*$/g, \r\n      function(m, s1, s2){\r\n        return s2 || (s1 + ',');\r\n      }\r\n    )\r\n    else return '';\r\n  }\r\n\r\n  export default numberFormatParser;\r\n\r\n","function dateFormatParser(date){\r\n    if (date) {\r\n        date=new Date(date)\r\n        const month = Number(date.getMonth()) + 1 <10 ? \r\n        '0'+ (Number(date.getMonth()) + 1) : Number(date.getMonth()) + 1; \r\n                   \r\n        const day = date.getDate() < 10? \r\n        '0' + date.getDate() : date.getDate();\r\n        const year = date.getFullYear();\r\n        return day+'-'+month+'-'+year;\r\n    }\r\n    else return '';\r\n}\r\n  \r\n    export default dateFormatParser;\r\n  \r\n  ","import React,{useState,useEffect,useContext} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport useFetch from './useFetch'\r\nimport authContext from './authContext';\r\nimport sortData from './sort';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\n\r\n\r\n\r\nfunction Process(props) {\r\n    /*this is a reusable component for all process components (i.e. StockItemMaintenance.js,DeliveryOrder.js). Contains state logic \r\n    for fetching DB select data usinguseFetch hook) and filtering the fetched data*/\r\n        const [{data:dataSelect,error:errorSelect},changeParamSelect]=useFetch({\r\n            url:'./SelectItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({item:props.item}),\r\n                credentials:'include'\r\n                }\r\n            });\r\n        const [{data:dataDelete,error:errorDelete},changeParamDelete]=useFetch(null);\r\n        const [filteredData,changeFilteredData] = useState(null)\r\n        const {changeAuth} = useContext(authContext);\r\n        const [search,changeSearch] = useState('');\r\n        const [searchCriteria,changeSearchCriteria] = useState('');\r\n        const [itemsToBeDeleted,changeItemsToBeDeleted] = useState([]);\r\n        const [errorDeleteDisplay,changeErrorDeleteDisplay] = useState(null);\r\n        \r\n        const history=useHistory();\r\n        /*hardcoded 'NUM' instead of using field position because positions might be diff for each process*/\r\n        const docNum='NUM'\r\n        \r\n    //sanitize and filter initial DB dataSelect.data and dataSelect.field returned from fetch\r\n    useEffect(()=>{\r\n        if (dataSelect && dataSelect.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!')\r\n                changeAuth(false)\r\n            }\r\n        else if (dataSelect)\r\n            changeFilteredData({\r\n                data:dataSelect.data? dataSelect.data.map(data=>Object.assign({},data,{selected:true})):null,\r\n                field: dataSelect.field? dataSelect.field.map(field=>field.name):null,\r\n                error:dataSelect.error\r\n            })\r\n        \r\n        },[dataSelect,errorSelect])\r\n    \r\n    useEffect(()=>{\r\n        if (dataDelete && dataDelete.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n        else if (dataDelete && !dataDelete.error && !errorDelete) {\r\n            alert('Delete Successful!');\r\n            changeErrorDeleteDisplay(null)\r\n            changeItemsToBeDeleted([]);\r\n            filteredData.data.forEach(data=>{\r\n                document.getElementById(data[docNum]).checked=false;\r\n            });\r\n            document.getElementById('mainCheckBox').checked=false;\r\n            changeParamSelect({\r\n                url:'./SelectItem',\r\n                init:{\r\n                    method:'POST',\r\n                    headers:{'Content-Type':'application/json'},\r\n                    body:JSON.stringify({item:props.item}),\r\n                    credentials:'include'\r\n                    }\r\n                })\r\n        }\r\n        else if ((dataDelete && dataDelete.error) || errorDelete) {\r\n            changeErrorDeleteDisplay(\r\n                (<div className=\"alert alert-warning\">\r\n                    {dataDelete && dataDelete.error? 'DELETE failed errno: '+dataDelete.error.errno+' code: '\r\n                     +dataDelete.error.code+' message: '+dataDelete.error.sqlMessage:null}\r\n                    {errorDelete? 'DELETE failed: '+errorDelete : null} \r\n                </div>)\r\n            )\r\n            \r\n        }\r\n    },[dataDelete,errorDelete])\r\n\r\n    function searchCriteriaChange(e) {\r\n        changeSearchCriteria(e.target.value);\r\n    }\r\n    function searchChange(e) {\r\n        if (filteredData && filteredData.data) {\r\n        const newData=filteredData.data.map(data=>{\r\n            if (e.target.value!=='') {\r\n                if (new RegExp(e.target.value,'g').test(data[searchCriteria])) {\r\n                    return Object.assign({},data,{selected:true})\r\n                }\r\n                else {\r\n                    return Object.assign({},data,{selected:false})\r\n                } \r\n            } else return Object.assign({},data,{selected:true})\r\n        })\r\n        changeFilteredData({\r\n            data:newData,\r\n            field:filteredData.field,\r\n            error:filteredData.error\r\n        });\r\n        }\r\n        changeSearch(e.target.value);\r\n    }\r\n    \r\n    function refresh() {\r\n        changeErrorDeleteDisplay(null);\r\n        changeItemsToBeDeleted([]);\r\n            filteredData.data.forEach(data=>{\r\n                document.getElementById(data[docNum]).checked=false;\r\n            });\r\n        document.getElementById('mainCheckBox').checked=false;\r\n        changeParamSelect({\r\n            url:'./SelectItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({item:props.item}),\r\n                credentials:'include'\r\n                }\r\n            })\r\n        }\r\n\r\n    function deleteList() {\r\n        if(window.confirm('Confirm Delete?'))  \r\n        changeParamDelete({\r\n            url:'./DeleteItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    item:props.item,\r\n                    id:itemsToBeDeleted\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        })\r\n    \r\n    }\r\n    \r\n    function onItemClick(data){\r\n        if(data)   \r\n            history.push('./'+props.createItemPath+'?item='+props.item+'&id='+data[docNum])\r\n        else \r\n            history.push('./'+props.createItemPath)\r\n    }\r\n\r\n        let searchCriteriaList;\r\n        let fieldList;\r\n        let dataList;\r\n        let result;\r\n        if (filteredData && filteredData.field) {\r\n            searchCriteriaList=filteredData.field.map(field=>(\r\n                <option key={field} value={field}>{field.replace(/_/g,' ')}</option>\r\n                )\r\n            )\r\n            fieldList=filteredData.field.map(field=>(\r\n                <th key={field} style={{cursor:'pointer'}} className='text-nowrap' data-order='asc'\r\n                onClick={(e)=>{\r\n                    e.target.setAttribute('data-order',e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                    changeFilteredData({...filteredData,\r\n                        data:sortData(filteredData.data,field,e.target.getAttribute('data-order'))\r\n                    })\r\n\r\n                    if (e.target.getAttribute('data-order')==='asc') {\r\n                        document.getElementById(field.replace(/_/g,' ')).classList.remove('fa-caret-up');\r\n                        document.getElementById(field.replace(/_/g,' ')).classList.add('fa-caret-down')\r\n                    }\r\n                    else {\r\n                        document.getElementById(field.replace(/_/g,' ')).classList.remove('fa-caret-down');\r\n                        document.getElementById(field.replace(/_/g,' ')).classList.add('fa-caret-up')\r\n                    }\r\n                        \r\n                    }}>\r\n                    {field.replace(/_/g,' ')}<i id={field.replace(/_/g,' ')} className='fa fa-caret-down ml-2'></i>\r\n                </th>\r\n            ))\r\n        }\r\n        \r\n\r\n        if (filteredData && filteredData.data) {\r\n        dataList=filteredData.data.map((data,i)=>{\r\n            if(data.selected) {\r\n                return (\r\n                    <tr key={data[docNum]}>\r\n                        <td className='align-baseline py-2'>\r\n                            <input type='checkbox' id={data[docNum]} onChange={(e)=>{\r\n                                const targetPosition = itemsToBeDeleted.indexOf(data[docNum])\r\n                                if (e.target.checked) \r\n                                    changeItemsToBeDeleted(\r\n                                        [...itemsToBeDeleted,data[docNum]]\r\n                                    )\r\n                                else {\r\n                                    if(targetPosition!==-1) \r\n                                        changeItemsToBeDeleted(\r\n                                            [...itemsToBeDeleted.slice(0,targetPosition),\r\n                                                ...itemsToBeDeleted.slice(targetPosition+1)])\r\n                                }\r\n                            }}/>\r\n                            \r\n                        </td>\r\n                        <td className='align-baseline py-2'>\r\n                            <button className='btn btn-dark btn-sm' \r\n                                onClick={()=>/*closure in effect here*/onItemClick(data)}>\r\n                                VIEW\r\n                            </button>\r\n                        </td>\r\n                        {filteredData && filteredData.field? filteredData.field.map(field=>{\r\n                            {/*use Math.random cos filteredData.data[field] might have repeated null values or same cell value in same tr \r\n                            and hence duplicate keys*/}\r\n                            return (<td className='text-nowrap align-baseline py-2' key={Math.random()}>\r\n                                {field.indexOf('DATE')!==-1? \r\n                                    dateFormatParser(data[field]):\r\n                                        typeof data[field]==='number'? numberFormatParser(data[field]):data[field]}\r\n                                    \r\n                                </td>)\r\n                        }):null}\r\n                    </tr>)\r\n                    }\r\n                    \r\n                return null;\r\n            });\r\n        }\r\n        \r\n        \r\n        if (filteredData && !filteredData.error && !errorSelect) \r\n            result=\r\n            (\r\n            <div className='overflow-auto'style={{maxHeight:'50vh'}}>\r\n                <table id='table' className='table table-bordered table-hover' >\r\n                        <thead>\r\n                            <tr>\r\n                                <th className='text-nowrap'><input type='checkbox' id='mainCheckBox' onChange={(e)=>{\r\n                                    if (e.target.checked) {\r\n                                        let array=[]\r\n                                        filteredData.data.forEach(data=>{\r\n                                            document.getElementById(data[docNum]).checked=true;\r\n                                            array.push(data[docNum])\r\n                                        })\r\n                                        changeItemsToBeDeleted(array)\r\n                                    }\r\n                                    else {\r\n                                        filteredData.data.forEach(data=>{\r\n                                            document.getElementById(data[docNum]).checked=false;\r\n                                        })\r\n                                        changeItemsToBeDeleted([]);\r\n                                    }\r\n                                    \r\n                                }}/></th>\r\n                                <th></th>\r\n                                {fieldList}\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {dataList}\r\n                        </tbody>\r\n                    </table>\r\n                    </div>)\r\n        \r\n        else if ((filteredData && filteredData.error) || errorSelect) \r\n                result= (<div className=\"alert alert-warning\">\r\n                            {filteredData && filteredData.error? '<DATABASE ERROR> errno: '+filteredData.error.errno+' code: '\r\n                            +filteredData.error.code+' message: '+filteredData.error.sqlMessage:null}\r\n                            {errorSelect? 'OTHER ERROR '+errorSelect.name+' '+errorSelect.message:null}\r\n                        </div>)\r\n        \r\n        else result=null;\r\n        \r\n\r\n        return props.render({searchCriteriaList,result,onItemClick,refresh,search,searchChange,\r\n            searchCriteria,searchCriteriaChange,deleteList,errorDeleteDisplay,itemsToBeDeleted})\r\n}\r\n\r\nexport default Process;","import React from 'react';\r\n\r\nfunction ProcessLayout(props) {\r\n    return (\r\n                <div className='container py-2'>\r\n                    <h3>{props.description}</h3>\r\n                    <button className='btn btn-primary mr-3' onClick={()=>props.onItemClick()}>Create New Item</button>\r\n                    <form className='form-inline my-3'>\r\n                            <label htmlFor='search'>Find Item</label>\r\n                            <input type='text' onChange={(e)=>props.searchChange(e)} id='search' placeholder='Search...' className='form-control mx-sm-3' value={props.search}/>\r\n                            <label htmlFor='search-criteria' className='mt-2 mt-md-0'>Search Criteria</label>\r\n                            <select className='form-control mx-sm-3' value={props.searchCriteria} onChange={props.searchCriteriaChange}>\r\n                                <option value=''> -select an option- </option>\r\n                                {props.searchCriteriaList}\r\n                            </select>\r\n                            <small className='text-muted form-text mt-3 mt-md-0'>Search is CASE SENSITIVE</small>\r\n                    </form>\r\n                    <h5>{'List of '+props.listname}\r\n                    </h5>\r\n                    <div className='mb-3'>\r\n                        <button className='btn btn-outline-info mr-2' onClick={props.refresh}>Refresh</button>\r\n                        <button className='btn btn-danger' onClick={(e)=>{\r\n                        if(!props.itemsToBeDeleted.length)\r\n                            alert('No items selected!')\r\n                        else \r\n                            props.deleteList()\r\n                        }}>Delete\r\n                        </button>\r\n                    </div>\r\n                    \r\n                    {props.errorDeleteDisplay}\r\n                    {props.result}\r\n                </div>\r\n    )\r\n}\r\n\r\nexport default ProcessLayout;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction DeliveryOrder(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./DeliveryOrderItem' item='delivery_order'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={DeliveryOrder.description} listname={DeliveryOrder.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nDeliveryOrder.description='Delivery Order';\r\nDeliveryOrder.path='/DeliveryOrder';\r\n\r\nexport default DeliveryOrder;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction DeliveryReturn(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./DeliveryReturnItem' item='delivery_return'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={DeliveryReturn.description} listname={DeliveryReturn.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nDeliveryReturn.description='Delivery Return';\r\nDeliveryReturn.path='/DeliveryReturn';\r\n\r\nexport default DeliveryReturn;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction SalesInvoice(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./SalesInvoiceItem' item='sales_invoice'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={SalesInvoice.description} listname={SalesInvoice.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nSalesInvoice.description='Sales Invoice';\r\nSalesInvoice.path='/SalesInvoice';\r\n\r\nexport default SalesInvoice;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction DebitNote(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./DebitNoteItem' item='debit_note'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={DebitNote.description} listname={DebitNote.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nDebitNote.description='Debit Note';\r\nDebitNote.path='/DebitNote';\r\n\r\nexport default DebitNote;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction CreditNote(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./CreditNoteItem' item='credit_note'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={CreditNote.description} listname={CreditNote.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nCreditNote.description='Credit Note';\r\nCreditNote.path='/CreditNote';\r\n\r\nexport default CreditNote;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction SalesReport(props) {\r\n    return (\r\n        <AppLayout>\r\n            <h1>Sales Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nSalesReport.description='Sales Report';\r\nSalesReport.path='/SalesReport';\r\n\r\nexport default SalesReport;","import React,{useState,useEffect,useContext} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\n\r\n\r\nfunction Item(props) {\r\n    /*this is a reusable component for all item components (i.e. StockItem.js,DeliveryOrderItem.js) and contains state logic for performing\r\n    (SELECT,UPDATE,INSERT,DELETE) SQL DB operations on form data using useFetch hook.\r\n\r\n    /*If item component accessed from previous page using fetched and filtered items, URL will have parameters starting with ?item=... \r\n    If accessed using 'Create New Item' button from previous page, will have no URL parameters. Existence of URL parameters (have to be \r\n    passed in from parent component in props.URL due to props.location.search only accessible in the component immediately after <Route> in \r\n    react-router) will be used to set initial state to 'INSERT' or 'UPDATE/DELETE' and component will render appropriately */\r\n    \r\n    \r\n    const [usage] = useState(props.url.item && props.url.id?'UPDATE/DELETE':'INSERT');/*if there are URL parameters, state is 'UPDATE/DELETE' \r\n    and vice versa*/\r\n    const [disabled,changeDisabled] = useState(usage==='UPDATE/DELETE'?true:false);/*If state is 'UPDATE/DELETE', all input fields will be \r\n    pre-populated with existing item form data using useFetch hook below and disabled until 'Edit' button is clicked which will re-enable \r\n    editing (certain input fields remain disabled even after 'Edit' is clicked for DB operation purpose). Delete button will also render\r\n    in 'UPDATE/DELETE' state. For 'INSERT' state, none of input fields are disabled and no Edit and Delete button will render*/\r\n    \r\n    /*5 instances of useFetch hook to fetch 5 types of data:1) dataSelect (for initial fetch to pre-populate input field for 'UPDATE/DELETE' \r\n    state) 2) dataInsert (for results of submission of new form data for 'INSERT' state) 3) dataIDList (for list of ID) 4) dataDelete (for results of deletion of existing form data for 'UPDATE/DELETE' state) 5) dataUpdate (for results of update of \r\n    existing form data for 'UPDATE/DELETE' state)*/\r\n\r\n    const [{data:dataSelect,error:errorSelect}]=useFetch(usage==='UPDATE/DELETE'?{\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:props.url.item,id:props.url.id}),\r\n            credentials:'include'\r\n        }\r\n    }:null)\r\n    const [{data:dataIDList,error:errorIDList}]=useFetch({\r\n        url:'./getIDList',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:props.item}),\r\n            credentials:'include'\r\n        }\r\n    })\r\n    const [{data:dataInsert,error:errorInsert},changeParamInsert]=useFetch(null);\r\n    const [{data:dataDelete,error:errorDelete},changeParamDelete]=useFetch(null);\r\n    const [{data:dataUpdate,error:errorUpdate},changeParamUpdate]=useFetch(null);\r\n\r\n    const [IDInfo,changeIDInfo]=useState({\r\n        IDPrefix:[],\r\n        IDPrefixLatestNumber:[],\r\n        currentIDPrefix:'',\r\n        minIDNumber:1,\r\n    })\r\n    \r\n    const {changeAuth} = useContext(authContext)\r\n    const history=useHistory();\r\n    \r\n    /*The below useEffect logic conditions to handle each type of data fetched using the useFetch hooks*/\r\n\r\n    useEffect(()=>{        \r\n\r\n        /* 1) For 'UPDATE/DELETE' state, pre-populate input state with fetched data. Input state are set at parent component (ie. StockItem.js,\r\n        DeliveryOrderItem.js) and changeState functions for each input state are passed as prop (props.changeInputState) \r\n        to this component for initial pre-population once dataSelect is resolved*/ \r\n\r\n        if (dataSelect && dataSelect.auth===false) {\r\n            /*if server sends object.auth===false due to failed cookie validation, will auto-redirect to /Login page after alert.\r\n            Same for all types of data fetch*/\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!')\r\n                changeAuth(false)\r\n            }\r\n            \r\n        else if (dataSelect && dataSelect.field && dataSelect.data[0]) {\r\n                /*In order for correct pre-population of input state, make sure that in the parent component, order of inputState\r\n                array elements correspond to field order in DB (ie if STOCK_NUM is first field column in DB, inputState[0] will be \r\n                populated with fetched data from DB for field STOCK_NUM) */\r\n                let inputStateToBePrePopulated=[];\r\n                dataSelect.field.forEach((field,i)=>{\r\n                    inputStateToBePrePopulated=\r\n                    [...inputStateToBePrePopulated.slice(0,i),(dataSelect.data[0][field.name]?dataSelect.data[0][field.name]:''),\r\n                    ...inputStateToBePrePopulated.slice(i+1,inputStateToBePrePopulated.length)];\r\n                })\r\n                \r\n                \r\n                changeIDInfo(state=>({\r\n                    ...state,\r\n                    currentIDPrefix:dataSelect.data[0][props.item.toUpperCase()+'_NUM'].substring(0,dataSelect.data[0][props.item.toUpperCase()+'_NUM'].indexOf(\"-\")),\r\n                }))\r\n                props.changeInputState(inputStateToBePrePopulated)\r\n                \r\n                if(props.changeParamOutstanding)\r\n                    props.changeParamOutstanding(\r\n                        props.paramOutstanding(\r\n                            inputStateToBePrePopulated[props.debtorCreditorNumPosition],\r\n                            inputStateToBePrePopulated[props.oldNumPosition]\r\n                            )\r\n                        )\r\n            }\r\n                \r\n        },[dataSelect,errorSelect])\r\n\r\n    useEffect(()=>{\r\n            /*2) obtain latest primary list key from DB for this item*/\r\n            if (dataIDList && dataIDList.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n            else if (dataIDList && dataIDList.data && dataIDList.field) {\r\n                let prefixList=[];\r\n                let prefixLatestNumberList=[];\r\n\r\n                dataIDList.data.forEach(ID=>{\r\n                    let parsedPrefix=ID[dataIDList.field[0].name].match(/[^-]+/)[0];\r\n                    let parsedPrefixNumber=parseInt(ID[dataIDList.field[0].name].substring(ID[dataIDList.field[0].name].indexOf(\"-\")+1));\r\n                    if(prefixList.indexOf(parsedPrefix)===-1) {\r\n                        prefixList.push(parsedPrefix)\r\n                        prefixLatestNumberList.push(parsedPrefixNumber)\r\n                    }\r\n                    else if (parsedPrefixNumber && parsedPrefixNumber>prefixLatestNumberList[prefixList.indexOf(parsedPrefix)]) {\r\n                        prefixLatestNumberList[prefixList.indexOf(parsedPrefix)]=parsedPrefixNumber\r\n                    }\r\n                    })\r\n                changeIDInfo(state=>({\r\n                    ...state,\r\n                    IDPrefix:prefixList,\r\n                    IDPrefixLatestNumber:prefixLatestNumberList\r\n                })) \r\n            }\r\n           \r\n            \r\n            /*3) For dataInsert,if successful direct to the associated Process component. Otherwise display error \r\n            and retain current component state*/\r\n            if (dataInsert && dataInsert.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n            else if (dataInsert && !dataInsert.error) {\r\n                alert('Insert Successful!')\r\n                history.push(props.successPath)\r\n            }\r\n            /*4) For dataUpdate,if successful direct to the associated Process component. Otherwise display error \r\n            and retain current component state*/\r\n            if (dataUpdate && dataUpdate.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n            else if (dataUpdate && !dataUpdate.error) {\r\n                alert('Update Successful!')\r\n                history.push(props.successPath)\r\n            }\r\n            /*5) For dataDelete,if successful direct to the associated Process component. Otherwise display error \r\n            and retain current component state*/\r\n            if (dataDelete && dataDelete.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n            else if (dataDelete && !dataDelete.error) {\r\n                alert('Delete Successful!')\r\n                history.push(props.successPath)\r\n            }\r\n\r\n            \r\n    },[dataIDList,errorIDList,dataInsert,errorInsert,dataUpdate,errorUpdate,dataDelete,errorDelete])\r\n\r\n    \r\n\r\n    function onInsert() {\r\n        changeParamInsert({\r\n            url:'./InsertItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    item:props.item,\r\n                    param:props.inputState\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        })\r\n    }\r\n\r\n    function onUpdate() {\r\n        changeParamUpdate({\r\n            url:'./UpdateItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    item:props.item,\r\n                    param:props.inputState\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        })\r\n    }\r\n\r\n    function onDelete() {\r\n        if(window.confirm('Confirm Delete?'))\r\n        changeParamDelete({\r\n            url:'./DeleteItem',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    item:props.item,\r\n                    id:[props.url.id]\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        })\r\n    }\r\n\r\n    function inputNumberRender(inputNumberProps) {\r\n        return (\r\n            <div className={inputNumberProps.layout+ ' input-group'}>\r\n                <input type='text' maxLength={10} value={IDInfo.currentIDPrefix} required className='form-control \r\n                col-5 col-md-4' pattern='[A-Za-z]+' title='Use Alphabets only (Max 4)' disabled={disabled} \r\n                onChange={(e)=>{\r\n                    let matchedIndex=IDInfo.IDPrefix.indexOf(e.target.value);\r\n                    if (matchedIndex!==-1) {\r\n                        changeIDInfo({\r\n                            ...IDInfo,\r\n                            currentIDPrefix:e.target.value,\r\n                            minIDNumber:IDInfo.IDPrefixLatestNumber[matchedIndex]+1\r\n                        });\r\n                        inputNumberProps.onChange('',inputNumberProps.position);\r\n                    }\r\n                    else {\r\n                        changeIDInfo ({\r\n                            ...IDInfo,\r\n                            currentIDPrefix:e.target.value,\r\n                            minIDNumber:1\r\n                        });\r\n                        inputNumberProps.onChange('',inputNumberProps.position);\r\n                    }\r\n                }\r\n                }/>\r\n                <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                    let matchedIndex=IDInfo.IDPrefix.indexOf(e.target.value);\r\n                    if (matchedIndex!==-1) {\r\n                        changeIDInfo({\r\n                            ...IDInfo,\r\n                            currentIDPrefix:e.target.value,\r\n                            minIDNumber:IDInfo.IDPrefixLatestNumber[matchedIndex]+1\r\n                        })\r\n                        inputNumberProps.onChange('',inputNumberProps.position);\r\n                    }\r\n                    else {\r\n                        changeIDInfo ({\r\n                            ...IDInfo,\r\n                            currentIDPrefix:e.target.value,\r\n                            minIDNumber:1\r\n                        })\r\n                        inputNumberProps.onChange('',inputNumberProps.position);\r\n                    }\r\n                }\r\n                }>\r\n                    <option value=''>-select an option- </option>\r\n                    {IDInfo.IDPrefix.map((ID,i)=>(\r\n                        <option key={ID} value={ID}>\r\n                            {ID +' | Latest Number: '+ IDInfo.IDPrefixLatestNumber[i]}\r\n                        </option>)\r\n                    )}\r\n                </select>\r\n                <input type='number' id={inputNumberProps.labelID} max='999999999'\r\n                value={props.inputState[inputNumberProps.position].substring(props.inputState[inputNumberProps.position].indexOf(\"-\")+1)} \r\n                onChange={(e)=>inputNumberProps.onChange(IDInfo.currentIDPrefix+'-'+e.target.value,inputNumberProps.position)} \r\n                disabled={disabled} required className='form-control' placeholder={'Next Number : '+(IDInfo.minIDNumber)} \r\n                min={IDInfo.minIDNumber}/>\r\n                                \r\n            </div>\r\n        )\r\n    }\r\n    \r\n    //error summary component\r\n    let errorDisplay=null;\r\n    if ((dataSelect && dataSelect.error) || errorSelect || (dataIDList && dataIDList.error) || errorIDList || (dataInsert && dataInsert.error) || errorInsert\r\n        || (dataDelete && dataDelete.error) || errorDelete || (dataUpdate && dataUpdate.error) || errorUpdate)\r\n        errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelect && dataSelect.error? 'Data RETRIEVAL for item failed errno: '+dataSelect.error.errno+' code: '+dataSelect.error.code+' message: '+dataSelect.error.sqlMessage:null}\r\n            {errorSelect? 'Data RETRIEVAL for item failed '+errorSelect : null}\r\n            \r\n            {dataInsert && dataInsert.error? 'Data INSERT for item failed errno: '+dataInsert.error.errno+' code: '+dataInsert.error.code+' message: '+dataInsert.error.sqlMessage:null}\r\n            {errorInsert? 'Data INSERT for item failed '+errorInsert : null}\r\n            \r\n            {dataUpdate && dataUpdate.error? 'Data UPDATE for item failed errno: '+dataUpdate.error.errno+' code: '+dataUpdate.error.code+' message: '+dataUpdate.error.sqlMessage:null}\r\n            {errorUpdate? 'Data UPDATE for item failed '+errorUpdate : null}\r\n            \r\n            {dataDelete && dataDelete.error? 'Data DELETE for item failed errno: '+dataDelete.error.errno+' code: '+dataDelete.error.code+' message: '+dataDelete.error.sqlMessage:null}\r\n            {errorDelete? 'Data DELETE for item failed '+errorDelete : null}\r\n            <br/>\r\n            <br/>\r\n            {dataIDList && dataIDList.error? 'ID RETRIEVAL for item failed errno: '+dataIDList.error.errno+' code: '+dataIDList.error.code+' message: '+dataIDList.error.sqlMessage:null}\r\n            {errorIDList? 'ID RETRIEVAL for item failed '+errorIDList:null}\r\n        </div>\r\n    )\r\n    \r\n\r\n    \r\n    return props.children({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})\r\n}\r\n\r\n\r\nexport default Item;\r\n","import React from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction ItemButton(props) {\r\n    const history=useHistory();\r\n\r\n    return (\r\n        <div>\r\n            <button type='submit' className='btn btn-primary mx-1 my-1'>Submit</button>\r\n            {/*If state is 'INSERT', no Edit button & Delete button*/}\r\n            {props.usage==='UPDATE/DELETE'?(\r\n                <button type='button' onClick={(e)=>{props.changeDisabled(false)}} className='btn btn-outline-primary mx-1 my-1'>Edit</button>\r\n            ):null}\r\n            {props.usage==='UPDATE/DELETE'?(\r\n                <button type='button' onClick={(e)=>{props.onDelete()}} className='btn btn-danger mx-1 my-1'>Delete</button>\r\n            ):null}\r\n            {props.path? (\r\n                <button type='button' onClick={(e)=>{\r\n                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                        'content','width=device-width, initial-scale=0.5');\r\n                    history.push(props.path)\r\n                }} className='btn btn-info mx-1 my-1'>Preview</button>\r\n            ):null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ItemButton;","import React from 'react';\r\nimport numberFormatParser from '../numberFormatParser';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\n/*Layout for SALES INVOICE,PURCHASE INVOICE,DEBIT NOTE,CREDIT NOTE*/\r\n\r\nfunction DocumentOne(props) {\r\n    const history=useHistory();\r\n\r\n    const topLeftInput=props.topLeftInput? props.topLeftInput.map((input,i)=>\r\n        <p className='my-2' key={i}>{input}</p>\r\n        ):null;\r\n\r\n    const topRightArea=props.topRightField && props.topRightInput? props.topRightField.map((field,i)=>\r\n        (<div className='row' key={i}>\r\n            <div className='col-6 h6'>\r\n                {field}\r\n            </div>\r\n            <div className='col-1'>\r\n                :\r\n            </div>\r\n            <div className='col-4 h6'>\r\n                {props.topRightInput[i]}\r\n            </div>\r\n        </div>)):null;\r\n\r\n    const bottomField=props.bottomField? props.bottomField.map(field=>\r\n        <th className='text-nowrap' key={field}>{field}</th>\r\n        ):null;\r\n\r\n    const bottomInput=props.bottomInput? props.bottomInput.map((itemline,i)=>\r\n        \r\n         <tr key={i}>\r\n            {itemline.map((input,i)=>(\r\n                <td key={i}>{input}</td>\r\n                )\r\n            )}\r\n            {props.calculateSubtotal? <td>{numberFormatParser(props.calculateSubtotal(i))}</td>:null}\r\n        </tr>\r\n    \r\n        ):null;\r\n    \r\n    return (\r\n        <div className='container py-5' style={{maxWidth:'800px'}}>\r\n            <button type='click' className='btn btn-secondary d-print-none mb-2' \r\n            onClick={()=>{\r\n                document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                    'content','width=device-width, initial-scale=1.0');\r\n                history.push(props.backPath)\r\n                }}>Back</button>\r\n            <div className='jumbotron' style={{padding:0}}>\r\n                <h1 className='text-center'>{props.description}</h1>\r\n            </div>\r\n            <div className='row' style={{margin:0}}>\r\n                <div className='col-6 jumbotron h5' style={{marginBottom:0}}>\r\n                    {topLeftInput}\r\n                </div>\r\n                <div className='col-6 py-5'>\r\n                    {topRightArea}\r\n                </div>\r\n            </div>\r\n            <hr className='border border-secondary my-3'/>\r\n            <table className='table table-bordered'>\r\n                <thead>\r\n                    <tr>\r\n                        {bottomField}\r\n                    </tr>\r\n                </thead>\r\n                    \r\n                <tbody>\r\n                    {bottomInput}\r\n                </tbody>\r\n            </table>\r\n            \r\n            <h3 className='text-right px-3'>\r\n                {'Total: '+numberFormatParser(props.calculateTotal())}\r\n            </h3>\r\n            <hr className='border border-secondary'/>\r\n            <p className='text-center'>{props.footer}</p>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default DocumentOne;","import React,{useState} from 'react';\r\n\r\n\r\nfunction LineRenderQtyOnly(props) {\r\n    const minWidth=575;\r\n    const stockNum=props.dataSelectStock?props.dataSelectStock.field[0].name:null;\r\n    const stockDesc=props.dataSelectStock?props.dataSelectStock.field[1].name:null;\r\n    const stockBalQty=props.dataSelectStock?props.dataSelectStock.field[8].name:null;\r\n\r\n    function onChangeLineInput(e,order,lineNumber,innerOrder) {\r\n        props.changeInputState(inputState=>inputState.slice(0,order)\r\n        .concat([inputState[order].slice(0,lineNumber)\r\n        .concat([inputState[order][lineNumber].slice(0,innerOrder)\r\n        .concat(e)\r\n        .concat(inputState[order][lineNumber].slice(innerOrder+1))])\r\n        .concat(inputState[order].slice(lineNumber+1))])\r\n        .concat(inputState.slice(order+1)))\r\n    }\r\n\r\n    function addStockControlItem(i,itemCode,Qty) {\r\n        let targetPosition=props.inputState[props.stockControlPosition].findIndex(item=>item[0]-1===i)\r\n        \r\n        if (targetPosition>=0)\r\n                props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition].slice(0,targetPosition),\r\n                    [i+1,itemCode,Qty],\r\n                ...inputState[props.stockControlPosition].slice(targetPosition+1)],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n                )\r\n            else\r\n                props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition],\r\n                    [i+1,itemCode,Qty]\r\n                ],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n                )\r\n    }\r\n\r\n    function removeStockControlItem(i) {\r\n        let targetPosition=props.inputState[props.stockControlPosition].findIndex(item=>item[0]-1===i)\r\n        \r\n        if (targetPosition>=0)\r\n            props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition].slice(0,targetPosition),\r\n                ...inputState[props.stockControlPosition].slice(targetPosition+1)],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n            )\r\n    }\r\n\r\n    function isNegativeStockBalance() {\r\n        if (props.dataSelectStock) \r\n            return props.inputState[props.stockControlPosition].some(item=>\r\n                calculateFinalQty(item) < 0\r\n            )\r\n        else return false;\r\n    }\r\n\r\n    function calculateFinalQty(item) {\r\n        if (props.stockDirection==='out')\r\n            return props.dataSelectStock.data.find(item2=>item2[stockNum]===item[1])[stockBalQty]-\r\n                props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                    if(b[1]===item[1])\r\n                        return a+Number(b[2])\r\n                    else return a\r\n                },0)\r\n        else if (props.stockDirection==='in')\r\n            return props.dataSelectStock.data.find(item2=>item2[stockNum]===item[1])[stockBalQty]+\r\n                props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                    if(b[1]===item[1])\r\n                        return a+Number(b[2])\r\n                    else return a\r\n                },0)\r\n    }\r\n    \r\n\r\n    function populateNegativeStockBalanceTable () {\r\n        const lineAlreadyFiltered=[]\r\n\r\n        if (props.dataSelectStock) {\r\n            props.inputState[props.stockControlPosition].forEach(item=>{\r\n                if(calculateFinalQty(item)<0 && lineAlreadyFiltered.indexOf(item[1])===-1)\r\n                    lineAlreadyFiltered.push(item[1])\r\n            })\r\n            \r\n            return lineAlreadyFiltered.map(stockNum1=>\r\n                (<tr key={stockNum1}>\r\n                    <td>{stockNum1}</td>\r\n                    <td>\r\n                        {props.dataSelectStock.data.find(item2=>\r\n                        item2[stockNum]===stockNum1)[stockDesc]}\r\n                    </td>\r\n                    <td>\r\n                        {props.dataSelectStock.data.find(item2=>\r\n                        item2[stockNum]===stockNum1)[stockBalQty]}\r\n                    </td>\r\n                    <td>\r\n                        {props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                            if(b[1]===stockNum1)\r\n                                return a+Number(b[2])\r\n                            else return a\r\n                        },0)}\r\n                    </td>\r\n                    <td>\r\n                        {calculateFinalQty(props.inputState[props.stockControlPosition].find(item=>\r\n                            item[1]===stockNum1))}\r\n                    </td>\r\n                </tr>)\r\n            )\r\n        }\r\n        else return null\r\n    }\r\n\r\n    \r\nconsole.log(props.inputState)\r\n    return (\r\n        <fieldset className='form-group col-md-12 mx-3 border border-secondary pb-4 rounded'>\r\n            <legend className='col-form-label col-12 col-md-6 offset-md-3 text-center' >\r\n                <button type='button' className='btn btn-primary' disabled={props.disabled}\r\n                onClick={()=>\r\n                    props.changeInputState(\r\n                        props.inputState.slice(0,props.linePosition)\r\n                        .concat([props.inputState[props.linePosition].slice(0)\r\n                            .concat(\r\n                                [[props.inputState[props.linePosition].length+1,'','','']])])\r\n                        .concat(props.inputState.slice(props.linePosition+1))\r\n                    )\r\n                }>+</button>\r\n\r\n                <h6 className='d-inline-block mx-2 mx-md-4'>{props.lineDescription}</h6>\r\n\r\n                <button type='button' className='btn btn-secondary' disabled={props.disabled}\r\n                onClick={()=>{\r\n                    removeStockControlItem(props.inputState[props.linePosition].length-1)\r\n\r\n                    props.changeInputState(inputState=>\r\n                        inputState.slice(0,props.linePosition)\r\n                        .concat([inputState[props.linePosition].slice(0,inputState[props.linePosition].length-1)])\r\n                        .concat(inputState.slice(props.linePosition+1))\r\n                    )\r\n                }}>-</button>\r\n            </legend>\r\n            <div className=\"overflow-auto\">\r\n                {/*flex nowrap and overflow auto for mobile view*/}\r\n                <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}}>\r\n                    <h6 className='col text-nowrap' style={{flex:'1 0 80px',paddingLeft:10,paddingRight:10}}>Line No.</h6>\r\n                    <h6 className='col text-nowrap' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Item Code</h6>\r\n                    <h6 className='col' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10}}>Stock Control</h6>\r\n                    <h6 className='col text-nowrap' style={{flex:'1 0 225px',paddingLeft:10,paddingRight:10}}>Description</h6>\r\n                    <h6 className='col text-nowrap' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10}}>Qty</h6>\r\n                </div>\r\n\r\n                {props.inputState[props.linePosition].map((lineSet,i)=>\r\n                <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}} key={i}>\r\n                    {/*set fixed flex basis so layout is consistent with h6 header as well*/}\r\n                    <label htmlFor='lineNo' className='sr-only'/>\r\n                    <input type='number' id='lineNo' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][0]} \r\n                    onChange={(e)=>e} style={{flex:'1 0 80px',paddingLeft:10,paddingRight:0}} disabled={props.disabled}/>\r\n\r\n                    <div className='col input-group' style={{flex:'1 0 120px',paddingLeft:0,paddingRight:0}}>\r\n                        <label htmlFor='itemCode' className='sr-only'/>\r\n                        <input type='text' id ='itemCode' className='form-control rounded-0' disabled={props.disabled}\r\n                        style={{paddingLeft:10}}\r\n                        value={props.inputState[props.linePosition][i][1]?props.inputState[props.linePosition][i][1]:''} \r\n                        onChange={(e)=>{\r\n                            onChangeLineInput(e.target.value,props.linePosition,i,1)\r\n                            if(props.dataSelectStock.data.some(item=>{\r\n                                const stockNum=props.dataSelectStock.field[0].name;\r\n                                return item[stockNum]===e.target.value\r\n                            }))\r\n                                addStockControlItem(i,e.target.value,props.inputState[props.linePosition][i][3])\r\n                            else\r\n                                removeStockControlItem(i)\r\n                        }}/>\r\n                        <select className='form-control rounded-0' style={{flex:'0 1 0'}} disabled={props.disabled} \r\n                        onChange={(e)=>{\r\n                            let stockDescription='';\r\n                            let itemCode=e.target.value\r\n                        \r\n                            props.dataSelectStock.data.forEach(data=>{        \r\n                                if(data[props.dataSelectStock.field[0].name]===e.target.value) {\r\n                                    stockDescription=data[props.dataSelectStock.field[1].name]?\r\n                                        data[props.dataSelectStock.field[1].name]:'';\r\n                                }\r\n                            })\r\n                        \r\n                            props.changeInputState(inputState=>inputState.slice(0,props.linePosition)\r\n                            .concat([inputState[props.linePosition].slice(0,i)\r\n                            .concat([inputState[props.linePosition][i].slice(0,1)\r\n                            .concat(itemCode).concat(stockDescription)\r\n                            .concat(inputState[props.linePosition][i].slice(3))])\r\n                            .concat(inputState[props.linePosition].slice(i+1))])\r\n                            .concat(inputState.slice(props.linePosition+1))\r\n                            )\r\n                            if (e.target.value!=='')\r\n                                addStockControlItem(i,e.target.value,props.inputState[props.linePosition][i][3])\r\n                            else\r\n                                removeStockControlItem(i)\r\n\r\n                                }}>\r\n                            <option value=''>-select an option- </option>\r\n                            {props.stockList}\r\n                        </select>\r\n                    </div>\r\n            \r\n                    <div className='text-center' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10,paddingTop:7,\r\n                        border:'1px solid #ced4da',\r\n                        backgroundColor:props.disabled? '#e9ecef': \r\n                        (props.dataSelectStock && props.dataSelectStock.data.every(item=>{\r\n                            const stockNum=props.dataSelectStock.field[0].name;\r\n                            return item[stockNum]!==props.inputState[props.linePosition][i][1]\r\n                        })? '#e9ecef': 'transparent')\r\n                    }}>\r\n                        <label htmlFor='stockControl' className='sr-only'/>\r\n                        <input id='stockControl' type='checkbox' \r\n                        disabled={props.disabled? true: \r\n                            (props.dataSelectStock && props.dataSelectStock.data.every(item=>{\r\n                            const stockNum=props.dataSelectStock.field[0].name;\r\n                            return item[stockNum]!==props.inputState[props.linePosition][i][1]\r\n                        })? true: false)} checked={props.inputState[props.stockControlPosition].some(item=>item[0]-1===i)} \r\n                \r\n                        onChange={e=>{\r\n                        if (e.target.checked) \r\n                            addStockControlItem(i,props.inputState[props.linePosition][i][1],props.inputState[props.linePosition][i][3]);\r\n                        else \r\n                            removeStockControlItem(i);\r\n                        }}/>\r\n                    </div>\r\n            \r\n                    <label htmlFor='description' className='sr-only'/>\r\n                    <input type='text' id='description' required className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][2]} \r\n                    onChange={(e)=>onChangeLineInput(e.target.value,props.linePosition,i,2)} disabled={props.disabled}\r\n                    style={{flex:'1 0 225px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n                    <label htmlFor='qty' className='sr-only'/>\r\n                    <input type='number' required min='0' step='1' id='qty' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][3]} disabled={props.disabled}\r\n                    style={{flex:'1 0 75px',paddingLeft:10,paddingRight:0}}\r\n                    onChange={(e)=>{\r\n                        onChangeLineInput(e.target.value,props.linePosition,i,3);\r\n                        if(props.inputState[props.stockControlPosition].some(item=>item[0]-1===i))\r\n                            addStockControlItem(i,props.inputState[props.linePosition][i][1],e.target.value)\r\n                    }}/>\r\n                </div>)}\r\n                {isNegativeStockBalance() && !props.disabled?\r\n                (<div style={{minWidth:minWidth}}> \r\n                    <div className='alert alert-warning mt-3' style={{cursor:'pointer'}} data-toggle='collapse'\r\n                    data-target='#negativeStockBal'>\r\n                        Negative Stock Balance\r\n                    </div>\r\n                    <div className='collapse navbar-collapse pl-3 pl-md-5' id='negativeStockBal'>\r\n                        <table className='table table-responsive-md'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th className='text-nowrap'>Item Code</th>\r\n                                    <th className='text-nowrap'>Description</th>\r\n                                    <th className='text-nowrap'>Bal Qty</th>\r\n                                    <th className='text-nowrap'>{props.stockDirection==='out'?'Out':'In'}</th>\r\n                                    <th className='text-nowrap'>Final Qty</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {populateNegativeStockBalanceTable()}\r\n                            </tbody>\r\n\r\n                        </table>\r\n                    </div>\r\n                </div>):null}\r\n            </div>\r\n        </fieldset>\r\n    )\r\n}\r\n\r\n\r\nexport default LineRenderQtyOnly;","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRenderQtyOnly from '../Shared/LineRenderQtyOnly';\r\n\r\n\r\n\r\nfunction DeliveryOrderItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n\r\n    const linePosition=7;\r\n    const stockControlPosition=8;\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectStock,errorSelectStock])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((deliveryorderlineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='')\r\n             total=total+(parseInt(inputState[linePosition][i][3]))\r\n        })\r\n        return total;\r\n    }\r\n\r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='delivery_order' successPath='/DeliveryOrder'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={DeliveryOrderItem.description} \r\n                        backPath={DeliveryOrderItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[DeliveryOrderItem.description+' No','Date','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4])]}\r\n                        bottomField={['','Item Code','Description','Qty']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateTotal={calculateTotal}\r\n                        footer='Goods sold are neither returnable or refundable. Otherwise a cancellation fee of 20% on purchase price will be imposed.'\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ DeliveryOrderItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='debtorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let debtorName='';\r\n                                        let debtorAddress='';\r\n                                    \r\n                                        dataSelectDebtor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                                debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                                debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,debtorName,debtorAddress,...inputState.slice(3,inputState.length)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='debtorName'>Debtor Name</label>\r\n                                <input id='debtorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='debtorAddress'>Debtor Address</label>\r\n                                <textarea id='debtorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='deliveryOrderNumber' className='mt-3'>Delivery Order Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'deliveryOrderNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRenderQtyOnly linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='out'\r\n                            lineDescription={'Delivery Order Line'}\r\n                            />\r\n                                \r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={DeliveryOrderItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nDeliveryOrderItem.description='Delivery Order';\r\nDeliveryOrderItem.path='/DeliveryOrderItem';\r\n\r\nexport default DeliveryOrderItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRenderQtyOnly from '../Shared/LineRenderQtyOnly';\r\n\r\n\r\nfunction DeliveryReturnItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n\r\n    const linePosition=7;\r\n    const stockControlPosition=8;\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n\r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n        \r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectStock,errorSelectStock])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((deliveryreturnlineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='')\r\n             total=total+(parseInt(inputState[linePosition][i][3]))\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='delivery_return' successPath='/DeliveryReturn'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={DeliveryReturnItem.description} \r\n                        backPath={DeliveryReturnItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[DeliveryReturnItem.description+' No','Date','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4])]}\r\n                        bottomField={['','Item Code','Description','Qty']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateTotal={calculateTotal}\r\n                        footer='Goods sold are neither returnable or refundable. Otherwise a cancellation fee of 20% on purchase price will be imposed.'\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ DeliveryReturnItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='debtorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let debtorName='';\r\n                                        let debtorAddress='';\r\n                                    \r\n                                        dataSelectDebtor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                                debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                                debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,debtorName,debtorAddress,...inputState.slice(3,inputState.length)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='debtorName'>Debtor Name</label>\r\n                                <input id='debtorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='debtorAddress'>Debtor Address</label>\r\n                                <textarea id='debtorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='deliveryReturnNumber' className='mt-3'>Delivery Return Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'deliveryReturnNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRenderQtyOnly linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='in'\r\n                            lineDescription={'Delivery Return Line'}\r\n                            />\r\n\r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={DeliveryReturnItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nDeliveryReturnItem.description='Delivery Return';\r\nDeliveryReturnItem.path='/DeliveryReturnItem';\r\n\r\nexport default DeliveryReturnItem;\r\n\r\n","import React from 'react';\r\nimport numberFormatParser from './numberFormatParser';\r\n\r\nfunction LineRender(props) {\r\n    const minWidth=845;\r\n    const stockNum=props.dataSelectStock?props.dataSelectStock.field[0].name:null;\r\n    const stockDesc=props.dataSelectStock?props.dataSelectStock.field[1].name:null;\r\n    const stockBalQty=props.dataSelectStock?props.dataSelectStock.field[8].name:null;\r\n\r\n    function onChangeLineInput(e,order,lineNumber,innerOrder) {\r\n        props.changeInputState(inputState=>inputState.slice(0,order)\r\n        .concat([inputState[order].slice(0,lineNumber)\r\n        .concat([inputState[order][lineNumber].slice(0,innerOrder)\r\n        .concat(e)\r\n        .concat(inputState[order][lineNumber].slice(innerOrder+1))])\r\n        .concat(inputState[order].slice(lineNumber+1))])\r\n        .concat(inputState.slice(order+1)))\r\n    }\r\n\r\n    function addStockControlItem(i,itemCode,Qty) {\r\n        let targetPosition=props.inputState[props.stockControlPosition].findIndex(item=>item[0]-1===i)\r\n        \r\n        if (targetPosition>=0)\r\n                props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition].slice(0,targetPosition),\r\n                    [i+1,itemCode,Qty],\r\n                ...inputState[props.stockControlPosition].slice(targetPosition+1)],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n                )\r\n            else\r\n                props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition],\r\n                    [i+1,itemCode,Qty]\r\n                ],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n                )\r\n    }\r\n\r\n    function removeStockControlItem(i) {\r\n        let targetPosition=props.inputState[props.stockControlPosition].findIndex(item=>item[0]-1===i)\r\n        \r\n        if (targetPosition>=0)\r\n            props.changeInputState(inputState=>\r\n                [...inputState.slice(0,props.stockControlPosition),\r\n                [...inputState[props.stockControlPosition].slice(0,targetPosition),\r\n                ...inputState[props.stockControlPosition].slice(targetPosition+1)],\r\n                ...inputState.slice(props.stockControlPosition+1)]\r\n            )\r\n    }\r\n\r\n    function isNegativeStockBalance() {\r\n        if (props.dataSelectStock) \r\n            return props.inputState[props.stockControlPosition].some(item=>\r\n                calculateFinalQty(item) < 0\r\n            )\r\n        else return false;\r\n    }\r\n\r\n    function calculateFinalQty(item) {\r\n        if (props.stockDirection==='out')\r\n            return props.dataSelectStock.data.find(item2=>item2[stockNum]===item[1])[stockBalQty]-\r\n                props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                    if(b[1]===item[1])\r\n                        return a+Number(b[2])\r\n                    else return a\r\n                },0)\r\n        else if (props.stockDirection==='in')\r\n            return props.dataSelectStock.data.find(item2=>item2[stockNum]===item[1])[stockBalQty]+\r\n                props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                    if(b[1]===item[1])\r\n                        return a+Number(b[2])\r\n                    else return a\r\n                },0)\r\n    }\r\n\r\n    function populateNegativeStockBalanceTable () {\r\n        const lineAlreadyFiltered=[]\r\n\r\n        if (props.dataSelectStock) {\r\n            props.inputState[props.stockControlPosition].forEach(item=>{\r\n                if(calculateFinalQty(item)<0 && lineAlreadyFiltered.indexOf(item[1])===-1)\r\n                    lineAlreadyFiltered.push(item[1])\r\n            })\r\n            \r\n            return lineAlreadyFiltered.map(stockNum1=>\r\n                (<tr key={stockNum1}>\r\n                    <td>{stockNum1}</td>\r\n                    <td>\r\n                        {props.dataSelectStock.data.find(item2=>\r\n                        item2[stockNum]===stockNum1)[stockDesc]}\r\n                    </td>\r\n                    <td>\r\n                        {props.dataSelectStock.data.find(item2=>\r\n                        item2[stockNum]===stockNum1)[stockBalQty]}\r\n                    </td>\r\n                    <td>\r\n                        {props.inputState[props.stockControlPosition].reduce((a,b)=>{\r\n                            if(b[1]===stockNum1)\r\n                                return a+Number(b[2])\r\n                            else return a\r\n                        },0)}\r\n                    </td>\r\n                    <td>\r\n                        {calculateFinalQty(props.inputState[props.stockControlPosition].find(item=>\r\n                            item[1]===stockNum1))}\r\n                    </td>\r\n                </tr>)\r\n            )\r\n        }\r\n        else return null\r\n    }\r\n\r\n    return (\r\n        <fieldset className='form-group col-md-12 mx-3 border border-secondary pb-4 rounded'>\r\n            <legend className='col-form-label col-12 col-md-6 offset-md-3 text-center' >\r\n                <button type='button' className='btn btn-primary' disabled={props.disabled}\r\n                onClick={()=>\r\n                    props.changeInputState(\r\n                        props.inputState.slice(0,props.linePosition)\r\n                        .concat([props.inputState[props.linePosition].slice(0)\r\n                            .concat(\r\n                                [[props.inputState[props.linePosition].length+1,'','','',0,0]])])\r\n                        .concat(props.inputState.slice(props.linePosition+1))\r\n                    )\r\n                }>+</button>\r\n                <h6 className='d-inline-block mx-2 mx-md-4'>{props.lineDescription}</h6>\r\n                <button type='button' className='btn btn-secondary' disabled={props.disabled}\r\n                onClick={()=>{\r\n                    removeStockControlItem(props.inputState[props.linePosition].length-1)\r\n\r\n                    props.changeInputState(inputState=>\r\n                        inputState.slice(0,props.linePosition)\r\n                        .concat([inputState[props.linePosition].slice(0,inputState[props.linePosition].length-1)])\r\n                        .concat(inputState.slice(props.linePosition+1))\r\n                    )\r\n                }\r\n                    \r\n                }>-</button>\r\n            </legend>\r\n            <div className=\"overflow-auto\">\r\n                {/*flex nowrap and overflow auto for mobile view*/}\r\n                <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}}>\r\n                    <h6 className='col' style={{flex:'1 0 80px',paddingLeft:10,paddingRight:10}}>Line No.</h6>\r\n                    <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Item Code</h6>\r\n                    <h6 className='col' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10}}>Stock Control</h6>\r\n                    <h6 className='col' style={{flex:'1 0 225px',paddingLeft:10,paddingRight:10}}>Description</h6>\r\n                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Price</h6>\r\n                    <h6 className='col' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10}}>Qty</h6>\r\n                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Discount</h6>\r\n                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Subtotal</h6>\r\n                </div>\r\n\r\n                {props.inputState[props.linePosition].map((lineSet,i)=>\r\n                <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}} key={i}>\r\n                    {/*set fixed flex basis so layout is consistent with h6 header as well*/}\r\n                    <label htmlFor='lineNo' className='sr-only'/>\r\n                    <input type='number' id='lineNo' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][0]} \r\n                    onChange={(e)=>e} style={{flex:'1 0 80px',paddingLeft:10,paddingRight:0}} disabled={props.disabled}/>\r\n\r\n                    <div className='col input-group' style={{flex:'1 0 120px',paddingLeft:0,paddingRight:0}}>\r\n                        <label htmlFor='itemCode' className='sr-only'/>\r\n                        <input type='text' id ='itemCode' className='form-control rounded-0' disabled={props.disabled}\r\n                        style={{paddingLeft:10}}\r\n                        value={props.inputState[props.linePosition][i][1]?props.inputState[props.linePosition][i][1]:''} \r\n                        onChange={(e)=>{\r\n                            onChangeLineInput(e.target.value,props.linePosition,i,1)\r\n                            if(props.dataSelectStock.data.some(item=>{\r\n                                const stockNum=props.dataSelectStock.field[0].name;\r\n                                return item[stockNum]===e.target.value\r\n                            }))\r\n                                addStockControlItem(i,e.target.value,props.inputState[props.linePosition][i][4])\r\n                            else\r\n                                removeStockControlItem(i)\r\n                        }}/>\r\n                        <select className='form-control rounded-0' style={{flex:'0 1 0'}} disabled={props.disabled} onChange={(e)=>{\r\n                            let description='';\r\n                            let price='';\r\n                            let itemCode=e.target.value;\r\n\r\n                            props.dataSelectStock.data.forEach(data=>{\r\n                            \r\n                                if(data[props.dataSelectStock.field[0].name]===e.target.value) {\r\n                                    description=data[props.dataSelectStock.field[1].name]?data[props.dataSelectStock.field[1].name]:'';\r\n                                    price=data[props.dataSelectStock.field[2].name]?data[props.dataSelectStock.field[2].name]:'';\r\n                                }\r\n                            })\r\n                        \r\n                            props.changeInputState(inputState=>inputState.slice(0,props.linePosition)\r\n                                .concat([inputState[props.linePosition].slice(0,i)\r\n                                .concat([inputState[props.linePosition][i].slice(0,1)\r\n                                .concat(itemCode).concat(description).concat(price)\r\n                                .concat(inputState[props.linePosition][i].slice(4))])\r\n                                .concat(inputState[props.linePosition].slice(i+1))])\r\n                                .concat(inputState.slice(props.linePosition+1)))\r\n\r\n                            if (e.target.value!=='')\r\n                                addStockControlItem(i,e.target.value,props.inputState[props.linePosition][i][4])\r\n                            else\r\n                                removeStockControlItem(i)\r\n                            }}>\r\n                            <option value=''>-select an option- </option>\r\n                            {props.stockList}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className='text-center' style={{flex:'1 0 75px',paddingLeft:10,paddingRight:10,paddingTop:7,\r\n                        border:'1px solid #ced4da',\r\n                        backgroundColor:props.disabled? '#e9ecef': \r\n                        (props.dataSelectStock && props.dataSelectStock.data.every(item=>{\r\n                            const stockNum=props.dataSelectStock.field[0].name;\r\n                            return item[stockNum]!==props.inputState[props.linePosition][i][1]\r\n                        })? '#e9ecef': 'transparent')\r\n                    }}>\r\n                        <label htmlFor='stockControl' className='sr-only'/>\r\n                        <input id='stockControl' type='checkbox' \r\n                        disabled={props.disabled? true: \r\n                            (props.dataSelectStock && props.dataSelectStock.data.every(item=>{\r\n                            const stockNum=props.dataSelectStock.field[0].name;\r\n                            return item[stockNum]!==props.inputState[props.linePosition][i][1]\r\n                        })? true: false)} checked={props.inputState[props.stockControlPosition].some(item=>item[0]-1===i)} \r\n                \r\n                        onChange={e=>{\r\n                        if (e.target.checked) \r\n                            addStockControlItem(i,props.inputState[props.linePosition][i][1],props.inputState[props.linePosition][i][4]);\r\n                        else \r\n                            removeStockControlItem(i);\r\n                        }}/>\r\n                    </div>\r\n\r\n\r\n\r\n                    <label htmlFor='description' className='sr-only'/>\r\n                    <input type='text' id='description' required className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][2]} \r\n                    onChange={(e)=>onChangeLineInput(e.target.value,props.linePosition,i,2)} disabled={props.disabled}\r\n                    style={{flex:'1 0 225px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n                    <label htmlFor='price' className='sr-only'/>\r\n                    <input type='number' required min='0' step='.01' id='price' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][3]} \r\n                    onChange={(e)=>onChangeLineInput(e.target.value,props.linePosition,i,3)} disabled={props.disabled}\r\n                    style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n                    <label htmlFor='qty' className='sr-only'/>\r\n                    <input type='number' required min='0' step='1' id='qty' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][4]} disabled={props.disabled}\r\n                    style={{flex:'1 0 75px',paddingLeft:10,paddingRight:0}}\r\n                    onChange={(e)=>{\r\n                        onChangeLineInput(e.target.value,props.linePosition,i,4)\r\n                        if(props.inputState[props.stockControlPosition].some(item=>item[0]-1===i))\r\n                            addStockControlItem(i,props.inputState[props.linePosition][i][1],e.target.value)\r\n                    }} />\r\n\r\n                    <label htmlFor='discount' className='sr-only'/>\r\n                    <input type='number' required min='0' step='.01' id='discount' className='col form-control rounded-0' \r\n                    value={props.inputState[props.linePosition][i][5]} \r\n                    onChange={(e)=>onChangeLineInput(e.target.value,props.linePosition,i,5)} disabled={props.disabled}\r\n                    style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n                    <label htmlFor='subtotal' className='sr-only'/>\r\n                    <input type='text' step='.01' disabled id='subtotal' className='col form-control rounded-0' \r\n                    value={numberFormatParser(props.calculateSubtotal(i))} \r\n                    style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}}/>\r\n                </div>)}\r\n                {isNegativeStockBalance() && !props.disabled?\r\n                (<div style={{minWidth:minWidth}}> \r\n                    <div className='alert alert-warning mt-3' style={{cursor:'pointer'}} data-toggle='collapse'\r\n                    data-target='#negativeStockBal'>\r\n                        Negative Stock Balance\r\n                    </div>\r\n                    <div className='collapse navbar-collapse pl-3 pl-md-5' id='negativeStockBal'>\r\n                        <table className='table table-responsive-md'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th className='text-nowrap'>Item Code</th>\r\n                                    <th className='text-nowrap'>Description</th>\r\n                                    <th className='text-nowrap'>Bal Qty</th>\r\n                                    <th className='text-nowrap'>{props.stockDirection==='out'?'Out':'In'}</th>\r\n                                    <th className='text-nowrap'>Final Qty</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {populateNegativeStockBalanceTable()}\r\n                            </tbody>\r\n\r\n                        </table>\r\n                    </div>\r\n                </div>):null}\r\n                                    \r\n            </div>\r\n        </fieldset>\r\n    )\r\n}\r\n\r\n\r\nexport default LineRender;","import React from 'react';\r\nimport numberFormatParser from './numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction ReceiptPaymentHistoryRender(props) {\r\n    const docNum=props.dataSelectReceiptPaymentHistory?props.dataSelectReceiptPaymentHistory.field[0].name:null;\r\n    const date=props.dataSelectReceiptPaymentHistory?props.dataSelectReceiptPaymentHistory.field[1].name:null;\r\n    const type=props.dataSelectReceiptPaymentHistory? props.dataSelectReceiptPaymentHistory.field[2].name:null;\r\n    const description=props.dataSelectReceiptPaymentHistory?props.dataSelectReceiptPaymentHistory.field[3].name:null;\r\n    const amount=props.dataSelectReceiptPaymentHistory? props.dataSelectReceiptPaymentHistory.field[4].name:null;\r\n\r\n    const history=useHistory();\r\n\r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    return (\r\n    <fieldset className='form-group col-md-12 mx-3 border border-secondary pb-4 rounded'>\r\n        <legend className='col-form-label col-8 offset-2 text-center' >\r\n            <h6 className='d-inline-block mx-2 mx-md-4'>{props.historyDescription}</h6>\r\n        </legend>\r\n        <div className=\"overflow-auto\">\r\n            {/*flex nowrap and overflow auto for mobile view*/}\r\n            <div className='row flex-nowrap ' style={{marginLeft:0,marginRight:0}}>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Doc No.</h6>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Date</h6>\r\n                <h6 className='col' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10}}>Type</h6>\r\n                <h6 className='col' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10}}>Description</h6>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Amount</h6>\r\n            </div>\r\n            {props.dataSelectReceiptPaymentHistory? props.dataSelectReceiptPaymentHistory.data.map(item=>\r\n            (<div className='row flex-nowrap' style={props.disabled? {marginLeft:0,marginRight:0}:\r\n            {cursor:'pointer',marginLeft:0,marginRight:0}} key={item[docNum]}\r\n            onClick={(e)=> {\r\n                if (!props.disabled)\r\n                    history.push('./'+createLink(item[type].toLowerCase(),item[docNum]))\r\n            }\r\n                }>\r\n                <p className='col border my-0' style={props.disabled? \r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem',backgroundColor:'#e9ecef'}:\r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>\r\n                    {item[docNum]}\r\n                </p>\r\n                <p className='col border my-0' style={props.disabled? \r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem',backgroundColor:'#e9ecef'}:\r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>\r\n                    {dateFormatParser(item[date])}\r\n                </p>\r\n                <p className='col border my-0' style={props.disabled? \r\n                {flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem',backgroundColor:'#e9ecef'}:\r\n                {flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>\r\n                    {item[type]}\r\n                </p>\r\n                <p className='col border my-0 text-truncate' style={props.disabled?\r\n                {flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem',backgroundColor:'#e9ecef'}: \r\n                {flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>\r\n                    {item[description]}\r\n                </p>\r\n                <p className='col border my-0' style={props.disabled?\r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem',backgroundColor:'#e9ecef'}: \r\n                {flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>\r\n                    {numberFormatParser(item[amount])}\r\n                </p>\r\n            </div>)\r\n            ):null}\r\n        </div>\r\n    </fieldset>)\r\n}\r\n\r\nexport default ReceiptPaymentHistoryRender;","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport ReceiptPaymentHistoryRender from '../Shared/ReceiptPaymentHistoryRender';\r\n\r\n\r\n\r\nfunction SalesInvoiceItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'sales_invoice'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectReceiptHistory,error:errorSelectReceiptHistory}]=useFetch(url.item && url.id?{\r\n        url:'./getReceiptHistory',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'sales_invoice',\r\n                param:[url.id]\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    }:null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditTermPosition=6;\r\n    const linePosition=9;\r\n    const stockControlPosition=10;\r\n    \r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n    \r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectReceiptHistory && dataSelectReceiptHistory.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode,\r\n    dataSelectReceiptHistory,errorSelectReceiptHistory])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n    function calculateOutstanding() {\r\n        const amount=dataSelectReceiptHistory? dataSelectReceiptHistory.field[4].name:null;\r\n        \r\n        return calculateTotal()-(dataSelectReceiptHistory? dataSelectReceiptHistory.data.reduce((a,b)=>\r\n            a+b[amount],0):0)\r\n    }\r\n    \r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ||\r\n    (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectReceiptHistory && dataSelectReceiptHistory.error)\r\n    || errorSelectReceiptHistory) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectReceiptHistory && dataSelectReceiptHistory.error? 'Receipt History RETRIEVAL for item failed errno: '+dataSelectReceiptHistory.error.errno\r\n            +' code: '+dataSelectReceiptHistory.error.code+' message: '+dataSelectReceiptHistory.error.sqlMessage:null}\r\n            {errorSelectReceiptHistory? 'Receipt History RETRIEVAL for item failed '+errorSelectReceiptHistory : null}\r\n        </div>)\r\n\r\n    return (\r\n    <Item inputState={inputState} changeInputState={changeInputState} url={url} item='sales_invoice' successPath='/SalesInvoice'>\r\n        {\r\n        ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=>\r\n        (<Switch>\r\n            <Route exact path={`${path}/Preview`}>\r\n                <DocumentOne description={SalesInvoiceItem.description}\r\n                    backPath={SalesInvoiceItem.path} \r\n                    topLeftInput={[inputState[1],inputState[2]]}\r\n                    topRightField={[SalesInvoiceItem.description+' No','Date','Credit Term','Other Description']}\r\n                    topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                    bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                    bottomInput={inputState[linePosition]}\r\n                    calculateSubtotal={calculateSubtotal}\r\n                    calculateTotal={calculateTotal}\r\n                    footer='NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days.'\r\n                />\r\n            </Route>\r\n            <Route exact path={path}>\r\n                <AppLayout>\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ SalesInvoiceItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='debtorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let debtorName='';\r\n                                        let debtorAddress='';\r\n                                        let debtorDefaultCreditTerm='';\r\n                                        \r\n                                        dataSelectDebtor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                                debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                                debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                                debtorDefaultCreditTerm=data[dataSelectDebtor.field[7].name]?data[dataSelectDebtor.field[7].name]:'';\r\n                                                \r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,debtorName,debtorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),debtorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='debtorName'>Debtor Name</label>\r\n                                <input id='debtorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='debtorAddress'>Debtor Address</label>\r\n                                <textarea id='debtorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='invoiceNumber' className='mt-3'>Invoice Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'invoiceNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label className='mt-3' htmlFor='glCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n                                \r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            \r\n                                \r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='out'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Sales Invoice Line'}/>\r\n\r\n                            \r\n                            \r\n                            <h5 className='text-right mt-3 mb-4 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            {usage==='INSERT'?null:(<h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">\r\n                                    {'Outstanding Amount: '+numberFormatParser(calculateOutstanding())}\r\n                                </span>\r\n                            </h6>)}\r\n\r\n                            {usage==='INSERT'?null: \r\n                            \r\n                            <ReceiptPaymentHistoryRender dataSelectReceiptPaymentHistory={dataSelectReceiptHistory}\r\n                            disabled={disabled} historyDescription={'Receipt History'}/>\r\n                            }\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n                </AppLayout>\r\n            </Route>\r\n            <Redirect to={SalesInvoiceItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nSalesInvoiceItem.description='Sales Invoice';\r\nSalesInvoiceItem.path='/SalesInvoiceItem';\r\n\r\nexport default SalesInvoiceItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport ReceiptPaymentHistoryRender from '../Shared/ReceiptPaymentHistoryRender';\r\n\r\n\r\nfunction DebitNoteItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debit_note'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectReceiptHistory,error:errorSelectReceiptHistory}]=useFetch(url.item && url.id?{\r\n        url:'./getReceiptHistory',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'debit_note',\r\n                param:[url.id]\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    }:null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditTermPosition=6;\r\n    const linePosition=9;\r\n    const stockControlPosition=10;\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectReceiptHistory && dataSelectReceiptHistory.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode,\r\n        dataSelectReceiptHistory,errorSelectReceiptHistory])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n\r\n    function calculateOutstanding() {\r\n        const amount=dataSelectReceiptHistory? dataSelectReceiptHistory.field[4].name:null;\r\n        \r\n        return calculateTotal()-(dataSelectReceiptHistory? dataSelectReceiptHistory.data.reduce((a,b)=>\r\n            a+b[amount],0):0)\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ||\r\n    (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectReceiptHistory && dataSelectReceiptHistory.error)\r\n    || errorSelectReceiptHistory) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectReceiptHistory && dataSelectReceiptHistory.error? 'Receipt History RETRIEVAL for item failed errno: '+dataSelectReceiptHistory.error.errno\r\n            +' code: '+dataSelectReceiptHistory.error.code+' message: '+dataSelectReceiptHistory.error.sqlMessage:null}\r\n            {errorSelectReceiptHistory? 'Receipt History RETRIEVAL for item failed '+errorSelectReceiptHistory : null}\r\n        </div>)\r\n\r\n    \r\n    return (\r\n    <Item inputState={inputState} changeInputState={changeInputState} url={url} item='debit_note' successPath='/DebitNote'>\r\n        {\r\n        ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n        (<Switch>\r\n            <Route exact path={`${path}/Preview`}>\r\n                <DocumentOne description={DebitNoteItem.description} \r\n                    backPath={DebitNoteItem.path} \r\n                    topLeftInput={[inputState[1],inputState[2]]}\r\n                    topRightField={[DebitNoteItem.description+' No','Date','Credit Term','Other Description']}\r\n                    topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                    bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                    bottomInput={inputState[linePosition]}\r\n                    calculateSubtotal={calculateSubtotal}\r\n                    calculateTotal={calculateTotal}\r\n                    footer='NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days.'\r\n                />\r\n            </Route>\r\n            <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ DebitNoteItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='debtorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let debtorName='';\r\n                                        let debtorAddress='';\r\n                                        let debtorDefaultCreditTerm='';\r\n                                    \r\n                                        dataSelectDebtor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                                debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                                debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                                debtorDefaultCreditTerm=data[dataSelectDebtor.field[7].name]?data[dataSelectDebtor.field[7].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,debtorName,debtorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),debtorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='debtorName'>Debtor Name</label>\r\n                                <input id='debtorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='debtorAddress'>Debtor Address</label>\r\n                                <textarea id='debtorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='debitNoteNumber' className='mt-3'>Debit Note Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'debitNoteNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label className='mt-3' htmlFor='glCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n                                \r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n\r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            \r\n                                \r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition}\r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='out'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Debit Note Line'}/>\r\n\r\n                           \r\n\r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            {usage==='INSERT'?null:(<h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">\r\n                                    {'Outstanding Amount: '+numberFormatParser(calculateOutstanding())}\r\n                                </span>\r\n                            </h6>)}\r\n\r\n                            {usage==='INSERT'?null: \r\n                            \r\n                            <ReceiptPaymentHistoryRender dataSelectReceiptPaymentHistory={dataSelectReceiptHistory}\r\n                            disabled={disabled} historyDescription={'Receipt History'}/>\r\n                            }\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n        </Route>\r\n        <Redirect to={DebitNoteItem.path}/>\r\n    </Switch>)}\r\n    </Item>\r\n    )\r\n}\r\nDebitNoteItem.description='Debit Note';\r\nDebitNoteItem.path='/DebitNoteItem';\r\n\r\nexport default DebitNoteItem;\r\n\r\n","import React from 'react';\r\nimport numberFormatParser from './numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\n\r\nfunction OffsetRender(props) {\r\n    const docNum=props.dataSelectOutstanding?props.dataSelectOutstanding.field[0].name:null;\r\n    const name=props.dataSelectOutstanding?props.dataSelectOutstanding.field[1].name:null;\r\n    const type=props.dataSelectOutstanding? props.dataSelectOutstanding.field[2].name:null;\r\n    const date=props.dataSelectOutstanding?props.dataSelectOutstanding.field[3].name:null;\r\n    const original=props.dataSelectOutstanding? props.dataSelectOutstanding.field[4].name:null;\r\n    const outstanding=props.dataSelectOutstanding?props.dataSelectOutstanding.field[5].name:null;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    \r\n    function onChangeOffsetInput(e,order,lineNumber,innerOrder) {\r\n        props.changeInputState(props.inputState.slice(0,order)\r\n        .concat([props.inputState[order].slice(0,lineNumber)\r\n        .concat([props.inputState[order][lineNumber].slice(0,innerOrder)\r\n        .concat(e)\r\n        .concat(props.inputState[order][lineNumber].slice(innerOrder+1))])\r\n        .concat(props.inputState[order].slice(lineNumber+1))])\r\n        .concat(props.inputState.slice(order+1)))\r\n    }\r\n    /*add offsetinput array at end of offsetposition array*/\r\n    function onAddOffsetInput(e,order) {\r\n        props.changeInputState(props.inputState.slice(0,order)\r\n        .concat([props.inputState[order].slice(0,props.inputState[order].length)\r\n        .concat([e])])\r\n        .concat(props.inputState.slice(order+1)))\r\n    }\r\n    /*slice off specific offsetinput array from overall offsetposition array*/\r\n    function onRemoveOffsetInput(order,innerIndexOfArrayToBeRemoved) {\r\n        \r\n        props.changeInputState(props.inputState.slice(0,order)\r\n        .concat([props.inputState[order].slice(0,innerIndexOfArrayToBeRemoved)\r\n        .concat(props.inputState[order].slice(innerIndexOfArrayToBeRemoved+1))])\r\n        .concat(props.inputState.slice(order+1)))\r\n    }\r\n\r\n    /*event handler for checkbox*/\r\n    function onChangeCheck(item,offsetPosition) {\r\n\r\n        /*1) check if there's existing offsetinputstate arrays*/\r\n        if (props.inputState[offsetPosition].length>1)\r\n            /*2)if yes, then iterate for each offsetinputstatearray items and check offsetinputstate arrays \r\n            vs dataSelectOutstanding*/\r\n            props.inputState[offsetPosition].forEach((item2,i)=>{\r\n                if(item2[offsetDocNumPosition]===item[docNum]) {\r\n                    /*3) If match then if dataSelectOutstanding outstanding amount>unappliedamount then \r\n                    changeoffsetinput using whole unappliedamount  */\r\n                    if(item[outstanding]>props.calculateUnappliedAmount())\r\n                        onChangeOffsetInput(\r\n                            props.calculateUnappliedAmount(),offsetPosition,i,offsetAmountPosition\r\n                            )\r\n                    else /*otherwise changeoffsetinput using whole dataSelectOutstanding outstanding amount */\r\n                        onChangeOffsetInput(item[outstanding],offsetPosition,i,offsetAmountPosition)\r\n                } else /*4) if no existing offsetinputstate arrays do the same thing as 3) above but instead of\r\n                changeoffsetinput, add offsetinput array at end of array */ \r\n                    {if (item[outstanding]>props.calculateUnappliedAmount())\r\n                        onAddOffsetInput([item[docNum],props.calculateUnappliedAmount()],offsetPosition)\r\n                    else onAddOffsetInput([item[docNum],item[outstanding]],offsetPosition)\r\n                    } \r\n            })\r\n            else {\r\n                /*5) from (1)if no existing offsetinputstate arrays, then skip to (4) by adding offsetinput array*/\r\n                if (item[outstanding]>props.calculateUnappliedAmount())\r\n                    onAddOffsetInput([item[docNum],props.calculateUnappliedAmount()],offsetPosition)\r\n                else onAddOffsetInput([item[docNum],item[outstanding]],offsetPosition)\r\n            }\r\n    }\r\n\r\n    function checkPayAmountDisabled(item,offsetPosition){\r\n        let result=true;\r\n        props.inputState[offsetPosition].forEach(item2=>{\r\n            if(item2[offsetDocNumPosition]===item[docNum] && !props.disabled)\r\n            result=false; \r\n        })\r\n\r\n        \r\n        return result;\r\n    }\r\n    function getOffsetInputStateArrayPosition(item,offsetPosition) {\r\n        let result=null;\r\n        props.inputState[offsetPosition].forEach((item2,i)=>{\r\n            if(item2[offsetDocNumPosition]===item[docNum])\r\n            result=i; \r\n        })\r\n        return result;\r\n    }\r\n\r\n    function checked(item,offsetPosition) {\r\n        let result=false;\r\n\r\n        if (props.inputState[offsetPosition]) \r\n            \r\n            props.inputState[offsetPosition].forEach(item2=>{\r\n                if(item2[offsetDocNumPosition]===item[docNum]) \r\n                    result=true;\r\n                \r\n            })\r\n        \r\n        return result\r\n    }\r\n\r\n    return (\r\n    <fieldset className='form-group col-md-12 mx-3 border border-secondary pb-4 rounded'>\r\n        <legend className='col-form-label col-12 col-md-6 offset-md-3 text-center' >\r\n            <h6 className='d-inline-block mx-2 mx-md-4'>OFFSET <br/> {props.offsetDescription}</h6>\r\n        </legend>\r\n        <div className=\"overflow-auto\">\r\n            {/*flex nowrap and overflow auto for mobile view*/}\r\n            <div className='row flex-nowrap ' style={{marginLeft:0,marginRight:0}}>\r\n                <h6 className='col' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10}}>Doc No.</h6>\r\n                <h6 className='col' style={{flex:'1 0 150px',paddingLeft:10,paddingRight:10}}>Name</h6>\r\n                <h6 className='col' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10}}>Type</h6>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Date</h6>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Original</h6>\r\n                <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>Outstanding</h6>\r\n                <h6 className='col mx-2' style={{flex:'0 0 15px',paddingLeft:0,paddingRight:0}}></h6>\r\n                <h6 className='col' style={{flex:'1 0 100px',paddingLeft:10,paddingRight:10}}>Pay</h6>\r\n            </div>\r\n            {props.dataSelectOutstanding? props.dataSelectOutstanding.data.map((item,i)=>\r\n            (<div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}} key={item[docNum]}>\r\n                <p className='col border my-0' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{item[docNum]}</p>\r\n                <p className='col border my-0 text-truncate' style={{flex:'1 0 150px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{item[name]}</p>\r\n                <p className='col border my-0' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{item[type]}</p>\r\n                <p className='col border my-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{dateFormatParser(item[date])}</p>\r\n                <p className='col border my-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{numberFormatParser(item[original])}</p>\r\n                <p className='col border my-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,paddingTop:'0.375rem',paddingBottom:'0.375rem'}}>{numberFormatParser(item[outstanding])}</p>\r\n                <label htmlFor='pay' className='sr-only'/>\r\n                <input type='checkbox' id='pay' style={{flex:'0 0 15px'}} \r\n                checked={item[type]===props.offsetDescriptionOne?checked(item,props.offsetPositionOne):checked(item,props.offsetPositionTwo)} \r\n                disabled={props.disabled}\r\n                className='col form-control mx-2' onChange={\r\n                    (e)=>{\r\n                        props.changeErrorUnappliedAmount(null);\r\n                        /*if button checked*/\r\n                        if(e.target.checked) {\r\n                            /*First check if overall condition-unapplied amount is >0. If unapplied amount is zero, no operations \r\n                            will be executed (although still can uncheck)*/\r\n                            if (props.calculateUnappliedAmount()>0)\r\n                                /*check if item belongs in offsetPositionOne or offsetPositionTwo array and repeat steps in both array */\r\n                                if (item[type]===props.offsetDescriptionOne) \r\n                                    onChangeCheck(item,props.offsetPositionOne)\r\n                                else onChangeCheck(item,props.offsetPositionTwo)\r\n\r\n                        } /*if button unchecked*/ else {\r\n                            /*remove existing offsetinputstate arrays*/\r\n                            if(item[type]===props.offsetDescriptionOne) {\r\n                                props.inputState[props.offsetPositionOne].forEach((item2,i)=>{\r\n                                    if(item2[offsetDocNumPosition]===item[docNum]) \r\n                                        onRemoveOffsetInput(props.offsetPositionOne,i)\r\n                                })\r\n                            } else props.inputState[props.offsetPositionTwo].forEach((item2,i)=>{\r\n                                if(item2[offsetDocNumPosition]===item[docNum]) \r\n                                    onRemoveOffsetInput(props.offsetPositionTwo,i)\r\n                                })\r\n                        }\r\n                        \r\n\r\n                        }}/>\r\n                <label htmlFor='payAmount' className='sr-only'/>\r\n                <input type='number' id='payAmount' style={{flex:'1 0 90px',height:'auto',paddingLeft:10,paddingRight:10}} \r\n                className='col form-control' min='0' step='.01'\r\n                value={item[type]===props.offsetDescriptionOne? \r\n                    (props.inputState[props.offsetPositionOne][getOffsetInputStateArrayPosition(item,props.offsetPositionOne)]? \r\n                    ''+props.inputState[props.offsetPositionOne][getOffsetInputStateArrayPosition(item,props.offsetPositionOne)][offsetAmountPosition]:'')\r\n                    :\r\n                    (props.inputState[props.offsetPositionTwo][getOffsetInputStateArrayPosition(item,props.offsetPositionTwo)]? \r\n                    ''+props.inputState[props.offsetPositionTwo][getOffsetInputStateArrayPosition(item,props.offsetPositionTwo)][offsetAmountPosition]:'')}\r\n\r\n                disabled={item[type]===props.offsetDescriptionOne? \r\n                    checkPayAmountDisabled(item,props.offsetPositionOne):checkPayAmountDisabled(item,props.offsetPositionTwo)\r\n                } \r\n                onChange={(e)=>{\r\n                    props.changeErrorUnappliedAmount(null);\r\n\r\n                    if(parseFloat(e.target.value) > props.calculateUnappliedAmount(item[docNum])) {\r\n                        if (item[type]===props.offsetDescriptionOne)  \r\n                            onChangeOffsetInput(props.calculateUnappliedAmount(item[docNum]),\r\n                            props.offsetPositionOne,getOffsetInputStateArrayPosition(item,props.offsetPositionOne),offsetAmountPosition)\r\n                        else onChangeOffsetInput(props.calculateUnappliedAmount(item[docNum]),\r\n                        props.offsetPositionTwo,getOffsetInputStateArrayPosition(item,props.offsetPositionTwo),offsetAmountPosition)\r\n                    }\r\n                    else {\r\n                        if (item[type]===props.offsetDescriptionOne) \r\n                        onChangeOffsetInput(parseFloat(e.target.value),props.offsetPositionOne,\r\n                        getOffsetInputStateArrayPosition(item,props.offsetPositionOne),offsetAmountPosition)\r\n\r\n                        else onChangeOffsetInput(parseFloat(e.target.value),props.offsetPositionTwo,\r\n                        getOffsetInputStateArrayPosition(item,props.offsetPositionTwo),offsetAmountPosition)\r\n                    }\r\n                   \r\n                }}\r\n                />\r\n            </div>)\r\n            ):null}\r\n        </div>\r\n    </fieldset>\r\n    )\r\n}\r\n\r\n\r\nexport default OffsetRender;","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\n\r\n\r\n\r\nfunction CreditNoteItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'credit_note'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n    \r\n    const [{data:dataSelectDebtorOutstanding,error:errorSelectDebtorOutstanding},changeParamDebtorOutstanding]=useFetch(null);//extension of Item component\r\n    \r\n    /*Position of inputState variable used in other components. */\r\n    const debtorNumPosition=0;\r\n    const creditTermPosition=6;\r\n    const oldNumPosition=8;\r\n    const linePosition=9;\r\n    const offsetPositionSalesInvoice=10;\r\n    const offsetPositionDebitNote=11;\r\n    const stockControlPosition=12;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='INVOICE';\r\n    const offsetDescriptionTwo='DEBIT NOTE';\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[],[],[]]) \r\n\r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n            \r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode])\r\n\r\n    /*have a separate useeffect for debtor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectDebtorOutstanding,errorSelectDebtorOutstanding])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n\r\n    function paramDebtorOutstanding(debtorNum,oldNum){\r\n        return {\r\n            url:'./getDebtorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    debtorNum:debtorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n        inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    function calculateUnappliedAmount(exclude) {\r\n        return inputState[offsetPositionDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionSalesInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ||\r\n    (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error) ||\r\n    errorSelectDebtorOutstanding) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error? 'Debtor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectDebtorOutstanding.error.errno +' code: '+dataSelectDebtorOutstanding.error.code+' message: '+ \r\n            dataSelectDebtorOutstanding.error.sqlMessage:null}\r\n            {errorSelectDebtorOutstanding? 'Debtor Outstanding List RETRIEVAL for item failed '+errorSelectDebtorOutstanding : null}\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='credit_note' successPath='/CreditNote'\r\n        paramOutstanding={paramDebtorOutstanding} changeParamOutstanding={changeParamDebtorOutstanding} \r\n        debtorCreditorNumPosition={debtorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={CreditNoteItem.description} \r\n                        backPath={CreditNoteItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[CreditNoteItem.description+' No','Date','Credit Term','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                        bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateSubtotal={calculateSubtotal}\r\n                        calculateTotal={calculateTotal}\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ CreditNoteItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{\r\n                        e.preventDefault();\r\n                            if(usage==='INSERT') onInsert(); \r\n                            else onUpdate()\r\n                        \r\n                        }}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='debtorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let debtorName='';\r\n                                        let debtorAddress='';\r\n                                        let debtorDefaultCreditTerm='';\r\n\r\n                                        dataSelectDebtor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                                debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                                debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                                debtorDefaultCreditTerm=data[dataSelectDebtor.field[7].name]?data[dataSelectDebtor.field[7].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,debtorName,debtorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),debtorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    changeParamDebtorOutstanding(\r\n                                        paramDebtorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    \r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='debtorName'>Debtor Name</label>\r\n                                <input id='debtorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='debtorAddress'>Debtor Address</label>\r\n                                <textarea id='debtorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='creditNoteNumber' className='mt-3'>Credit Note Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'creditNoteNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label className='mt-3' htmlFor='glCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n\r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition}\r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='in'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Credit Note Line'}/>\r\n\r\n                            <h5 className='text-right mt-3 mb-4 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            <h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">\r\n                                    {'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}\r\n                                </span>\r\n                            </h6>\r\n                            {errorUnappliedAmount}\r\n\r\n                            <OffsetRender dataSelectOutstanding={dataSelectDebtorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionSalesInvoice} offsetPositionTwo={offsetPositionDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount}\r\n                                offsetDescription={'Sales Invoice / Debit Note'}/>\r\n                            \r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n                </AppLayout>\r\n            </Route>\r\n            <Redirect to={CreditNoteItem.path}/>\r\n        </Switch>)}\r\n        </Item>\r\n    )\r\n}\r\nCreditNoteItem.description='Credit Note';\r\nCreditNoteItem.path='/CreditNoteItem';\r\n\r\nexport default CreditNoteItem;\r\n\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction GoodsReceivedNote(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./GoodsReceivedNoteItem' item='goods_received_note'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description='Goods Received Note (GRN)' listname={GoodsReceivedNote.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nGoodsReceivedNote.description='Goods Received Note';\r\nGoodsReceivedNote.path='/GoodsReceivedNote';\r\n\r\nexport default GoodsReceivedNote;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction PurchaseReturn(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./PurchaseReturnItem' item='purchase_return'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={PurchaseReturn.description} listname={PurchaseReturn.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nPurchaseReturn.description='Purchase Return';\r\nPurchaseReturn.path='/PurchaseReturn';\r\n\r\nexport default PurchaseReturn;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction PurchaseInvoice(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./PurchaseInvoiceItem' item='purchase_invoice' \r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={PurchaseInvoice.description} listname={PurchaseInvoice.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nPurchaseInvoice.description='Purchase Invoice';\r\nPurchaseInvoice.path='/PurchaseInvoice';\r\n\r\nexport default PurchaseInvoice;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction PurchaseDebitNote(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./PurchaseDebitNoteItem' item='purchase_debit_note' \r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={PurchaseDebitNote.description} listname={PurchaseDebitNote.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nPurchaseDebitNote.description='Purchase Debit Note';\r\nPurchaseDebitNote.path='/PurchaseDebitNote';\r\n\r\nexport default PurchaseDebitNote;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction PurchaseCreditNote(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./PurchaseCreditNoteItem' item='purchase_credit_note' \r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={PurchaseCreditNote.description} listname={PurchaseCreditNote.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nPurchaseCreditNote.description='Purchase Credit Note';\r\nPurchaseCreditNote.path='/PurchaseCreditNote';\r\n\r\nexport default PurchaseCreditNote;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction PurchaseReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Purchase Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nPurchaseReport.description='Purchase Report';\r\nPurchaseReport.path='/PurchaseReport';\r\n\r\nexport default PurchaseReport;\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction SupplierPriceListReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Supplier Price List Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nSupplierPriceListReport.description='Supplier Price List Report';\r\nSupplierPriceListReport.path='/SupplierPriceListReport';\r\n\r\nexport default SupplierPriceListReport;\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRenderQtyOnly from '../Shared/LineRenderQtyOnly';\r\n\r\n\r\nfunction GoodsReceivedNoteItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n\r\n    const linePosition=7;\r\n    const stockControlPosition=8;\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n        changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n\r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n            \r\n\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectStock,errorSelectStock])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((goodsreceivednotelineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='')\r\n             total=total+(parseInt(inputState[linePosition][i][3]))\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='goods_received_note' successPath='/GoodsReceivedNote'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={GoodsReceivedNoteItem.description} \r\n                        backPath={GoodsReceivedNoteItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[GoodsReceivedNoteItem.description+' No','Date','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4])]}\r\n                        bottomField={['','Item Code','Description','Qty']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateTotal={calculateTotal}\r\n                        footer=''\r\n                    />\r\n            </Route>\r\n            <Route exact path={path}>\r\n            <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ GoodsReceivedNoteItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='creditorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let creditorName='';\r\n                                        let creditorAddress='';\r\n                                    \r\n                                        dataSelectCreditor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectCreditor.field[0].name]===e.target.value) {\r\n                                                creditorName=data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'';\r\n                                                creditorAddress=data[dataSelectCreditor.field[2].name]?data[dataSelectCreditor.field[2].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,creditorName,creditorAddress,...inputState.slice(3,inputState.length)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='creditorName'>Creditor Name</label>\r\n                                <input id='creditorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='creditorAddress'>Creditor Address</label>\r\n                                <textarea id='creditorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='goodsReceivedNoteNumber' className='mt-3'>Goods Received Note Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'goodsReceivedNoteNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRenderQtyOnly linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='in'\r\n                            lineDescription={'GRN Line'}\r\n                            />\r\n\r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={GoodsReceivedNoteItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nGoodsReceivedNoteItem.description='Goods Received Note';\r\nGoodsReceivedNoteItem.path='/GoodsReceivedNoteItem';\r\n\r\nexport default GoodsReceivedNoteItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRenderQtyOnly from '../Shared/LineRenderQtyOnly';\r\n\r\n\r\nfunction PurchaseReturnItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n\r\n    const linePosition=7;\r\n    const stockControlPosition=8;\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n        changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n\r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n            \r\n\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectStock,errorSelectStock])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((purchasereturnlineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='')\r\n             total=total+(parseInt(inputState[linePosition][i][3]))\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='purchase_return' successPath='/PurchaseReturn'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={PurchaseReturnItem.description} \r\n                        backPath={PurchaseReturnItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[PurchaseReturnItem.description+' No','Date','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4])]}\r\n                        bottomField={['','Item Code','Description','Qty']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateTotal={calculateTotal}\r\n                        footer=''\r\n                    />\r\n            </Route>\r\n            <Route exact path={path}>\r\n            <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ PurchaseReturnItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='creditorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let creditorName='';\r\n                                        let creditorAddress='';\r\n                                    \r\n                                        dataSelectCreditor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectCreditor.field[0].name]===e.target.value) {\r\n                                                creditorName=data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'';\r\n                                                creditorAddress=data[dataSelectCreditor.field[2].name]?data[dataSelectCreditor.field[2].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,creditorName,creditorAddress,...inputState.slice(3,inputState.length)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='creditorName'>Creditor Name</label>\r\n                                <input id='creditorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='creditorAddress'>Creditor Address</label>\r\n                                <textarea id='creditorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='purchaseReturnNumber' className='mt-3'>Purchase Return Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:3,\r\n                                    labelID:'purchaseReturnNumber'\r\n                                })\r\n                                }\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRenderQtyOnly linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='out'\r\n                            lineDescription={'Purchase Return Line'}\r\n                            />\r\n\r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={PurchaseReturnItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nPurchaseReturnItem.description='Purchase Return';\r\nPurchaseReturnItem.path='/PurchaseReturnItem';\r\n\r\nexport default PurchaseReturnItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport ReceiptPaymentHistoryRender from '../Shared/ReceiptPaymentHistoryRender';\r\n\r\n\r\nfunction PurchaseInvoiceItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'purchase_invoice'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectPaymentHistory,error:errorSelectPaymentHistory}]=useFetch(url.item && url.id?{\r\n        url:'./getPaymentHistory',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'purchase_invoice',\r\n                param:[url.id]\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    }:null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditTermPosition=6;\r\n    const linePosition=9;\r\n    const stockControlPosition=10;\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n            changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {(data[dataSelectCreditor.field[0].name]?data[dataSelectCreditor.field[0].name]:'')\r\n                +' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n            \r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            \r\n                changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n                <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                    {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                    +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n                </option>)\r\n                )\r\n            )\r\n\r\n        if (dataSelectPaymentHistory && dataSelectPaymentHistory.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n                \r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode,\r\n    dataSelectPaymentHistory,errorSelectPaymentHistory])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n\r\n    function calculateOutstanding() {\r\n        const amount=dataSelectPaymentHistory? dataSelectPaymentHistory.field[4].name:null;\r\n        \r\n        return calculateTotal()-(dataSelectPaymentHistory? dataSelectPaymentHistory.data.reduce((a,b)=>\r\n            a+b[amount],0):0)\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock \r\n    || (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectPaymentHistory && dataSelectPaymentHistory.error)\r\n    || errorSelectPaymentHistory ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectPaymentHistory && dataSelectPaymentHistory.error? 'Payment History RETRIEVAL for item failed errno: '+dataSelectPaymentHistory.error.errno\r\n            +' code: '+dataSelectPaymentHistory.error.code+' message: '+dataSelectPaymentHistory.error.sqlMessage:null}\r\n            {errorSelectPaymentHistory? 'Payment History RETRIEVAL for item failed '+errorSelectPaymentHistory : null}\r\n        </div>)\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='purchase_invoice' successPath='/PurchaseInvoice'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={PurchaseInvoiceItem.description} \r\n                        backPath={PurchaseInvoiceItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[PurchaseInvoiceItem.description+' No','Date','Credit Term','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                        bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateSubtotal={calculateSubtotal}\r\n                        calculateTotal={calculateTotal}\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ PurchaseInvoiceItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='creditorID' value={inputState[0]} onChange={(e)=>e} required className='form-control'/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let creditorName='';\r\n                                        let creditorAddress='';\r\n                                        let creditorDefaultCreditTerm='';\r\n\r\n                                        dataSelectCreditor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectCreditor.field[0].name]===e.target.value) {\r\n                                                creditorName=data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'';\r\n                                                creditorAddress=data[dataSelectCreditor.field[2].name]?data[dataSelectCreditor.field[2].name]:'';\r\n                                                creditorDefaultCreditTerm=data[dataSelectCreditor.field[7].name]?data[dataSelectCreditor.field[7].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,creditorName,creditorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),creditorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='creditorName'>Creditor Name</label>\r\n                                <input id='creditorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='creditorAddress'>Creditor Address</label>\r\n                                <textarea id='creditorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n        \r\n                            </fieldset>\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='purchaseInvoiceNumber' className='mt-3'>Purchase Invoice Number <span className='text-warning'>*</span></label>\r\n                                <input type='text' id='purchaseInvoiceNumber' maxLength='50' value={inputState[3]} onChange={\r\n                                    (e)=>onChange(e.target.value,3)} disabled={disabled} required className='form-control' />\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n\r\n                                <label className='mt-3' htmlFor='GLCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='GLCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>\r\n                                        onChange(e.target.value,7)}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n\r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n\r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition} \r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='in'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Purchase Invoice Line'}/>\r\n\r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            {usage==='INSERT'?null:(<h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">\r\n                                    {'Outstanding Amount: '+numberFormatParser(calculateOutstanding())}\r\n                                </span>\r\n                            </h6>)}\r\n\r\n                            {usage==='INSERT'?null: \r\n                            \r\n                            <ReceiptPaymentHistoryRender dataSelectReceiptPaymentHistory={dataSelectPaymentHistory}\r\n                                disabled={disabled} historyDescription={'Payment History'}/>\r\n                            }\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={PurchaseInvoiceItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nPurchaseInvoiceItem.description='Purchase Invoice';\r\nPurchaseInvoiceItem.path='/PurchaseInvoiceItem';\r\n\r\nexport default PurchaseInvoiceItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport ReceiptPaymentHistoryRender from '../Shared/ReceiptPaymentHistoryRender';\r\n\r\n\r\n\r\nfunction PurchaseDebitNoteItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'purchase_debit_note'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectPaymentHistory,error:errorSelectPaymentHistory}]=useFetch(url.item && url.id?{\r\n        url:'./getPaymentHistory',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'purchase_debit_note',\r\n                param:[url.id]\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    }:null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditTermPosition=6;\r\n    const linePosition=9;\r\n    const stockControlPosition=10;\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n            changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n            \r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectPaymentHistory && dataSelectPaymentHistory.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode,\r\n    dataSelectPaymentHistory,errorSelectPaymentHistory])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineSet,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    function calculateOutstanding() {\r\n        const amount=dataSelectPaymentHistory? dataSelectPaymentHistory.field[4].name:null;\r\n        \r\n        return calculateTotal()-(dataSelectPaymentHistory? dataSelectPaymentHistory.data.reduce((a,b)=>\r\n            a+b[amount],0):0)\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock ||\r\n    (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectPaymentHistory && dataSelectPaymentHistory.error)\r\n    || errorSelectPaymentHistory ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectPaymentHistory && dataSelectPaymentHistory.error? 'Payment History RETRIEVAL for item failed errno: '+dataSelectPaymentHistory.error.errno\r\n            +' code: '+dataSelectPaymentHistory.error.code+' message: '+dataSelectPaymentHistory.error.sqlMessage:null}\r\n            {errorSelectPaymentHistory? 'Payment History RETRIEVAL for item failed '+errorSelectPaymentHistory : null}\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='purchase_debit_note' successPath='/PurchaseDebitNote'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay})=> \r\n            (<Switch>\r\n                <Route exact path={`${path}/Preview`}>\r\n                    <DocumentOne description={PurchaseDebitNoteItem.description} \r\n                        backPath={PurchaseDebitNoteItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[PurchaseDebitNoteItem.description+' No','Date','Credit Term','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                        bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateSubtotal={calculateSubtotal}\r\n                        calculateTotal={calculateTotal}\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ PurchaseDebitNoteItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='creditorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let creditorName='';\r\n                                        let creditorAddress='';\r\n                                        let creditorDefaultCreditTerm='';\r\n                                    \r\n                                        dataSelectCreditor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectCreditor.field[0].name]===e.target.value) {\r\n                                                creditorName=data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'';\r\n                                                creditorAddress=data[dataSelectCreditor.field[2].name]?data[dataSelectCreditor.field[2].name]:'';\r\n                                                creditorDefaultCreditTerm=data[dataSelectCreditor.field[7].name]?data[dataSelectCreditor.field[7].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,creditorName,creditorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),creditorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='creditorName'>Creditor Name</label>\r\n                                <input id='creditorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='creditorAddress'>Creditor Address</label>\r\n                                <textarea id='creditorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='purchaseDebitNoteNumber' className='mt-3'>Purchase Debit Note Number <span className='text-warning'>*</span></label>\r\n                                <input type='text' id='purchaseDebitNoteNumber' maxLength='50' value={inputState[3]} onChange={\r\n                                    (e)=>onChange(e.target.value,3)} disabled={disabled} required className='form-control' />\r\n\r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label className='mt-3' htmlFor='glCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n\r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition}\r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='in'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Purchase Debit Note Line'}/>\r\n\r\n                            \r\n                            <h5 className='text-right my-3 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            {usage==='INSERT'?null:(<h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">\r\n                                    {'Outstanding Amount: '+numberFormatParser(calculateOutstanding())}\r\n                                </span>\r\n                            </h6>)}\r\n\r\n                            {usage==='INSERT'?null: \r\n                            \r\n                            <ReceiptPaymentHistoryRender dataSelectReceiptPaymentHistory={dataSelectPaymentHistory}\r\n                                disabled={disabled} historyDescription={'Payment History'}/>\r\n                            }\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={PurchaseDebitNoteItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nPurchaseDebitNoteItem.description='Purchase Debit Note';\r\nPurchaseDebitNoteItem.path='/PurchaseDebitNoteItem';\r\n\r\nexport default PurchaseDebitNoteItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport DocumentOne from '../Shared/preview/DocumentOne';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport LineRender from '../Shared/LineRender';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\n\r\n\r\n\r\nfunction PurchaseCreditNoteItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectStock,error:errorSelectStock}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({\r\n                item:'stock',\r\n                param:url.id?[url.id]:null\r\n            }),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'purchase_credit_note'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectCreditorOutstanding,error:errorSelectCreditorOutstanding},changeParamCreditorOutstanding]=useFetch(null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditorNumPosition=0;\r\n    const creditTermPosition=6;\r\n    const oldNumPosition=8;\r\n    const linePosition=9;\r\n    const offsetPositionPurchaseInvoice=10;\r\n    const offsetPositionPurchaseDebitNote=11;\r\n    const stockControlPosition=12;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='PURCHASE INVOICE';\r\n    const offsetDescriptionTwo='PURCHASE DEBIT NOTE';\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [stockList,changeStockList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','','','','COD','','',[],[],[],[]]) \r\n    \r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n            changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectStock && dataSelectStock.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectStock && dataSelectStock.data && dataSelectStock.field) {\r\n            const stockNum=dataSelectStock.field[0].name;\r\n            const stockDesc=dataSelectStock.field[1].name;\r\n            const stockPrice=dataSelectStock.field[2].name;\r\n            const stockBalQty=dataSelectStock.field[8].name;\r\n            \r\n            changeStockList(dataSelectStock.data.map(data=>(\r\n                <option key={data[stockNum]} value={data[stockNum]}>\r\n                    {data[stockNum]+' | '\r\n                    + (data[stockDesc]?data[stockDesc]:'')+' | Price = '\r\n                    + (data[stockPrice]?data[stockPrice]:'')+' | Bal Qty = '\r\n                    + (data[stockBalQty]?data[stockBalQty]:'0')}\r\n                </option>)\r\n                )\r\n            )\r\n        }\r\n            \r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectStock,errorSelectStock,dataSelectGLCode,errorSelectGLCode])\r\n\r\n    /*have a separate useeffect for creditor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n    useEffect(()=>{\r\n        if (dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectCreditorOutstanding,errorSelectCreditorOutstanding])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n            \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n        },[])\r\n\r\n    function paramCreditorOutstanding(creditorNum,oldNum){\r\n        return {\r\n            url:'./getCreditorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    creditorNum:creditorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    \r\n    function calculateSubtotal(i) {\r\n        if (inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && inputState[linePosition][i][5]!=='')\r\n            return ((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n            -parseFloat(inputState[linePosition][i][5]))\r\n        else return '';\r\n    }\r\n\r\n    function calculateTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((lineset,i)=>{\r\n\r\n            if(inputState[linePosition][i][3]!=='' && inputState[linePosition][i][4]!=='' && \r\n            inputState[linePosition][i][5]!=='')\r\n             total=total+((parseFloat(inputState[linePosition][i][3])*parseFloat(inputState[linePosition][i][4]))\r\n             -parseFloat(inputState[linePosition][i][5]))\r\n        })\r\n        return total;\r\n    }\r\n\r\n    function calculateUnappliedAmount(exclude) {\r\n        return inputState[offsetPositionPurchaseDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionPurchaseInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor ||(dataSelectStock && dataSelectStock.error) || errorSelectStock \r\n        || (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode || (dataSelectCreditorOutstanding \r\n        && dataSelectCreditorOutstanding.error) || errorSelectCreditorOutstanding) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectStock && dataSelectStock.error? 'Stock List RETRIEVAL for item failed errno: '+dataSelectStock.error.errno\r\n            +' code: '+dataSelectStock.error.code+' message: '+dataSelectStock.error.sqlMessage:null}\r\n            {errorSelectStock? 'Stock List RETRIEVAL for item failed '+errorSelectStock : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.error? 'Creditor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectCreditorOutstanding.error.errno +' code: '+dataSelectCreditorOutstanding.error.code+' message: '+ \r\n            dataSelectCreditorOutstanding.error.sqlMessage:null}\r\n            {errorSelectCreditorOutstanding? 'Creditor Outstanding List RETRIEVAL for item failed '+errorSelectCreditorOutstanding : null}\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='purchase_credit_note' successPath='/PurchaseCreditNote'\r\n        paramOutstanding={paramCreditorOutstanding} changeParamOutstanding={changeParamCreditorOutstanding} \r\n        debtorCreditorNumPosition={creditorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay})=> \r\n            (<Switch>\r\n                <Route path={`${path}/Preview`}>\r\n                    <DocumentOne description={PurchaseCreditNoteItem.description} \r\n                        backPath={'.'+PurchaseCreditNoteItem.path} \r\n                        topLeftInput={[inputState[1],inputState[2]]}\r\n                        topRightField={[PurchaseCreditNoteItem.description+' No','Date','Credit Term','Other Description']}\r\n                        topRightInput={[inputState[3],dateFormatParser(inputState[4]),inputState[6]==='COD'?'C.O.D.':inputState[6]+' Days',inputState[5]]}\r\n                        bottomField={['','Item Code','Description','Price','Qty','Discount','Subtotal']}\r\n                        bottomInput={inputState[linePosition]}\r\n                        calculateSubtotal={calculateSubtotal}\r\n                        calculateTotal={calculateTotal}\r\n                    />\r\n                </Route>\r\n                <Route exact path={path}>\r\n                <AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ PurchaseCreditNoteItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{\r\n                        e.preventDefault(); \r\n                        if(usage==='INSERT') onInsert(); \r\n                        else onUpdate()\r\n                        \r\n                        }}>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor <span className='text-warning'>*</span></h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    {/*if input is disabled, browser does not validate entry (and hence problem if option from dropdown \r\n                                    not chosen).Hence to prevent user altering input content(other than using those in dropdown) AND \r\n                                    to ensure a value is chosen set required attribute and a onChange event handler that does nothing*/}\r\n                                    <input type='text' id='creditorID' value={inputState[0]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                        let creditorName='';\r\n                                        let creditorAddress='';\r\n                                        let creditorDefaultCreditTerm='';\r\n                                    \r\n                                        dataSelectCreditor.data.forEach(data=>{\r\n                                            \r\n                                            if(data[dataSelectCreditor.field[0].name]===e.target.value) {\r\n                                                creditorName=data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'';\r\n                                                creditorAddress=data[dataSelectCreditor.field[2].name]?data[dataSelectCreditor.field[2].name]:'';\r\n                                                creditorDefaultCreditTerm=data[dataSelectCreditor.field[7].name]?data[dataSelectCreditor.field[7].name]:'';\r\n                                            }\r\n                                            \r\n                                        })\r\n                                    \r\n                                    changeInputState([e.target.value,creditorName,creditorAddress,\r\n                                        ...inputState.slice(3,creditTermPosition),creditorDefaultCreditTerm,\r\n                                        ...inputState.slice(creditTermPosition+1)])\r\n                                    changeParamCreditorOutstanding(\r\n                                        paramCreditorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                                <label className='mt-3' htmlFor='creditorName'>Creditor Name</label>\r\n                                <input id='creditorName' value={inputState[1]} onChange={(e)=>e} required className='form-control'/>\r\n                                <label className='mt-3' htmlFor='creditorAddress'>Creditor Address</label>\r\n                                <textarea id='creditorAddress' value={inputState[2]} onChange={(e)=>e} required className='form-control'/>\r\n                                \r\n                            </fieldset>\r\n\r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='purchaseCreditNoteNumber' className='mt-3'>Purchase Credit Note Number <span className='text-warning'>*</span></label>\r\n                                <input type='text' id='purchaseCreditNoteNumber' maxLength='50' value={inputState[3]} onChange={\r\n                                    (e)=>onChange(e.target.value,3)} disabled={disabled} required className='form-control' />\r\n                                \r\n                                <label htmlFor='date' className='mt-3'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[4]} onChange={(e)=>onChange(e.target.value,4)} \r\n                                className='form-control'/>\r\n                                \r\n                                <label className='mt-3' htmlFor='glCode' >GL Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <label htmlFor='creditTerm' className='mt-3'>Credit Term</label>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,6)} value={inputState[6]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n\r\n                                <label htmlFor='description' className='mt-3'>Description</label>\r\n                                <textarea id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            <LineRender linePosition={linePosition} stockControlPosition={stockControlPosition}\r\n                            disabled={disabled} inputState={inputState} changeInputState={changeInputState} \r\n                            dataSelectStock={dataSelectStock} stockList={stockList} stockDirection='out'\r\n                            calculateSubtotal={calculateSubtotal} lineDescription={'Purchase Credit Note Line'} />\r\n\r\n\r\n                            <h5 className='text-right mt-3 mb-4 col-12'>\r\n                                {'Total: '+numberFormatParser(calculateTotal())}\r\n                            </h5>\r\n                            <h6 className='text-right mb-4 col-12'>\r\n                                <span className=\"alert alert-secondary\">{'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}</span>\r\n                            </h6>\r\n                            {errorUnappliedAmount}\r\n\r\n                            \r\n                            <OffsetRender dataSelectOutstanding={dataSelectCreditorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionPurchaseInvoice} offsetPositionTwo={offsetPositionPurchaseDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount} \r\n                                offsetDescription={'Purchase Invoice / Purchase Debit Note'}/>\r\n                            \r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled} path={`${path}/Preview`}/>\r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>\r\n            </Route>\r\n            <Redirect to={PurchaseCreditNoteItem.path}/>\r\n        </Switch>)}\r\n        \r\n        </Item>\r\n    )\r\n}\r\nPurchaseCreditNoteItem.description='Purchase Credit Note';\r\nPurchaseCreditNoteItem.path='/PurchaseCreditNoteItem';\r\n\r\nexport default PurchaseCreditNoteItem;\r\n\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction StockItemMaintenance(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./StockItem' item='stock'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={StockItemMaintenance.description} listname={'Stock Item'} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nStockItemMaintenance.description='Stock Item Maintenance';\r\nStockItemMaintenance.path='/StockItemMaintenance';\r\n\r\nexport default StockItemMaintenance;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction StockCardReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Stock Card Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nStockCardReport.description='Stock Card Report';\r\nStockCardReport.path='/StockCardReport';\r\n\r\nexport default StockCardReport;\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction StockAgingReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Stock Aging Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nStockAgingReport.description='Stock Aging Report';\r\nStockAgingReport.path='/StockAgingReport';\r\n\r\nexport default StockAgingReport;\r\n","import React,{useState} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\n\r\nfunction StockItem (props) {\r\n\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    \r\n    const [inputState,changeInputState]=useState(['','','','','','','','',''])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='stock' successPath='/StockItemMaintenance'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ StockItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='itemNumber' >Item Number <span className='text-warning'>*</span></label>\r\n                            {inputNumberRender({\r\n                                onChange:onChange,\r\n                                layout:'col-md-4',\r\n                                position:0,\r\n                                labelID:'itemNumber'\r\n                            })\r\n                            }\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='description'>Description <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='description' onChange={(e)=>\r\n                                onChange(e.target.value,1)} \r\n                                value={inputState[1]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group col-md-5 mx-3 border border-secondary pb-4 rounded'>\r\n                                <legend className='col-form-label col-4 offset-4 text-center'><h6>Price</h6></legend>\r\n                            \r\n                                <label htmlFor='sellingPrice' className='col-12'>Selling Price:</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='.01' id='sellingPrice' onChange={(e)=>\r\n                                onChange(e.target.value,2)} \r\n                                value={inputState[2]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <label  htmlFor='minPrice' className='col-12'>Min Price:</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='.01' id='minPrice' onChange={(e)=>\r\n                                onChange(e.target.value,3)} \r\n                                value={inputState[3]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <label  htmlFor='maxPrice' className='col-12'>Max Price:</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='.01' id='maxPrice' onChange={(e)=>onChange(e.target.value,4)} \r\n                                value={inputState[4]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <small className='text-warning'>2 decimal places only</small>\r\n                            </fieldset>\r\n                            <fieldset className='form-group col-md-5 mx-3 border border-secondary pb-4 rounded'>\r\n                                <legend className='col-form-label col-4 offset-4 text-center'><h6>Cost</h6></legend>\r\n\r\n                                <label htmlFor='standardCost' className='col-12'>Standard Cost:</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='.01' id='standardCost' onChange={(e)=>onChange(e.target.value,5)} \r\n                                value={inputState[5]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <small className='text-warning'>2 decimal places only</small>\r\n                            </fieldset>\r\n                            <fieldset className='form-group col-md-5 mx-3 border border-secondary pb-4 rounded'>\r\n                                <legend className='col-form-label col-4 offset-4 text-center'><h6>Stock Level</h6></legend>\r\n\r\n                                <label htmlFor='minQTY' className='col-12'>Min Quantity(Re-order Level):</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='1' id='minQTY' onChange={(e)=>onChange(e.target.value,6)} \r\n                                value={inputState[6]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <label htmlFor='maxQTY' className='col-12'>Max Quantity:</label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='1' id='maxQTY' onChange={(e)=>onChange(e.target.value,7)} \r\n                                value={inputState[7]} disabled={disabled} className='form-control'/>\r\n                                </div>\r\n                                <label htmlFor='balanceQTY' className='col-12'>Balance Quantity: </label>\r\n                                <div className='col-12'>\r\n                                    <input type='number' min='0' step='1' id='balanceQTY' onChange={(e)=>e} \r\n                                value={0} disabled \r\n                                required className='form-control'/>\r\n                                </div>\r\n                            </fieldset>\r\n                        </div>\r\n                        \r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nStockItem.description='Stock Item';\r\nStockItem.path='/StockItem';\r\n\r\nexport default StockItem;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction BankMaintenance(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./BankItem' item='bank'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={BankMaintenance.description} listname={'Bank'} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nBankMaintenance.description='Bank Maintenance';\r\nBankMaintenance.path='/BankMaintenance';\r\n\r\nexport default BankMaintenance;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction BankReceipt(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./BankReceiptItem' item='bank_receipt'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={BankReceipt.description} listname={BankReceipt.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nBankReceipt.description='Bank Receipt';\r\nBankReceipt.path='/BankReceipt';\r\n\r\nexport default BankReceipt;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction BankPayment(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./BankPaymentItem' item='bank_payment'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={BankPayment.description} listname={BankPayment.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nBankPayment.description='Bank Payment';\r\nBankPayment.path='/BankPayment';\r\n\r\nexport default BankPayment;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction CashReceipt(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./CashReceiptItem' item='cash_receipt'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={CashReceipt.description} listname={CashReceipt.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nCashReceipt.description='Cash Receipt';\r\nCashReceipt.path='/CashReceipt';\r\n\r\nexport default CashReceipt;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction CashPayment(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./CashPaymentItem' item='cash_payment'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={CashPayment.description} listname={CashPayment.description} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nCashPayment.description='Cash Payment';\r\nCashPayment.path='/CashPayment';\r\n\r\nexport default CashPayment;","import React,{useState} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\n\r\nfunction BankItem (props) {\r\n\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    \r\n    const [inputState,changeInputState]=useState(['','','','','',''])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='bank' successPath='/BankMaintenance'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ BankItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='bankCode' >Bank Code <span className='text-warning'>*</span></label>\r\n                            {inputNumberRender({\r\n                                onChange:onChange,\r\n                                layout:'col-md-4',\r\n                                position:0,\r\n                                labelID:'bankCode'\r\n                            })\r\n                            }\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='bankName'>Bank Name <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <input type='text' id='bankName' onChange={(e)=>\r\n                                onChange(e.target.value,1)} value={inputState[1]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='bankAddress'>Bank Address <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='bankAddress' onChange={(e)=>\r\n                                onChange(e.target.value,2)} \r\n                                value={inputState[2]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='bankPostcode'>Bank Postcode <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' maxLength='5' id='bankPostcode' onChange={(e)=>\r\n                                onChange(e.target.value,3)} value={inputState[3]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nBankItem.description='Bank Item';\r\nBankItem.path='/BankItem';\r\n\r\nexport default BankItem;","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\n\r\n\r\n\r\nfunction BankReceiptItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n            }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'bank_receipt'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectBank,error:errorSelectBank}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'bank'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectDebtorOutstanding,error:errorSelectDebtorOutstanding},changeParamDebtorOutstanding]=useFetch(null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const debtorNumPosition=2;\r\n    const amountPosition=7;\r\n    const glPosition=8;\r\n    const oldNumPosition=9;\r\n    const offsetPositionSalesInvoice=10;\r\n    const offsetPositionDebitNote=11;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='INVOICE';\r\n    const offsetDescriptionTwo='DEBIT NOTE';\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [bankList,changeBankList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [isDebtorPayment,changeIsDebtorPayment] = useState(true);\r\n    const [inputState,changeInputState]=useState(['','','','','','','','','','',[],[]]) \r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n                changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n                <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                    {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                    +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n                </option>)\r\n                )\r\n            )\r\n\r\n        if (dataSelectBank && dataSelectBank.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectBank && dataSelectBank.data && dataSelectBank.field) \r\n            changeBankList(dataSelectBank.data.map(data=>(\r\n            <option key={data[dataSelectBank.field[0].name]} value={data[dataSelectBank.field[0].name]}>\r\n                {(data[dataSelectBank.field[0].name]?data[dataSelectBank.field[0].name]:'')\r\n                +' | '+(data[dataSelectBank.field[1].name]?data[dataSelectBank.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n        \r\n        if (inputState[glPosition]!=='') {\r\n            changeIsDebtorPayment(false)\r\n        }\r\n\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectGLCode,errorSelectGLCode,dataSelectBank,errorSelectBank,inputState[glPosition]])\r\n\r\n    /*have a separate useeffect for debtor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectDebtorOutstanding,errorSelectDebtorOutstanding])\r\n\r\n    function paramDebtorOutstanding(debtorNum,oldNum){\r\n        return {\r\n            url:'./getDebtorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    debtorNum:debtorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    function calculateTotal() {\r\n        return +(inputState[amountPosition]);\r\n    }\r\n\r\n    function calculateUnappliedAmount(exclude) {\r\n        \r\n        return inputState[offsetPositionDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionSalesInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor || (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode \r\n    || (dataSelectBank && dataSelectBank.error) || errorSelectBank || (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error) ||\r\n    errorSelectDebtorOutstanding) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectBank && dataSelectBank.error? 'Bank List RETRIEVAL for item failed errno: '+dataSelectBank.error.errno\r\n            +' code: '+dataSelectBank.error.code+' message: '+dataSelectBank.error.sqlMessage:null}\r\n            {errorSelectBank? 'Bank List RETRIEVAL for item failed '+errorSelectBank : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error? 'Debtor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectDebtorOutstanding.error.errno +' code: '+dataSelectDebtorOutstanding.error.code+' message: '+ \r\n            dataSelectDebtorOutstanding.error.sqlMessage:null}\r\n            {errorSelectDebtorOutstanding? 'Debtor Outstanding List RETRIEVAL for item failed '+errorSelectDebtorOutstanding : null}\r\n        </div>)\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='bank_receipt' successPath='/BankReceipt'\r\n        paramOutstanding={paramDebtorOutstanding} changeParamOutstanding={changeParamDebtorOutstanding} \r\n        debtorCreditorNumPosition={debtorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ BankReceiptItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{\r\n                        e.preventDefault();\r\n                        if (calculateUnappliedAmount()!==0 && isDebtorPayment) {\r\n                            changeErrorUnappliedAmount(\r\n                                (<p className='col-md-12 text-right alert alert-warning mx-3'>\r\n                                    Total not fully offset. Please amend. \r\n                                </p>)\r\n                            )\r\n                        } else {\r\n                            if(usage==='INSERT') onInsert(); \r\n                            else onUpdate()\r\n                        }\r\n                        }}>\r\n                        <div className='form-check'>\r\n                            <input className=\"form-check-input\" type=\"checkbox\" checked={isDebtorPayment} disabled={disabled} id=\"isDebtorPayment\" \r\n                            onChange={(e)=>{\r\n                                changeIsDebtorPayment(!isDebtorPayment);\r\n                                changeInputState([...inputState.slice(0,debtorNumPosition),'',\r\n                                ...inputState.slice(debtorNumPosition+1,glPosition),'',\r\n                                ...inputState.slice(glPosition+1,offsetPositionSalesInvoice),[],[]])\r\n                                }\r\n                            \r\n                            }/>\r\n                            <label className=\"form-check-label\" htmlFor=\"isDebtorPayment\">\r\n                                Debtor Payment?\r\n                            </label>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' \r\n                            disabled={disabled? true:!isDebtorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor</h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='debtorID' value={inputState[2]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} value={inputState[2]} onChange={(e)=>{\r\n                                    onChange(e.target.value,2)\r\n                                    changeParamDebtorOutstanding(\r\n                                        paramDebtorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled? true:isDebtorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>GL Code</h6></legend>\r\n                                <label className='mt-3' htmlFor='glCode' >GL Code</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[8]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,8)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                        \r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='documentNumber'>Document Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:0,\r\n                                    labelID:'documentNumber'\r\n                                })\r\n                                }\r\n                            </div>\r\n                    \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='bankCode'>Bank Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='bankCode' value={inputState[1]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,1)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {bankList}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[3]} onChange={(e)=>onChange(e.target.value,3)} \r\n                                className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='paymentMethod'>Payment Method</label>\r\n                                <input type='text' id='paymentMethod' onChange={(e)=>onChange(e.target.value,4)} value={inputState[4]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='transactionID'>Transaction ID</label>\r\n                                <input type='text' id='transactionID' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='description' >Description</label>\r\n                                <textarea type='text' id='description' onChange={(e)=>onChange(e.target.value,6)} value={inputState[6]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='amount'>Amount <span className='text-warning'>*</span></label>\r\n                                <input type='number' id='amount' onChange={(e)=>onChange(e.target.value,7)} value={inputState[7]} \r\n                                disabled={disabled} required min='0' step='.01' className='form-control'/>\r\n                            </div>\r\n\r\n                            {isDebtorPayment?\r\n                            (<h6 className='text-right my-4 col-12' style={{paddingRight:30}}>\r\n                                <span className='alert alert-secondary'>{'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}</span>\r\n                            </h6>):null}\r\n                            {errorUnappliedAmount}\r\n\r\n                            {isDebtorPayment?\r\n                                <OffsetRender dataSelectOutstanding={dataSelectDebtorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionSalesInvoice} offsetPositionTwo={offsetPositionDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount}\r\n                                offsetDescription={'Sales Invoice / Debit Note'}/>\r\n                            :null}\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled}/>\r\n                        \r\n\r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nBankReceiptItem.description='Bank Receipt';\r\nBankReceiptItem.path='/BankReceiptItem';\r\n\r\nexport default BankReceiptItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\n\r\n\r\n\r\nfunction BankPaymentItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'bank_payment'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectBank,error:errorSelectBank},changeParamSelectBank]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'bank'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectCreditorOutstanding,error:errorSelectCreditorOutstanding},changeParamCreditorOutstanding]=useFetch(null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditorNumPosition=2;\r\n    const amountPosition=7;\r\n    const glPosition=8;\r\n    const oldNumPosition=9;\r\n    const offsetPositionPurchaseInvoice=10;\r\n    const offsetPositionPurchaseDebitNote=11;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='PURCHASE INVOICE';\r\n    const offsetDescriptionTwo='PURCHASE DEBIT NOTE';\r\n\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [bankList,changeBankList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [isCreditorPayment,changeIsCreditorPayment] = useState(true);\r\n    const [inputState,changeInputState]=useState(['','','','','','','','','','',[],[]]) \r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n\r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n            changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n         if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            \r\n                changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n                <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                    {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                    +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n                </option>)\r\n                )\r\n            )\r\n\r\n        \r\n        if (dataSelectBank && dataSelectBank.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectBank && dataSelectBank.data && dataSelectBank.field) \r\n            changeBankList(dataSelectBank.data.map(data=>(\r\n            <option key={data[dataSelectBank.field[0].name]} value={data[dataSelectBank.field[0].name]}>\r\n                {(data[dataSelectBank.field[0].name]?data[dataSelectBank.field[0].name]:'')\r\n                +' | '+(data[dataSelectBank.field[1].name]?data[dataSelectBank.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n        \r\n        if (inputState[glPosition]!=='') {\r\n            changeIsCreditorPayment(false)\r\n        }\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectGLCode,errorSelectGLCode,dataSelectBank,errorSelectBank,inputState[glPosition]])\r\n\r\n    /*have a separate useeffect for debtor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectCreditorOutstanding,errorSelectCreditorOutstanding])\r\n\r\n    function paramCreditorOutstanding(creditorNum,oldNum){\r\n        return {\r\n            url:'./getCreditorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    creditorNum:creditorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    function calculateTotal() {\r\n        return +(inputState[amountPosition]);\r\n    }\r\n\r\n    function calculateUnappliedAmount(exclude) {\r\n        \r\n        return inputState[offsetPositionPurchaseDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionPurchaseInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor || (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode \r\n    || (dataSelectBank && dataSelectBank.error) || errorSelectBank || (dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.error) ||\r\n    errorSelectCreditorOutstanding) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectBank && dataSelectBank.error? 'Bank List RETRIEVAL for item failed errno: '+dataSelectBank.error.errno\r\n            +' code: '+dataSelectBank.error.code+' message: '+dataSelectBank.error.sqlMessage:null}\r\n            {errorSelectBank? 'Bank List RETRIEVAL for item failed '+errorSelectBank : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.error? 'Creditor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectCreditorOutstanding.error.errno +' code: '+dataSelectCreditorOutstanding.error.code+' message: '+ \r\n            dataSelectCreditorOutstanding.error.sqlMessage:null}\r\n            {errorSelectCreditorOutstanding? 'Creditor Outstanding List RETRIEVAL for item failed '+errorSelectCreditorOutstanding : null}\r\n        </div>)\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='bank_payment' successPath='/BankPayment'\r\n        paramOutstanding={paramCreditorOutstanding} changeParamOutstanding={changeParamCreditorOutstanding} \r\n        debtorCreditorNumPosition={creditorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ BankPaymentItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); \r\n                        if (calculateUnappliedAmount()!==0 && isCreditorPayment) {\r\n                            changeErrorUnappliedAmount(\r\n                                (<p className='col-md-12 text-right alert alert-warning mx-3'>\r\n                                    Total not fully offset. Please amend. \r\n                                </p>)\r\n                            )\r\n                        } else {\r\n                            if(usage==='INSERT') onInsert(); \r\n                            else onUpdate()\r\n                        }\r\n                        }}>\r\n                        <div className='form-check'>\r\n                            <input className=\"form-check-input\" type=\"checkbox\" checked={isCreditorPayment} disabled={disabled} id=\"isCreditorPayment\" \r\n                            onChange={(e)=>{\r\n                                changeIsCreditorPayment(!isCreditorPayment);\r\n                                changeInputState([...inputState.slice(0,creditorNumPosition),'',\r\n                                ...inputState.slice(creditorNumPosition+1,glPosition),'',\r\n                                ...inputState.slice(glPosition+1,offsetPositionPurchaseInvoice),[],[]])\r\n                                }\r\n                            }/>\r\n                            <label className=\"form-check-label\" htmlFor=\"isCreditorPayment\">\r\n                                Creditor Payment?\r\n                            </label>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' \r\n                            disabled={disabled? true:!isCreditorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor</h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='creditorID' value={inputState[2]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} value={inputState[2]} onChange={(e)=>{\r\n                                    onChange(e.target.value,2)\r\n                                    changeParamCreditorOutstanding(\r\n                                        paramCreditorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled? true:isCreditorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>GL Code</h6></legend>\r\n                                <label className='mt-3' htmlFor='glCode' >GL Code</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[8]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,8)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                        \r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='documentNumber'>Document Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:0,\r\n                                    labelID:'documentNumber'\r\n                                })\r\n                                }\r\n                            </div>\r\n                    \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='bankCode'>Bank Code <span className='text-warning'>*</span></label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='bankCode' value={inputState[1]} onChange={(e)=>e} required className='form-control' \r\n                                    disabled={disabled}/>\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,1)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {bankList}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[3]} onChange={(e)=>onChange(e.target.value,3)} \r\n                                className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='paymentMethod'>Payment Method</label>\r\n                                <input type='text' id='paymentMethod' onChange={(e)=>onChange(e.target.value,4)} value={inputState[4]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='transactionID'>Transaction ID</label>\r\n                                <input type='text' id='transactionID' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='description' >Description</label>\r\n                                <textarea type='text' id='description' onChange={(e)=>onChange(e.target.value,6)} value={inputState[6]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='amount'>Amount <span className='text-warning'>*</span></label>\r\n                                <input type='number' id='amount' onChange={(e)=>onChange(e.target.value,7)} value={inputState[7]} \r\n                                disabled={disabled} required min='0' step='.01' className='form-control'/>\r\n                            </div>\r\n\r\n                            {isCreditorPayment?\r\n                            (<h6 className='text-right my-4 col-12' style={{paddingRight:30}}>\r\n                                <span className='alert alert-secondary'>{'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}</span>\r\n                            </h6>):null}\r\n                            {errorUnappliedAmount}\r\n\r\n                            {isCreditorPayment?\r\n                            <OffsetRender dataSelectOutstanding={dataSelectCreditorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionPurchaseInvoice} offsetPositionTwo={offsetPositionPurchaseDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount}\r\n                                offsetDescription={'Purchase Invoice / Purchase Debit Note'}/>\r\n                            :null}\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nBankPaymentItem.description='Bank Payment';\r\nBankPaymentItem.path='/BankPaymentItem';\r\n\r\nexport default BankPaymentItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\n\r\n\r\nfunction CashReceiptItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'cash_receipt'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectDebtorOutstanding,error:errorSelectDebtorOutstanding},changeParamDebtorOutstanding]=useFetch(null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const debtorNumPosition=1;\r\n    const amountPosition=6;\r\n    const glPosition=7;\r\n    const oldNumPosition=9;\r\n    const offsetPositionSalesInvoice=10;\r\n    const offsetPositionDebitNote=11;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='INVOICE';\r\n    const offsetDescriptionTwo='DEBIT NOTE';\r\n\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [isDebtorPayment,changeIsDebtorPayment] = useState(true);\r\n    const [inputState,changeInputState]=useState(['','','','','','','','','','',[],[]]) \r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' | '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            \r\n                changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n                <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                    {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                    +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n                </option>)\r\n                )\r\n            )\r\n        if (inputState[glPosition]!=='') {\r\n            changeIsDebtorPayment(false)\r\n        }\r\n\r\n    },[dataSelectDebtor,errorSelectDebtor,dataSelectGLCode,errorSelectGLCode,inputState[glPosition]])\r\n\r\n    /*have a separate useeffect for debtor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectDebtorOutstanding,errorSelectDebtorOutstanding])\r\n\r\n    function paramDebtorOutstanding(debtorNum,oldNum){\r\n        return {\r\n            url:'./getDebtorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    debtorNum:debtorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    function calculateTotal() {\r\n        return +(inputState[amountPosition]);\r\n    }\r\n\r\n    function calculateUnappliedAmount(exclude) {\r\n        \r\n        return inputState[offsetPositionDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionSalesInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor || (dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode \r\n    || (dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error) || errorSelectDebtorOutstanding) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorOutstanding && dataSelectDebtorOutstanding.error? 'Debtor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectDebtorOutstanding.error.errno +' code: '+dataSelectDebtorOutstanding.error.code+' message: '+ \r\n            dataSelectDebtorOutstanding.error.sqlMessage:null}\r\n            {errorSelectDebtorOutstanding? 'Debtor Outstanding List RETRIEVAL for item failed '+errorSelectDebtorOutstanding : null}\r\n        </div>)\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='cash_receipt' successPath='/CashReceipt'\r\n            paramOutstanding={paramDebtorOutstanding} changeParamOutstanding={changeParamDebtorOutstanding} \r\n            debtorCreditorNumPosition={debtorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ CashReceiptItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{\r\n                        e.preventDefault(); \r\n\r\n                        if (calculateUnappliedAmount()!==0 && isDebtorPayment) {\r\n                            changeErrorUnappliedAmount(\r\n                                (<p className='col-md-12 text-right alert alert-warning mx-3'>\r\n                                    Total not fully offset. Please amend. \r\n                                </p>)\r\n                            )\r\n                        } else {\r\n                            if(usage==='INSERT') onInsert(); \r\n                            else onUpdate()\r\n                        }\r\n                        }}>\r\n                        <div className='form-check'>\r\n                            <input className=\"form-check-input\" type=\"checkbox\" checked={isDebtorPayment} disabled={disabled} id=\"isDebtorPayment\" \r\n                            onChange={(e)=>{\r\n                                changeIsDebtorPayment(!isDebtorPayment);\r\n                                changeInputState([...inputState.slice(0,debtorNumPosition),'',\r\n                                ...inputState.slice(debtorNumPosition+1,glPosition),'',\r\n                                ...inputState.slice(glPosition+1,offsetPositionSalesInvoice),[],[]])\r\n                                }\r\n                            }/>\r\n                            <label className=\"form-check-label\" htmlFor=\"isDebtorPayment\">\r\n                                Debtor Payment?\r\n                            </label>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' \r\n                            disabled={disabled? true:!isDebtorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Debtor</h6></legend>\r\n                                <label className='mt-3' htmlFor='debtorID' >Debtor ID</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='debtorID' value={inputState[1]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} value={inputState[1]} onChange={(e)=>{\r\n                                    onChange(e.target.value,1)\r\n                                    changeParamDebtorOutstanding(\r\n                                        paramDebtorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {debtorList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled? true:isDebtorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>GL Code</h6></legend>\r\n                                <label className='mt-3' htmlFor='glCode' >GL Code</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                        \r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='documentNumber'>Document Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:0,\r\n                                    labelID:'documentNumber'\r\n                                })\r\n                                }\r\n                            </div>\r\n                        \r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[2]} onChange={(e)=>onChange(e.target.value,2)} \r\n                                className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='paymentMethod'>Payment Method</label>\r\n                                <input type='text' id='paymentMethod' onChange={(e)=>onChange(e.target.value,3)} value={inputState[3]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='transactionID'>Transaction ID</label>\r\n                                <input type='text' id='transactionID' onChange={(e)=>onChange(e.target.value,4)} value={inputState[4]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='description' >Description</label>\r\n                                <textarea type='text' id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='amount'>Amount <span className='text-warning'>*</span></label>\r\n                                <input type='number' id='amount' onChange={(e)=>onChange(e.target.value,6)} value={inputState[6]} \r\n                                disabled={disabled} required min='0' step='.01' className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            {isDebtorPayment?\r\n                            (<h6 className='text-right my-4 col-12' style={{paddingRight:30}}>\r\n                                <span className='alert alert-secondary'>{'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}</span>\r\n                            </h6>):null}\r\n                            {errorUnappliedAmount}\r\n\r\n                            {isDebtorPayment?\r\n                            <OffsetRender dataSelectOutstanding={dataSelectDebtorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionSalesInvoice} offsetPositionTwo={offsetPositionDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount}\r\n                                offsetDescription={'Sales Invoice / Debit Note'}/>\r\n                            :null}\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nCashReceiptItem.description='Cash Receipt';\r\nCashReceiptItem.path='/CashReceiptItem';\r\n\r\nexport default CashReceiptItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport OffsetRender from '../Shared/OffsetRender';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\n\r\n\r\nfunction CashPaymentItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    const [{data:dataSelectCreditor,error:errorSelectCreditor},changeParamSelectCreditor]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'creditor'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode},changeParamSelectGLCode]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'cash_payment'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    const [{data:dataSelectCreditorOutstanding,error:errorSelectCreditorOutstanding},changeParamCreditorOutstanding]=useFetch(null);//extension of Item component\r\n\r\n    /*Position of inputState variable used in other components. */\r\n    const creditorNumPosition=1;\r\n    const amountPosition=6;\r\n    const glPosition=7;\r\n    const oldNumPosition=9;\r\n    const offsetPositionPurchaseInvoice=10;\r\n    const offsetPositionPurchaseDebitNote=11;\r\n\r\n    /*inputState offset inner positions*/\r\n    const offsetDocNumPosition=0;\r\n    const offsetAmountPosition=1;\r\n\r\n    const offsetDescriptionOne='PURCHASE INVOICE';\r\n    const offsetDescriptionTwo='PURCHASE DEBIT NOTE';\r\n\r\n    const [creditorList,changeCreditorList] = useState(null);\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [errorUnappliedAmount,changeErrorUnappliedAmount] = useState(null);\r\n    const [isCreditorPayment,changeIsCreditorPayment] = useState(true);\r\n    const [inputState,changeInputState]=useState(['','','','','','','','','','',[],[]]) \r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectCreditor && dataSelectCreditor.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectCreditor && dataSelectCreditor.data && dataSelectCreditor.field) \r\n            changeCreditorList(dataSelectCreditor.data.map(data=>(\r\n            <option key={data[dataSelectCreditor.field[0].name]} value={data[dataSelectCreditor.field[0].name]}>\r\n                {data[dataSelectCreditor.field[0].name]+' | '+(data[dataSelectCreditor.field[1].name]?data[dataSelectCreditor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                    alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                    changeAuth(false);\r\n                }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            \r\n                changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n                <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                    {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                    +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n                </option>)\r\n                )\r\n            )\r\n        \r\n        if (inputState[glPosition]!=='') {\r\n            changeIsCreditorPayment(false)\r\n        }\r\n\r\n    },[dataSelectCreditor,errorSelectCreditor,dataSelectGLCode,errorSelectGLCode,inputState[glPosition]])\r\n\r\n    /*have a separate useeffect for debtor outstanding fetch because fetch happens many time during lifecycle of component*/\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n    },[dataSelectCreditorOutstanding,errorSelectCreditorOutstanding])\r\n\r\n    function paramCreditorOutstanding(creditorNum,oldNum){\r\n        return {\r\n            url:'./getCreditorOutstanding',\r\n            init:{\r\n                method:'POST',\r\n                headers:{'Content-Type':'application/json'},\r\n                body:JSON.stringify({\r\n                    creditorNum:creditorNum,\r\n                    oldNum:oldNum\r\n                }),\r\n                credentials:'include'\r\n            }\r\n        }\r\n    }\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    function calculateTotal() {\r\n        return +(inputState[amountPosition]);\r\n    }\r\n\r\n    function calculateUnappliedAmount(exclude) {\r\n        return inputState[offsetPositionPurchaseDebitNote].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },inputState[offsetPositionPurchaseInvoice].reduce((a,b)=>{\r\n            \r\n            if(exclude===b[offsetDocNumPosition]) {\r\n                return a\r\n            }     \r\n            else return a-b[offsetAmountPosition];\r\n        },calculateTotal())\r\n        )\r\n    }\r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    if ((dataSelectCreditor && dataSelectCreditor.error) || errorSelectCreditor || (dataSelectGLCode && dataSelectGLCode.error) \r\n    || errorSelectGLCode || (dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.error) ||\r\n    errorSelectCreditorOutstanding ) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectCreditor && dataSelectCreditor.error? 'Creditor List RETRIEVAL for item failed errno: '+dataSelectCreditor.error.errno\r\n            +' code: '+dataSelectCreditor.error.code+' message: '+dataSelectCreditor.error.sqlMessage:null}\r\n            {errorSelectCreditor? 'Creditor List RETRIEVAL for item failed '+errorSelectCreditor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectCreditorOutstanding && dataSelectCreditorOutstanding.error? 'Creditor Outstanding List RETRIEVAL for item failed errno: '\r\n            + dataSelectCreditorOutstanding.error.errno +' code: '+dataSelectCreditorOutstanding.error.code+' message: '+ \r\n            dataSelectCreditorOutstanding.error.sqlMessage:null}\r\n            {errorSelectCreditorOutstanding? 'Creditor Outstanding List RETRIEVAL for item failed '+errorSelectCreditorOutstanding : null}\r\n\r\n        </div>)\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='cash_payment' successPath='/CashPayment'\r\n        paramOutstanding={paramCreditorOutstanding} changeParamOutstanding={changeParamCreditorOutstanding} \r\n        debtorCreditorNumPosition={creditorNumPosition} oldNumPosition={oldNumPosition}>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ CashPaymentItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); \r\n                        if (calculateUnappliedAmount()!==0 && isCreditorPayment) {\r\n                            changeErrorUnappliedAmount(\r\n                                (<p className='col-md-12 text-right alert alert-warning mx-3'>\r\n                                    Total not fully offset. Please amend. \r\n                                </p>)\r\n                            )\r\n                        } else {\r\n                            if(usage==='INSERT') onInsert(); \r\n                            else onUpdate()\r\n                        }\r\n                        }}>\r\n                        <div className='form-check'>\r\n                            <input className=\"form-check-input\" type=\"checkbox\" checked={isCreditorPayment} disabled={disabled} id=\"isCreditorPayment\" \r\n                            onChange={(e)=>{\r\n                                changeIsCreditorPayment(!isCreditorPayment);\r\n                                changeInputState([...inputState.slice(0,creditorNumPosition),'',\r\n                                ...inputState.slice(creditorNumPosition+1,glPosition),'',\r\n                                ...inputState.slice(glPosition+1,offsetPositionPurchaseInvoice),[],[]])\r\n                                }\r\n                            }/>\r\n                            <label className=\"form-check-label\" htmlFor=\"isCreditorPayment\">\r\n                                Creditor Payment?\r\n                            </label>\r\n                        </div>\r\n                        <div className='row'>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' \r\n                            disabled={disabled? true:!isCreditorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>Creditor</h6></legend>\r\n                                <label className='mt-3' htmlFor='creditorID' >Creditor ID</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='creditorID' value={inputState[1]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} value={inputState[1]} onChange={(e)=>{\r\n                                    onChange(e.target.value,1)\r\n                                    changeParamCreditorOutstanding(\r\n                                        paramCreditorOutstanding(e.target.value,inputState[oldNumPosition])\r\n                                        )\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {creditorList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                            <fieldset className='form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded' disabled={disabled? true:isCreditorPayment}>\r\n                                <legend className='col-form-label col-4 offset-4 text-center' ><h6>GL Code</h6></legend>\r\n                                <label className='mt-3' htmlFor='glCode' >GL Code</label>\r\n                                <div className='input-group'>\r\n                                    <input type='text' id='glCode' value={inputState[7]} onChange={(e)=>e} required className='form-control' />\r\n                                    <select className='form-control' style={{flex:'0 1 0'}} onChange={(e)=>{\r\n                                    onChange(e.target.value,7)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCodeList}\r\n                                    </select>\r\n                                </div>\r\n                            </fieldset>\r\n                        \r\n                            <div className='form-group col-md-5 mx-3'>\r\n                                <label htmlFor='documentNumber'>Document Number <span className='text-warning'>*</span></label>\r\n                                {inputNumberRender({\r\n                                    onChange:onChange,\r\n                                    layout:'',\r\n                                    position:0,\r\n                                    labelID:'documentNumber'\r\n                                })\r\n                                }\r\n                            </div>\r\n                        \r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                                <input type='date' disabled={disabled} required value={inputState[2]} onChange={(e)=>onChange(e.target.value,2)} \r\n                                className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='paymentMethod'>Payment Method</label>\r\n                                <input type='text' id='paymentMethod' onChange={(e)=>onChange(e.target.value,3)} value={inputState[3]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='transactionID'>Transaction ID</label>\r\n                                <input type='text' id='transactionID' onChange={(e)=>onChange(e.target.value,4)} value={inputState[4]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='description' >Description</label>\r\n                                <textarea type='text' id='description' onChange={(e)=>onChange(e.target.value,5)} value={inputState[5]} \r\n                                disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            \r\n                            <div className='form-group form-row col-md-5 mx-3'>\r\n                                <label htmlFor='amount'>Amount <span className='text-warning'>*</span></label>\r\n                                <input type='number' id='amount' onChange={(e)=>onChange(e.target.value,6)} value={inputState[6]} \r\n                                disabled={disabled} required min='0' step='.01' className='form-control'/>\r\n                                \r\n                            </div>\r\n\r\n                            {isCreditorPayment?\r\n                            (<h6 className='text-right my-4 col-12' style={{paddingRight:30}}>\r\n                                <span className='alert alert-secondary'>{'Unapplied Amount: '+numberFormatParser(calculateUnappliedAmount())}</span>\r\n                            </h6>):null}\r\n                            {errorUnappliedAmount}\r\n\r\n                            {isCreditorPayment?\r\n                                <OffsetRender dataSelectOutstanding={dataSelectCreditorOutstanding} inputState={inputState} \r\n                                changeInputState={changeInputState} disabled={disabled}\r\n                                calculateUnappliedAmount={calculateUnappliedAmount} calculateTotal={calculateTotal}\r\n                                offsetPositionOne={offsetPositionPurchaseInvoice} offsetPositionTwo={offsetPositionPurchaseDebitNote}\r\n                                offsetDescriptionOne={offsetDescriptionOne} offsetDescriptionTwo={offsetDescriptionTwo}\r\n                                changeErrorUnappliedAmount={changeErrorUnappliedAmount}\r\n                                offsetDescription={'Purchase Invoice / Purchase Debit Note'}/>\r\n                            :null}\r\n\r\n                        </div>\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} \r\n                        changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nCashPaymentItem.description='Cash Payment';\r\nCashPaymentItem.path='/CashPaymentItem';\r\n\r\nexport default CashPaymentItem;\r\n\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction DebtorMaintenance(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./DebtorItem' item='debtor'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={DebtorMaintenance.description} listname={'Debtor'} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nDebtorMaintenance.description='Debtor Maintenance';\r\nDebtorMaintenance.path='/DebtorMaintenance';\r\n\r\nexport default DebtorMaintenance;","function setPageSize(cssPageSize) {\r\n    if (document.getElementById('pageStyle')) \r\n        document.getElementById('pageStyle').innerHTML = `@media print {@page {size: ${cssPageSize}}}`;\r\n\r\n    else {\r\n        const style = document.createElement('style')\r\n        style.setAttribute('id','pageStyle');\r\n        document.head.appendChild(style);\r\n        document.getElementById('pageStyle').innerHTML = `@media print {@page {size: ${cssPageSize}}}`;\r\n    }\r\n    \r\n}\r\n\r\nexport default setPageSize;","import React from 'react';\r\nimport numberFormatParser from '../numberFormatParser';\r\nimport dateFormatParser from '../dateFormatParser';\r\nimport {useHistory} from 'react-router-dom';\r\nimport setPageSize from '../setPageSize';\r\n\r\n/*Layout for Debtor Aging Report and Creditor Aging Report*/\r\n\r\nfunction DebtorCreditorAgingOne(props) {\r\n\r\nconst {currDate,agingMonths}=props.resultInput;\r\nconst history=useHistory();\r\n\r\nfunction populateDebtor(currDate,agingMonths) {\r\n        const data=props.data;\r\n        const dataDetail=props.dataDetail;\r\n        const field=props.field;\r\n        const debtorNum=field[0].name;\r\n        const name=field[1].name;\r\n        const docNum=field[2].name;\r\n        const docDate=field[3].name;\r\n        const type=field[4].name;\r\n        const amount=field[5].name;\r\n        const creditTerm=field[6].name;\r\n\r\n    \r\n        const debtorAlreadyParsed=[];\r\n        const result=[];\r\n\r\n        data.forEach(item=>{\r\n            if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1)  {\r\n                debtorAlreadyParsed.push(item[debtorNum]);\r\n                result.push(\r\n                (<tbody key={item[debtorNum]} className='border-bottom border-secondary'>\r\n                    <tr className='border-top border-secondary'>\r\n                        <th className='align-top'>{item[debtorNum]}</th>\r\n                        <th className='align-top'>{item[name]}</th>\r\n                        {props.withDetails?(<th></th>):null}\r\n                        {props.withDetails?(<th></th>):null}\r\n                        <th className='align-top'>\r\n                            {numberFormatParser(data.reduce((a,b)=>{\r\n                            if(b[debtorNum]===item[debtorNum]) {\r\n                                let value=props.calculateAgingCurrentAmount(\r\n                                    currDate,\r\n                                    b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                        props.getFormattedDate(new Date(new Date(b[docDate])\r\n                                        .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                        ):b[docDate],\r\n                                    b[amount]\r\n                                    )\r\n\r\n                                if (value) {\r\n                                    return a+b[amount];\r\n                                } else return a\r\n                                    \r\n                            }\r\n                            else return a;\r\n                        },0))\r\n                        }</th>\r\n                        {props.populateMonthsAmount(\r\n                            currDate,\r\n                            item[debtorNum],\r\n                            Number(agingMonths),\r\n                            'table'\r\n                        )}\r\n                        <th className='align-top'>\r\n                            {numberFormatParser(data.reduce((a,b)=>{\r\n                            if(b[debtorNum]===item[debtorNum]) {\r\n                                let value=props.calculateAgingRemainderAmount(\r\n                                    currDate,\r\n                                    b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                        props.getFormattedDate(new Date(new Date(b[docDate])\r\n                                        .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                        ):b[docDate],\r\n                                    b[amount],\r\n                                    Number(agingMonths)\r\n                                    )\r\n\r\n                                if (value) {\r\n                                    return a+b[amount];\r\n                                } else return a\r\n                                    \r\n                            }\r\n                            \r\n                            else return a;\r\n                        },0))}</th>\r\n                        <th className='align-top'>\r\n                            {numberFormatParser(\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum])\r\n                                    return a+b[amount]\r\n                                else return a\r\n                                },0)-\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum]) {\r\n                                    let value=props.calculateAgingCurrentAmount(\r\n                                        currDate,\r\n                                        b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                            props.getFormattedDate(new Date(new Date(b[docDate])\r\n                                            .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                            ):b[docDate],\r\n                                        b[amount]\r\n                                        )\r\n    \r\n                                    if (value) {\r\n                                        return a+b[amount];\r\n                                    } else return a\r\n                                        \r\n                                }\r\n                                else return a;\r\n                            },0)\r\n                            )}\r\n                            </th>\r\n                        <th className='align-top'>\r\n                            {numberFormatParser(\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum])\r\n                                    return a+b[amount]\r\n                                else return a\r\n                                },0)\r\n                            )}</th>\r\n                    </tr>\r\n                            \r\n                    {props.withDetails? dataDetail.map((item2,i)=>{\r\n                        if (item2[debtorNum]===item[debtorNum]) \r\n                            return (\r\n                                <tr key={item2[docNum]} >\r\n                                    <td className='align-top'>{item2[docNum]}</td>\r\n                                    <td className='align-top'>{dateFormatParser(item2[docDate])}</td>\r\n                                    <td className='align-top'>{item2[type]}</td>\r\n                                    <td className='align-top'>{\r\n                                        item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                        dateFormatParser(props.getFormattedDate(\r\n                                            new Date(new Date(item2[docDate])\r\n                                            .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm]))))\r\n                                        ):dateFormatParser(item2[docDate])\r\n                                    }</td>\r\n                                    <td className='align-top'>{\r\n                                        numberFormatParser(props.calculateAgingCurrentAmount(\r\n                                            currDate,\r\n                                            item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                                props.getFormattedDate(new Date(new Date(item2[docDate])\r\n                                                .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                                ):item2[docDate],\r\n                                            item2[amount]\r\n                                            ))\r\n                                    }</td>\r\n                                    {props.populateTableMonthsAmount(\r\n                                        currDate,\r\n                                        item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                            props.getFormattedDate(new Date(new Date(item2[docDate])\r\n                                            .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                            ):item2[docDate],\r\n                                        item2[amount],\r\n                                        Number(agingMonths)\r\n                                    )}\r\n                                    <td className='align-top'>{\r\n                                    numberFormatParser(props.calculateAgingRemainderAmount(\r\n                                        currDate,\r\n                                        item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                            props.getFormattedDate(new Date(new Date(item2[docDate])\r\n                                            .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                            ):item2[docDate],\r\n                                        item2[amount],\r\n                                        Number(agingMonths)\r\n                                    ))\r\n                                    }</td>\r\n                                    <td className='align-top'/>\r\n                                    <td className='align-top'/>\r\n                                </tr>\r\n                            )\r\n                        else return null; \r\n                        }):null\r\n                    }\r\n                </tbody>)\r\n                )\r\n            } \r\n        })\r\n        return result;\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='container-fluid py-1'>\r\n            <button type='click' className='btn btn-secondary d-print-none mb-2' \r\n                onClick={()=>{\r\n                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                    'content','width=device-width, initial-scale=1.0');\r\n                    setPageSize('a4 portrait');\r\n                    history.push(props.backPath)\r\n            }}>Back</button>\r\n            <h2 className='text-center mb-3'>\r\n                {props.description+' as at '+ (dateFormatParser(props.resultInput['currDate']))}\r\n            </h2>\r\n            <hr className='border border-dark'/>\r\n            <table className='table table-borderless'>\r\n                <thead>\r\n                    <tr className='border-top border-secondary'>\r\n                        <th className='align-top'>Debtor No.</th>\r\n                        <th className='align-top'>Name</th>\r\n                        {props.withDetails?(<th></th>):null}\r\n                        {props.withDetails?(<th></th>):null}\r\n                        <th className='align-top'>Current</th>\r\n                        {props.populateTableMonthsHeader(props.resultInput['agingMonths'])}\r\n                        <th className='align-top'>{'> '+props.resultInput['agingMonths']+' Month'}</th>\r\n                        <th className='align-top'>Total Overdue</th>\r\n                        <th className='align-top'>Balance</th>\r\n                    </tr>\r\n                    \r\n                    {props.withDetails?\r\n                    (<tr className='border-bottom border-secondary text-secondary'>\r\n                        <th className='align-top'>Doc No.</th>\r\n                        <th className='align-top'>Doc Date</th>\r\n                        <th className='align-top'>Type</th>\r\n                        <th className='align-top'>Due Date</th>\r\n                        <th colSpan={4+props.resultInput['agingMonths']}></th>\r\n                    </tr>):null}\r\n                    {props.withDetails?\r\n                    (<tr>\r\n                        <th className='border-bottom border-secondary' colSpan={8+props.resultInput['agingMonths']}></th>\r\n                    </tr>):\r\n                    (<tr>\r\n                        <th className='border-bottom border-top border-secondary' colSpan={6+props.resultInput['agingMonths']}></th>\r\n                    </tr>)}\r\n                    \r\n\r\n                </thead>\r\n                {populateDebtor(currDate,agingMonths)}\r\n            </table>\r\n            <hr className='border border-dark'/>\r\n            <small className='d-block text-center'>End of Report</small>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DebtorCreditorAgingOne;","import React,{useState,useContext,useEffect} from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport {useHistory} from 'react-router-dom';\r\nimport $ from 'jquery'\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport sortData from '../Shared/sort';\r\nimport setPageSize from '../Shared/setPageSize';\r\nimport DebtorCreditorAgingOne from '../Shared/preview/DebtorCreditorAgingOne';\r\n\r\nfunction DebtorAgingReport(props) {\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n\r\n    const [{data:dataSelectDebtorAging,error:errorSelectDebtorAging},changeParamDebtorAging]=useFetch(null);\r\n    \r\n    const [debtorList,changeDebtorList] = useState(null);\r\n\r\n    const [currDate,changeCurrDate] = useState (getFormattedDate(new Date()))\r\n    const [debtorID,changeDebtorID] = useState([]);\r\n    const [agingMonths,changeAgingMonths]=useState(3);\r\n    const [resultInput,changeResultInput]=useState(null);\r\n    const [collapsibleElementID,changeCollapsibleElementID]=useState([])\r\n\r\n    /*Preview states*/\r\n    const [withDetails,changeWithDetails]=useState(false);\r\n    const [sortCriteriaList,changeSortCriteriaList]=useState(null);\r\n    const [detailSortCriteriaList,changeDetailSortCriteriaList]=useState(null);\r\n    const [sortCriteria,changeSortCriteria]=useState('');\r\n    const [detailSortCriteria,changeDetailSortCriteria]=useState('');\r\n    const [generateReportWarning,changeGenerateReportWarning]=useState(false);\r\n\r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n    const history=useHistory();\r\n\r\n    const calculatedWidth=resultInput && resultInput['agingMonths']? 714+resultInput['agingMonths']*90:'auto';\r\n    \r\n    \r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n    },[dataSelectDebtor,errorSelectDebtor])\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectDebtorAging && dataSelectDebtorAging.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtorAging && dataSelectDebtorAging.data && dataSelectDebtorAging.field) {\r\n            const debtorAlreadyParsed=[];\r\n            const data=dataSelectDebtorAging.data;\r\n            const field=dataSelectDebtorAging.field;\r\n            const debtorNum=field[0].name;\r\n            const name=field[1].name;\r\n            const docNum=field[2].name;\r\n            const docDate=field[3].name;\r\n            const type=field[4].name;\r\n            /*The 3 useState functions below to create a separate data for each debtor to parse for sorting*/\r\n            /*1) reset to a new object with nothing in it because step 2 will have some previous debtor data in it\r\n            which will be combined with new data when refetched*/\r\n            changeResultInput(resultInput=>{})\r\n\r\n            /*2)for each debtor, assign a property name using the debtor num which will be used to parse the \r\n            relevant data for the relevant debtor (and hence can be sorted separately)*/\r\n            data.forEach(item=>{\r\n                let newObject={}\r\n               if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1) {\r\n                    debtorAlreadyParsed.push(item[debtorNum])\r\n                    newObject[item[debtorNum]]=data.filter(item2=>item2[debtorNum]===item[debtorNum])\r\n                    changeResultInput(resultInput=>(Object.assign({},resultInput,newObject)))\r\n               }\r\n            })\r\n            /*3) add remaining input data to resultInput for rendering*/\r\n            changeResultInput(resultInput=>({...resultInput,\r\n                data:dataSelectDebtorAging.data,\r\n                dataPreview:[...dataSelectDebtorAging.data],\r\n                field:dataSelectDebtorAging.field,\r\n                currDate,\r\n                agingMonths\r\n            }))\r\n\r\n            changeSortCriteriaList(\r\n                (<>\r\n                    <option value={debtorNum}>Debtor No.</option>\r\n                    <option value={name}>Name</option>\r\n                </>)\r\n            )\r\n            changeDetailSortCriteriaList(\r\n                (<>\r\n                    <option value={docNum}>Doc No.</option>\r\n                    <option value={docDate}>Doc Date</option>\r\n                    <option value={type}>Type</option>\r\n                </>)\r\n            )\r\n            changeCollapsibleElementID(debtorAlreadyParsed.map(item=>item.replace(/[ ._\\-()]/g,'')))\r\n        }\r\n    },[dataSelectDebtorAging,errorSelectDebtorAging])\r\n    \r\n    //attach bootstrap/jquery eventlisteners and callbacks\r\n    useEffect(()=>{\r\n        if (collapsibleElementID) {\r\n            collapsibleElementID.forEach(ID=>{\r\n                $('#'+ID).on('show.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-plus-square').addClass('fa-minus-square');\r\n                })\r\n                $('#'+ID).on('hide.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-minus-square').addClass('fa-plus-square');\r\n                })\r\n                \r\n        })\r\n    }\r\n    },[resultInput])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n        \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        function setPage() {\r\n            setPageSize(\"a4 portrait\");\r\n        }\r\n        window.addEventListener('popstate',setPage);\r\n\r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setPage)\r\n            }\r\n    },[])\r\n\r\n\r\n\r\n    function getFormattedDate(date) {\r\n        let currDate=new Date(date)\r\n        \r\n        return (currDate.getFullYear()) + (currDate.getMonth() + 1 <10? '-0'+ (currDate.getMonth()+1):'-'+ (currDate.getMonth()+1)) + (currDate.getDate()<10?\r\n        '-0'+currDate.getDate() : '-'+currDate.getDate());\r\n    }\r\n\r\n    function populateMonthsHeader(months) {\r\n        let result=[];\r\n        for(let i=1;i<+(months)+1;i++) {\r\n            result.push(\r\n                (<h6 key={i} style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>{i+' Month'}</h6>)\r\n            )\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function populateMonthsAmount(currDate,debtorID,months,type) {\r\n        let result=[];\r\n        const data=resultInput['data'];\r\n        const field=resultInput['field'];\r\n        const debtorNum=field[0].name;\r\n        const docDate=field[3].name;\r\n        const amount=field[5].name;\r\n        const creditTerm=field[6].name;\r\n\r\n        for(let i=1;i<+(months)+1;i++) {\r\n            let monthAmount=data.reduce((a,b)=>{\r\n                if(b[debtorNum]===debtorID) {\r\n                    \r\n                    let value=calculateAgingMonthsAmount(\r\n                        currDate,\r\n                        b[creditTerm] && b[creditTerm]!=='COD'? \r\n                            getFormattedDate(new Date(new Date(b[docDate])\r\n                            .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                            ):b[docDate],\r\n                        b[amount],\r\n                        i\r\n                        )\r\n                        \r\n                    if (value) {\r\n                        return a+b[amount];\r\n                    } else return a\r\n                }\r\n                else return a;\r\n            },0)\r\n\r\n            if (type!=='table') \r\n                result.push(\r\n                   (<p className='mb-0' key={i} style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                       {monthAmount?numberFormatParser(monthAmount):''}\r\n                   </p>)\r\n                )\r\n            else result.push(\r\n                (<th className='align-top' key={i}>\r\n                    {monthAmount?numberFormatParser(monthAmount):''}\r\n                </th>)\r\n            )\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function populateTableMonthsHeader(months) {\r\n        let result=[];\r\n        for(let i=1;i<+(months)+1;i++) {\r\n            result.push(\r\n                (<th key={i} className='text-nowrap align-top'>{i+' Month'}</th>)\r\n            )\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function populateTableMonthsAmount(currDate,dueDate,amount,months) {\r\n        let result=[];\r\n        for(let i=1;i<+(months)+1;i++) {\r\n            result.push(\r\n                (<td className='text-nowrap align-top' key={i}>\r\n                    {numberFormatParser(calculateAgingMonthsAmount(currDate,dueDate,amount,i))}\r\n                    </td>)\r\n            )\r\n        }\r\n        return result;\r\n    }\r\n    /*aging is calculated based on last day of the month of the due date*/\r\n    function calculateAgingCurrentAmount(currDate,dueDate,amount) {\r\n        /*currDate string from input type date is slightly diff from string date and produce diff result when both string are \r\n        called with Date() object. Hence perform the following to ensure date objects produced from both string are the same.\r\n        Same with all the calculate methods below*/\r\n       currDate=new Date(new Date(currDate).getFullYear(),new Date(currDate).getMonth(),new Date(currDate).getDate(),0)\r\n        \r\n        if (currDate<=new Date(new Date(dueDate).getFullYear(),(new Date(dueDate).getMonth())+1,0)) {\r\n            return amount;\r\n        }\r\n        else return ''\r\n    }\r\n\r\n    function calculateAgingMonthsAmount(currDate,dueDate,amount,agingMonths) {\r\n       currDate=new Date(new Date(currDate).getFullYear(),new Date(currDate).getMonth(),new Date(currDate).getDate(),0)\r\n        \r\n        if (currDate<=new Date(new Date(dueDate).getFullYear(),(new Date(dueDate).getMonth())+1+agingMonths,0)\r\n        && currDate>new Date(new Date(dueDate).getFullYear(),(new Date(dueDate).getMonth())+agingMonths,0))\r\n            return amount;\r\n\r\n        else return ''\r\n    }\r\n\r\n    function calculateAgingRemainderAmount(currDate,dueDate,amount,months) {\r\n       currDate=new Date(new Date(currDate).getFullYear(),new Date(currDate).getMonth(),new Date(currDate).getDate(),0)\r\n \r\n        if (currDate>new Date(new Date(dueDate).getFullYear(),(new Date(dueDate).getMonth())+months+1,0))\r\n            return amount;\r\n        \r\n        else return ''\r\n    }\r\n\r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    function populateDebtor(currDate,agingMonths) {\r\n        const data=resultInput['data'];\r\n        const field=resultInput['field'];\r\n        const debtorNum=field[0].name;\r\n        const name=field[1].name;\r\n        const docNum=field[2].name;\r\n        const docDate=field[3].name;\r\n        const type=field[4].name;\r\n        const amount=field[5].name;\r\n        const creditTerm=field[6].name;\r\n\r\n        const debtorAlreadyParsed=[];\r\n        const result=[];\r\n\r\n        data.forEach(item=>{\r\n            if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1)  {\r\n                debtorAlreadyParsed.push(item[debtorNum]);\r\n                result.push(\r\n                (<div key={item[debtorNum]}>\r\n                    <div className='d-flex' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[debtorNum].replace(/[ ._\\-()]/g,'')}>\r\n                        <i className='fa fa-plus-square mt-1' style={{flex:'1 0 14px',paddingLeft:10,paddingRight:10}}\r\n                        id={'plusminus'+item[debtorNum].replace(/[ ._\\-()]/g,'')}></i>\r\n                        <p className='mb-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>{item[debtorNum]}</p>\r\n                        <p className='mb-0' style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10}}>{item[name]}</p>\r\n                        <p className='mb-0' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                            {numberFormatParser(data.reduce((a,b)=>{\r\n                            if(b[debtorNum]===item[debtorNum]) {\r\n                                let value=calculateAgingCurrentAmount(\r\n                                    currDate,\r\n                                    b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                        getFormattedDate(new Date(new Date(b[docDate])\r\n                                        .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                        ):b[docDate],\r\n                                    b[amount]\r\n                                    )\r\n\r\n                                if (value) {\r\n                                    return a+b[amount];\r\n                                } else return a\r\n                                    \r\n                            }\r\n                            else return a;\r\n                        },0))\r\n                        }</p>\r\n                        {populateMonthsAmount(\r\n                            currDate,\r\n                            item[debtorNum],\r\n                            Number(agingMonths),\r\n                        )}\r\n                        <p className='mb-0' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                            {numberFormatParser(data.reduce((a,b)=>{\r\n                            if(b[debtorNum]===item[debtorNum]  ) {\r\n                                let value=calculateAgingRemainderAmount(\r\n                                    currDate,\r\n                                    b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                        getFormattedDate(new Date(new Date(b[docDate])\r\n                                        .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                        ):b[docDate],\r\n                                    b[amount],\r\n                                    Number(agingMonths)\r\n                                    )\r\n\r\n                                if (value) {\r\n                                    return a+b[amount];\r\n                                } else return a\r\n                                    \r\n                            }\r\n                            \r\n                            else return a;\r\n                        },0))}</p>\r\n                        <p className='mb-0' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                            {numberFormatParser(\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum])\r\n                                    return a+b[amount]\r\n                                else return a\r\n                                },0)-\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum]) {\r\n                                    let value=calculateAgingCurrentAmount(\r\n                                        currDate,\r\n                                        b[creditTerm] && b[creditTerm]!=='COD'? \r\n                                            getFormattedDate(new Date(new Date(b[docDate])\r\n                                            .setDate(new Date(b[docDate]).getDate()+Number(b[creditTerm])))\r\n                                            ):b[docDate],\r\n                                        b[amount]\r\n                                        )\r\n    \r\n                                    if (value) {\r\n                                        return a+b[amount];\r\n                                    } else return a\r\n                                        \r\n                                }\r\n                                else return a;\r\n                            },0)\r\n                            )}\r\n                            </p>\r\n                        <p className='mb-0' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                            {numberFormatParser(\r\n                                data.reduce((a,b)=>{\r\n                                if(b[debtorNum]===item[debtorNum])\r\n                                    return a+b[amount]\r\n                                else return a\r\n                                },0)\r\n                            )}</p>\r\n                    </div>\r\n                    <div className='collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2' \r\n                    id={item[debtorNum].replace(/[ ._\\-()]/g,'')}>\r\n                        <table id='table' className='table-dark table table-hover'>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                    onClick={(e)=>{\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],docNum,e.target.getAttribute('data-order'))\r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                    \r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById('docNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-up');\r\n                                            document.getElementById('docNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById('docNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-down');\r\n                                            document.getElementById('docNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-up')\r\n                                        }\r\n                                        }}>\r\n                                        Doc No.\r\n                                        <i id={'docNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </th>\r\n                                    <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                    onClick={(e)=>{\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],docDate,e.target.getAttribute('data-order'))\r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                    \r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById('docDate'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-up');\r\n                                            document.getElementById('docDate'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById('docDate'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-down');\r\n                                            document.getElementById('docDate'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-up')\r\n                                        }\r\n                                        }}>\r\n                                        Doc Date\r\n                                        <i id={'docDate'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </th>\r\n                                    <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                    onClick={(e)=>{\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],type,e.target.getAttribute('data-order'))\r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                    \r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById('type'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-up');\r\n                                            document.getElementById('type'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById('type'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.remove('fa-caret-down');\r\n                                            document.getElementById('type'+item[debtorNum].replace(/[ ._\\-()]/g,'')).classList.add('fa-caret-up')\r\n                                        }\r\n                                        }}\r\n                                    >\r\n                                        Type\r\n                                        <i id={'type'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </th>\r\n                                    <th className='text-nowrap'>Due Date</th>\r\n                                    <th className='text-nowrap'>Current</th>\r\n                                    {populateTableMonthsHeader(agingMonths)}\r\n                                    <th className='text-nowrap'>{'> '+agingMonths + ' Month'}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {resultInput[item[debtorNum]].map(item2=>{\r\n                                        return (\r\n                                            <tr key={item2[docNum]} style={{cursor:'pointer'}} onClick={(e)=>\r\n                                                history.push('./'+createLink(item2[type].toLowerCase(),item2[docNum]))\r\n                                                }>\r\n                                                <td className='text-nowrap'>{item2[docNum]}</td>\r\n                                                <td className='text-nowrap'>{dateFormatParser(item2[docDate])}</td>\r\n                                                <td className='text-nowrap'>{item2[type]}</td>\r\n                                                <td className='text-nowrap'>{\r\n                                                item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                                dateFormatParser(getFormattedDate(\r\n                                                        new Date(new Date(item2[docDate])\r\n                                                        .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm]))))\r\n                                                    ):dateFormatParser(item2[docDate])\r\n                                                    }</td>\r\n                                                <td className='text-nowrap'>{\r\n                                                    numberFormatParser(calculateAgingCurrentAmount(\r\n                                                        currDate,\r\n                                                        item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                                            getFormattedDate(new Date(new Date(item2[docDate])\r\n                                                            .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                                            ):item2[docDate],\r\n                                                        item2[amount]\r\n                                                        ))\r\n\r\n                                        \r\n                                                }</td>\r\n                                                {populateTableMonthsAmount(\r\n                                                    currDate,\r\n                                                    item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                                        getFormattedDate(new Date(new Date(item2[docDate])\r\n                                                        .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                                        ):item2[docDate],\r\n                                                    item2[amount],\r\n                                                    Number(agingMonths)\r\n                                                )}\r\n                                                <td className='text-nowrap'>{\r\n                                                numberFormatParser(calculateAgingRemainderAmount(\r\n                                                    currDate,\r\n                                                    item2[creditTerm] && item2[creditTerm]!=='COD'? \r\n                                                        getFormattedDate(new Date(new Date(item2[docDate])\r\n                                                        .setDate(new Date(item2[docDate]).getDate()+Number(item2[creditTerm])))\r\n                                                        ):item2[docDate],\r\n                                                    item2[amount],\r\n                                                    Number(agingMonths)\r\n                                                ))\r\n                                                }</td>\r\n\r\n                                            </tr>\r\n                                        )\r\n                                    \r\n                                    })\r\n                                }\r\n                                </tbody>\r\n                        </table>\r\n                    </div>\r\n                    \r\n\r\n                </div>)\r\n                )\r\n            } \r\n\r\n        })\r\n        \r\n        return result;\r\n\r\n    }\r\n\r\n    \r\n\r\n    let errorDisplay=null;\r\n\r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor || (dataSelectDebtorAging && dataSelectDebtorAging.error) \r\n    || errorSelectDebtorAging )\r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorAging && dataSelectDebtorAging.error? 'Debtor Aging RETRIEVAL for item failed errno: '+dataSelectDebtorAging.error.errno\r\n            +' code: '+dataSelectDebtorAging.error.code+' message: '+dataSelectDebtorAging.error.sqlMessage:null}\r\n            {errorSelectDebtorAging? 'Debtor Aging RETRIEVAL for item failed '+errorSelectDebtorAging : null}\r\n\r\n        </div>\r\n    )\r\n\r\n    return (\r\n    <Switch>\r\n        <Route exact path={`${path}/Preview`}>\r\n            {resultInput?\r\n            (<DebtorCreditorAgingOne\r\n                backPath={DebtorAgingReport.path}\r\n                description={DebtorAgingReport.description}\r\n                resultInput={resultInput}\r\n                withDetails={withDetails}\r\n                data={sortData(resultInput['dataPreview'],sortCriteria,'asc')}\r\n                field={resultInput['field']}\r\n                dataDetail={sortData(resultInput['dataPreview'],detailSortCriteria,'asc')}\r\n                populateTableMonthsHeader={populateTableMonthsHeader}\r\n                populateTableMonthsAmount={populateTableMonthsAmount}\r\n                calculateAgingCurrentAmount={calculateAgingCurrentAmount}\r\n                populateMonthsAmount={populateMonthsAmount}\r\n                calculateAgingRemainderAmount={calculateAgingRemainderAmount}\r\n                getFormattedDate={getFormattedDate}\r\n            />):<Redirect to={DebtorAgingReport.path}/>}\r\n        </Route>\r\n        <Route exact path={path}>\r\n            <AppLayout>\r\n                <div className='container pt-3' style={{paddingLeft:20,paddingRight:20}}>\r\n                    <h3>{DebtorAgingReport.description}</h3>\r\n                    <form className='mt-3' onSubmit={e=>{\r\n                        e.preventDefault();\r\n                        changeGenerateReportWarning(false);\r\n                        changeParamDebtorAging({\r\n                            url:'./ReportItem',\r\n                            init:{\r\n                                method:'POST',\r\n                                headers:{'Content-Type':'application/json'},\r\n                                body:JSON.stringify({\r\n                                    item:'debtor_aging',\r\n                                    param:[debtorID,currDate]\r\n                                }),\r\n                                credentials:'include'\r\n                            }\r\n                        })\r\n                        \r\n                        }\r\n                        }>\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='date'>Date</label>\r\n                                <input type='date' id='date' required onChange={(e)=>changeCurrDate(e.target.value)} value={currDate} required \r\n                                className='form-control col-md-2 mb-3 mb-md-0'/>\r\n                                <label className='offset-md-1 col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='agingMonths'>\r\n                                    Aging Month(s)\r\n                                </label>\r\n                                <select id='agingMonths' className='form-control col-md-2' required value={agingMonths} onChange={e=>\r\n                                    changeAgingMonths(e.target.value)\r\n                                }>\r\n                                    <option value='1'>1</option>\r\n                                    <option value='2'>2</option>\r\n                                    <option value='3'>3</option>\r\n                                    <option value='4'>4</option>\r\n                                    <option value='5'>5</option>\r\n                                    <option value='6'>6</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='debtorID'>Debtor ID</label>\r\n                                <select className='form-control col-md-4' required size='3' value={debtorID} multiple={true} onChange={e=>{\r\n                                    let result=[];\r\n                                    Array.from(e.target.options).map(option=>{\r\n                                        if (option.selected===true) \r\n                                            result.push(option.value) \r\n                                    })\r\n                                    changeDebtorID(result);\r\n                                }}>\r\n                                    {debtorList}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row mx-0'>\r\n                                <div className='form-check offset-md-2'>\r\n                                    <input type='checkbox' className=' form-check-input' id='allDebtorID' onChange={e=>{\r\n                                        if (e.target.checked) \r\n                                            changeDebtorID(dataSelectDebtor.data.map(data=>\r\n                                                data[dataSelectDebtor.field[0].name]\r\n                                                ))\r\n                                        else changeDebtorID([])\r\n                                    }}/>\r\n                                    <label htmlFor='allDebtorID' style={{paddingLeft:0}} className='form-check-label'>\r\n                                        All Debtor ID\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                        \r\n                            <fieldset className='form-group pl-4 pb-3 border border-secondary rounded col-md-7'>\r\n                                <legend className='col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center'>\r\n                                    <h6>Preview Options</h6>\r\n                                </legend>\r\n                                <div className='form-row'>\r\n                                    <div className='form-group form-row col-md-12'>\r\n                                        <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='sort'>\r\n                                            Sort\r\n                                        </label>\r\n                                        <select id='sort' className='form-control col-md-5' value={sortCriteria} onChange={e=>\r\n                                            changeSortCriteria(e.target.value)\r\n                                        }>\r\n                                            <option value=''> -select an option- </option>\r\n                                            {sortCriteriaList}\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    <div className='form-check col-md-4 form-group col-form-label' style={{paddingLeft:20}}>\r\n                                        <input type='checkbox' className='form-check-input' id='withDetails' onChange={e=>{\r\n                                            if (e.target.checked) \r\n                                                changeWithDetails(true)\r\n                                            else changeWithDetails(false)\r\n                                        }} checked={withDetails}/>\r\n                                        <label htmlFor='withDetails' className='form-check-label'>With Details</label>\r\n                                    </div>\r\n\r\n                                    <div className='col-md-7 form-row form-group'>\r\n                                        <label className='col-md-4 col-form-label' style={{paddingLeft:0}} htmlFor='sort'>\r\n                                            Detail Sort\r\n                                        </label>\r\n                                        <select id='sort' className='form-control col-md-8' value={detailSortCriteria} onChange={e=>\r\n                                            changeDetailSortCriteria(e.target.value)\r\n                                        }>\r\n                                            <option value=''> -select an option- </option> \r\n                                            {detailSortCriteriaList}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </fieldset>\r\n\r\n                        <button type='submit' className='btn btn-primary mx-2'>Generate</button>\r\n                        <button type='button' className='btn btn-warning' onClick={e=>\r\n                        changeResultInput(null)}>Clear</button>\r\n                        <button type='button' onClick={(e)=>{\r\n                            if (!resultInput) {\r\n                                changeGenerateReportWarning(true)\r\n                            }\r\n                            else {\r\n                                document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                                'content','width=device-width, initial-scale=0.4');\r\n                                setPageSize('a4 landscape')\r\n                                history.push('./DebtorAgingReport/Preview')\r\n                            }}\r\n                        } \r\n                        className='btn btn-info mx-1 my-1'>Preview</button>\r\n                        {generateReportWarning? \r\n                        (<div className=\"alert alert-warning\">\r\n                            Please generate report first!\r\n                        </div>):null}\r\n                    </form>\r\n\r\n                    <hr/>\r\n                    {errorDisplay}\r\n                    \r\n                    {resultInput? \r\n                    (<div className=\"overflow-auto mb-5 pt-3\" style={{transform:'rotateX(180deg)'}}>\r\n                        <div style={{width:calculatedWidth,transform:'rotateX(180deg)'}}>\r\n                            <h5 className='py-2'>\r\n                                Result\r\n                                <button className='btn btn-dark mx-2' \r\n                                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                                        $('#'+ID).collapse('show')\r\n                                )}><i className='fa fa-plus-square'></i> Expand</button>\r\n                                <button className='btn btn-light'  \r\n                                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                                        $('#'+ID).collapse('hide')\r\n                                )}> <i className='fa fa-minus-square'></i> Collapse</button>\r\n                            </h5>\r\n                            <div className='row flex-nowrap text-white bg-secondary pt-2 pb-1' \r\n                            style={{\r\n                                marginLeft:0,\r\n                                marginRight:0,\r\n                                /*width to total all child widths since parent container width doesn't cover overflow due to nowrap*/\r\n                                \r\n                                }}>\r\n                                <h6 style={{flex:'1 0 34px',paddingLeft:10,paddingRight:10}}></h6>\r\n                                <h6 style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                data-order='asc' onClick={(e)=>{\r\n                                    e.target.setAttribute('data-order',\r\n                                    e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                    changeResultInput({...resultInput,\r\n                                        data:sortData(resultInput['data'],'DEBTOR_NUM',e.target.getAttribute('data-order'))})\r\n\r\n                                    if (e.target.getAttribute('data-order')==='asc') {\r\n                                        document.getElementById('debtorNo').classList.remove('fa-caret-up');\r\n                                        document.getElementById('debtorNo').classList.add('fa-caret-down')\r\n                                    }\r\n                                    else {\r\n                                        document.getElementById('debtorNo').classList.remove('fa-caret-down');\r\n                                        document.getElementById('debtorNo').classList.add('fa-caret-up')\r\n                                    }\r\n                                }\r\n                                    \r\n                                }>\r\n                                    Debtor No.\r\n                                    <i id='debtorNo' className='fa fa-caret-down ml-2'></i>\r\n                                </h6>\r\n                                <h6 style={{flex:'1 0 200px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                data-order='asc' onClick={(e)=>{\r\n                                    e.target.setAttribute('data-order',\r\n                                    e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                    changeResultInput({...resultInput,\r\n                                        data:sortData(resultInput['data'],'NAME',e.target.getAttribute('data-order'))})\r\n\r\n                                    if (e.target.getAttribute('data-order')==='asc') {\r\n                                        document.getElementById('name').classList.remove('fa-caret-up');\r\n                                        document.getElementById('name').classList.add('fa-caret-down')\r\n                                    }\r\n                                    else {\r\n                                        document.getElementById('name').classList.remove('fa-caret-down');\r\n                                        document.getElementById('name').classList.add('fa-caret-up')\r\n                                    }\r\n                                }\r\n                                }>\r\n                                    Name\r\n                                    <i id='name' className='fa fa-caret-down ml-2'></i>\r\n                                </h6>\r\n                                <h6 style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Current</h6>\r\n                                {populateMonthsHeader(resultInput['agingMonths'])}\r\n                                <h6 style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>\r\n                                    {'> '+resultInput['agingMonths']+' Month'}\r\n                                    </h6>\r\n                                <h6 style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Total Overdue</h6>\r\n                                <h6 style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Balance</h6>\r\n                            \r\n                            </div>\r\n                            <div style={{overflowY:'auto',overflowX:'hidden',maxHeight:'60vh'}}>\r\n                                {populateDebtor(resultInput['currDate'],resultInput['agingMonths'])}\r\n                            </div>\r\n                        </div>\r\n                    </div>):null}\r\n                    <hr className='pb-3'/>\r\n                </div>\r\n            </AppLayout>\r\n        </Route>\r\n        <Redirect to={DebtorAgingReport.path}/>\r\n    </Switch>\r\n    )\r\n}\r\nDebtorAgingReport.description='Debtor Aging Report';\r\nDebtorAgingReport.path='/DebtorAgingReport';\r\n\r\nexport default DebtorAgingReport;\r\n","import React from 'react';\r\nimport numberFormatParser from '../numberFormatParser';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n/*Layout for Debtor Statement Report and Creditor Statement Report*/\r\n\r\nfunction DebtorCreditorStatementOne(props) {\r\n\r\n    const history=useHistory();\r\n\r\n    const topLeftInput=props.topLeftInput? props.topLeftInput.map((input,i)=>\r\n        <p className='my-2' key={i}>{input}</p>\r\n        ):null;\r\n\r\n    const topRightArea=props.topRightField && props.topRightInput? props.topRightField.map((field,i)=>\r\n        (<div className='row' key={i}>\r\n            <div className='col-5 h6'>\r\n                {field}\r\n            </div>\r\n            <div className='col-1'>\r\n                :\r\n            </div>\r\n            <div className='col-5 h6'>\r\n                {props.topRightInput[i]}\r\n            </div>\r\n        </div>)):null;\r\n\r\n    \r\n    function monthDiff(dateFrom, dateTo) {\r\n        return dateTo.getMonth() - dateFrom.getMonth() + \r\n          (12 * (dateTo.getFullYear() - dateFrom.getFullYear()))\r\n    }\r\n\r\n    /*functions below ensure one row of aging table only fits 5 months of aging maximum, remaining months will be \r\n    fitted next table up to maximum of 12 months*/\r\n    function populateTableMonthsHeader(months,monthsAlreadyPopulated) {\r\n        let result=[];\r\n        \r\n        for(let i=monthsAlreadyPopulated+1;i<+(months)+1;i++) {\r\n            result.push(\r\n                (<th key={i} className='text-nowrap text-center'>{i+' Month'}</th>)\r\n            )\r\n        }\r\n        \r\n        return result;\r\n    }\r\n\r\n    function populateTableMonthsAmount(months,monthsAlreadyPopulated) {\r\n        let result=[];\r\n        for(let i=monthsAlreadyPopulated+1;i<+(months)+1;i++) {\r\n            result.push(\r\n                (<td key={i} className='text-nowrap text-center'>{numberFormatParser(calculateAgingMonthAmount(i))}</td>)\r\n            )\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function populateAgingTable(months) {\r\n        \r\n        return (\r\n            <table className='table table-bordered'>\r\n                <thead>\r\n                    <tr>\r\n                        <th className='text-nowrap text-center'>Current</th>\r\n                        {months<=6?populateTableMonthsHeader(months,0):populateTableMonthsHeader(6,0)}\r\n                        {months<=6? (<th className='text-nowrap text-center'>{'> '+months+' Month'}</th>):null}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td className='text-nowrap text-center'>{numberFormatParser(calculateAgingMonthAmount(0))}</td>\r\n                        {months<=6?populateTableMonthsAmount(months,0):populateTableMonthsAmount(6,0)}\r\n                        {months<=6?\r\n                        (<td className='text-nowrap text-center'>\r\n                            {numberFormatParser(calculateAgingMonthRemainderAmount(months))}\r\n                        </td>)\r\n                        :null}\r\n                    </tr>\r\n                </tbody>\r\n                <thead>\r\n                    <tr>\r\n                        {months<=6?null:populateTableMonthsHeader(months,6)}\r\n                        {months<=6?null:(<th className='text-nowrap text-center'>{'> '+months+' Month'}</th>)}\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        {months<=6?null:populateTableMonthsAmount(months,6)}\r\n                        {months<=6?null:\r\n                            (<td className='text-nowrap text-center'>\r\n                                {numberFormatParser(calculateAgingMonthRemainderAmount(months))}\r\n                            </td>)}\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        )\r\n    }\r\n\r\n    function calculateAgingMonthAmount(month){\r\n        const data=props.data;\r\n        const field=props.field;\r\n        const date=field[0].name;\r\n        const dr=field[4].name;\r\n        const cr=field[5].name;\r\n    \r\n        return data.reduce((a,b)=>{\r\n            /*dateEnd string from input type date is slightly diff from doc string date  and produce diff result \r\n            when both string are called with Date() object. Hence perform the following to ensure date objects \r\n            produced from both string are the same.\r\n            */\r\n\r\n            const dateEnd=new Date(new Date(props.dateEnd).getFullYear(),new Date(props.dateEnd).getMonth(),\r\n            new Date(props.dateEnd).getDate(),0)\r\n            const docDate=new Date(new Date(b[date]).getFullYear(),new Date(b[date]).getMonth(),\r\n            new Date(b[date]).getDate(),0)    \r\n            \r\n            if(docDate<=new Date(dateEnd.getFullYear(),Number(dateEnd.getMonth())+1-month,0) \r\n            && docDate>new Date(dateEnd.getFullYear(),Number(dateEnd.getMonth())-month,0)) {\r\n                \r\n                if (b[dr]) return a+b[dr]\r\n                else return a-b[cr]\r\n            }\r\n            else return a\r\n        },0)\r\n    }\r\n\r\n    function calculateAgingMonthRemainderAmount(months) {\r\n        let result=0;\r\n        \r\n        for(let i=+(months)+1;i<monthDiff(new Date(props.dateStartForAging),new Date(props.dateEnd))+1;i++) {\r\n            \r\n            result+=calculateAgingMonthAmount(i)\r\n        }\r\n        return result+props.dbBroughtForwardAmount\r\n    }\r\n\r\n    \r\n    \r\n    return (\r\n        <div className='container py-5' style={{maxWidth:800}}>\r\n            <button type='click' className='btn btn-secondary d-print-none mb-2' \r\n                onClick={()=>{\r\n                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                    'content','width=device-width, initial-scale=1.0');\r\n                    history.push(props.backPath)\r\n            }}>Back</button>\r\n            <div className='jumbotron' style={{padding:0}}>\r\n                <h3 className='text-center'>{props.description}</h3>\r\n            </div>\r\n            <div className='row' style={{margin:0}}>\r\n                <div className='col-6 jumbotron h6 py-4' style={{marginBottom:0}}>\r\n                    {topLeftInput}\r\n                </div>\r\n                <div className='col-6 py-4'>\r\n                    {topRightArea}\r\n                </div>\r\n            </div>\r\n            <hr/>\r\n            {props.populateDebtor(true)}\r\n            \r\n            <h6 className='text-center'>Aged Analysis</h6>\r\n            {populateAgingTable(props.agingMonths)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DebtorCreditorStatementOne;","import React,{useState,useContext,useEffect} from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport {useHistory} from 'react-router-dom';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport sortData from '../Shared/sort';\r\nimport DebtorCreditorStatementOne from '../Shared/preview/DebtorCreditorStatementOne';\r\n\r\nfunction DebtorStatementReport(props) {\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n    const [{data:dataSelectDebtorStatement,error:errorSelectDebtorStatement},changeParamDebtorStatement]=useFetch(null);\r\n    \r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [debtorID,changeDebtorID] = useState('');\r\n    const [dateStart,changeDateStart] = useState(new Date().getFullYear()+'-01-01');\r\n    const [dateEnd,changeDateEnd] = useState(getFormattedDate(new Date()));\r\n    const [resultInput,changeResultInput]=useState(null);\r\n    \r\n\r\n    /*Preview states*/\r\n    const agingMonthsMax=12 /*variable used for db fetching purpose. Change this if aging month option is changed*/\r\n    const [agingMonths,changeAgingMonths]=useState(6);\r\n    const [debtorOtherInfo,changeDebtorOtherInfo] =useState(null)\r\n    const [sortCriteriaList,changeSortCriteriaList]=useState(null);\r\n    const [sortCriteria,changeSortCriteria]=useState('');\r\n    const [generateReportWarning,changeGenerateReportWarning]=useState(false);\r\n\r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n    const history=useHistory();\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n    },[dataSelectDebtor,errorSelectDebtor])\r\n\r\n    useEffect(()=>{\r\n        if (dataSelectDebtorStatement && dataSelectDebtorStatement.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtorStatement && dataSelectDebtorStatement.data && dataSelectDebtorStatement.field) {\r\n            const field=dataSelectDebtorStatement.field[1];\r\n            const date=field[0].name;\r\n            const docNum=field[1].name;\r\n            const ref=field[2].name;\r\n            const type=field[3].name;\r\n            const dr=field[4].name;\r\n            const cr=field[5].name;\r\n            \r\n            changeResultInput({data:dataSelectDebtorStatement.data,\r\n                dataPreview:[...dataSelectDebtorStatement.data],field:dataSelectDebtorStatement.field,\r\n            dateStart,dateEnd,debtorID})\r\n\r\n            changeSortCriteriaList(\r\n                (<>\r\n                    <option value={date}>Date</option>\r\n                    <option value={docNum}>Doc No.</option>\r\n                    <option value={ref}>Ref.</option>\r\n                    <option value={type}>Type</option>\r\n                    <option value={dr}>Dr</option>\r\n                    <option value={cr}>Cr</option>\r\n                </>)\r\n            )\r\n        \r\n        }\r\n\r\n    },[dataSelectDebtorStatement,errorSelectDebtorStatement])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n        \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n    },[])\r\n    \r\n    function getFormattedDate(date) {\r\n        let currDate=new Date(date)\r\n        \r\n        return (currDate.getFullYear()) + (currDate.getMonth() + 1 <10? '-0'+ (currDate.getMonth()+1):'-'+ (currDate.getMonth()+1)) + (currDate.getDate()<10?\r\n        '-0'+currDate.getDate() : '-'+currDate.getDate());\r\n    }\r\n\r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    function getDateStartForAging(dateStart,dateEnd) {\r\n        /*this is to ensure sufficient earlier data is obtained for purpose of aging in preview. Date result is \r\n        earlier of either:\r\n        1) existing dateStart in input or \r\n        2) 12 months (max aging option for preview) before date of dateEnd.*/\r\n        if (new Date(dateStart)<new Date(new Date(dateEnd).getFullYear(),Number(new Date(dateEnd).getMonth())-agingMonthsMax,1))\r\n            return dateStart\r\n\r\n        else \r\n            return getFormattedDate(new Date(new Date(dateEnd).getFullYear(),Number(new Date(dateEnd).getMonth())-agingMonthsMax,1));\r\n    }\r\n    \r\n    function populateDebtor(preview) {\r\n        const dbBroughtForwardAmount=resultInput['data'][0][0][resultInput['field'][0][0].name];\r\n\r\n        const data=preview?sortData(resultInput['dataPreview'][1],sortCriteria,'asc'):resultInput['data'][1];\r\n        const field=resultInput['field'][1];\r\n        const date=field[0].name;\r\n        const docNum=field[1].name;\r\n        const ref=field[2].name;\r\n        const type=field[3].name;\r\n        const dr=field[4].name;\r\n        const cr=field[5].name;\r\n        \r\n        \r\n        let balance=data.reduce((a,b)=>{\r\n            if (new Date(b[date])<new Date(resultInput['dateStart'])) {\r\n                if (b[dr]) return a+b[dr]\r\n                else return a-b[cr]\r\n            } else return a\r\n        },0) + dbBroughtForwardAmount;\r\n\r\n        return (\r\n        <div>\r\n            <table className='table table-responsive-md'>\r\n                <thead>\r\n                    <tr>\r\n                        <th className='text-nowrap' style={preview? null:{cursor:'pointer'}}  data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if(!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],date,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('date').classList.remove('fa-caret-up');\r\n                                    document.getElementById('date').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('date').classList.remove('fa-caret-down');\r\n                                    document.getElementById('date').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }\r\n                        >\r\n                            Date\r\n                            {preview?null:<i id='date' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap' style={preview?null:{cursor:'pointer'}} data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if(!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],docNum,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('docNo').classList.remove('fa-caret-up');\r\n                                    document.getElementById('docNo').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('docNo').classList.remove('fa-caret-down');\r\n                                    document.getElementById('docNo').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }>\r\n                            Doc No.\r\n                            {preview?null:<i id='docNo' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap' style={preview?null:{cursor:'pointer'}}  data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if (!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],ref,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('ref').classList.remove('fa-caret-up');\r\n                                    document.getElementById('ref').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('ref').classList.remove('fa-caret-down');\r\n                                    document.getElementById('ref').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }>\r\n                            Ref.\r\n                            {preview?null:<i id='ref' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap' style={preview?null:{cursor:'pointer'}}  data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if (!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],type,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('type').classList.remove('fa-caret-up');\r\n                                    document.getElementById('type').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('type').classList.remove('fa-caret-down');\r\n                                    document.getElementById('type').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }\r\n                        >\r\n                            Type\r\n                            {preview?null:<i id='type' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap' style={preview?null:{cursor:'pointer'}}  data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if (!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],dr,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('dr').classList.remove('fa-caret-up');\r\n                                    document.getElementById('dr').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('dr').classList.remove('fa-caret-down');\r\n                                    document.getElementById('dr').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }\r\n                        >\r\n                            Dr\r\n                            {preview?null:<i id='dr' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap' style={preview?null:{cursor:'pointer'}}  data-order='asc'\r\n                        onClick={(e)=>{\r\n                            if (!preview) {\r\n                                e.target.setAttribute('data-order',\r\n                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                resultInput['data'][1]=sortData(resultInput['data'][1],cr,e.target.getAttribute('data-order'))\r\n                                changeResultInput({...resultInput})\r\n\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('cr').classList.remove('fa-caret-up');\r\n                                    document.getElementById('cr').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('cr').classList.remove('fa-caret-down');\r\n                                    document.getElementById('cr').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                        }\r\n                        }\r\n                        >\r\n                            Cr\r\n                            {preview?null:<i id='cr' className='fa fa-caret-down ml-2'></i>}\r\n                        </th>\r\n                        <th className='text-nowrap'>Balance</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td colSpan='6'>B/F</td>\r\n                        <td>{numberFormatParser(balance)}</td>\r\n                    </tr>\r\n                    {data.map((item,i)=>{\r\n                        \r\n                        if (new Date(item[date])>=new Date(resultInput['dateStart']) \r\n                        && new Date(item[date])<=new Date(resultInput['dateEnd'])) \r\n                            {\r\n                                if (item[dr])\r\n                                balance+=item[dr]\r\n                                if (item[cr])\r\n                                balance-=item[cr]\r\n                            return (\r\n                            <tr key={i} style={preview? null:{cursor:'pointer'}} onClick={(e)=> {\r\n                                if(!preview)\r\n                                    history.push('/'+createLink(item[type].toLowerCase(),item[docNum]))\r\n                                else e.preventDefault();\r\n                            }\r\n                            }>\r\n                                <td className='text-nowrap'>{dateFormatParser(item[date])}</td>\r\n                                <td className='text-nowrap'>{item[docNum]}</td>\r\n                                <td className='text-nowrap'>{item[ref]}</td>\r\n                                <td className='text-nowrap'>{item[type]}</td>\r\n                                <td className='text-nowrap'>{numberFormatParser(item[dr])}</td>\r\n                                <td className='text-nowrap'>{numberFormatParser(item[cr])}</td>\r\n                                <td className='text-nowrap'>{numberFormatParser(balance)}</td>\r\n                            </tr>\r\n                            )\r\n                        }}\r\n                    )}\r\n                    \r\n                </tbody>\r\n                \r\n            </table>\r\n            \r\n            {preview? (\r\n                <p className='h5 text-right jumbotron py-2'>\r\n                    <span>Account Balance: </span>\r\n                    <span>{numberFormatParser(balance)}</span>\r\n                </p>):null}\r\n        </div>\r\n        )\r\n        \r\n    }\r\n\r\n    let errorDisplay=null;\r\n\r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor || (dataSelectDebtorStatement && dataSelectDebtorStatement.error) \r\n    || errorSelectDebtorStatement )\r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorStatement && dataSelectDebtorStatement.error? 'Debtor Statement RETRIEVAL for item failed errno: '+dataSelectDebtorStatement.error.errno\r\n            +' code: '+dataSelectDebtorStatement.error.code+' message: '+dataSelectDebtorStatement.error.sqlMessage:null}\r\n            {errorSelectDebtorStatement? 'Debtor Statement RETRIEVAL for item failed '+errorSelectDebtorStatement : null}\r\n\r\n        </div>\r\n    )\r\n    \r\n    return (\r\n        <Switch>\r\n            <Route exact path={`${path}/Preview`}>\r\n                {resultInput? \r\n                (<DebtorCreditorStatementOne\r\n                    backPath={DebtorStatementReport.path}\r\n                    description='Debtor Statement'\r\n                    topLeftInput={[...debtorOtherInfo.slice(0,2)]}\r\n                    topRightField={['Statement Date','Credit Term']}\r\n                    topRightInput={\r\n                        [dateFormatParser(resultInput['dateStart'])+' to '+ dateFormatParser(resultInput['dateEnd']),\r\n                        debtorOtherInfo[2]==='COD'?'C.O.D.':debtorOtherInfo[2]+' days']}\r\n                    populateDebtor={populateDebtor}\r\n                    data={resultInput['dataPreview'][1]}\r\n                    field={resultInput['field'][1]}\r\n                    dateEnd={resultInput['dateEnd']}\r\n                    agingMonths={agingMonths}\r\n                    dateStartForAging={getDateStartForAging(resultInput['dateStart'],resultInput['dateEnd'])}\r\n                    dbBroughtForwardAmount={resultInput['dataPreview'][0][0][resultInput['field'][0][0].name]}\r\n                    \r\n                   \r\n                \r\n                />):<Redirect to={DebtorStatementReport.path}/>}\r\n            </Route>\r\n            <Route exact path={path}>\r\n                <AppLayout>\r\n                    <div className='container pt-3' style={{paddingLeft:20,paddingRight:20}}>\r\n                        <h3>{DebtorStatementReport.description}</h3>\r\n                        <form className='mt-3' onSubmit={e=>{\r\n                        e.preventDefault();\r\n                        changeGenerateReportWarning(false);\r\n                        changeParamDebtorStatement({\r\n                            url:'./ReportItem',\r\n                            init:{\r\n                                method:'POST',\r\n                                headers:{'Content-Type':'application/json'},\r\n                                body:JSON.stringify({\r\n                                    item:'debtor_statement',\r\n                                    param:[getDateStartForAging(dateStart,dateEnd),dateEnd,debtorID]\r\n                                }),\r\n                                credentials:'include'\r\n                            }\r\n                        })\r\n                        }}>\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='dateStart'>Date Start</label>\r\n                                <input type='date' id='dateStart' required onChange={(e)=>{\r\n                                    if (new Date(e.target.value)>new Date(dateEnd)) {\r\n                                        alert('Invalid Date Start Entry')\r\n                                        changeDateStart(new Date().getFullYear()+'-01-01')\r\n                                    }\r\n                                    else changeDateStart(e.target.value)\r\n                                }} \r\n                                    value={dateStart} required className='form-control col-md-3 mb-3 mb-md-0'/>\r\n                                <label className='offset-md-1 col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='dateEnd'>Date End</label>\r\n                                <input type='date' id='dateEnd' required onChange={(e)=>{\r\n                                    if (new Date(e.target.value)<new Date(dateStart)) {\r\n                                        alert('Invalid Date End Entry')\r\n                                        changeDateEnd(getFormattedDate(new Date()))\r\n                                    }\r\n                                    else changeDateEnd(e.target.value)\r\n                                }} value={dateEnd} required className='form-control col-md-3 mb-3 mb-md-0'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='debtorID'>Debtor ID</label>\r\n                                <select className='form-control col-md-4' required value={debtorID} onChange={e=>{\r\n                                    let debtorName='';\r\n                                    let debtorAddress='';\r\n                                    let debtorDefaultCreditTerm='';\r\n\r\n                                    dataSelectDebtor.data.forEach(data=>{\r\n                                        if(data[dataSelectDebtor.field[0].name]===e.target.value) {\r\n                                            debtorName=data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'';\r\n                                            debtorAddress=data[dataSelectDebtor.field[2].name]?data[dataSelectDebtor.field[2].name]:'';\r\n                                            debtorDefaultCreditTerm=data[dataSelectDebtor.field[7].name]?data[dataSelectDebtor.field[7].name]:'';\r\n                                        }\r\n                                    })\r\n                                    changeDebtorID(e.target.value);\r\n                                    changeDebtorOtherInfo([debtorName,debtorAddress,debtorDefaultCreditTerm])\r\n                                \r\n                                }}>\r\n                                    <option value=''> -select an option- </option>\r\n                                    {debtorList}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <fieldset className='form-group pl-4 pb-3 border border-secondary rounded col-md-7 mx-0'>\r\n                                <legend className='col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center'>\r\n                                    <h6>Preview Options</h6>\r\n                                </legend>\r\n                                <div className='form-row'>\r\n                                    <div className='form-group col-md-6 form-row'>\r\n                                        <label className='col-6 col-md-6 col-form-label' htmlFor='agingMonths'>\r\n                                            Aging Months\r\n                                        </label>\r\n                                        <select id='agingMonths' className='form-control col-3 col-md-3' required value={agingMonths}\r\n                                            onChange={e=>\r\n                                                changeAgingMonths(e.target.value)\r\n                                            }>\r\n                                            <option value='6'>6</option>\r\n                                            <option value='9'>9</option>\r\n                                            <option value='12'>12</option>\r\n                                        </select>\r\n                                    </div>\r\n                                \r\n                                    <div className='form-group col-md-6 form-row '>\r\n                                        <label className='col-3 col-md-3 col-form-label' htmlFor='sort'>\r\n                                            Sort\r\n                                        </label>\r\n                                        <select id='sort' className='form-control col-8 col-md-8' value={sortCriteria} onChange={e=>\r\n                                            changeSortCriteria(e.target.value)\r\n                                        }>\r\n                                            <option value=''> -select an option- </option>\r\n                                            {sortCriteriaList}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </fieldset>\r\n\r\n                            <button type='submit' className='btn btn-primary mx-2'>Generate</button>\r\n                            <button type='button' className='btn btn-warning' onClick={e=>\r\n                                changeResultInput(null)}>Clear</button>\r\n                            <button type='button' onClick={(e)=>{\r\n                                if (!resultInput) {\r\n                                    changeGenerateReportWarning(true)\r\n                                }\r\n                                else {\r\n                                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                                    'content','width=device-width, initial-scale=0.4');\r\n                                    history.push('./DebtorStatementReport/Preview')\r\n                                }}\r\n                            } \r\n                            className='btn btn-info mx-1 my-1'>Preview</button>\r\n                            {generateReportWarning? \r\n                            (<div className=\"alert alert-warning\">\r\n                                Please generate report first!\r\n                            </div>):null}\r\n                        </form>\r\n                        \r\n                        <hr/>\r\n\r\n                        {resultInput? \r\n                        (<div className='mb-5'>\r\n                            <h5 className='py-2'>Result</h5>\r\n                            {populateDebtor()}\r\n                            \r\n                        </div>):null\r\n                        }\r\n                        <hr className='pb-3'/>\r\n                    </div>\r\n                </AppLayout>\r\n            </Route>\r\n            <Redirect to={DebtorStatementReport.path}/>\r\n        </Switch>\r\n    )\r\n}\r\nDebtorStatementReport.description='Debtor Statement Report';\r\nDebtorStatementReport.path='/DebtorStatementReport';\r\n\r\nexport default DebtorStatementReport;\r\n","import React from 'react';\r\nimport numberFormatParser from '../numberFormatParser';\r\nimport dateFormatParser from '../dateFormatParser';\r\nimport {useHistory} from 'react-router-dom';\r\nimport setPageSize from '../setPageSize';\r\n\r\n/*Layout for Debtor Collection Report*/\r\n\r\nfunction DebtorCollectionOne(props) {\r\n    const history=useHistory();\r\n\r\n    function populateResult() {\r\n        const data=props.data;\r\n        const field=props.field;\r\n        const debtorNum=field[0].name;\r\n        const name=field[1].name;\r\n        const docNum=field[2].name;\r\n        const docDate=field[3].name;\r\n        const type=field[4].name;\r\n        const method=field[5].name;\r\n        const transactionID=field[6].name;\r\n        const amount=field[7].name;\r\n\r\n        const receiptData=props.receiptData;\r\n        const receiptField=props.receiptField;\r\n        const receiptDocNum=receiptField[0].name;\r\n        const receiptDataDocNum=receiptField[1].name;\r\n        const receiptDataType=receiptField[2].name;\r\n        const receiptDataDate=receiptField[3].name;\r\n        const receiptDataCreditTerm=receiptField[4].name;\r\n        const receiptDataAmount=receiptField[5].name;\r\n        const receiptAmount=receiptField[6].name;\r\n\r\n        const debtorAlreadyParsed=[];\r\n        const result=[];\r\n\r\n        data.forEach(item=>{\r\n            if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1)  {\r\n                debtorAlreadyParsed.push(item[debtorNum]);\r\n                result.push(\r\n                (<tbody key={item[debtorNum]} className='border-bottom border-secondary'>\r\n                    <tr className='border-top border-secondary'>\r\n                        <th className='align-top'>{item[debtorNum]}</th>\r\n                        <th className='align-top' colSpan={props.withReceiptDetails?5:4}>{item[name]}</th>\r\n                        <th className='align-top'>\r\n                            {numberFormatParser(data.reduce((a,b)=>{\r\n                                    if (b[debtorNum]===item[debtorNum]) \r\n                                        return a+b[amount]\r\n                                    else return a \r\n                                },0)\r\n                            )}\r\n                        </th>\r\n                    </tr>\r\n                    {props.dataDetail.map(item2=>{\r\n                        if (item2[debtorNum]===item[debtorNum]) \r\n                            return (\r\n                            <React.Fragment>\r\n                                <tr key={item2[docNum]}>\r\n                                    <td className='align-top'>{item2[docNum]}</td>\r\n                                    <td className='align-top'>{dateFormatParser(item2[docDate])}</td>\r\n                                    <td className='align-top'>{item2[type]}</td>\r\n                                    <td className='align-top'>{item2[method]}</td>\r\n                                    <td className='align-top' colSpan={props.withReceiptDetails?2:null}>{item2[transactionID]}</td>\r\n                                    <td className='align-top'>\r\n                                        {numberFormatParser(item2[amount])}\r\n                                    </td>\r\n                                </tr>\r\n                                {props.withReceiptDetails? receiptData.map(item3=>{\r\n                                    if(item3[receiptDocNum]===item2[docNum]) \r\n                                        return (\r\n                                            <tr key={item3[receiptDataDocNum]} className='text-secondary'>\r\n                                                <td className='align-top pl-5 pr-0'><i>{item3[receiptDataDocNum]}</i></td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{item3[receiptDataType]}</i></td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{dateFormatParser(item3[receiptDataDate])}</i></td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{\r\n                                                    item3[receiptDataCreditTerm] && item3[receiptDataCreditTerm]!=='COD'? \r\n                                                    dateFormatParser(props.getFormattedDate(\r\n                                                            new Date(new Date(item3[receiptDataDate])\r\n                                                            .setDate(new Date(item3[receiptDataDate]).getDate()\r\n                                                            +Number(item3[receiptDataCreditTerm]))))\r\n                                                        ):dateFormatParser(item3[receiptDataDate])\r\n                                                    }\r\n                                                    </i>\r\n                                                </td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{\r\n                                                item3[receiptDataCreditTerm]==='COD'?'C.O.D.':item3[receiptDataCreditTerm]+' days'}</i>\r\n                                                </td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{numberFormatParser(item3[receiptDataAmount])}</i></td>\r\n                                                <td className='align-top pl-5 pr-0'><i>{numberFormatParser(item3[receiptAmount])}</i></td>\r\n                                            </tr>\r\n                                        )\r\n                                }):null}\r\n                            </React.Fragment>\r\n                            )\r\n                                \r\n                    \r\n\r\n                    })}\r\n                    \r\n                </tbody>)\r\n                )\r\n            }\r\n        })\r\n\r\n        return result;\r\n    }\r\n\r\n    return (\r\n        <div className='container-fluid py-1'>\r\n            <button type='click' className='btn btn-secondary d-print-none mb-2' \r\n                onClick={()=>{\r\n                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                    'content','width=device-width, initial-scale=1.0');\r\n                    setPageSize('a4 portrait');\r\n                    history.push(props.backPath)\r\n            }}>Back</button>\r\n            <h2 className='text-center mb-3'>\r\n                {props.description+' from '+ dateFormatParser(props.resultInput['dateStart'])\r\n                +' to '+ dateFormatParser(props.resultInput['dateEnd'])}\r\n            </h2>\r\n            <hr className='border border-dark'/>\r\n            <table className='table table-borderless'>\r\n                <thead>\r\n                    <tr className='border-top border-secondary'>\r\n                        <th className='align-top'>Debtor No.</th>\r\n                        <th className='align-top' colSpan={props.withReceiptDetails?5:4}>Name</th>\r\n                        <th className='align-top'>Receipt Amount</th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th className='align-top'>Receipt No.</th>\r\n                        <th className='align-top'>Date</th>\r\n                        <th className='align-top'>Type</th>\r\n                        <th className='align-top'>Method</th>\r\n                        <th className='align-top' colSpan={props.withReceiptDetails?2:null}>Transaction ID</th>\r\n                        <th className='align-top'>Amount</th>\r\n                    </tr>\r\n                    {props.withReceiptDetails?\r\n                    (<tr className='border-bottom border-secondary text-secondary'>\r\n                        <th className='align-top pl-5 pr-0'><i>Doc No.</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Type</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Doc Date</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Due Date</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Credit Term</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Doc Amount</i></th>\r\n                        <th className='align-top pl-5 pr-0'><i>Receipt Amount</i></th>\r\n                    </tr>):null}\r\n                    {props.withReceiptDetails?\r\n                    (<tr>\r\n                        <th className='border-bottom border-secondary' colSpan={7}></th>\r\n                    </tr>):\r\n                    (<tr>\r\n                        <th className='border-bottom border-top border-secondary' colSpan={6}></th>\r\n                    </tr>)}\r\n                </thead>\r\n                {populateResult()}\r\n            </table>\r\n            <hr className='border border-dark'/>\r\n            <small className='d-block text-center'>End of Report</small>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DebtorCollectionOne;","import React,{useState,useContext,useEffect} from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\nimport {\r\n    Switch,\r\n    Route,\r\n    useRouteMatch,\r\n    Redirect\r\n} from 'react-router-dom';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport {useHistory} from 'react-router-dom';\r\nimport $ from 'jquery'\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport sortData from '../Shared/sort';\r\nimport setPageSize from '../Shared/setPageSize';\r\nimport DebtorCollectionOne from '../Shared/preview/DebtorCollectionOne';\r\n\r\nfunction DebtorCollectionReport(props) {\r\n    const [{data:dataSelectDebtor,error:errorSelectDebtor}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'debtor'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n    const [{data:dataSelectDebtorCollection,error:errorSelectDebtorCollection},changeParamDebtorCollection]=useFetch(null);\r\n    const [debtorList,changeDebtorList] = useState(null);\r\n    const [debtorID,changeDebtorID] = useState([]);\r\n    const [dateStart,changeDateStart] = useState(new Date().getFullYear()+'-01-01');\r\n    const [dateEnd,changeDateEnd] = useState(getFormattedDate(new Date()));\r\n    const [resultInput,changeResultInput]=useState(null);\r\n    const [collapsibleElementID,changeCollapsibleElementID]=useState([])\r\n\r\n    /*Preview states*/\r\n    const [withReceiptDetails,changeWithReceiptDetails]=useState(false);\r\n    const [sortCriteriaList,changeSortCriteriaList]=useState(null);\r\n    const [detailSortCriteriaList,changeDetailSortCriteriaList]=useState(null);\r\n    const [sortCriteria,changeSortCriteria]=useState('');\r\n    const [detailSortCriteria,changeDetailSortCriteria]=useState('');\r\n    const [generateReportWarning,changeGenerateReportWarning]=useState(false);\r\n\r\n    const {path} = useRouteMatch();\r\n    const {changeAuth} = useContext(authContext);\r\n    const history=useHistory();\r\n\r\n    const calculatedWidth=950;\r\n\r\n    useEffect(()=>{\r\n        \r\n        if (dataSelectDebtor && dataSelectDebtor.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtor && dataSelectDebtor.data && dataSelectDebtor.field) \r\n            changeDebtorList(dataSelectDebtor.data.map(data=>(\r\n            <option key={data[dataSelectDebtor.field[0].name]} value={data[dataSelectDebtor.field[0].name]}>\r\n                {data[dataSelectDebtor.field[0].name]+' '+(data[dataSelectDebtor.field[1].name]?data[dataSelectDebtor.field[1].name]:'')}\r\n            </option>)\r\n            )\r\n        )\r\n    },[dataSelectDebtor,errorSelectDebtor])\r\n    \r\n    useEffect(()=>{\r\n        if (dataSelectDebtorCollection && dataSelectDebtorCollection.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectDebtorCollection && dataSelectDebtorCollection.data && dataSelectDebtorCollection.field) {\r\n            const debtorAlreadyParsed=[];\r\n            const receiptAlreadyParsed=[];\r\n            const data=dataSelectDebtorCollection.data[0];\r\n            const field=dataSelectDebtorCollection.field[0];\r\n            const debtorNum=field[0].name;\r\n            const name=field[1].name;\r\n            const docNum=field[2].name;\r\n            const docDate=field[3].name;\r\n            const type=field[4].name;\r\n            const method=field[5].name;\r\n            const transactionID=field[6].name;\r\n            const amount=field[7].name;\r\n            \r\n            changeResultInput(resultInput=>{})\r\n\r\n            data.forEach(item=>{\r\n                let newObject={}\r\n               if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1) {\r\n                    debtorAlreadyParsed.push(item[debtorNum])\r\n                    newObject[item[debtorNum]]=data.filter(item2=>item2[debtorNum]===item[debtorNum])\r\n                    changeResultInput(resultInput=>(Object.assign({},resultInput,newObject)))\r\n               }\r\n            })\r\n\r\n            changeResultInput(resultInput=>({...resultInput,\r\n                data:dataSelectDebtorCollection.data,\r\n                dataPreview:[...dataSelectDebtorCollection.data],\r\n                field:dataSelectDebtorCollection.field,\r\n                dateStart,\r\n                dateEnd,\r\n                debtorID\r\n            }))\r\n\r\n            changeSortCriteriaList(\r\n                (<>\r\n                    <option value={debtorNum}>Debtor No.</option>\r\n                    <option value={name}>Name</option>\r\n                </>)\r\n            )\r\n            changeDetailSortCriteriaList(\r\n                (<>\r\n                    <option value={docNum}>Doc No.</option>\r\n                    <option value={docDate}>Doc Date</option>\r\n                    <option value={type}>Type</option>\r\n                    <option value={method}>Method</option>\r\n                    <option value={transactionID}>Transaction ID</option>\r\n                    <option value={amount}>Amount</option>\r\n                </>)\r\n            )\r\n            data.forEach(item=>{\r\n                if(receiptAlreadyParsed.indexOf(item[docNum])===-1) \r\n                 receiptAlreadyParsed.push(item[docNum])\r\n             })\r\n\r\n             changeCollapsibleElementID(debtorAlreadyParsed.map(item=>item.replace(/[ ._\\-()]/g,''))\r\n             .concat(receiptAlreadyParsed.map(item=>item.replace(/[ ._\\-()]/g,''))))\r\n\r\n        }\r\n    },[dataSelectDebtorCollection,errorSelectDebtorCollection])\r\n\r\n    //attach bootstrap/jquery eventlisteners and callbacks\r\n    useEffect(()=>{\r\n        if (collapsibleElementID) {\r\n            collapsibleElementID.forEach(ID=>{\r\n                $('#'+ID).on('show.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-plus-square').addClass('fa-minus-square');\r\n                })\r\n                $('#'+ID).on('hide.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-minus-square').addClass('fa-plus-square');\r\n                })\r\n        })\r\n    }\r\n    },[resultInput])\r\n\r\n    useEffect(()=>{\r\n        function setScale() {\r\n            document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                'content','width=device-width, initial-scale=1.0');\r\n        }\r\n        window.addEventListener('popstate',setScale)\r\n        \r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setScale)\r\n            }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        function setPage() {\r\n            setPageSize(\"a4 portrait\");\r\n        }\r\n        window.addEventListener('popstate',setPage);\r\n\r\n        return function unattach() {\r\n                window.removeEventListener('popstate',setPage)\r\n            }\r\n    },[])\r\n\r\n    function getFormattedDate(date) {\r\n        let currDate=new Date(date)\r\n        \r\n        return (currDate.getFullYear()) + (currDate.getMonth() + 1 <10? '-0'+ (currDate.getMonth()+1):'-'+ (currDate.getMonth()+1)) + (currDate.getDate()<10?\r\n        '-0'+currDate.getDate() : '-'+currDate.getDate());\r\n    }\r\n\r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    function populateResult() {\r\n        const data=resultInput['data'][0];\r\n        const field=resultInput['field'][0];\r\n        const debtorNum=field[0].name;\r\n        const name=field[1].name;\r\n        const docNum=field[2].name;\r\n        const docDate=field[3].name;\r\n        const type=field[4].name;\r\n        const method=field[5].name;\r\n        const transactionID=field[6].name;\r\n        const amount=field[7].name;\r\n\r\n        const receiptData=resultInput['data'][1];\r\n        const receiptField=resultInput['field'][1];\r\n        const receiptDocNum=receiptField[0].name;\r\n        const receiptDataDocNum=receiptField[1].name;\r\n        const receiptDataType=receiptField[2].name;\r\n        const receiptDataDate=receiptField[3].name;\r\n        const receiptDataCreditTerm=receiptField[4].name;\r\n        const receiptDataAmount=receiptField[5].name;\r\n        const receiptAmount=receiptField[6].name;\r\n\r\n        function populateDebtor() {\r\n            const debtorAlreadyParsed=[];\r\n            const result=[];\r\n\r\n            data.forEach(item=>{\r\n                if(debtorAlreadyParsed.indexOf(item[debtorNum])===-1)  {\r\n                    debtorAlreadyParsed.push(item[debtorNum]);\r\n                    result.push(\r\n                        <div key={item[debtorNum]}>\r\n                            <div className='d-flex' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[debtorNum].replace(/[ ._\\-()]/g,'')}>\r\n                                <i className='fa fa-plus-square mt-1' style={{flex:'0 0 14px',paddingLeft:10,paddingRight:10}}\r\n                                id={'plusminus'+item[debtorNum].replace(/[ ._\\-()]/g,'')}></i>\r\n                                <p className='mb-0' style={{flex:'0 0 120px',paddingLeft:10,paddingRight:10}}>{item[debtorNum]}</p>\r\n                                <p className='mb-0 col' style={{paddingLeft:10,paddingRight:10}}>{item[name]}</p>\r\n                                <p className='mb-0' style={{flex:'0 0 150px',paddingLeft:10,paddingRight:10}}>\r\n                                    {numberFormatParser(data.reduce((a,b)=>{\r\n                                        if (b[debtorNum]===item[debtorNum]) \r\n                                            return a+b[amount]\r\n                                        else return a \r\n                                    },0)\r\n                                    )}\r\n                                    </p>\r\n                            </div>\r\n                            <div className='collapse navbar-collapse my-2 pl-3 pl-md-5' \r\n                            id={item[debtorNum].replace(/[ ._\\-()]/g,'')}>\r\n                                <div className='row flex-nowrap text-white bg-secondary pt-2 pb-1' \r\n                                    style={{marginLeft:0,marginRight:0,}}>\r\n                                    <h6 style={{flex:'0 0 34px',paddingLeft:10,paddingRight:10}}></h6>\r\n                                    <h6 style={{flex:'1 0 70px',paddingLeft:10,paddingRight:10}}></h6>\r\n                                    <h6 style={{flex:'1 0 130px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='receiptNo'+item[debtorNum].replace(/[ ._\\-()]/g,'');\r\n\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],docNum,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Receipt No.\r\n                                        <i id={'receiptNo'+item[debtorNum].replace(/[ ._\\-()]/g,'')} \r\n                                        className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n\r\n                                    <h6 style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='date'+item[debtorNum].replace(/[ ._\\-()]/g,'');\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],docDate,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Date\r\n                                        <i id={'date'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n\r\n                                    <h6 style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='type'+item[debtorNum].replace(/[ ._\\-()]/g,'');\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],type,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Type\r\n                                        <i id={'type'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n\r\n                                    <h6 style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='method'+item[debtorNum].replace(/[ ._\\-()]/g,'');\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],method,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Method\r\n                                        <i id={'method'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n\r\n                                    <h6 style={{flex:'1 0 150px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='transactionID'+item[debtorNum].replace(/[ ._\\-()]/g,'');\r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],transactionID,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Transaction ID\r\n                                        <i id={'transactionID'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n\r\n                                    <h6 style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                        data-order='asc' onClick={(e)=>{\r\n                                        const id='amount'+item[debtorNum].replace(/[ ._\\-()]/g,'');    \r\n                                        e.target.setAttribute('data-order',\r\n                                        e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n\r\n                                        let sortedData={}\r\n                                        sortedData[item[debtorNum]]=sortData(resultInput[item[debtorNum]],amount,e.target.getAttribute('data-order'))\r\n                                        \r\n                                        changeResultInput(Object.assign({},resultInput,sortedData))\r\n                                        if (e.target.getAttribute('data-order')==='asc') {\r\n                                            document.getElementById(id).classList.remove('fa-caret-up');\r\n                                            document.getElementById(id).classList.add('fa-caret-down')\r\n                                        }\r\n                                        else {\r\n                                            document.getElementById(id).classList.remove('fa-caret-down');\r\n                                            document.getElementById(id).classList.add('fa-caret-up')\r\n                                        }\r\n                                    }\r\n                                    }>\r\n                                        Amount\r\n                                        <i id={'amount'+item[debtorNum].replace(/[ ._\\-()]/g,'')} className='fa fa-caret-down ml-2'></i>\r\n                                    </h6>\r\n                                </div>\r\n                                {resultInput[item[debtorNum]].map(item2=>{\r\n                                    return (\r\n                                        <div key={item2[docNum]}>\r\n                                            <div className='d-flex' style={{cursor:'pointer'}}\r\n                                            data-toggle='collapse' data-target={'#'+item2[docNum].replace(/[ ._\\-()]/g,'')}>\r\n                                                <i className='fa fa-plus-square pt-2' \r\n                                                style={{flex:'0 0 14px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                                                id={'plusminus'+item2[docNum].replace(/[ ._\\-()]/g,'')}></i>\r\n                                                <button className='btn btn-dark btn-sm my-1' style={{flex:'1 0 50px',marginLeft:10,marginRight:10}} \r\n                                                onClick={(e)=>history.push('./'+createLink(item2[type].toLowerCase(),item2[docNum]))\r\n                                                }>VIEW</button>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 130px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {item2[docNum]}\r\n                                                </p>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {dateFormatParser(item2[docDate])}\r\n                                                    </p>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {item2[type]}\r\n                                                </p>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {item2[method]}\r\n                                                </p>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 150px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {item2[transactionID]}\r\n                                                </p>\r\n                                                <p className='py-2 mb-0' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>\r\n                                                    {item2[amount]}\r\n                                                </p>\r\n                                                \r\n                                            </div>\r\n                                            <div className='collapse navbar-collapse my-2 pl-3 pl-md-5' \r\n                                            id={item2[docNum].replace(/[ ._\\-()]/g,'')}>\r\n                                                <table className='table table-hover'>\r\n                                                    <thead>\r\n                                                        <tr>\r\n                                                            <th className='text-nowrap'>Doc No.</th>\r\n                                                            <th className='text-nowrap'>Type</th>\r\n                                                            <th className='text-nowrap'>Doc Date</th>\r\n                                                            <th className='text-nowrap'>Due Date</th>\r\n                                                            <th className='text-nowrap'>Credit Term</th>\r\n                                                            <th className='text-nowrap'>Doc Amount</th>\r\n                                                            <th className='text-nowrap'>Receipt Amount</th>\r\n                                                        </tr>\r\n                                                    </thead>\r\n                                                    <tbody>\r\n                                                        {receiptData.map(item3=>{\r\n                                                            if(item3[receiptDocNum]===item2[docNum]) \r\n                                                            return (\r\n                                                                <tr key={item3[receiptDataDocNum]} style={{cursor:'pointer'}} onClick={(e)=>\r\n                                                                    history.push('./'+createLink(item3[receiptDataType].toLowerCase(),item3[receiptDataDocNum]))\r\n                                                                }>\r\n                                                                    <td className='text-nowrap'>{item3[receiptDataDocNum]}</td>\r\n                                                                    <td className='text-nowrap'>{item3[receiptDataType]}</td>\r\n                                                                    <td className='text-nowrap'>{dateFormatParser(item3[receiptDataDate])}</td>\r\n                                                                    <td className='text-nowrap'>{\r\n                                                                     item3[receiptDataCreditTerm] && item3[receiptDataCreditTerm]!=='COD'? \r\n                                                                     dateFormatParser(getFormattedDate(\r\n                                                                             new Date(new Date(item3[receiptDataDate])\r\n                                                                             .setDate(new Date(item3[receiptDataDate]).getDate()\r\n                                                                             +Number(item3[receiptDataCreditTerm]))))\r\n                                                                         ):dateFormatParser(item3[receiptDataDate])\r\n                                                                    }</td>\r\n                                                                    <td className='text-nowrap'>{\r\n                                                                    item3[receiptDataCreditTerm]==='COD'?'C.O.D.':item3[receiptDataCreditTerm]+' days'}\r\n                                                                    </td>\r\n                                                                    <td className='text-nowrap'>{numberFormatParser(item3[receiptDataAmount])}</td>\r\n                                                                    <td className='text-nowrap'>{numberFormatParser(item3[receiptAmount])}</td>\r\n                                                                </tr>\r\n                                                            )\r\n                                                        })}\r\n                                                    </tbody>\r\n                                                </table>\r\n                                            </div>\r\n                                        </div>\r\n                                        \r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n\r\n                            \r\n                        \r\n                    )}\r\n            })\r\n            return result;\r\n        }\r\n        \r\n\r\n        return (\r\n            <div className=\"overflow-auto mb-5 pt-3\" style={{transform:'rotateX(180deg)'}}>\r\n                <div style={{width:calculatedWidth,transform:'rotateX(180deg)'}}>\r\n                    <div className='row flex-nowrap text-white bg-secondary pt-2 pb-1' \r\n                    style={{marginLeft:0,marginRight:0,}}>\r\n                        <h6 style={{flex:'0 0 34px',paddingLeft:10,paddingRight:10}}></h6>\r\n                        <h6 style={{flex:'0 0 120px',paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                            data-order='asc' onClick={(e)=>{\r\n                            e.target.setAttribute('data-order',\r\n                            e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                            resultInput['data'][0]=sortData(resultInput['data'][0],debtorNum,e.target.getAttribute('data-order'))\r\n                            changeResultInput({...resultInput})\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('debtorNo').classList.remove('fa-caret-up');\r\n                                    document.getElementById('debtorNo').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('debtorNo').classList.remove('fa-caret-down');\r\n                                    document.getElementById('debtorNo').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                                    \r\n                            }>\r\n                            Debtor No.\r\n                            <i id='debtorNo' className='fa fa-caret-down ml-2'></i>\r\n                        </h6>\r\n                        <h6 className='col' style={{paddingLeft:10,paddingRight:10,cursor:'pointer'}}\r\n                        data-order='asc' onClick={(e)=>{\r\n                            e.target.setAttribute('data-order',\r\n                            e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                            resultInput['data'][0]=sortData(resultInput['data'][0],name,e.target.getAttribute('data-order'))\r\n                            changeResultInput({...resultInput})\r\n                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                    document.getElementById('name').classList.remove('fa-caret-up');\r\n                                    document.getElementById('name').classList.add('fa-caret-down')\r\n                                }\r\n                                else {\r\n                                    document.getElementById('name').classList.remove('fa-caret-down');\r\n                                    document.getElementById('name').classList.add('fa-caret-up')\r\n                                }\r\n                            }\r\n                            }>\r\n                            Name\r\n                            <i id='name' className='fa fa-caret-down ml-2'></i>\r\n                        </h6>\r\n                        <h6 style={{flex:'0 0 150px',paddingLeft:10,paddingRight:10}}>Receipt Amount</h6>\r\n                    </div>\r\n                    <div style={{overflowY:'auto',overflowX:'hidden',maxHeight:'60vh'}}>\r\n                        {populateDebtor()}\r\n                    </div>\r\n                </div>\r\n            </div>)\r\n    }\r\n\r\n    let errorDisplay=null;\r\n\r\n    if ((dataSelectDebtor && dataSelectDebtor.error) || errorSelectDebtor || \r\n    (dataSelectDebtorCollection && dataSelectDebtorCollection.error) || errorSelectDebtorCollection )\r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectDebtor && dataSelectDebtor.error? 'Debtor List RETRIEVAL for item failed errno: '+dataSelectDebtor.error.errno\r\n            +' code: '+dataSelectDebtor.error.code+' message: '+dataSelectDebtor.error.sqlMessage:null}\r\n            {errorSelectDebtor? 'Debtor List RETRIEVAL for item failed '+errorSelectDebtor : null}\r\n            <br/>\r\n            <br/>\r\n            {dataSelectDebtorCollection && dataSelectDebtorCollection.error? 'Debtor Collection RETRIEVAL for item failed errno: '+dataSelectDebtorCollection.error.errno\r\n            +' code: '+dataSelectDebtorCollection.error.code+' message: '+dataSelectDebtorCollection.error.sqlMessage:null}\r\n            {errorSelectDebtorCollection? 'Debtor Collection RETRIEVAL for item failed '+errorSelectDebtorCollection : null}\r\n\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <Switch>\r\n            <Route exact path={`${path}/Preview`}>\r\n                {resultInput? \r\n                (<DebtorCollectionOne\r\n                    backPath={DebtorCollectionReport.path}\r\n                    description={DebtorCollectionReport.description}\r\n                    resultInput={resultInput}\r\n                    withReceiptDetails={withReceiptDetails}\r\n                    data={sortData(resultInput['dataPreview'][0],sortCriteria,'asc')}\r\n                    dataDetail={sortData(resultInput['dataPreview'][0],detailSortCriteria,'asc')}\r\n                    field={resultInput['field'][0]}\r\n                    receiptData={resultInput['dataPreview'][1]}\r\n                    receiptField={resultInput['field'][1]}\r\n                    getFormattedDate={getFormattedDate}\r\n                   \r\n                    \r\n                />):<Redirect to={DebtorCollectionReport.path}/>}\r\n            </Route>\r\n\r\n            <Route exact path={path}>\r\n                <AppLayout>\r\n                    <div className='container pt-3' style={{paddingLeft:20,paddingRight:20}}>\r\n                        <h3>{DebtorCollectionReport.description}</h3>\r\n                        <form className='mt-3' onSubmit={e=>{\r\n                        e.preventDefault();\r\n                        changeGenerateReportWarning(false);\r\n                        changeParamDebtorCollection({\r\n                            url:'./ReportItem',\r\n                            init:{\r\n                                method:'POST',\r\n                                headers:{'Content-Type':'application/json'},\r\n                                body:JSON.stringify({\r\n                                    item:'debtor_collection',\r\n                                    param:[dateStart,dateEnd,debtorID]\r\n                                }),\r\n                                credentials:'include'\r\n                            }\r\n                        })\r\n                        \r\n                        }}>\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='dateStart'>Date Start</label>\r\n                                <input type='date' id='dateStart' required onChange={(e)=>{\r\n                                    if (new Date(e.target.value)>new Date(dateEnd)) {\r\n                                        alert('Invalid Date Start Entry')\r\n                                        changeDateStart(new Date().getFullYear()+'-01-01')\r\n                                    }\r\n                                    else changeDateStart(e.target.value)\r\n                                }} \r\n                                    value={dateStart} required className='form-control col-md-3 mb-3 mb-md-0'/>\r\n                                <label className='offset-md-1 col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='dateEnd'>Date End</label>\r\n                                <input type='date' id='dateEnd' required onChange={(e)=>{\r\n                                    if (new Date(e.target.value)<new Date(dateStart)) {\r\n                                        alert('Invalid Date End Entry')\r\n                                        changeDateEnd(getFormattedDate(new Date()))\r\n                                    }\r\n                                    else changeDateEnd(e.target.value)\r\n                                }} value={dateEnd} required className='form-control col-md-3 mb-3 mb-md-0'/>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row mx-0'>\r\n                                <label className='col-md-2 col-form-label' style={{paddingLeft:0}} htmlFor='debtorID'>Debtor ID</label>\r\n                                <select className='form-control col-md-4' required size='3' value={debtorID} multiple={true} onChange={e=>{\r\n                                    let result=[];\r\n                                    Array.from(e.target.options).map(option=>{\r\n                                        if (option.selected===true) \r\n                                            result.push(option.value) \r\n                                    })\r\n                                    changeDebtorID(result);\r\n                                }}>\r\n                                    {debtorList}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className='form-group form-row mx-0'>\r\n                                <div className='form-check offset-md-2'>\r\n                                    <input type='checkbox' className=' form-check-input' id='allDebtorID' onChange={e=>{\r\n                                        if (e.target.checked) \r\n                                            changeDebtorID(dataSelectDebtor.data.map(data=>\r\n                                                data[dataSelectDebtor.field[0].name]\r\n                                                ))\r\n                                        else changeDebtorID([])\r\n                                    }}/>\r\n                                    <label htmlFor='allDebtorID' style={{paddingLeft:0}} className='form-check-label'>\r\n                                        All Debtor ID\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <fieldset className='form-group pl-4 pb-3 border border-secondary rounded col-md-8'>\r\n                                <legend className='col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center'>\r\n                                    <h6>Preview Options</h6>\r\n                                </legend>\r\n                                <div className='form-row'>\r\n                                <div className='form-check col-md-12 form-group col-form-label' style={{paddingLeft:20}}>\r\n                                    <input type='checkbox' className='form-check-input' id='withReceiptDetails' onChange={e=>{\r\n                                        if (e.target.checked) \r\n                                            changeWithReceiptDetails(true)\r\n                                        else changeWithReceiptDetails(false)\r\n                                        }} checked={withReceiptDetails}/>\r\n                                    <label htmlFor='withReceiptDetails' className='form-check-label'>With Receipt Details</label>\r\n                                </div>\r\n\r\n                                <div className='form-group form-row col-md-6'>\r\n                                    <label className='col-md-4 col-form-label' style={{paddingLeft:0}} htmlFor='sort'>\r\n                                        Sort\r\n                                    </label>\r\n                                    <select id='sort' className='form-control col-md-6' value={sortCriteria} onChange={e=>\r\n                                        changeSortCriteria(e.target.value)\r\n                                    }>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {sortCriteriaList}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className='form-group col-md-6 form-row'>\r\n                                    <label className='col-md-4 col-form-label' style={{paddingLeft:0}} htmlFor='sort'>\r\n                                        Detail Sort\r\n                                    </label>\r\n                                    <select id='sort' className='form-control col-md-6' value={detailSortCriteria} onChange={e=>\r\n                                        changeDetailSortCriteria(e.target.value)\r\n                                    }>\r\n                                        <option value=''> -select an option- </option> \r\n                                        {detailSortCriteriaList}\r\n                                    </select>\r\n                                </div>\r\n                                </div>\r\n\r\n                            </fieldset>\r\n\r\n                            <button type='submit' className='btn btn-primary mx-2'>Generate</button>\r\n                            <button type='button' className='btn btn-warning' onClick={e=>\r\n                                changeResultInput(null)}>Clear</button>\r\n                            <button type='button' onClick={(e)=>{\r\n                                if (!resultInput) {\r\n                                    changeGenerateReportWarning(true)\r\n                                }\r\n                                else {\r\n                                    document.querySelector(\"meta[name=viewport]\").setAttribute(\r\n                                    'content','width=device-width, initial-scale=0.4');\r\n                                    setPageSize('a4 landscape')\r\n                                    history.push('./DebtorCollectionReport/Preview')\r\n                                }}\r\n                            } \r\n                            className='btn btn-info mx-1 my-1'>Preview</button>\r\n                            {generateReportWarning? \r\n                            (<div className=\"alert alert-warning\">\r\n                                Please generate report first!\r\n                            </div>):null}\r\n                        </form>\r\n                        \r\n                        <hr/>\r\n\r\n                        {resultInput? \r\n                        (<div className='mb-5'>\r\n                            <h5 className='py-2'>\r\n                                Result\r\n                                <button className='btn btn-dark mx-2' \r\n                                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                                        $('#'+ID).collapse('show')\r\n                                )}><i className='fa fa-plus-square'></i> Expand</button>\r\n                                <button className='btn btn-light'  \r\n                                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                                        $('#'+ID).collapse('hide')\r\n                                )}> <i className='fa fa-minus-square'></i> Collapse</button>\r\n                            </h5>\r\n                            {populateResult()}\r\n                            \r\n                        </div>):null\r\n                        }\r\n                        <hr className='pb-3'/>\r\n                    </div>\r\n                </AppLayout>\r\n            </Route>\r\n            <Redirect to={DebtorCollectionReport.path}/>\r\n        </Switch>\r\n    )\r\n}\r\nDebtorCollectionReport.description='Debtor Collection Report';\r\nDebtorCollectionReport.path='/DebtorCollectionReport';\r\n\r\nexport default DebtorCollectionReport;\r\n","import React,{useState} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\n\r\nfunction DebtorItem (props) {\r\n\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    \r\n    const [inputState,changeInputState]=useState(['','','','','','','','COD','',''])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='debtor' successPath='/DebtorMaintenance'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ DebtorItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='debtorNumber' >Debtor Number <span className='text-warning'>*</span></label>\r\n                            {inputNumberRender({\r\n                                onChange:onChange,\r\n                                layout:'col-md-4',\r\n                                position:0,\r\n                                labelID:'debtorNumber'\r\n                            })\r\n                            }\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='name'>Name <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <input type='text' id='name' onChange={(e)=>\r\n                                onChange(e.target.value,1)} value={inputState[1]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='address'>Address <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='address' onChange={(e)=>\r\n                                onChange(e.target.value,2)} \r\n                                value={inputState[2]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='postcode'>Postcode <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' maxLength='5' id='postcode' onChange={(e)=>\r\n                                onChange(e.target.value,3)} value={inputState[3]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                            <label className='col-md-2 col-form-label text-md-center' htmlFor='phone'>Phone <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' id='phone' maxLength='15' onChange={(e)=>onChange(e.target.value,4)} \r\n                                value={inputState[4]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='fax'>Fax</label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' id='fax' maxLength='15' onChange={(e)=>\r\n                                onChange(e.target.value,5)} value={inputState[5]} disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            <label className='col-md-2 col-form-label text-md-center' htmlFor='creditTerm'>Credit Term</label>\r\n                            <div className='col-md-4'>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,7)} value={inputState[7]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='otherDesc'>Other Description</label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='otherDesc' onChange={(e)=>\r\n                                onChange(e.target.value,6)} \r\n                                value={inputState[6]} disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nDebtorItem.description='Debtor Item';\r\nDebtorItem.path='/DebtorItem';\r\n\r\nexport default DebtorItem;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction CreditorMaintenance(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./CreditorItem' item='creditor'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={CreditorMaintenance.description} listname={'Creditor'} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nCreditorMaintenance.description='Creditor Maintenance';\r\nCreditorMaintenance.path='/CreditorMaintenance';\r\n\r\nexport default CreditorMaintenance;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction CreditorAgingReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Creditor Aging Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nCreditorAgingReport.description='Creditor Aging Report';\r\nCreditorAgingReport.path='/CreditorAgingReport';\r\n\r\nexport default CreditorAgingReport;\r\n","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout'\r\n\r\nfunction CreditorBalanceReport(props) {\r\n    return (\r\n        <AppLayout>\r\n                <h1>Creditor Balance Report</h1>\r\n        </AppLayout>\r\n    )\r\n}\r\nCreditorBalanceReport.description='Creditor Balance Report';\r\nCreditorBalanceReport.path='/CreditorBalanceReport';\r\n\r\nexport default CreditorBalanceReport;\r\n","import React,{useState} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport ItemButton from '../Shared/ItemButton';\r\nimport AppLayout from '../Shared/AppLayout';\r\n\r\nfunction CreditorItem (props) {\r\n\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n    \r\n    const [inputState,changeInputState]=useState(['','','','','','','','COD','',''])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1,inputState.length)])\r\n    }\r\n\r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='creditor' successPath='/CreditorMaintenance'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ CreditorItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='creditorNumber' >Creditor Number <span className='text-warning'>*</span></label>\r\n                            {inputNumberRender({\r\n                                onChange:onChange,\r\n                                layout:'col-md-4',\r\n                                position:0,\r\n                                labelID:'creditorNumber'\r\n                            })\r\n                            }\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='name'>Name <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <input type='text' id='name' onChange={(e)=>\r\n                                onChange(e.target.value,1)} value={inputState[1]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='address'>Address <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='address' onChange={(e)=>\r\n                                onChange(e.target.value,2)} \r\n                                value={inputState[2]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='postcode'>Postcode <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' maxLength='5' id='postcode' onChange={(e)=>\r\n                                onChange(e.target.value,3)} value={inputState[3]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                            <label className='col-md-2 col-form-label text-md-center' htmlFor='phone'>Phone <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' id='phone' maxLength='15' onChange={(e)=>onChange(e.target.value,4)} \r\n                                value={inputState[4]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='fax'>Fax</label>\r\n                            <div className='col-md-4'>\r\n                                <input type='text' id='fax' maxLength='15' onChange={(e)=>\r\n                                onChange(e.target.value,5)} value={inputState[5]} disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                            <label className='col-md-2 col-form-label text-md-center' htmlFor='creditTerm'>Credit Term</label>\r\n                            <div className='col-md-4'>\r\n                                <select id='creditTerm' onChange={(e)=> onChange(e.target.value,7)} value={inputState[7]} disabled={disabled} \r\n                                className='form-control'>\r\n                                    <option value='COD'>C.O.D.</option>\r\n                                    <option value='30'>30 Days</option>\r\n                                    <option value='45'>45 Days</option>\r\n                                    <option value='60'>60 Days</option>\r\n                                    <option value='90'>90 Days</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='otherDesc'>Other Description</label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='otherDesc' onChange={(e)=>\r\n                                onChange(e.target.value,6)} \r\n                                value={inputState[6]} disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <ItemButton usage={usage} onInsert={onInsert} onUpdate={onUpdate} onDelete={onDelete} changeDisabled={changeDisabled}/>\r\n                        \r\n                        \r\n                        \r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nCreditorItem.description='Creditor Item';\r\nCreditorItem.path='/CreditorItem';\r\n\r\nexport default CreditorItem;","import React,{useState,useEffect,useContext} from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport $ from 'jquery'\r\n\r\nfunction AccountMaintenance(props) {\r\n    const [{data:dataSelectAccount,error:errorSelectAccount},changeParamSelectAccount]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'account'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n    const [GLCategoryList,changeGLCategoryList] = useState(null);\r\n    const [GLAccountList,changeGLAccountList] = useState(null);\r\n    const [GLAccountArray,changeGLAccountArray] = useState(null);\r\n    const [inputStateCreate,changeInputStateCreate]=useState(['','','']) \r\n    const [inputStateUpdate,changeInputStateUpdate]=useState(['','','','']) \r\n    const [accounts,changeAccounts] = useState(null);\r\n    const [collapsibleElementID,changeCollapsibleElementID]=useState([])\r\n\r\n    const [{data:dataInsert,error:errorInsert},changeParamInsert]=useFetch(null);\r\n    const [{data:dataDelete,error:errorDelete},changeParamDelete]=useFetch(null);\r\n    const [{data:dataUpdate,error:errorUpdate},changeParamUpdate]=useFetch(null);\r\n\r\n    const {changeAuth} = useContext(authContext)\r\n    \r\n    \r\n    /*Use a different useEffect for each CRUD operation to enable page refresh once INSERT/UPDATE/DELETE is performed*/\r\n    useEffect(()=>{\r\n       \r\n\r\n        if (dataSelectAccount && dataSelectAccount.auth===false) {\r\n               alert('Cookies Expired or Authorisation invalid. Please Login again!')\r\n               changeAuth(false)\r\n           }\r\n        else if (dataSelectAccount && dataSelectAccount.data && dataSelectAccount.field) {\r\n            changeAccounts(populateAccount(dataSelectAccount.data[0],dataSelectAccount.field[0]))\r\n        }\r\n    \r\n    },[dataSelectAccount,errorSelectAccount])\r\n\r\n    useEffect(()=>{\r\n        if (dataInsert && dataInsert.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n        else if (dataInsert && !dataInsert.error) {\r\n            alert('Insert Successful!')\r\n            changeInputStateCreate(['','',''])\r\n            changeParamSelectAccount({\r\n                url:'./SelectItem',\r\n                init:{\r\n                    method:'POST',\r\n                    headers:{'Content-Type':'application/json'},\r\n                    body:JSON.stringify({item:'account'}),\r\n                    credentials:'include'\r\n                }\r\n            })\r\n        }\r\n\r\n    },[dataInsert,errorInsert])\r\n\r\n    useEffect(()=>{\r\n        if (dataUpdate && dataUpdate.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n        else if (dataUpdate && !dataUpdate.error) {\r\n            alert('Update Successful!')\r\n            changeInputStateUpdate(['','','',''])\r\n            changeParamSelectAccount({\r\n                url:'./SelectItem',\r\n                init:{\r\n                    method:'POST',\r\n                    headers:{'Content-Type':'application/json'},\r\n                    body:JSON.stringify({item:'account'}),\r\n                    credentials:'include'\r\n                }\r\n            })\r\n        }\r\n    },[dataUpdate,errorUpdate])\r\n\r\n    useEffect(()=>{\r\n        if (dataDelete && dataDelete.auth===false) {\r\n            alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n            changeAuth(false);\r\n        }\r\n        else if (dataDelete && !dataDelete.error) {\r\n            alert('Delete Successful!')\r\n            changeParamSelectAccount({\r\n                url:'./SelectItem',\r\n                init:{\r\n                    method:'POST',\r\n                    headers:{'Content-Type':'application/json'},\r\n                    body:JSON.stringify({item:'account'}),\r\n                    credentials:'include'\r\n                }\r\n            })\r\n        }\r\n    },[dataDelete,errorDelete])\r\n\r\n    //attach bootstrap/jquery eventlisteners and callbacks\r\n    useEffect(()=>{\r\n\r\n        if (collapsibleElementID && accounts) {\r\n            collapsibleElementID.forEach(ID=>{\r\n                $('#'+ID).on('show.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-plus-square').addClass('fa-minus-square');\r\n                    \r\n                })\r\n                $('#'+ID).on('hide.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-minus-square').addClass('fa-plus-square');\r\n                })\r\n                \r\n        })\r\n    }\r\n\r\n    },[accounts])\r\n    \r\n    function populateAccount(data,field) {\r\n        const glCategory=field[0].name;\r\n        const glAccount=field[1].name;\r\n        const glDesc=field[2].name;\r\n        const glStatus=field[3].name;\r\n\r\n        const glCategoryAlreadyParsed=[];\r\n        const result=[];\r\n\r\n        data.forEach(item=>{\r\n            if (glCategoryAlreadyParsed.indexOf(item[glCategory])===-1) {\r\n                glCategoryAlreadyParsed.push(item[glCategory]);\r\n                result.push(\r\n                    (<div key={item[glCategory]}>\r\n                        <div className='row py-1 bg-dark text-white' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[glCategory].replace(/[ ._()]/g,'')}>\r\n                            <p className='col-1'><i id={'plusminus'+item[glCategory].replace(/[ ._()]/g,'')} className='fa fa-plus-square mt-1 text-white'></i></p>\r\n                            <p className='col'>{item[glCategory]}</p>\r\n                        </div>\r\n                        <div className='collapse navbar-collapse bg-secondary' style={{marginLeft:'-15px',marginRight:'-15px'}} id={item[glCategory].replace(/[ ._()]/g,'')}>\r\n                            {data.map((item2,i)=>{\r\n                                if (item2[glCategory]===item[glCategory]) \r\n                                    return (\r\n                                    <div className='row py-1 border-bottom border-white text-white' style={{margin:0}} key={item2[glAccount]}>\r\n                                        <div className='offset-1 col-5 col-lg-7'>{item2[glDesc]}</div>\r\n                                        <p className='col-3 col-lg-2'>{item2[glAccount]}</p>\r\n                                        {item2[glStatus]==='NORMAL'? \r\n                                            (<div className='col-3 col-lg-2'>\r\n                                                <button className='btn btn-info' onClick={(e)=>{\r\n                                                    changeParamDelete({\r\n                                                        url:'./DeleteItem',\r\n                                                        init:{\r\n                                                            method:'POST',\r\n                                                            headers:{'Content-Type':'application/json'},\r\n                                                            body:JSON.stringify({\r\n                                                                item:'account',\r\n                                                                id:item2[glAccount]\r\n                                                            }),\r\n                                                            credentials:'include'\r\n                                                        }\r\n                                                    })\r\n                                                }}>Del</button>\r\n                                            </div>):null\r\n                                            }\r\n                                        \r\n                                    </div>)\r\n                                    }\r\n                                    )}\r\n                                    \r\n                        </div>\r\n                    </div>\r\n                    )\r\n\r\n                )\r\n            }\r\n        })\r\n        changeGLCategoryList(glCategoryAlreadyParsed.map(category=>\r\n            (<option key={category} value={category}>\r\n                {category}\r\n            </option>)))\r\n        changeGLAccountList(data.map(item=>{\r\n            if(item[glStatus]==='NORMAL')\r\n                 return (<option key={item[glAccount]?item[glAccount]:Math.random()} value={item[glAccount]}>\r\n                    {item[glAccount]+' | '+item[glDesc]}\r\n                </option>)\r\n        })\r\n        \r\n    )\r\n        changeCollapsibleElementID(glCategoryAlreadyParsed.map(category=>category.replace(/[ ._()]/g,'')))\r\n        changeGLAccountArray(data.map(item=>item[glAccount]+''));\r\n        return result;\r\n    }\r\n    \r\n    function onChangeCreate(value,order) {\r\n        changeInputStateCreate([...inputStateCreate.slice(0,order),value,...inputStateCreate.slice(order+1)])\r\n    }\r\n    function onChangeUpdate(value,order) {\r\n        changeInputStateUpdate([...inputStateUpdate.slice(0,order),value,...inputStateUpdate.slice(order+1)])\r\n    }\r\n    \r\n    let errorDisplay=null;\r\n\r\n    if ((dataSelectAccount && dataSelectAccount.error) || errorSelectAccount ||(dataInsert && dataInsert.error) || errorInsert ||\r\n    (dataUpdate && dataUpdate.error) || errorUpdate || (dataDelete && dataDelete.error) || errorDelete) \r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectAccount && dataSelectAccount.error? 'Account List RETRIEVAL for item failed errno: '+dataSelectAccount.error.errno\r\n            +' code: '+dataSelectAccount.error.code+' message: '+dataSelectAccount.error.sqlMessage:null}\r\n            {errorSelectAccount? 'Account List RETRIEVAL for item failed '+errorSelectAccount : null}\r\n\r\n            {dataInsert && dataInsert.error? 'Data INSERT for item failed errno: '+dataInsert.error.errno+' code: '+dataInsert.error.code+' message: '+dataInsert.error.sqlMessage:null}\r\n            {errorInsert? 'Data INSERT for item failed '+errorInsert : null}\r\n\r\n            {dataUpdate && dataUpdate.error? 'Data UPDATE for item failed errno: '+dataUpdate.error.errno+' code: '+dataUpdate.error.code+' message: '+dataUpdate.error.sqlMessage:null}\r\n            {errorUpdate? 'Data UPDATE for item failed '+errorUpdate : null}\r\n            \r\n            {dataDelete && dataDelete.error? 'Data DELETE for item failed errno: '+dataDelete.error.errno+' code: '+dataDelete.error.code+' message: '+dataDelete.error.sqlMessage:null}\r\n            {errorDelete? 'Data DELETE for item failed '+errorDelete : null}\r\n        </div>)\r\n\r\n    return (\r\n            <AppLayout>\r\n                <div className='container pt-3'>\r\n                    <h3>Account Maintenance</h3>\r\n                    {errorDisplay}\r\n                    <section className='container px-0'>\r\n                        <div className='row'>\r\n                            <form className='col-md-6' onSubmit={(e)=>{\r\n                                e.preventDefault();\r\n                                if (GLAccountArray.indexOf(inputStateCreate[1])!==-1)\r\n                                    alert('Account Code Already Exist! Please amend')\r\n\r\n                                changeParamInsert({\r\n                                    url:'./InsertItem',\r\n                                    init:{\r\n                                        method:'POST',\r\n                                        headers:{'Content-Type':'application/json'},\r\n                                        body:JSON.stringify({\r\n                                                item:'account',\r\n                                                param:inputStateCreate\r\n                                        }),\r\n                                        credentials:'include'\r\n                                    }\r\n                                })\r\n                                \r\n                                }}>\r\n                                <fieldset className='px-3 form-group border border-secondary pb-4 rounded'>\r\n                                    <legend className='col-form-label col-4 offset-4 text-center' ><h6>Create Account</h6></legend>\r\n                                    <label className='mt-3' htmlFor='createGLCategory' >GL Category</label>\r\n                                    <select id='createGLCategory' required className='form-control' onChange={(e)=>{\r\n                                    onChangeCreate(e.target.value,0)\r\n                                    \r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCategoryList}\r\n                                    </select>\r\n                                    <label htmlFor='accountCode' className='mt-3'>Account Code</label>\r\n                                    <input id='accountCode' type='number' required min='100' max='999' className='form-control'\r\n                                    value={inputStateCreate[1]} onChange={(e)=>onChangeCreate(e.target.value,1)}/>\r\n                                    <label htmlFor='createDescription' className='mt-3'>Description</label>\r\n                                    <input id='createDescription' type='text' required maxLength='45' required className='form-control'\r\n                                    value={inputStateCreate[2]} onChange={(e)=>onChangeCreate(e.target.value,2)}/>\r\n                                    <button type='submit' className='btn btn-success text-white mt-3'>Create</button>\r\n                                </fieldset>\r\n\r\n\r\n                            </form>\r\n                            <form className='col-md-6' onSubmit={(e)=>{\r\n                                e.preventDefault();\r\n                                if (GLAccountArray.indexOf(inputStateUpdate[2])!==-1 && inputStateUpdate[2]!==inputStateUpdate[0])\r\n                                    alert('Account Code Already Exist! Please amend')\r\n\r\n                                changeParamUpdate({\r\n                                    url:'./UpdateItem',\r\n                                    init:{\r\n                                        method:'POST',\r\n                                        headers:{'Content-Type':'application/json'},\r\n                                        body:JSON.stringify({\r\n                                                item:'account',\r\n                                                param:inputStateUpdate\r\n                                        }),\r\n                                        credentials:'include'\r\n                                    }\r\n                                })\r\n                                \r\n                                }}>\r\n                                <fieldset className='px-3 form-group border border-secondary pb-4 rounded'>\r\n                                    <legend className='col-form-label col-4 offset-4 text-center' ><h6>Update Account</h6></legend>\r\n                                    <label className='mt-3' htmlFor='existingGLCode' >Existing GL Code</label>\r\n                                    <select id='existingGLCode' required className='form-control' value={inputStateUpdate[0]} onChange={(e)=>{\r\n                                        let GLCategory='';\r\n                                        let GLDesc='';\r\n                                        dataSelectAccount.data[0].forEach(data=>{\r\n                                            if(data[dataSelectAccount.field[0][1].name]+''===e.target.value) {\r\n                                                GLCategory=data[dataSelectAccount.field[0][0].name]?data[dataSelectAccount.field[0][0].name]:'';\r\n                                                GLDesc=data[dataSelectAccount.field[0][2].name]?data[dataSelectAccount.field[0][2].name]:'';\r\n                                            }\r\n                                        })\r\n                                        changeInputStateUpdate([e.target.value,GLCategory,e.target.value,GLDesc])\r\n\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLAccountList}\r\n                                    </select>\r\n                                    <label className='mt-3' htmlFor='updateGLCategory' >GL Category</label>\r\n                                    <select id='updateGLCategory' required className='form-control' value={inputStateUpdate[1]} onChange={(e)=>{\r\n                                        onChangeUpdate(e.target.value,1)\r\n                                    }}>\r\n                                        <option value=''> -select an option- </option>\r\n                                        {GLCategoryList}\r\n                                    </select>\r\n                                    <label htmlFor='newAccountCode' className='mt-3'>New Account Code</label>\r\n                                    <input id='newAccountCode' type='number' required min='100' max='999' className='form-control'\r\n                                    value={inputStateUpdate[2]} onChange={(e)=>{\r\n                                        onChangeUpdate(e.target.value,2)\r\n                                    }}/>\r\n                                    <label htmlFor='updateDescription' className='mt-3'>Description</label>\r\n                                    <input id='updateDescription' type='text' required maxLength='45' className='form-control'\r\n                                    value={inputStateUpdate[3]} onChange={(e)=>{\r\n                                        onChangeUpdate(e.target.value,3)\r\n                                    }}\r\n                                    />\r\n                                    <button type='submit' className='btn btn-warning text-white mt-3'>Update</button>\r\n                                </fieldset>\r\n\r\n                            </form>\r\n                        </div>\r\n                    </section>\r\n                   \r\n                    <section className='container my-5'>\r\n                        <div className='row text-white bg-info rounded-top py-2'>\r\n                            <button className='col-1 btn btn-info' onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                                $('#'+ID).collapse('hide')\r\n                            )}><i className='fa fa-minus-square text-white'></i></button>\r\n                            <h6 className='col-5 col-lg-7 pt-2'>Description</h6>\r\n                            <h6 className='col-3 col-lg-2 pt-2'>Account Code</h6>\r\n                            <h6 className='col-3 col-lg-2 pt-2'>Delete?</h6>\r\n                        </div>\r\n                        {accounts}\r\n                    </section>\r\n                    \r\n                    \r\n\r\n                    \r\n                </div>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nAccountMaintenance.description='Account Maintenance';\r\nAccountMaintenance.path='/AccountMaintenance';\r\n\r\nexport default AccountMaintenance;","import React from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport Process from '../Shared/Process';\r\nimport ProcessLayout from '../Shared/ProcessLayout';\r\n\r\nfunction JournalEntry(props) {\r\n    return (\r\n            <AppLayout>\r\n                <Process createItemPath='./JournalItem' item='journal'\r\n                render={(list)=>{\r\n                    return (\r\n                    <ProcessLayout description={JournalEntry.description} listname={'Journal'} {...list}/>\r\n                    )}\r\n                }/>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nJournalEntry.description='Journal Entry';\r\nJournalEntry.path='/JournalEntry';\r\n\r\nexport default JournalEntry;","import React,{useState} from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction ProfitAndLoss(props) {\r\n    const [date,changeDate] = useState (getCurrentDate())\r\n    const [companyTitle,changeCompanyTitle] = useState('')\r\n    const history=useHistory();\r\n\r\n    function getCurrentDate() {\r\n        let currDate=new Date();\r\n\r\n        return (currDate.getFullYear()) + (currDate.getMonth() + 1 <10? '-0'+ (currDate.getMonth()+1):'-'+ (currDate.getMonth()+1)) + (currDate.getDate()<10?\r\n        '-0'+currDate.getDate() : '-'+currDate.getDate());\r\n    }\r\n    \r\n    function onClick () {\r\n        history.push('./ProfitAndLossItem?date='+date+'&companyTitle='+companyTitle)\r\n    }\r\n\r\n    return (\r\n            <AppLayout>\r\n                <div className='container pt-3'>\r\n                    <h3>Profit And Loss Statement</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    <form onSubmit={(e)=>{e.preventDefault();onClick()}}>\r\n                        <div className='form-group form-row mt-5'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='date' id='date' onChange={(e)=>changeDate(e.target.value)} value={date} required \r\n                                className='form-control'/>\r\n                            </div>\r\n                            </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='companyTitle'>Company Title</label>\r\n                            <div className='col-md-6'>\r\n                                <input type='text' id='companyTitle' onChange={(e)=>changeCompanyTitle(e.target.value)} \r\n                                value={companyTitle} className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <button type='submit' className='btn btn-primary'>Preview</button>\r\n                    </form>\r\n                    \r\n\r\n                    \r\n                </div>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nProfitAndLoss.description='Profit And Loss';\r\nProfitAndLoss.path='/ProfitAndLoss';\r\n\r\nexport default ProfitAndLoss;","import React,{useState} from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction BalanceSheet(props) {\r\n    const [date,changeDate] = useState (getCurrentDate())\r\n    const [companyTitle,changeCompanyTitle] = useState('')\r\n    const history=useHistory();\r\n\r\n    function getCurrentDate() {\r\n        let currDate=new Date();\r\n\r\n        return (currDate.getFullYear()) + (currDate.getMonth() + 1 <10? '-0'+ (currDate.getMonth()+1):'-'+ (currDate.getMonth()+1)) + (currDate.getDate()<10?\r\n        '-0'+currDate.getDate() : '-'+currDate.getDate());\r\n    }\r\n    \r\n    function onClick () {\r\n        history.push('./BalanceSheetItem?date='+date+'&companyTitle='+companyTitle)\r\n    }\r\n\r\n    return (\r\n            <AppLayout>\r\n                <div className='container pt-3'>\r\n                    <h3>Balance Sheet Statement</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    <form onSubmit={(e)=>{e.preventDefault();onClick()}}>\r\n                        <div className='form-group form-row mt-5'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='date'>Date <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='date' id='date' onChange={(e)=>changeDate(e.target.value)} value={date} required \r\n                                className='form-control'/>\r\n                            </div>\r\n                            \r\n                            </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='companyTitle'>Company Title</label>\r\n                            <div className='col-md-6'>\r\n                                <input type='text' id='companyTitle' onChange={(e)=>changeCompanyTitle(e.target.value)} \r\n                                value={companyTitle} className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <button type='submit' className='btn btn-primary'>Preview</button>\r\n                    </form>\r\n                    \r\n\r\n                    \r\n                </div>\r\n            </AppLayout>\r\n    )\r\n}\r\n                \r\n            \r\n\r\nBalanceSheet.description='Balance Sheet';\r\nBalanceSheet.path='/BalanceSheet';\r\n\r\nexport default BalanceSheet;","import React,{useState,useEffect,useContext} from 'react';\r\nimport Item from '../Shared/Item';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport authContext from '../Shared/authContext';\r\n\r\n\r\n\r\nfunction JournalItem (props) {\r\n    const url={\r\n        item:new URLSearchParams(props.location.search).get('item'),\r\n        id:new URLSearchParams(props.location.search).get('id'),\r\n    }\r\n\r\n    const [{data:dataSelectGLCode,error:errorSelectGLCode}]=useFetch({\r\n        url:'./getEligibleGLAccount',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'journal'}),\r\n            credentials:'include'\r\n        }\r\n    });//extension of Item component\r\n\r\n    \r\n    const linePosition=4;\r\n\r\n    const [GLCodeList,changeGLCodeList] = useState(null);\r\n    const [inputState,changeInputState]=useState(['','','','',[]])\r\n    \r\n    const [notBalanced,changeNotBalanced]=useState(false);\r\n    const {changeAuth} = useContext(authContext);\r\n\r\n    useEffect(()=>{\r\n\r\n        if (dataSelectGLCode && dataSelectGLCode.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!');\r\n                changeAuth(false);\r\n            }\r\n        else if (dataSelectGLCode && dataSelectGLCode.data && dataSelectGLCode.field) \r\n            changeGLCodeList(dataSelectGLCode.data.map(data=>(\r\n            <option key={data[dataSelectGLCode.field[0].name]} value={data[dataSelectGLCode.field[0].name]}>\r\n                {(data[dataSelectGLCode.field[0].name]?data[dataSelectGLCode.field[0].name]:'')\r\n                +' | '+(data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'')}\r\n            </option>)\r\n                )\r\n            )\r\n        \r\n    },[dataSelectGLCode,errorSelectGLCode])\r\n\r\n    function onChange(value,order) {\r\n        changeInputState([...inputState.slice(0,order),value,...inputState.slice(order+1)])\r\n    }\r\n    function onChangeJournallineInput(e,order,lineNumber,innerOrder) {\r\n        changeInputState(inputState.slice(0,order)\r\n        .concat([inputState[order].slice(0,lineNumber)\r\n        .concat([inputState[order][lineNumber].slice(0,innerOrder)\r\n        .concat(e)\r\n        .concat(inputState[order][lineNumber].slice(innerOrder+1))])\r\n        .concat(inputState[order].slice(lineNumber+1))])\r\n        .concat(inputState.slice(order+1)))\r\n    }\r\n\r\n    function calculateDebitTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((journallineSet,i)=>{\r\n            if(inputState[linePosition][i][4])\r\n             total+=parseFloat(inputState[linePosition][i][4])\r\n        })\r\n        return total;\r\n    }\r\n\r\n    function calculateCreditTotal() {\r\n        let total=0\r\n        inputState[linePosition].forEach((journallineSet,i)=>{\r\n            if(inputState[linePosition][i][5]) {\r\n             total+=parseFloat(inputState[linePosition][i][5])\r\n            }\r\n        })\r\n        return total;\r\n    }\r\n    \r\n    function journallineListRender(disabled) {\r\n    return(\r\n        inputState[linePosition].map((journallineSet,i)=>\r\n        <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}} key={i}>\r\n            {/*set fixed flex basis so layout is consistent with h6 header as well*/}\r\n            <label htmlFor='lineNumber' className='sr-only'/>\r\n            <input type='number' id='lineNumber' className='col form-control rounded-0 text-center' value={inputState[linePosition][i][0]?\r\n            inputState[linePosition][i][0]:''} \r\n            onChange={(e)=>e} style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}} disabled={disabled}/>\r\n\r\n            <div className='col input-group' style={{flex:'1 0 120px',paddingLeft:0,paddingRight:0}}>\r\n                <label htmlFor='glCode' className='sr-only'/>\r\n                <input type='text' id ='glCode' required className='form-control rounded-0' disabled={disabled}\r\n                style={{paddingLeft:10}}\r\n                value={inputState[linePosition][i][1]?inputState[linePosition][i][1]:''} onChange={(e)=>e}/>\r\n                <select className='form-control rounded-0' style={{flex:'0 1 0'}} disabled={disabled} onChange={(e)=>{\r\n                        let glDescription='';\r\n                        dataSelectGLCode.data.forEach(data=>{\r\n                            /*don't use strict comparison because options initial integer value obtained from DB \r\n                            is converted by React to string when applied to e.target.value*/\r\n                            if(data[dataSelectGLCode.field[0].name]==e.target.value) \r\n                                glDescription=data[dataSelectGLCode.field[1].name]?data[dataSelectGLCode.field[1].name]:'';\r\n                        })\r\n\r\n                        changeInputState(inputState.slice(0,linePosition)\r\n                        .concat([inputState[linePosition].slice(0,i)\r\n                        .concat([inputState[linePosition][i].slice(0,1)\r\n                        .concat(e.target.value).concat(glDescription)\r\n                        .concat(inputState[linePosition][i].slice(3))])\r\n                        .concat(inputState[linePosition].slice(i+1))])\r\n                        .concat(inputState.slice(linePosition+1)))\r\n        \r\n                        }}>\r\n                    <option value=''>-select an option- </option>\r\n                    {GLCodeList}\r\n                </select>\r\n            </div>\r\n            <label htmlFor='glDescription' className='sr-only'/>\r\n            <input type='text' id='glDescription' required className='col form-control rounded-0' value={inputState[linePosition][i][2]?\r\n            inputState[linePosition][i][2]:''} \r\n            onChange={(e)=>e} disabled={disabled}\r\n            style={{flex:'1 0 120px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n            <label htmlFor='otherDescription' className='sr-only'/>\r\n            <input type='text' id='otherDescription' className='col form-control rounded-0' value={inputState[linePosition][i][3]?\r\n            inputState[linePosition][i][3]:''} \r\n            onChange={(e)=>onChangeJournallineInput(e.target.value,linePosition,i,3)} disabled={disabled}\r\n            style={{flex:'1 0 225px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n            <label htmlFor='debit' className='sr-only'/>\r\n            <input type='number' min='0' step='.01' id='debit' className='col form-control rounded-0 text-center' value={inputState[linePosition][i][4]?\r\n            inputState[linePosition][i][4]:''} \r\n            onChange={(e)=>onChangeJournallineInput(e.target.value,linePosition,i,4)} disabled={disabled}\r\n            style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n            <label htmlFor='credit' className='sr-only'/>\r\n            <input type='number' min='0' step='.01' id='credit' className='col form-control rounded-0 text-center' value={inputState[linePosition][i][5]?\r\n            inputState[linePosition][i][5]:''} \r\n            onChange={(e)=>onChangeJournallineInput(e.target.value,linePosition,i,5)} disabled={disabled}\r\n            style={{flex:'1 0 90px',paddingLeft:10,paddingRight:0}}/>\r\n\r\n        </div>)\r\n        )\r\n    }\r\n    \r\n    \r\n    /*error display extension from error display already provided by Item Component*/\r\n    let errorDisplayExtension=null;\r\n    \r\n    \r\n    if ((dataSelectGLCode && dataSelectGLCode.error) || errorSelectGLCode) \r\n    errorDisplayExtension=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectGLCode && dataSelectGLCode.error? 'GL Code List RETRIEVAL for item failed errno: '+dataSelectGLCode.error.errno\r\n            +' code: '+dataSelectGLCode.error.code+' message: '+dataSelectGLCode.error.sqlMessage:null}\r\n            {errorSelectGLCode? 'GL Code List RETRIEVAL for item failed '+errorSelectGLCode : null}\r\n        </div>)\r\n\r\n    \r\n    return (\r\n        <Item inputState={inputState} changeInputState={changeInputState} url={url} item='journal' successPath='/JournalEntry'>\r\n            {\r\n            ({usage,disabled,changeDisabled,onInsert,onUpdate,onDelete,errorDisplay,inputNumberRender})=> \r\n            (<AppLayout >\r\n                <div className='container pb-5 px-md-5'>\r\n\r\n                    {/*Heading renders depending on INSERT or UPDATE/DELETE state*/}\r\n\r\n                    <h3 className='my-3'>{(usage==='INSERT'? 'Create':'Update') + ' '+ JournalItem.description}</h3>\r\n                    <small className='text-warning'>* required</small>\r\n                    {errorDisplay}\r\n                    {errorDisplayExtension}\r\n\r\n                    {/*onInsert and onUpdate needs to be attached to HTML form onSubmit eventhandler since native HTML form \r\n                    validation only works if submit event is handled here*/}\r\n                    <form onSubmit={(e)=>{e.preventDefault(); if(usage==='INSERT') onInsert(); else onUpdate()}}>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='journalNumber' >Journal Number <span className='text-warning'>*</span></label>\r\n                            {inputNumberRender({\r\n                                onChange:onChange,\r\n                                layout:'col-md-4',\r\n                                position:0,\r\n                                labelID:'journalNumber'\r\n                            })\r\n                            }\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='data'>Date <span className='text-warning'>*</span></label>\r\n                            <div className='col-md-4'>\r\n                                <input type='date' id='date' onChange={(e)=>\r\n                                onChange(e.target.value,1)} value={inputState[1]} disabled={disabled} required className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n                        <div className='form-group form-row'>\r\n                            <label className='col-md-2 col-form-label' htmlFor='description'>Description</label>\r\n                            <div className='col-md-10'>\r\n                                <textarea id='description' onChange={(e)=>\r\n                                onChange(e.target.value,2)} \r\n                                value={inputState[2]} disabled={disabled} className='form-control'/>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <fieldset className='form-group border border-secondary pb-4 rounded px-3'>\r\n                            <legend className='col-form-label col-8 offset-2 col-md-4 offset-md-4 text-center' >\r\n                                <button type='button' className='btn btn-primary' disabled={disabled}\r\n                                onClick={()=>\r\n                                    changeInputState(\r\n                                        inputState.slice(0,linePosition)\r\n                                        .concat([inputState[linePosition].slice(0)\r\n                                            .concat(\r\n                                                [[inputState[linePosition].length+1,'','','','0','0']])])\r\n                                        .concat(inputState.slice(linePosition+1))\r\n                                    )\r\n                                }>\r\n                                    +</button>\r\n                                <h6 className='d-inline-block mx-2 mx-md-4'>Journal Line</h6>\r\n                                <button type='button' className='btn btn-secondary' disabled={disabled} \r\n                                onClick={()=>\r\n                                    changeInputState(\r\n                                        inputState.slice(0,linePosition)\r\n                                        .concat([inputState[linePosition].slice(0,inputState[linePosition].length-1)])\r\n                                        .concat(inputState.slice(linePosition+1))\r\n                                    )\r\n                                }>-</button>\r\n                            </legend>\r\n                            <div className=\"overflow-auto\">\r\n                                {/*flex nowrap and overflow auto for mobile view*/}\r\n                                <div className='row flex-nowrap' style={{marginLeft:0,marginRight:0}}>\r\n                                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Line Number</h6>\r\n                                    <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>GL Code</h6>\r\n                                    <h6 className='col' style={{flex:'1 0 120px',paddingLeft:10,paddingRight:10}}>GL Desc</h6>\r\n                                    <h6 className='col' style={{flex:'1 0 225px',paddingLeft:10,paddingRight:10}}>Other Description</h6>\r\n                                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Debit</h6>\r\n                                    <h6 className='col' style={{flex:'1 0 90px',paddingLeft:10,paddingRight:10}}>Credit</h6>\r\n                                </div>\r\n                                {journallineListRender(disabled)}\r\n                                    \r\n                            </div>\r\n                            {notBalanced? (\r\n                                <div className=\"alert alert-danger mt-3\">\r\n                                    Journal Debit and Credit Entries not balanced!\r\n                                </div>\r\n                            ):null}\r\n                            <h5 className='text-right my-3'> \r\n                                {'Total Debit: '+numberFormatParser(calculateDebitTotal())}\r\n                            </h5>\r\n                            <h5 className='text-right my-3'>\r\n                                {'Total Crebit: '+numberFormatParser(calculateCreditTotal())}\r\n                            </h5>\r\n                                \r\n                        </fieldset>\r\n                        <div>\r\n                            <button type='submit' onClick={e=>{\r\n                                if(calculateDebitTotal()!==calculateCreditTotal()){\r\n                                    e.preventDefault();\r\n                                    changeNotBalanced(true);\r\n                                }\r\n                            }} className='btn btn-primary mx-1 my-1'>Submit</button>\r\n                            {/*If state is 'INSERT', no Edit button & Delete button*/}\r\n                            {usage==='UPDATE/DELETE'?(\r\n                                <button type='button' onClick={(e)=>{changeDisabled(false)}} className='btn btn-outline-primary mx-1 my-1'>Edit</button>\r\n                                ):null}\r\n                            {usage==='UPDATE/DELETE'?(\r\n                                <button type='button' onClick={(e)=>{onDelete()}} className='btn btn-danger mx-1 my-1'>Delete</button>\r\n                                ):null}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </AppLayout>)\r\n            }\r\n        \r\n        </Item>\r\n    )\r\n}\r\nJournalItem.description='Journal';\r\nJournalItem.path='/JournalItem';\r\n\r\nexport default JournalItem;\r\n\r\n","import React,{useState,useEffect,useContext} from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport numberFormatParser from '../Shared/numberFormatParser';\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport sortData from '../Shared/sort';\r\nimport $ from 'jquery';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction ProfitAndLossItem (props) {\r\n\r\n    const url={\r\n        date:new URLSearchParams(props.location.search).get('date'),\r\n        companyTitle:new URLSearchParams(props.location.search).get('companyTitle'),\r\n    }\r\n    const [{data:dataSelectProfitAndLoss,error:errorSelectProfitAndLoss}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'profit_and_loss'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n    const [sortedData,changeSortedData]=useState(null);\r\n    const [grossProfit,changeGrossProfit]=useState(null);\r\n    const [grossProfitTotal,changeGrossProfitTotal]=useState(0);\r\n    const [expenses,changeExpenses]=useState(null);\r\n    const [expensesTotal,changeExpensesTotal]=useState(0);\r\n    const [netProfit,changeNetProfit]=useState(0);\r\n    const [collapsibleElementID,changeCollapsibleElementID]=useState([])\r\n    const [printFormat,changePrintFormat]=useState(false);\r\n\r\n    const {changeAuth} = useContext(authContext)\r\n    const history=useHistory();\r\n\r\n    useEffect(()=>{\r\n         if (dataSelectProfitAndLoss && dataSelectProfitAndLoss.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!')\r\n                changeAuth(false)\r\n            }\r\n                \r\n        else if (dataSelectProfitAndLoss && dataSelectProfitAndLoss.data && dataSelectProfitAndLoss.field) {\r\n            let glDescAlreadyParsed=[];\r\n            const data=dataSelectProfitAndLoss.data[1];\r\n            const field=dataSelectProfitAndLoss.field[1];\r\n            const glDesc=field[2].name;\r\n            let ID=[]\r\n\r\n            \r\n            data.forEach(item=>{\r\n                let newObject={}\r\n                if(glDescAlreadyParsed.indexOf(item[glDesc])===-1) {\r\n                    glDescAlreadyParsed.push(item[glDesc])\r\n                    newObject[item[glDesc]]=data.filter(item2=>item2[glDesc]===item[glDesc])\r\n                    changeSortedData(sortedData=>(Object.assign({},{...sortedData},newObject)))\r\n                }\r\n            })\r\n            \r\n            data.forEach(item=>{\r\n                if(ID.indexOf(item[glDesc].replace(/[ ._()]/g,''))===-1) \r\n                    ID.push(item[glDesc].replace(/[ ._()]/g,''))\r\n            })\r\n            changeCollapsibleElementID(ID)\r\n        }\r\n\r\n    },[dataSelectProfitAndLoss,errorSelectProfitAndLoss])\r\n    \r\n    useEffect(()=>{\r\n        if(sortedData) {\r\n            const category=dataSelectProfitAndLoss.data[0].map(category=>category[dataSelectProfitAndLoss.field[0][0].name])\r\n\r\n            changeGrossProfit(populateCategory(category.slice(0,4),dataSelectProfitAndLoss.data[1],sortedData,dataSelectProfitAndLoss.field[1]))\r\n            changeGrossProfitTotal(numberFormatParser(calculateCategoryTotal(category.slice(0,4),dataSelectProfitAndLoss.data[1],dataSelectProfitAndLoss.field[1])));\r\n\r\n            changeExpenses(populateCategory(category.slice(4),dataSelectProfitAndLoss.data[1],sortedData,dataSelectProfitAndLoss.field[1]))\r\n            changeExpensesTotal(numberFormatParser(calculateCategoryTotal(category.slice(4),dataSelectProfitAndLoss.data[1],dataSelectProfitAndLoss.field[1])));\r\n            changeNetProfit(numberFormatParser(calculateCategoryTotal(category,dataSelectProfitAndLoss.data[1],dataSelectProfitAndLoss.field[1])));\r\n        \r\n            \r\n        }\r\n    },[sortedData,printFormat])\r\n\r\n    //attach bootstrap/jquery eventlisteners and callbacks\r\n    useEffect(()=>{\r\n\r\n        if (collapsibleElementID && grossProfit && expenses) {\r\n            collapsibleElementID.forEach(ID=>{\r\n                $('#'+ID).on('show.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-plus-square').addClass('fa-minus-square');\r\n                })\r\n                $('#'+ID).on('hide.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-minus-square').addClass('fa-plus-square');\r\n                })\r\n                \r\n        })\r\n    }\r\n        \r\n    },[grossProfit,expenses])\r\n\r\n    /*single category or array of categories*/\r\n    function calculateCategoryTotal(category=[],data,field) {\r\n        \r\n        const glCategory=field[0].name;\r\n        const itemDate=field[3].name; \r\n        const itemDebit=field[6].name;\r\n        const itemCredit=field[7].name;\r\n        \r\n        return data.reduce((a,b)=>{        \r\n            if (new Date(b[itemDate])<=new Date(url.date) \r\n            && (new Date(b[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01')) \r\n            && category.indexOf(b[glCategory])!==-1) \r\n                return a+b[itemCredit]-b[itemDebit];\r\n            else return a;\r\n        },0)\r\n    }\r\n\r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    function populateCategory(category=[],data,sortedData1,field) {\r\n        return (\r\n            category.map(category=>{\r\n                let accounts=populateAccount(category,data,sortedData1,field);\r\n                if (accounts.length>0)\r\n                    return (\r\n                    <section key={category}>\r\n                        <h6><u>{category}</u></h6>\r\n                            {accounts}\r\n                        <p className='h6 text-right '><u>{'TOTAL : '+numberFormatParser(calculateCategoryTotal([category],data,field))}</u></p>\r\n                    </section>)\r\n                }\r\n            )\r\n        )\r\n    }\r\n    \r\n    function populateAccount(category,data,sortedData1,field) {\r\n        const glCategory=field[0].name;\r\n        const glAccount=field[1].name;\r\n        const glDesc=field[2].name;\r\n        const itemDate=field[3].name;\r\n        const itemType=field[4].name;\r\n        const itemNumber=field[5].name;\r\n        const itemDebit=field[6].name;\r\n        const itemCredit=field[7].name;\r\n        \r\n        const glAccountAlreadyParsed=[];\r\n        const result=[];\r\n        \r\n        data.forEach(item=>{\r\n            if (item[glCategory]===category \r\n                && glAccountAlreadyParsed.indexOf(item[glAccount])===-1\r\n                && (new Date(item[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01'))\r\n                && (new Date(item[itemDate])<=new Date(url.date))\r\n                ) {\r\n                glAccountAlreadyParsed.push(item[glAccount]);\r\n                result.push(\r\n                    (<div key={item[glAccount]}>\r\n                        <div className='row' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[glDesc].replace(/[ ._()]/g,'')}>\r\n                            <i className='fa fa-plus-square mt-1 col-1 d-print-none' id={'plusminus'+item[glDesc].replace(/[ ._()]/g,'')}></i>\r\n                            <p className='col-2 mb-0'>{item[glAccount]}</p>\r\n                            <p className='col-6 mb-0'>{item[glDesc]}</p>\r\n                            <i className='col-1 d-none d-print-block'></i>\r\n                            <p className='col-3 text-right mb-0'>{numberFormatParser(data.reduce(\r\n                                (a,b)=>{\r\n                                    if (b[glAccount]===item[glAccount] \r\n                                        && (new Date(b[itemDate])<= new Date(url.date))\r\n                                        && (new Date(b[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01'))\r\n                                    )\r\n                                        return a+b[itemCredit]-b[itemDebit]\r\n                                    else return a\r\n                                },0)\r\n                            )}\r\n                            </p>\r\n                        </div>\r\n                        <div className='collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2' id={item[glDesc].replace(/[ ._()]/g,'')}>\r\n                            <div style={printFormat?null:{overflowY:'auto',overflowX:'hidden',maxHeight:'60vh'}}>\r\n                                <table id='table' className={printFormat?'table table-hover':'table table-hover table-responsive-md'}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='date'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemDate,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                DATE\r\n                                                <i id={'date'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='type'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemType,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                ITEM TYPE\r\n                                                <i id={'type'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='number'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemNumber,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                ITEM NUMBER\r\n                                                <i id={'number'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='debit'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemDebit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                DR\r\n                                                <i id={'debit'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='credit'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemCredit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                CR\r\n                                                <i id={'credit'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {sortedData1[item[glDesc]].map((item2,i)=>{\r\n                                            if (item2[glAccount]===item[glAccount]\r\n                                                && (new Date(item2[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01'))\r\n                                                && (new Date(item2[itemDate])<=new Date(url.date))\r\n                                                ) \r\n                                                return (\r\n                                                    <tr key={i} style={{cursor:'pointer'}} onClick={(e)=>\r\n                                                        history.push('./'+createLink(item2[itemType].toLowerCase(),item2[itemNumber]))\r\n                                                        }>\r\n                                                        <td className='text-nowrap'>{dateFormatParser(item2[itemDate])}</td>\r\n                                                        <td className='text-nowrap'>{item2[itemType]}</td>\r\n                                                        <td className='text-nowrap'>{item2[itemNumber]}</td>\r\n                                                        <td className='text-nowrap'>{numberFormatParser(item2[itemDebit])}</td>\r\n                                                        <td className='text-nowrap'>{numberFormatParser(item2[itemCredit])}</td>\r\n                                                    </tr>\r\n                                                )\r\n                                            else return null; \r\n                                            })\r\n                                        }\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    )\r\n                )\r\n            }\r\n        })\r\n            \r\n        return result;\r\n    }\r\n\r\n\r\n    let errorDisplay=null;\r\n    if ((dataSelectProfitAndLoss && dataSelectProfitAndLoss.error) || errorSelectProfitAndLoss) \r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectProfitAndLoss && dataSelectProfitAndLoss.error? 'Profit and Loss Data RETRIEVAL failed errno: '+dataSelectProfitAndLoss.error.errno\r\n            +' code: '+dataSelectProfitAndLoss.error.code+' message: '+dataSelectProfitAndLoss.error.sqlMessage:null}\r\n            {errorSelectProfitAndLoss? 'Profit and Loss Data RETRIEVAL failed '+errorSelectProfitAndLoss : null}\r\n        </div>)\r\n\r\n    return (\r\n        <AppLayout>\r\n            <div className='container py-3 py-md-5 px-md-5 position-relative'>\r\n                <h4 className='text-center'>{url.companyTitle}</h4>\r\n                <h4 className='text-center mb-4'>\r\n                    {'Profit And Loss as at ' + dateFormatParser(url.date)} \r\n                </h4>\r\n                {errorDisplay}\r\n                <div className='text-right d-print-none mb-4'>\r\n                    <div className=\"form-check form-check-inline\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"printFormat\" checked={printFormat}\r\n                        onChange={(e)=>{\r\n                            if (e.target.checked) \r\n                                changePrintFormat(true)\r\n                            else changePrintFormat(false)\r\n                        }}/>\r\n                        <label className=\"form-check-label\" htmlFor=\"printFormat\"> Print Format</label>\r\n                    </div>\r\n                    <button className='btn btn-dark mr-1 mr-md-2'  \r\n                        onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                            $('#'+ID).collapse('show')\r\n                        )}> <i className='fa fa-plus-square'></i> Expand</button>\r\n                    <button className='btn btn-light'  \r\n                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                        $('#'+ID).collapse('hide')\r\n                    )}> <i className='fa fa-minus-square'></i> Collapse</button>\r\n                </div>\r\n                {grossProfit}\r\n                <div className='row my-3 rounded' style={{backgroundColor:'rgba(248,222,126,0.3)'}}>\r\n                    <p className='col text-left my-2 h6'>GROSS PROFIT TOTAL</p>\r\n                    <p className='col text-right my-2 h6'>{grossProfitTotal}</p>\r\n                </div>\r\n                \r\n                {expenses}\r\n                <div className='row my-3 rounded' style={{backgroundColor:'rgba(248,222,126,0.3)'}}>\r\n                    <p className='col text-left my-2 h6'>EXPENSES TOTAL</p>\r\n                    <p className='col text-right my-2 h6'>{expensesTotal}</p>\r\n                </div>\r\n                <div className='row my-3 rounded' style={{backgroundColor:'rgba(248,222,126,0.6)'}}>\r\n                    <p className='col text-left my-2 h6'>NET PROFIT</p>\r\n                    <p className='col text-right my-2 h6'>{netProfit}</p>\r\n                </div>\r\n                \r\n\r\n            </div>\r\n        </AppLayout>\r\n    )\r\n}\r\n\r\nProfitAndLossItem.description='Profit And Loss';\r\nProfitAndLossItem.path='/ProfitAndLossItem';\r\n\r\nexport default ProfitAndLossItem;","import React,{useState,useEffect,useContext} from 'react';\r\nimport AppLayout from '../Shared/AppLayout';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport numberFormatParser from '../Shared/numberFormatParser'\r\nimport dateFormatParser from '../Shared/dateFormatParser';\r\nimport sortData from '../Shared/sort';\r\nimport $ from 'jquery'\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nfunction BalanceSheetItem (props) {\r\n\r\n    const url={\r\n        date:new URLSearchParams(props.location.search).get('date'),\r\n        companyTitle:new URLSearchParams(props.location.search).get('companyTitle'),\r\n    }\r\n    const [{data:dataSelectBalanceSheet,error:errorSelectBalanceSheet}]=useFetch({\r\n        url:'./SelectItem',\r\n        init:{\r\n            method:'POST',\r\n            headers:{'Content-Type':'application/json'},\r\n            body:JSON.stringify({item:'balance_sheet'}),\r\n            credentials:'include'\r\n        }\r\n    });\r\n    const [sortedData,changeSortedData]=useState(null);\r\n    const [netAssets,changeNetAssets]=useState(null);\r\n    const [netAssetsTotal,changeNetAssetsTotal]=useState(0);\r\n    const [netEquity,changeNetEquity]=useState(null);\r\n    const [netEquityTotal,changeNetEquityTotal]=useState(0);\r\n    const [currentProfitAndLoss,changeCurrentProfitAndLoss]=useState(0);\r\n    const [retainedEarnings,changeRetainedEarnings]=useState(0);\r\n    const [collapsibleElementID,changeCollapsibleElementID]=useState([])\r\n    const [printFormat,changePrintFormat]=useState(false);\r\n\r\n    const {changeAuth} = useContext(authContext)\r\n    const history=useHistory();\r\n\r\n    useEffect(()=>{\r\n         if (dataSelectBalanceSheet && dataSelectBalanceSheet.auth===false) {\r\n                alert('Cookies Expired or Authorisation invalid. Please Login again!')\r\n                changeAuth(false)\r\n            }\r\n                \r\n        else if (dataSelectBalanceSheet && dataSelectBalanceSheet.data && dataSelectBalanceSheet.field) {\r\n            let glDescAlreadyParsed=[];\r\n            let itemNameAlreadyParsed=[];\r\n            const data=dataSelectBalanceSheet.data[1];\r\n            const field=dataSelectBalanceSheet.field[1];\r\n            const glDesc=field[2].name;\r\n            const itemName=field[3].name;\r\n\r\n            let ID=[]\r\n\r\n            data.forEach(item=>{\r\n                let newObject={}\r\n                if(glDescAlreadyParsed.indexOf(item[glDesc])===-1) {\r\n                    glDescAlreadyParsed.push(item[glDesc])\r\n                    newObject[item[glDesc]]=data.filter(item2=>item2[glDesc]===item[glDesc])\r\n                    changeSortedData(sortedData=>(Object.assign({},{...sortedData},newObject)))\r\n                }\r\n            })\r\n\r\n            data.forEach(item=>{\r\n                let newObject={}\r\n                if(itemNameAlreadyParsed.indexOf(item[itemName])===-1 && item[itemName]!==null) {\r\n                    itemNameAlreadyParsed.push(item[itemName])\r\n                    newObject[item[itemName]]=data.filter(item2=>item2[itemName]===item[itemName])\r\n                    changeSortedData(sortedData=>(Object.assign({},{...sortedData},newObject)))\r\n                }\r\n            })\r\n\r\n            dataSelectBalanceSheet.data[1].forEach(item=>{\r\n                if(ID.indexOf(item[glDesc].replace(/[ ._()]/g,''))===-1) \r\n                    ID.push(item[glDesc].replace(/[ ._()]/g,''))\r\n                else if (item[itemName] && ID.indexOf(item[itemName].replace(/[ ._()]/g,''))===-1)\r\n                    ID.push(item[itemName].replace(/[ ._()]/g,''))\r\n                \r\n            })\r\n            changeCollapsibleElementID(ID)\r\n        }\r\n    },[dataSelectBalanceSheet,errorSelectBalanceSheet])\r\n\r\n    useEffect(()=>{\r\n        if(sortedData) {\r\n            const category=dataSelectBalanceSheet.data[0].map(category=>category[dataSelectBalanceSheet.field[0][0].name])\r\n            const currentProfitAndLoss=calculateCurrentProfitAndLoss(dataSelectBalanceSheet.data[2],dataSelectBalanceSheet.field[2]);\r\n            const retainedEarnings=calculateRetainedEarnings(dataSelectBalanceSheet.data[2],dataSelectBalanceSheet.field[2]);\r\n\r\n            changeNetAssets(populateCategory(category.slice(0,6),dataSelectBalanceSheet.data[1],sortedData,dataSelectBalanceSheet.field[1],false))\r\n            changeNetAssetsTotal(numberFormatParser(calculateCategoryTotal(category.slice(0,6),dataSelectBalanceSheet.data[1],dataSelectBalanceSheet.field[1],false)));\r\n\r\n            changeNetEquity(populateCategory(category.slice(6),dataSelectBalanceSheet.data[1],sortedData,dataSelectBalanceSheet.field[1],true))\r\n\r\n            changeCurrentProfitAndLoss(numberFormatParser(currentProfitAndLoss))\r\n            changeRetainedEarnings(numberFormatParser(retainedEarnings))\r\n\r\n            changeNetEquityTotal(numberFormatParser(calculateCategoryTotal(category.slice(6),dataSelectBalanceSheet.data[1],dataSelectBalanceSheet.field[1],true)\r\n            +currentProfitAndLoss+retainedEarnings));\r\n        \r\n            \r\n        }\r\n    },[sortedData,printFormat])\r\n    \r\n    //attach bootstrap/jquery eventlisteners and callbacks\r\n    useEffect(()=>{\r\n\r\n        if (collapsibleElementID && netAssets && netEquity) {\r\n            collapsibleElementID.forEach(ID=>{\r\n                $('#'+ID).on('show.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-plus-square').addClass('fa-minus-square');\r\n                })\r\n                $('#'+ID).on('hide.bs.collapse',e=>{\r\n                    if(e.target===e.currentTarget)\r\n                    $('#plusminus'+ID).removeClass('fa-minus-square').addClass('fa-plus-square');\r\n                })\r\n                \r\n        })\r\n    }\r\n        \r\n    },[netAssets,netEquity])\r\n    \r\n    /*single category or array of categories*/\r\n    function calculateCategoryTotal(category=[],data,field,debitCreditOpposite) {\r\n        \r\n        const glCategory=field[0].name;\r\n        const itemDate=field[4].name; \r\n        const itemDebit=field[7].name;\r\n        const itemCredit=field[8].name;\r\n        \r\n        return data.reduce((a,b)=>{        \r\n            if (new Date(b[itemDate])<=new Date(url.date) && category.indexOf(b[glCategory])!==-1) {\r\n                if (debitCreditOpposite) \r\n                    return a+b[itemCredit]-b[itemDebit];\r\n                else return a+b[itemDebit]-b[itemCredit];\r\n            }\r\n            else return a;\r\n        },0)\r\n    }\r\n\r\n    function calculateCurrentProfitAndLoss(data,field) {\r\n        const itemDate=field[3].name; \r\n        const itemDebit=field[6].name;\r\n        const itemCredit=field[7].name;\r\n        \r\n        return data.reduce((a,b)=>{        \r\n            if (new Date(b[itemDate])<=new Date(url.date) \r\n            && (new Date(b[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01')) \r\n            ) \r\n                    \r\n                return a+b[itemCredit]-b[itemDebit];\r\n            else return a;\r\n        },0)\r\n    }\r\n\r\n    function calculateRetainedEarnings(data,field) {\r\n        const itemDate=field[3].name; \r\n        const itemDebit=field[6].name;\r\n        const itemCredit=field[7].name;\r\n        \r\n        return data.reduce((a,b)=>{        \r\n            if (new Date(b[itemDate])<new Date(new Date(url.date).getFullYear()+'-01-01')) \r\n                return a+b[itemCredit]-b[itemDebit];\r\n            else return a;\r\n        },0)\r\n    }\r\n    \r\n    function createLink(string,id) {\r\n        var WIPstring=string.split(' ');\r\n\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string.toLowerCase()\r\n        })\r\n        WIPstring=WIPstring.map(string=>{\r\n            return string[0].toUpperCase().concat(string.substr(1))\r\n        })\r\n\r\n        return WIPstring.join('')+'Item?item='+string.replace(/ /g,'_')+'&id='+encodeURIComponent(id)\r\n    }\r\n\r\n    function populateCategory(category=[],data,sortedData1,field,debitCreditOpposite) {\r\n        return (\r\n            category.map(category=>{\r\n                let accounts=populateAccount(category,data,sortedData1,field,debitCreditOpposite);\r\n                if (accounts.length>0)\r\n                    return (\r\n                    <section key={category}>\r\n                        <h6><u>{category}</u></h6>\r\n                            {accounts}\r\n                        <p className='h6 text-right my-1'><u>{'TOTAL : '+numberFormatParser(calculateCategoryTotal([category],data,field,debitCreditOpposite))}</u></p>\r\n                    </section>)\r\n                }\r\n            )\r\n        )\r\n    }\r\n    \r\n    function populateAccount(category,data,sortedData1,field,debitCreditOpposite) {\r\n        const glCategory=field[0].name;\r\n        const glAccount=field[1].name;\r\n        const glDesc=field[2].name;\r\n        const itemName=field[3].name;\r\n        const itemDate=field[4].name;\r\n        const itemType=field[5].name;\r\n        const itemNumber=field[6].name;\r\n        const itemDebit=field[7].name;\r\n        const itemCredit=field[8].name;\r\n        \r\n        const glAccountAlreadyParsed=[];\r\n        const result=[];\r\n        \r\n        function getBroughtForwardAmount(item) {\r\n            return data.reduce((a,b)=>{\r\n                if (item[itemName] && (b[itemName]===item[itemName]) && (new Date(b[itemDate])<new Date(new Date(url.date).getFullYear()+'-01-01'))) \r\n                    return a+b[itemDebit]-b[itemCredit]\r\n                else if (!item[itemName] && b[glAccount]===item[glAccount] && \r\n                    (new Date(b[itemDate])<new Date(new Date(url.date).getFullYear()+'-01-01')))\r\n                        return a+b[itemDebit]-b[itemCredit]\r\n                else return a\r\n            },0)\r\n        }\r\n\r\n        \r\n        function populateItemName(targetItem) {\r\n            let itemNameAlreadyParsed=[];\r\n            return (\r\n                data.map(item=>{\r\n                    if (item[glAccount]===targetItem[glAccount] && itemNameAlreadyParsed.indexOf(item[itemName])===-1) {\r\n                        itemNameAlreadyParsed.push(item[itemName]);\r\n                        return (\r\n                        <div key={item[itemName]}>\r\n                            <div className='row my-1 py-1 rounded bg-secondary text-white' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[itemName].replace(/[ ._()]/g,'')}>\r\n                                <p className='col-1'><i className='fa fa-plus-square mt-1 d-print-none' id={'plusminus'+item[itemName].replace(/[ ._()]/g,'')}></i></p>\r\n                                <p className='h6 col-5 mb-0'>{item[itemName]}</p>\r\n                                <p className='h6 col text-right mb-0'>{numberFormatParser(data.reduce(\r\n                                    (a,b)=>{\r\n                                        if(b[itemName]===item[itemName] && (new Date(b[itemDate])<=new Date(url.date))) {\r\n                                            if (debitCreditOpposite) \r\n                                                return a+b[itemCredit]-b[itemDebit];\r\n                                            else return a+b[itemDebit]-b[itemCredit];\r\n                                        }\r\n\r\n                                            \r\n                                        else return a;\r\n                                    },0)\r\n                                )}\r\n                                </p>\r\n                            </div>\r\n                            <div className='collapse navbar-collapse my-2 row pl-3 pl-md-5 pr-2' id={item[itemName].replace(/[ ._()]/g,'')}>\r\n                                <div style={printFormat?\r\n                                    {width:'100%'}:{width:'100%',overflowY:'auto',overflowX:'hidden',maxHeight:'60vh'}}>\r\n                                <table id='table' className={printFormat?'table table-hover':'table table-hover table-responsive-md'}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='date'+item[itemName].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[itemName]]=sortData(sortedData[item[itemName]],itemDate,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                                >\r\n                                                DATE\r\n                                                <i id={'date'+item[itemName].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='type'+item[itemName].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[itemName]]=sortData(sortedData[item[itemName]],itemType,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                                >\r\n                                                ITEM TYPE\r\n                                                <i id={'type'+item[itemName].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='number'+item[itemName].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[itemName]]=sortData(sortedData[item[itemName]],itemNumber,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                                >\r\n                                                ITEM NUMBER\r\n                                                <i id={'number'+item[itemName].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='dr'+item[itemName].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[itemName]]=sortData(sortedData[item[itemName]],itemDebit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                            >\r\n                                                DR\r\n                                                <i id={'dr'+item[itemName].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='cr'+item[itemName].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[itemName]]=sortData(sortedData[item[itemName]],itemCredit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                            >\r\n                                                CR\r\n                                                <i id={'cr'+item[itemName].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {getBroughtForwardAmount(item)>=0?\r\n                                            (<tr>\r\n                                                <td colSpan='3'>B/F</td>\r\n                                                <td colSpan='2'>{numberFormatParser(getBroughtForwardAmount(item))}</td>\r\n                                            </tr>):\r\n                                            (<tr>\r\n                                                <td colSpan='4'>B/F</td>\r\n                                                <td colSpan='1'>{numberFormatParser(-getBroughtForwardAmount(item))}</td>\r\n                                            </tr>)\r\n                                            }\r\n                                    {sortedData1[item[itemName]].map((item2,i)=>{\r\n                                        if (item2[glAccount]===targetItem[glAccount] && item2[itemName]===item[itemName] \r\n                                            && (new Date(item2[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01'))\r\n                                            && (new Date(item2[itemDate])<=new Date(url.date))\r\n                                            ) \r\n                                            return (\r\n                                                <tr key={i} style={{cursor:'pointer'}} onClick={(e)=>\r\n                                                    history.push('./'+createLink(item2[itemType].toLowerCase(),item2[itemNumber]))\r\n                                                    }>\r\n                                                    <td className='text-nowrap'>{dateFormatParser(item2[itemDate])}</td>\r\n                                                    <td className='text-nowrap'>{item2[itemType]}</td>\r\n                                                    <td className='text-nowrap'>{item2[itemNumber]}</td>\r\n                                                    <td className='text-nowrap'>{numberFormatParser(item2[itemDebit])}</td>\r\n                                                    <td className='text-nowrap'>{numberFormatParser(item2[itemCredit])}</td>\r\n                                                </tr>\r\n                                            )\r\n                                        else return null; \r\n                                        })\r\n                                    }\r\n                                    </tbody>\r\n                                </table>\r\n                                </div>\r\n                            </div>\r\n                    </div>\r\n                    )} else return null;\r\n                })\r\n            )\r\n        }\r\n\r\n        \r\n        data.forEach(item=>{\r\n            if (item[glCategory]===category && glAccountAlreadyParsed.indexOf(item[glAccount])===-1) {\r\n                glAccountAlreadyParsed.push(item[glAccount]);\r\n                result.push(\r\n                    (<div key={item[glAccount]}>\r\n                        <div className='row background' style={{cursor:'pointer'}} data-toggle='collapse' data-target={'#'+item[glDesc].replace(/[ ._()]/g,'')}>\r\n                            <i className='fa fa-plus-square mt-1 col-1 d-print-none' id={'plusminus'+item[glDesc].replace(/[ ._()]/g,'')}></i>\r\n                            <p className='col-2 mb-0'>{item[glAccount]}</p>\r\n                            <p className='col-6 mb-0'>{item[glDesc]}</p>\r\n                            <p className='col text-right mb-0'>{numberFormatParser(data.reduce(\r\n                                (a,b)=>{\r\n                                    if (b[glAccount]===item[glAccount] && (new Date(b[itemDate])<= new Date(url.date))) {\r\n                                        if (debitCreditOpposite) \r\n                                            return a+b[itemCredit]-b[itemDebit];\r\n                                        else return a+b[itemDebit]-b[itemCredit];\r\n                                    }\r\n                                    else return a\r\n                                },0)\r\n                            )}\r\n                            </p>\r\n                        </div>\r\n                        <div className='collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2' id={item[glDesc].replace(/[ ._()]/g,'')}>\r\n                            {item[itemName]?populateItemName(item):(\r\n                            <div style={printFormat?null:{overflowY:'auto',overflowX:'hidden',maxHeight:'60vh'}}>\r\n                                <table id='table' className={printFormat?'table table-hover':'table table-hover table-responsive-md'}>\r\n                                    <thead>\r\n                                        <tr>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='date'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemDate,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}\r\n                                            >\r\n                                                DATE\r\n                                                <i id={'date'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='type'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemType,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                ITEM TYPE\r\n                                                <i id={'type'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='number'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemNumber,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                ITEM NUMBER\r\n                                                <i id={'number'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='dr'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemDebit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                DR\r\n                                                <i id={'dr'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                            <th className='text-nowrap' style={{cursor:'pointer'}} data-order='asc'\r\n                                            onClick={(e)=>{\r\n                                                const id='cr'+item[glDesc].replace(/[ ._\\-()]/g,'')\r\n                                                e.target.setAttribute('data-order',\r\n                                                e.target.getAttribute('data-order')==='asc'?'desc':'asc')\r\n                                                \r\n                                                sortedData[item[glDesc]]=sortData(sortedData[item[glDesc]],itemCredit,e.target.getAttribute('data-order'))\r\n                                                changeSortedData({...sortedData})\r\n                            \r\n                                                if (e.target.getAttribute('data-order')==='asc') {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-up');\r\n                                                    document.getElementById(id).classList.add('fa-caret-down')\r\n                                                }\r\n                                                else {\r\n                                                    document.getElementById(id).classList.remove('fa-caret-down');\r\n                                                    document.getElementById(id).classList.add('fa-caret-up')\r\n                                                }\r\n                                                }}>\r\n                                                CR\r\n                                                <i id={'cr'+item[glDesc].replace(/[ ._\\-()]/g,'')} className='d-print-none fa fa-caret-down ml-2'></i>\r\n                                            </th>\r\n                                        </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                        {getBroughtForwardAmount(item)>=0?\r\n                                            (<tr>\r\n                                                <td colSpan='3'>B/F</td>\r\n                                                <td colSpan='2'>{numberFormatParser(getBroughtForwardAmount(item))}</td>\r\n                                            </tr>):\r\n                                            (<tr>\r\n                                                <td colSpan='4'>B/F</td>\r\n                                                <td colSpan='1'>{numberFormatParser(-getBroughtForwardAmount(item))}</td>\r\n                                            </tr>)\r\n                                        }\r\n                                        {sortedData1[item[glDesc]].map((item2,i)=>{\r\n                                            if (item2[glAccount]===item[glAccount]\r\n                                                && (new Date(item2[itemDate])>=new Date(new Date(url.date).getFullYear()+'-01-01'))\r\n                                                && (new Date(item2[itemDate])<=new Date(url.date))\r\n                                                ) \r\n                                                return (\r\n                                                    <tr key={i} style={{cursor:'pointer'}} onClick={(e)=>\r\n                                                        history.push('./'+createLink(item2[itemType].toLowerCase(),item2[itemNumber]))\r\n                                                        }>\r\n                                                        <td className='text-nowrap'>{dateFormatParser(item2[itemDate])}</td>\r\n                                                        <td className='text-nowrap'>{item2[itemType]}</td>\r\n                                                        <td className='text-nowrap'>{item2[itemNumber]}</td>\r\n                                                        <td className='text-nowrap'>{numberFormatParser(item2[itemDebit])}</td>\r\n                                                        <td className='text-nowrap'>{numberFormatParser(item2[itemCredit])}</td>\r\n                                                    </tr>\r\n                                                )\r\n                                            else return null; \r\n                                            })\r\n                                        }\r\n                                    </tbody>\r\n                                </table>\r\n                            </div>\r\n                                )}\r\n                        </div>\r\n                    </div>\r\n                    )\r\n                )\r\n            }\r\n        })\r\n            \r\n        return result;\r\n    }\r\n\r\n    let errorDisplay=null;\r\n    if ((dataSelectBalanceSheet && dataSelectBalanceSheet.error) || errorSelectBalanceSheet) \r\n    errorDisplay=(\r\n        <div className=\"alert alert-warning\">\r\n            {dataSelectBalanceSheet && dataSelectBalanceSheet.error? 'Balance Sheet Data RETRIEVAL failed errno: '+dataSelectBalanceSheet.error.errno\r\n            +' code: '+dataSelectBalanceSheet.error.code+' message: '+dataSelectBalanceSheet.error.sqlMessage:null}\r\n            {errorSelectBalanceSheet? 'Balance Sheet Data RETRIEVAL failed '+errorSelectBalanceSheet : null}\r\n        </div>)\r\n\r\n    return (\r\n        <AppLayout>\r\n            <div className='container py-3 py-md-5 px-md-5 position-relative'>\r\n                <h4 className='text-center'>{url.companyTitle}</h4>\r\n                <h4 className='text-center mb-4'>{'Balance Sheet as at ' + dateFormatParser(url.date)}</h4>\r\n                {errorDisplay}\r\n                <div className='text-right d-print-none mb-4'>\r\n                    <div className=\"form-check form-check-inline\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"printFormat\" checked={printFormat}\r\n                        onChange={(e)=>{\r\n                            if (e.target.checked) \r\n                                changePrintFormat(true)\r\n                            else changePrintFormat(false)\r\n                        }}/>\r\n                        <label className=\"form-check-label\" htmlFor=\"printFormat\"> Print Format</label>\r\n                    </div>\r\n                    <button className='btn btn-dark mr-1 mr-md-2' \r\n                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                        $('#'+ID).collapse('show')\r\n                    )}><i className='fa fa-plus-square'></i> Expand</button>\r\n                    <button className='btn btn-light'  \r\n                    onClick={(e)=>collapsibleElementID.forEach(ID=>\r\n                        $('#'+ID).collapse('hide')\r\n                    )}> <i className='fa fa-minus-square'></i> Collapse</button>\r\n                </div>\r\n                {netAssets}\r\n                <div className='row my-3 rounded' style={{backgroundColor:'rgba(248,222,126,0.6)'}}>\r\n                    <p className='col text-left my-2 h6'>NET ASSETS TOTAL</p>\r\n                    <p className='col text-right my-2 h6'>{netAssetsTotal}</p>\r\n                </div>\r\n                \r\n                {netEquity}\r\n                <div className='row'>\r\n                    <p className='col mb-0'>PROFIT AND LOSS</p>\r\n                    <p className='col mb-0 text-right'>{currentProfitAndLoss}</p>\r\n                </div>\r\n                <div className='row'>\r\n                    <p className='col mb-0'>RETAINED EARNINGS</p>\r\n                    <p className='col mb-0 text-right'>{retainedEarnings}</p>\r\n                </div>\r\n                <div className='row my-3 rounded' style={{backgroundColor:'rgba(248,222,126,0.6)'}}>\r\n                    <p className='col text-left my-2 h6'>NET EQUITY TOTAL</p>\r\n                    <p className='col text-right my-2 h6'>{netEquityTotal}</p>\r\n                </div>\r\n            </div>\r\n        </AppLayout>\r\n    )\r\n}\r\n\r\nBalanceSheetItem.description='Balance Sheet';\r\nBalanceSheetItem.path='/BalanceSheetItem';\r\n\r\nexport default BalanceSheetItem;","//Dashboard\r\nimport Dashboard from '../Dashboard/Dashboard';\r\nimport DashboardSVG from './svg/030-presentation.svg';\r\n\r\n//Sales\r\nimport DeliveryOrder from '../Sales/DeliveryOrder';\r\nimport DeliveryReturn from '../Sales/DeliveryReturn';\r\nimport SalesInvoice from '../Sales/SalesInvoice';\r\nimport DebitNote from '../Sales/DebitNote';\r\nimport CreditNote from '../Sales/CreditNote';\r\nimport SalesReport from '../Sales/SalesReport';\r\nimport DeliveryOrderItem from '../Sales/DeliveryOrderItem';\r\nimport DeliveryReturnItem from '../Sales/DeliveryReturnItem';\r\nimport SalesInvoiceItem from '../Sales/SalesInvoiceItem';\r\nimport DebitNoteItem from '../Sales/DebitNoteItem';\r\nimport CreditNoteItem from '../Sales/CreditNoteItem';\r\nimport SalesSVG from './svg/006-call.svg';\r\n\r\n\r\n//Purchase\r\nimport GoodsReceivedNote from '../Purchase/GoodsReceivedNote';\r\nimport PurchaseReturn from '../Purchase/PurchaseReturn';\r\nimport PurchaseInvoice from '../Purchase/PurchaseInvoice';\r\nimport PurchaseDebitNote from '../Purchase/PurchaseDebitNote';\r\nimport PurchaseCreditNote from '../Purchase/PurchaseCreditNote';\r\nimport PurchaseReport from '../Purchase/PurchaseReport';\r\nimport SupplierPriceListReport from '../Purchase/SupplierPriceListReport';\r\nimport GoodsReceivedNoteItem from '../Purchase/GoodsReceivedNoteItem';\r\nimport PurchaseReturnItem from '../Purchase/PurchaseReturnItem';\r\nimport PurchaseInvoiceItem from '../Purchase/PurchaseInvoiceItem';\r\nimport PurchaseDebitNoteItem from '../Purchase/PurchaseDebitNoteItem';\r\nimport PurchaseCreditNoteItem from '../Purchase/PurchaseCreditNoteItem';\r\nimport PurchaseSVG from './svg/009-conversation.svg';\r\n\r\n//Inventory\r\nimport StockItemMaintenance from '../Inventory/StockItemMaintenance';\r\nimport StockCardReport from '../Inventory/StockCardReport';\r\nimport StockAgingReport from '../Inventory/StockAgingReport';\r\nimport StockItem from '../Inventory/StockItem';\r\nimport InventorySVG from './svg/020-folders.svg';\r\n\r\n//BankAndCash\r\nimport BankMaintenance from '../BankAndCash/BankMaintenance';\r\nimport BankReceipt from '../BankAndCash/BankReceipt';\r\nimport BankPayment from '../BankAndCash/BankPayment';\r\nimport CashReceipt from '../BankAndCash/CashReceipt';\r\nimport CashPayment from '../BankAndCash/CashPayment';\r\nimport BankItem from '../BankAndCash/BankItem';\r\nimport BankReceiptItem from '../BankAndCash/BankReceiptItem';\r\nimport BankPaymentItem from '../BankAndCash/BankPaymentItem';\r\nimport CashReceiptItem from '../BankAndCash/CashReceiptItem';\r\nimport CashPaymentItem from '../BankAndCash/CashPaymentItem';\r\nimport BankAndCashSVG from './svg/027-money.svg';\r\n\r\n//AccountsReceivable\r\nimport DebtorMaintenance from '../AccountsReceivable/DebtorMaintenance';\r\nimport DebtorAgingReport from '../AccountsReceivable/DebtorAgingReport';\r\nimport DebtorStatementReport from '../AccountsReceivable/DebtorStatementReport';\r\nimport DebtorCollectionReport from '../AccountsReceivable/DebtorCollectionReport';\r\nimport DebtorItem from '../AccountsReceivable/DebtorItem';\r\nimport AccountsReceivableSVG from './svg/011-calendar.svg';\r\n\r\n//AccountsPayable\r\nimport CreditorMaintenance from '../AccountsPayable/CreditorMaintenance';\r\nimport CreditorAgingReport from '../AccountsPayable/CreditorAgingReport';\r\nimport CreditorBalanceReport from '../AccountsPayable/CreditorBalanceReport';\r\nimport CreditorItem from '../AccountsPayable/CreditorItem';\r\nimport AccountsPayableSVG from './svg/017-send.svg';\r\n\r\n//GeneralLedger\r\nimport AccountMaintenance from '../GeneralLedger/AccountMaintenance';\r\nimport JournalEntry from '../GeneralLedger/JournalEntry';\r\nimport ProfitAndLoss from '../GeneralLedger/ProfitAndLoss';\r\nimport BalanceSheet from '../GeneralLedger/BalanceSheet';\r\nimport JournalItem from '../GeneralLedger/JournalItem';\r\nimport ProfitAndLossItem from '../GeneralLedger/ProfitAndLossItem';\r\nimport BalanceSheetItem from '../GeneralLedger/BalanceSheetItem';\r\nimport GeneralLedgerSVG from './svg/015-contact.svg';\r\n/*\r\nComponentSummary module is a collection of all components used in this App arranged in a useful way and used as dependency in other \r\nareas of App. It is an array of objects (categories) which contained process (ie Delivery Order),\r\nitem (ie Delivery Order Item) and report(ie SalesReport.js) components. It is used as a dependency for App.js for automatic \r\ncreation of <Route>s with their respective components (ie. DeliveryOrder.js, DeliveryOrderItem.js, SalesReport.js). Also used as \r\ndependency for automatic population of navigation items in <SidePanel> and <SubPanel>. \r\n\r\nIf in the future need to add App functionality, update this module. \r\n\r\nEach objects(categories) are arranged in sequence (ie Dashboard, Sales, Purchase) similar to file directory structure in\r\norder they will appear in Side Panel.The process/report components (excluding item components) in each category are also \r\narranged in sequence in the order they appear in the Subpanels. **Note path string (ie DeliveryOrder.path='DeliveryOrder') \r\nproperties of each component used to populate <Route> in App.js are already set in their respective module as property of the component itself.\r\nSame with description string (ie DeliveryOrder.description='Delivery Order') used for Subpanels \r\n*/ \r\n\r\n//NO SPACE BETWEEN NAMES! as they are used for keys and spaces have unpredictable behaviors (i.e. Accounts Receivable should be Accounts-Receivable)\r\nconst ComponentSummary = [ \r\n    {name:'Dashboard',svg:DashboardSVG ,process:[Dashboard], item:[], report:[]},\r\n    {name:'Sales',svg:SalesSVG ,process:[DeliveryOrder,DeliveryReturn,SalesInvoice,DebitNote,CreditNote], item:[DeliveryOrderItem,DeliveryReturnItem,SalesInvoiceItem,DebitNoteItem,CreditNoteItem], report:[SalesReport]},\r\n    {name:'Purchase',svg:PurchaseSVG ,process:[GoodsReceivedNote,PurchaseReturn,PurchaseInvoice,PurchaseDebitNote,PurchaseCreditNote], item:[GoodsReceivedNoteItem,PurchaseReturnItem,PurchaseInvoiceItem,PurchaseDebitNoteItem,PurchaseCreditNoteItem], report:[PurchaseReport,SupplierPriceListReport]},\r\n    {name:'Inventory',svg:InventorySVG ,process:[StockItemMaintenance], item:[StockItem], report:[StockCardReport,StockAgingReport]},\r\n    {name:'Bank and Cash',svg:BankAndCashSVG ,process:[BankMaintenance,BankReceipt,BankPayment,CashReceipt,CashPayment], item:[BankItem,BankReceiptItem,BankPaymentItem,CashReceiptItem,CashPaymentItem], report:[]},\r\n    {name:'Accounts Receivable',svg:AccountsReceivableSVG ,process:[DebtorMaintenance], item:[DebtorItem], report:[DebtorAgingReport,DebtorStatementReport,DebtorCollectionReport]},\r\n    {name:'Accounts Payable',svg:AccountsPayableSVG ,process:[CreditorMaintenance], item:[CreditorItem], report:[CreditorAgingReport,CreditorBalanceReport]},\r\n    {name:'General Ledger',svg:GeneralLedgerSVG ,process:[AccountMaintenance,JournalEntry,ProfitAndLoss,BalanceSheet], item:[JournalItem,ProfitAndLossItem,BalanceSheetItem], report:[]},\r\n]\r\n\r\nexport default ComponentSummary;","import React from 'react';\r\nimport SubPanel from './SubPanel';\r\nimport ComponentSummary from './ComponentSummary';\r\n\r\n\r\nfunction SidePanel(props) {\r\n    //parent id wrapper for accordion to work as per Bootstrap\r\n    const parent='accordion';\r\n    const SubPanelList=ComponentSummary.map(category=>{\r\n        let SubPanelListItems=[]\r\n        let SubPanelListReportItems=[]\r\n        \r\n        category.process.forEach(component=>\r\n            SubPanelListItems.push(component.description)\r\n            )\r\n        category.report.forEach(component=>\r\n            SubPanelListReportItems.push(component.description)\r\n            )\r\n        return (\r\n            <SubPanel key={category.name} name={category.name} img={category.svg} parent={parent}\r\n            items={SubPanelListItems} reportItems={SubPanelListReportItems}/>\r\n            )\r\n        }\r\n    )\r\n\r\n    return (\r\n        <aside id={parent} className={'accordion '+ (props.largeScreenStyle? 'd-none': 'd-block') + ' d-md-block bg-dark '+ (props.largeScreenStyle? 'position-sticky vh-100 overflow-auto':'')} style={{top:'0'}}>\r\n            <h2 className=\"text-warning d-none d-md-block \" style={{padding:\"0.75rem 1.25rem\"}}>Accounting <span className='text-info'>Software </span><small className='text-light d-block' style={{fontSize:'40%'}}>@coded by Mseong</small></h2>\r\n            <h4 className=\"text-warning d-md-none\" style={{padding:\"0.75rem 1.25rem\"}}>Accounting <span className='text-info'>Software </span><small className='text-light d-block' style={{fontSize:'40%'}}>@coded by Mseong</small></h4>\r\n            {SubPanelList}\r\n            \r\n        </aside>\r\n    )\r\n}\r\n\r\nexport default SidePanel;","import React from 'react';\r\nimport Navbar from '../Shared/Navbar';\r\nimport SidePanel from '../Shared/SidePanel';\r\n\r\nfunction Main(props) {\r\n    return (\r\n            <div className='container-fluid'>\r\n                <div className='row'>\r\n                    <div className='col-md-9 order-md-last px-0'>\r\n                        <Navbar/>\r\n                    </div>\r\n                    <div className='col-md-3 order-md-first px-0'>\r\n                        <SidePanel/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default Main;","import React,{useState,useContext,useEffect} from 'react';\r\nimport useFetch from '../Shared/useFetch';\r\nimport authContext from '../Shared/authContext';\r\nimport isLoadingContext from '../Shared/isLoadingContext'\r\nimport logo from '../Shared/accounting.svg';\r\n\r\nfunction Login(props) {\r\n    const [{data,error},changeParam] = useFetch(null);\r\n    const {changeAuth}=useContext(authContext);\r\n    const {isLoading} = useContext(isLoadingContext);\r\n    const [username,changeUsername]=useState('');\r\n    const [password,changePassword]=useState('');\r\n    \r\n    \r\n\r\n    useEffect(()=>{\r\n        if (data && data.auth===true) {\r\n            changeAuth(true)\r\n        } \r\n    },[data,error])\r\n    \r\n    return (\r\n        <section className='container'>\r\n            <div className='row'>\r\n                {isLoading?\r\n                <div className='position-fixed d-flex justify-content-center align-items-center vh-100 vw-100' \r\n                style={{top:0,left:0, zIndex:'100000',backgroundColor:'rgba(255,255,255,0.6'}}>\r\n                    <div className='spinner-grow' style={{width:'4rem',height:'4rem'}}><span className='sr-only'></span></div>\r\n                </div>:null}\r\n                <div className='col-10 offset-1 col-md-6 offset-md-3 col-lg-4 offset-lg-4'>\r\n                    <div className='jumbotron min-vh-100' style={{marginBottom:0}}>\r\n                        <h1 className='my-5'>\r\n                            Login\r\n                            <img src={logo} alt='logo' style={{width:'35px',height:'35px'}} className='d-inline-block mx-3'/>\r\n                        </h1>\r\n                        {(data && data.auth===false)||error? (<div className=\"alert alert-warning\">\r\n                                            {data && data.error? data.error.code+data.error.type : null}\r\n                                            {data && data.message? data.message : null}\r\n                                            {error? error.name +' '+error.message: null}\r\n                                    </div>):null}\r\n                        \r\n                        <form onSubmit={(e)=>{e.preventDefault();changeParam({\r\n                            url:'./userAuth',\r\n                            init:{\r\n                                method:'POST',\r\n                                headers:{'Content-Type':'application/json'},\r\n                                body:JSON.stringify({username:username,password:password}),\r\n                                credentials:'include'\r\n                            }\r\n                        })\r\n                        }}>\r\n                            <label htmlFor='username'>Username:</label>\r\n                            <input type='text' id='username' value={username} onChange={(e)=>changeUsername(e.target.value)} required className='form-control'></input>\r\n                            <label htmlFor='password'>Password:</label>\r\n                            <input type='password' id='password' value={password} onChange={(e)=>changePassword(e.target.value)} required className='form-control'></input>\r\n                            <button type='submit' className='btn btn-primary my-3'>Submit</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Login;","import React,{useState,useEffect} from 'react';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Redirect,\r\n    Switch,\r\n    Route,\r\n} from 'react-router-dom';\r\nimport Media from './Shared/Media';\r\nimport Main from './Main/Main';\r\nimport Login from './Login/Login';\r\nimport ComponentSummary from './Shared/ComponentSummary';\r\nimport authContext from './Shared/authContext';\r\nimport isLoadingContext from './Shared/isLoadingContext';\r\n\r\nfunction App() {\r\n    //auth default value is false and have to go through Login route when new App is served for first time. See route logic below.\r\n    const [auth,changeAuth]=useState(false);\r\n    /*isLoading default value is false, when useFetch is called, will change to true and once fetch promise resolved/rejected, \r\n    will change to false again.*/\r\n    const [isLoading,changeIsLoading]=useState(false);\r\n\r\n    \r\n    let appRoutes=[];\r\n    ComponentSummary.forEach(category=>{\r\n        category.process.forEach(component=>\r\n                appRoutes.push(\r\n                (<Route key={component.path} path={component.path} component={component}/>) \r\n            )\r\n        );\r\n        category.item.forEach(component=>\r\n                appRoutes.push(\r\n                (<Route key={component.path} path={component.path} component={component}/>) \r\n            )\r\n        );\r\n        category.report.forEach(component=>\r\n                appRoutes.push(\r\n                (<Route key={component.path} path={component.path} component={component}/>) \r\n            )\r\n        )}\r\n    )\r\n    \r\n    \r\n    return (\r\n    <Router>\r\n        {/*Use Context to pass auth & changeAuth to child components to be changed as required.*/}\r\n        <authContext.Provider value={{auth,changeAuth}}>\r\n        <isLoadingContext.Provider value={{isLoading,changeIsLoading}}>\r\n            <Media render={screenIsSmall=>{\r\n                return (\r\n                    <Switch>\r\n                        {/*When auth is false, render routes and redirect for Login*/}\r\n                        {auth?null:(\r\n                        <Route path='/Login' >\r\n                            <Login/>\r\n                        </Route>)}\r\n                        {auth?null:<Redirect to='/Login'/>}\r\n                        {/*Once auth takes place and auth is true, normal App routes will be rendered*/}\r\n                        {appRoutes}\r\n                        {screenIsSmall? (<Route path='/' render={Main}/>):(<Redirect to='/DashBoard'/>)}\r\n                    </Switch>\r\n                )}}\r\n            />\r\n        </isLoadingContext.Provider>\r\n        </authContext.Provider>\r\n     </Router>\r\n    )\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Protocount/App';\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport '@fortawesome/fontawesome-free/css/all.css'\n\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}
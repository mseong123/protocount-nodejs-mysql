(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/accounting.6c69fc79.svg"},24:function(e,t,a){e.exports=a.p+"static/media/030-presentation.9ad5731f.svg"},25:function(e,t,a){e.exports=a.p+"static/media/006-call.9c57f732.svg"},26:function(e,t,a){e.exports=a.p+"static/media/009-conversation.ffa9f5dd.svg"},27:function(e,t,a){e.exports=a.p+"static/media/020-folders.f1018bc0.svg"},28:function(e,t,a){e.exports=a.p+"static/media/027-money.dbb6986e.svg"},29:function(e,t,a){e.exports=a.p+"static/media/011-calendar.870b8a62.svg"},30:function(e,t,a){e.exports=a.p+"static/media/017-send.af12eb54.svg"},31:function(e,t,a){e.exports=a.p+"static/media/015-contact.b34b750a.svg"},32:function(e,t,a){e.exports=a(45)},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),o=a.n(l),c=a(1),i=a(11),s=a(6);var m=function(e){var t=Object(n.useState)(window.innerWidth<768),a=Object(c.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){var e=window.matchMedia("(max-width: 768px)"),t=function(e){e.matches?l(!0):l(!1)};return e.addListener((function(e){return t(e)})),e.removeListener((function(e){return t(e)}))}),[]),e.render(r)},d=a(13),u=a.n(d),p=r.a.createContext();var g=function(e){var t=Object(n.useContext)(p).changeAuth,a=" navbar-light bg-light";return"dark"===e.theme&&(a=" navbar-dark bg-dark"),r.a.createElement("nav",{className:"navbar navbar-expand-md"+a},r.a.createElement(s.b,{className:"navbar-brand",to:"/"},r.a.createElement("img",{src:u.a,style:{width:"35px",height:"35px"},alt:"logo",className:"d-inline-block"}),"ProtoCount"),r.a.createElement("button",{className:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarText"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"File"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Exit and Logout"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"General Maintenance"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Company Profile"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"User Maintenance"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Credit Term Maintenance"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Currency Maintenance"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"Tools"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"Backup"),r.a.createElement("a",{href:"#",className:"dropdown-item"},"Restore"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("a",{href:"#",className:"nav-link dropdown-toggle","data-toggle":"dropdown"},"Help"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("a",{href:"#",className:"dropdown-item"},"About ProtoCount Accounting")))),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){return t(!1)}},"Log Out")))};var f=function(e){var t,a;return t=e.items.map((function(e){return r.a.createElement(s.b,{className:"list-group-item list-group-item-action list-group-item-dark",key:e,to:e.replace(/[ _]/g,"")},e)})),a=e.reportItems.map((function(e){return r.a.createElement(s.b,{className:"list-group-item list-group-item-action list-group-item-dark",key:e,to:e.replace(/[ _]/g,"")},e)})),r.a.createElement("div",{className:"card border-0 bg-dark text-light rounded-0"},r.a.createElement("div",{className:"card-header",style:{backgroundColor:"rgba(0,0,0,0)"}},r.a.createElement("a",{href:"#"+e.name.replace(/[ ]/g,"-"),"data-toggle":"collapse",className:"text-decoration-none text-reset"},r.a.createElement("h6",null,e.name,r.a.createElement("img",{src:e.img,className:"ml-3",style:{width:"25px"},alt:e.name})))),r.a.createElement("div",{className:"list-group list-group-flush collapse",id:e.name.replace(/[ ]/g,"-"),"data-parent":"#"+e.parent},t,a.length>0?r.a.createElement("a",{href:"#"+e.name.replace(/[ ]/g,"-")+"-report","data-toggle":"collapse",className:"list-group-item bg-secondary text-decoration-none text-reset"},r.a.createElement("h6",null,"Report")):null,r.a.createElement("div",{className:"list-group collapse",id:e.name.replace(/[ ]/g,"-")+"-report"},a)))},E=r.a.createContext();var h=function(e){var t=Object(n.useContext)(E).isLoading;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},t?r.a.createElement("div",{className:"position-fixed d-flex justify-content-center align-items-center vh-100 vw-100",style:{top:0,left:0,zIndex:"100000",backgroundColor:"rgba(255,255,255,0.6"}},r.a.createElement("div",{className:"spinner-grow",style:{width:"4rem",height:"4rem"}},r.a.createElement("span",{className:"sr-only"}))):null,r.a.createElement("div",{className:"col-md-9 order-md-last px-0"},r.a.createElement(g,null),r.a.createElement("div",null,e.children)),r.a.createElement("div",{className:"col-md-3 order-md-first px-0 d-print-none"},r.a.createElement(oa,{largeScreenStyle:!0}))))};function b(e){return r.a.createElement(h,null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row flex-column align-items-center justify-content-center",style:{height:"80vh"}},r.a.createElement("div",null,r.a.createElement("img",{src:u.a,alt:"logo",style:{maxWidth:"50%"},className:"d-block mx-auto"})),r.a.createElement("h1",{className:"text-center d-none d-md-block"},"ProtoCount Accounting Software"),r.a.createElement("h3",{className:"text-center d-md-none"},"ProtoCount Accounting Software"),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Fully functional accounting app."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Blazing Fast with Client-Side routing."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Functionality easily extended."),r.a.createElement("p",{className:"lead text-info text-center m-0"},"Responsive interface (incl. Mobile)."))))}b.description="Dashboard",b.path="/Dashboard";var N=b,v=a(24),y=a.n(v),w=a(2),D=a(3);var O=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(null),i=Object(c.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)(null),u=Object(c.a)(d,2),p=u[0],g=u[1],f=Object(n.useContext)(E),h=(f.isLoading,f.changeIsLoading);return Object(n.useEffect)((function(){r&&r.url&&(h(!0),fetch(r.url,r.init).then((function(e){if(e.ok)return e.json();throw new Error("HTTP Error, status code = "+e.status+",status = "+e.statusText)})).then((function(e){m(e),g(null),h(!1)})).catch((function(e){g(e),m(null),h(!1)})))}),[r]),[{data:s,error:p},l]};var x=function(e,t,a){var n=1;return"desc"===a&&(n=-1),Object(w.a)(e).sort((function(e,a){return n*(e[t]+"").localeCompare(a[t]+"","en",{numeric:!0})}))};var C=function(e){return e?(""+e).replace(/(\d)(?=(?:\d{3})+(?:\.|$))|(\.\d\d?)\d*$/g,(function(e,t,a){return a||t+","})):""};var S=function(e){if(e){e=new Date(e);var t=Number(e.getMonth())+1<10?"0"+(Number(e.getMonth())+1):Number(e.getMonth())+1;return(e.getDate()<10?"0"+e.getDate():e.getDate())+"-"+t+"-"+e.getFullYear()}return""};var I=function(e){var t,a,l,o,s=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}),m=Object(c.a)(s,2),d=m[0],u=d.data,g=d.error,f=m[1],E=O(null),h=Object(c.a)(E,2),b=h[0],N=b.data,v=b.error,y=h[1],I=Object(n.useState)(null),L=Object(c.a)(I,2),j=L[0],k=L[1],R=Object(n.useContext)(p).changeAuth,F=Object(n.useState)(""),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(""),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)([]),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(n.useState)(null),G=Object(c.a)(Q,2),H=G[0],X=G[1],z=Object(i.g)(),W="NUM";function $(t){t?z.push("./"+e.createItemPath+"?item="+e.item+"&id="+t[W]):z.push("./"+e.createItemPath)}return Object(n.useEffect)((function(){u&&!1===u.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),R(!1)):u&&k({data:u.data?u.data.map((function(e){return Object.assign({},e,{selected:!0})})):null,field:u.field?u.field.map((function(e){return e.name})):null,error:u.error})}),[u,g]),Object(n.useEffect)((function(){N&&!1===N.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),R(!1)):!N||N.error||v?(N&&N.error||v)&&X(r.a.createElement("div",{className:"alert alert-warning"},N&&N.error?"DELETE failed errno: "+N.error.errno+" code: "+N.error.code+" message: "+N.error.sqlMessage:null,v?"DELETE failed: "+v:null)):(alert("Delete Successful!"),X(null),V([]),j.data.forEach((function(e){document.getElementById(e[W]).checked=!1})),document.getElementById("mainCheckBox").checked=!1,f({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}))}),[N,v]),j&&j.field&&(t=j.field.map((function(e){return r.a.createElement("option",{key:e,value:e},e.replace(/_/g," "))})),a=j.field.map((function(e){return r.a.createElement("th",{key:e,style:{cursor:"pointer"},className:"text-nowrap","data-order":"asc",onClick:function(t){t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),k(Object(D.a)({},j,{data:x(j.data,e,t.target.getAttribute("data-order"))})),"asc"===t.target.getAttribute("data-order")?(document.getElementById(e.replace(/_/g," ")).classList.remove("fa-caret-up"),document.getElementById(e.replace(/_/g," ")).classList.add("fa-caret-down")):(document.getElementById(e.replace(/_/g," ")).classList.remove("fa-caret-down"),document.getElementById(e.replace(/_/g," ")).classList.add("fa-caret-up"))}},e.replace(/_/g," "),r.a.createElement("i",{id:e.replace(/_/g," "),className:"fa fa-caret-down ml-2"}))}))),j&&j.data&&(l=j.data.map((function(e,t){return e.selected?r.a.createElement("tr",{key:e[W]},r.a.createElement("td",{className:"align-baseline py-2"},r.a.createElement("input",{type:"checkbox",id:e[W],onChange:function(t){var a=J.indexOf(e[W]);t.target.checked?V([].concat(Object(w.a)(J),[e[W]])):-1!==a&&V([].concat(Object(w.a)(J.slice(0,a)),Object(w.a)(J.slice(a+1))))}})),r.a.createElement("td",{className:"align-baseline py-2"},r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){return $(e)}},"VIEW")),j&&j.field?j.field.map((function(t){return r.a.createElement("td",{className:"text-nowrap align-baseline py-2",key:Math.random()},-1!==t.indexOf("DATE")?S(e[t]):"number"===typeof e[t]?C(e[t]):e[t])})):null):null}))),o=!j||j.error||g?j&&j.error||g?r.a.createElement("div",{className:"alert alert-warning"},j&&j.error?"<DATABASE ERROR> errno: "+j.error.errno+" code: "+j.error.code+" message: "+j.error.sqlMessage:null,g?"OTHER ERROR "+g.name+" "+g.message:null):null:r.a.createElement("div",{className:"overflow-auto",style:{maxHeight:"50vh"}},r.a.createElement("table",{id:"table",className:"table table-bordered table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},r.a.createElement("input",{type:"checkbox",id:"mainCheckBox",onChange:function(e){if(e.target.checked){var t=[];j.data.forEach((function(e){document.getElementById(e[W]).checked=!0,t.push(e[W])})),V(t)}else j.data.forEach((function(e){document.getElementById(e[W]).checked=!1})),V([])}})),r.a.createElement("th",null),a)),r.a.createElement("tbody",null,l))),e.render({searchCriteriaList:t,result:o,onItemClick:$,refresh:function(){X(null),V([]),j.data.forEach((function(e){document.getElementById(e[W]).checked=!1})),document.getElementById("mainCheckBox").checked=!1,f({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}})},search:T,searchChange:function(e){if(j&&j.data){var t=j.data.map((function(t){return""!==e.target.value?new RegExp(e.target.value,"g").test(t[B])?Object.assign({},t,{selected:!0}):Object.assign({},t,{selected:!1}):Object.assign({},t,{selected:!0})}));k({data:t,field:j.field,error:j.error})}P(e.target.value)},searchCriteria:B,searchCriteriaChange:function(e){q(e.target.value)},deleteList:function(){window.confirm("Confirm Delete?")&&y({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,id:J}),credentials:"include"}})},errorDeleteDisplay:H,itemsToBeDeleted:J})};var L=function(e){return r.a.createElement("div",{className:"container py-2"},r.a.createElement("h3",null,e.description),r.a.createElement("button",{className:"btn btn-primary mr-3",onClick:function(){return e.onItemClick()}},"Create New Item"),r.a.createElement("form",{className:"form-inline my-3"},r.a.createElement("label",{htmlFor:"search"},"Find Item"),r.a.createElement("input",{type:"text",onChange:function(t){return e.searchChange(t)},id:"search",placeholder:"Search...",className:"form-control mx-sm-3",value:e.search}),r.a.createElement("label",{htmlFor:"search-criteria",className:"mt-2 mt-md-0"},"Search Criteria"),r.a.createElement("select",{className:"form-control mx-sm-3",value:e.searchCriteria,onChange:e.searchCriteriaChange},r.a.createElement("option",{value:""}," -select an option- "),e.searchCriteriaList),r.a.createElement("small",{className:"text-muted form-text mt-3 mt-md-0"},"Search is CASE SENSITIVE")),r.a.createElement("h5",null,"List of "+e.listname),r.a.createElement("div",{className:"mb-3"},r.a.createElement("button",{className:"btn btn-outline-info mr-2",onClick:e.refresh},"Refresh"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){e.itemsToBeDeleted.length?e.deleteList():alert("No items selected!")}},"Delete")),e.errorDeleteDisplay,e.result)};function j(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./DeliveryOrderItem",item:"delivery_order",render:function(e){return r.a.createElement(L,Object.assign({description:j.description,listname:j.description},e))}}))}j.description="Delivery Order",j.path="/DeliveryOrder";var k=j;function R(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./DeliveryReturnItem",item:"delivery_return",render:function(e){return r.a.createElement(L,Object.assign({description:R.description,listname:R.description},e))}}))}R.description="Delivery Return",R.path="/DeliveryReturn";var F=R;function A(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./SalesInvoiceItem",item:"sales_invoice",render:function(e){return r.a.createElement(L,Object.assign({description:A.description,listname:A.description},e))}}))}A.description="Sales Invoice",A.path="/SalesInvoice";var T=A;function P(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./DebitNoteItem",item:"debit_note",render:function(e){return r.a.createElement(L,Object.assign({description:P.description,listname:P.description},e))}}))}P.description="Debit Note",P.path="/DebitNote";var M=P;function Y(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./CreditNoteItem",item:"credit_note",render:function(e){return r.a.createElement(L,Object.assign({description:Y.description,listname:Y.description},e))}}))}Y.description="Credit Note",Y.path="/CreditNote";var B=Y,q=a(5),_=a(4),U=a.n(_);var J=function(e){if(document.getElementById("pageStyle"))document.getElementById("pageStyle").innerHTML="@media print {@page {size: ".concat(e,"}}");else{var t=document.createElement("style");t.setAttribute("id","pageStyle"),document.head.appendChild(t),document.getElementById("pageStyle").innerHTML="@media print {@page {size: ".concat(e,"}}")}};var V=function(e){var t=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),J("a4 portrait"),t.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" from "+S(e.resultInput.dateStart)+" to "+S(e.resultInput.dateEnd)),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",{className:"border-top border-bottom border-secondary"},r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"debtorCode"===e.resultInput.groupOne?"Debtor No.":"Item Code"),r.a.createElement("th",{className:"align-top"},"Name"),function(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=[],n=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),l=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);if(l<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0))("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},t[l.getMonth()]+" "+l.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear()));else{var o=new Date(n);for(("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},t[n.getMonth()]+" "+n.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[n.getMonth()]+" "+n.getFullYear()+" Total":t[n.getMonth()]+" "+n.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[n.getMonth()]+" "+n.getFullYear()+" Total":t[n.getMonth()]+" "+n.getFullYear()));l>new Date(new Date(o).getFullYear(),new Date(o).getMonth()+1+1,0);)o.setMonth(o.getMonth()+1,1),("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[o.getMonth()]+" "+o.getFullYear()+" Qty",className:"align-top"},t[o.getMonth()]+" "+o.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[o.getMonth()]+" "+o.getFullYear()+" Total":t[o.getMonth()]+" "+o.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[o.getMonth()]+" "+o.getFullYear()+" Total":t[o.getMonth()]+" "+o.getFullYear()));("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},t[l.getMonth()]+" "+l.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear()))}return a}(),"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?r.a.createElement("th",{className:"align-top"},"Qty"):null,r.a.createElement("th",{className:"align-top"},"Total")),e.withDetails&&e.resultInput.groupTwo?r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"debtorCode"===e.resultInput.groupTwo?"Debtor No.":"Item Code"),r.a.createElement("th",{className:"align-top"},"Name")):null),function(){var t=e.data,a=e.field[0],n=a[0].name,l=a[1].name,o="debtorCode"===e.resultInput.groupOne?null:a[3].name,c="debtorCode"===e.resultInput.groupOne?a[3].name:a[4].name,i=e.dataDetail,s=e.field[1],m=s[1].name,d=s[2].name,u=s[4].name,p=s[5].name,g=[],f=[];return t.forEach((function(E){var h=[];-1===g.indexOf(E[n])&&(g.push(E[n]),f.push(r.a.createElement("tbody",{key:E[n],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},E[n]),r.a.createElement("th",{className:"align-top"},E[l]),function(t,a,n){var l=["January","February","March","April","May","June","July","August","September","October","November","December"],o=[],c=n[0].name,i=n[2].name,s="debtorCode"===e.resultInput.groupOne?null:n[3].name,m="debtorCode"===e.resultInput.groupOne?n[3].name:n[4].name,d=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),u=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);return u<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?(("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[u.getMonth()]+" "+u.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){return a[c]===t[c]?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[u.getMonth()]+" "+u.getFullYear()+" Total":l[u.getMonth()]+" "+u.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){return a[c]===t[c]?e+a[m]:e}),0))))):function(){var n=new Date(d);for(("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[d.getMonth()]+" "+d.getFullYear()+" Total":l[d.getMonth()]+" "+d.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?e+a[m]:e}),0))));u>new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1+1,0);)n.setMonth(n.getMonth()+1,1),("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var r=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&r>new Date(new Date(n).getFullYear(),new Date(n).getMonth(),0)&&r<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0)?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[n.getMonth()]+" "+n.getFullYear()+" Total":l[n.getMonth()]+" "+n.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var r=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&r>new Date(new Date(n).getFullYear(),new Date(n).getMonth(),0)&&r<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0)?e+a[m]:e}),0))));("itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[u.getMonth()]+" "+u.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n>new Date(new Date(u).getFullYear(),new Date(u).getMonth(),0)&&n<=u?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[u.getMonth()]+" "+u.getFullYear()+" Total":l[u.getMonth()]+" "+u.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n>new Date(new Date(u).getFullYear(),new Date(u).getMonth(),0)&&n<=u?e+a[m]:e}),0))))}(),o}(E,t,a),"itemCode"===e.resultInput.groupOne||"debtorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?r.a.createElement("th",{className:"align-top"},C(t.reduce((function(e,t){return t[n]===E[n]?e+t[o]:e}),0))):null,r.a.createElement("th",{className:"align-top"},C(t.reduce((function(e,t){return t[n]===E[n]?e+t[c]:e}),0)))),e.resultInput.groupTwo&&e.withDetails?i.map((function(t){if(-1===h.indexOf(t[m]))return h.push(t[m]),r.a.createElement("tr",{key:t[m]},r.a.createElement("td",{className:"align-top"},t[m]),r.a.createElement("td",{className:"align-top"},t[d]),function(t,a,n,l){var o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[],i=l[0].name,s=l[1].name,m=l[3].name,d=l[4].name,u=l[5].name,p=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),g=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);return g<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?(c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){return n[i]===t[i]&&n[s]===a[s]?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){return n[i]===t[i]&&n[s]===a[s]?e+n[u]:e}),0))))):function(){var e=new Date(p);for(c.push(r.a.createElement("td",{key:o[p.getMonth()]+" "+p.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[p.getMonth()]+" "+p.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?e+n[u]:e}),0))));g>new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1+1,0);)e.setMonth(e.getMonth()+1,1),c.push(r.a.createElement("td",{key:o[e.getMonth()]+" "+e.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(n,r){var l=new Date(new Date(r[m]).getFullYear(),new Date(r[m]).getMonth(),new Date(r[m]).getDate(),0);return r[i]===t[i]&&r[s]===a[s]&&l>new Date(new Date(e).getFullYear(),new Date(e).getMonth(),0)&&l<=new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1,0)?n+r[d]:n}),0)))),c.push(r.a.createElement("td",{key:o[e.getMonth()]+" "+e.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(n,r){var l=new Date(new Date(r[m]).getFullYear(),new Date(r[m]).getMonth(),new Date(r[m]).getDate(),0);return r[i]===t[i]&&r[s]===a[s]&&l>new Date(new Date(e).getFullYear(),new Date(e).getMonth(),0)&&l<=new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1,0)?n+r[u]:n}),0))));c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r>new Date(new Date(g).getFullYear(),new Date(g).getMonth(),0)&&r<=g?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r>new Date(new Date(g).getFullYear(),new Date(g).getMonth(),0)&&r<=g?e+n[u]:e}),0))))}(),c}(E,t,i,s),r.a.createElement("td",{className:"align-top"},i.reduce((function(e,a){return a[m]===t[m]&&a[n]===E[n]?e+a[u]:e}),0)),r.a.createElement("td",{className:"align-top"},C(i.reduce((function(e,a){return a[m]===t[m]&&a[n]===E[n]?e+a[p]:e}),0))))})):null)))})),f}()),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function Q(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),u=Object(c.a)(d,1)[0],g=u.data,f=u.error,E=O(null),b=Object(c.a)(E,2),N=b[0],v=N.data,y=N.error,S=b[1],I=Object(n.useState)("debtorCode"),L=Object(c.a)(I,2),j=L[0],k=L[1],R=Object(n.useState)(""),F=Object(c.a)(R,2),A=F[0],T=F[1],P=Object(n.useState)(null),M=Object(c.a)(P,2),Y=M[0],B=M[1],_=Object(n.useState)(null),G=Object(c.a)(_,2),H=G[0],X=G[1],z=Object(n.useState)([]),W=Object(c.a)(z,2),$=W[0],Z=W[1],K=Object(n.useState)([]),ee=Object(c.a)(K,2),te=ee[0],ae=ee[1],ne=Object(n.useState)((new Date).getFullYear()+"-01-01"),re=Object(c.a)(ne,2),le=re[0],oe=re[1],ce=Object(n.useState)(Ge(new Date)),ie=Object(c.a)(ce,2),se=ie[0],me=ie[1],de=Object(n.useState)(null),ue=Object(c.a)(de,2),pe=ue[0],ge=ue[1],fe=Object(n.useState)([]),Ee=Object(c.a)(fe,2),he=Ee[0],be=Ee[1],Ne=Object(n.useState)(!1),ve=Object(c.a)(Ne,2),ye=ve[0],we=ve[1],De=Object(n.useState)(null),Oe=Object(c.a)(De,2),xe=Oe[0],Ce=Oe[1],Se=Object(n.useState)(null),Ie=Object(c.a)(Se,2),Le=Ie[0],je=Ie[1],ke=Object(n.useState)(""),Re=Object(c.a)(ke,2),Fe=Re[0],Ae=Re[1],Te=Object(n.useState)(""),Pe=Object(c.a)(Te,2),Me=Pe[0],Ye=Pe[1],Be=Object(n.useState)(!1),qe=Object(c.a)(Be,2),_e=qe[0],Ue=qe[1],Je=Object(i.h)().path,Ve=Object(n.useContext)(p).changeAuth,Qe=Object(i.g)();function Ge(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}return Object(n.useEffect)((function(){if(s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1)):s&&s.data&&s.field&&B(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" | "+(e[s.field[1].name]?e[s.field[1].name]:""))}))),g&&!1===g.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1);else if(g&&g.data&&g.field){var e=g.field[0].name,t=g.field[1].name;X(g.data.map((function(a){return r.a.createElement("option",{key:a[e],value:a[e]},a[e]+" | "+(a[t]?a[t]:""))})))}}),[s,m,g,f]),Object(n.useEffect)((function(){if(v&&!1===v.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1);else if(v&&v.data&&v.field){var e=v.data[0],t=v.field[0],a=t[0].name,n=t[1].name,l=[],o=v.data[1],c=v.field[1],i=c[1].name,s=c[2].name;ge((function(e){})),e.forEach((function(e){var t={};-1===l.indexOf(e[a])&&(l.push(e[a]),t[e[a]]=o.filter((function(t){return t[a]===e[a]})),ge((function(e){return Object.assign({},e,t)})))})),ge((function(e){return Object(D.a)({},e,{data:v.data,dataPreview:Object(w.a)(v.data),field:v.field,dateStart:le,dateEnd:se,groupOne:j,groupTwo:A})})),Ce(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:a},"debtorCode"===j?"Debtor No.":"Stock No."),r.a.createElement("option",{value:n},"Name"))),je(A?r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:i},"debtorCode"===A?"Debtor No.":"Stock No."),r.a.createElement("option",{value:s},"Name")):null),be(l.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}}),[v,y]),Object(n.useEffect)((function(){he&&he.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[pe]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Je,"/Preview")},pe?r.a.createElement(V,{backPath:Q.path,description:Q.description,resultInput:pe,withDetails:ye,data:x(pe.dataPreview[0],Fe,"asc"),dataDetail:x(pe.dataPreview[1],Me,"asc"),field:pe.field,getFormattedDate:Ge}):r.a.createElement(i.a,{to:Q.path})),r.a.createElement(i.b,{exact:!0,path:Je},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,Q.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),Ue(!1),S("debtorCode"===j?{url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"sales_analysis_debtor_stock",param:[le,se,$,te]}),credentials:"include"}}:{url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"sales_analysis_stock_debtor",param:[le,se,$,te]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group form-row mx-0 col-12"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(se)?(alert("Invalid Date Start Entry"),oe((new Date).getFullYear()+"-01-01")):oe(e.target.value)},value:le},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(le)?(alert("Invalid Date End Entry"),me(Ge(new Date))):me(e.target.value)},value:se},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("fieldset",{className:"form-group border py-3 px-4 border-secondary rounded col-md-7"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Options")),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"groupOne"},"Group One"),r.a.createElement("select",{className:"form-control col-md-2",required:!0,id:"groupOne",value:j,onChange:function(e){k(e.target.value),T(""),Z([]),ae([])}},r.a.createElement("option",{value:"debtorCode"},"Debtor Code"),r.a.createElement("option",{value:"itemCode"},"Item Code")),r.a.createElement("label",{className:"col-md-2 col-form-label pl-3",htmlFor:"groupOneID"},"debtorCode"===j?"Debtor ID":"Stock ID"),r.a.createElement("select",{className:"form-control col-md-6",required:!0,size:"3",id:"groupOneID",value:$,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),Z(t)}},"debtorCode"===j?Y:H)),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("div",{className:"form-check offset-md-6"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"groupOneAllID",checked:"debtorCode"===j?!(!s||s.data.length!==$.length):!(!g||g.data.length!==$.length),onChange:function(e){e.target.checked?Z("debtorCode"===j?s.data.map((function(e){return e[s.field[0].name]})):g.data.map((function(e){return e[g.field[0].name]}))):Z([])}}),r.a.createElement("label",{htmlFor:"groupOneAllID",style:{paddingLeft:0},className:"form-check-label"},"debtorCode"===j?"All Debtor ID":"All Stock ID"))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"groupTwo"},"Group Two"),r.a.createElement("select",{className:"form-control col-md-2",id:"groupTwo",value:A,onChange:function(e){T(e.target.value),ae([])}},r.a.createElement("option",{value:""}," -select an option- "),r.a.createElement("option",{value:"debtorCode"===j?"itemCode":"debtorCode"},"debtorCode"===j?"Item Code":"Debtor Code")),A?r.a.createElement("label",{className:"col-md-2 col-form-label pl-3",htmlFor:"groupTwoID"},"debtorCode"===A?"Debtor ID":"Stock ID"):null,A?r.a.createElement("select",{className:"form-control col-md-6",required:!0,size:"3",id:"groupTwoID",disabled:!A,value:te,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),ae(t)}},"debtorCode"===A?Y:H):null),A?r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("div",{className:"form-check offset-md-6"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"groupTwoAllID",checked:"debtorCode"===A?!(!s||s.data.length!==te.length):!(!g||g.data.length!==te.length),onChange:function(e){e.target.checked?ae("debtorCode"===A?s.data.map((function(e){return e[s.field[0].name]})):g.data.map((function(e){return e[g.field[0].name]}))):ae([])}}),r.a.createElement("label",{htmlFor:"groupTwoAllID",style:{paddingLeft:0},className:"form-check-label"},"debtorCode"===A?"All Debtor ID":"All Stock ID"))):null),r.a.createElement("fieldset",{className:"form-group py-2 px-4 border border-secondary rounded col-md-3 offset-md-1"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-check col-md-12 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withDetails",onChange:function(e){e.target.checked?we(!0):we(!1)},checked:ye}),r.a.createElement("label",{htmlFor:"withDetails",className:"form-check-label"},"With Details")),r.a.createElement("div",{className:"form-group form-row col-md-12"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-8",value:Fe,onChange:function(e){return Ae(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),xe)),r.a.createElement("div",{className:"form-group col-md-12 form-row"},r.a.createElement("label",{className:"col-md-6 col-form-label ",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:Me,onChange:function(e){return Ye(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),Le)))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return ge(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){pe?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),Qe.push("./SalesReport/Preview")):Ue(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),_e?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null))),r.a.createElement("hr",null),pe?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return he.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return he.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),function(){var e=pe.data[0],t=pe.field[0],a=t[0].name,n=t[1].name,l="debtorCode"===pe.groupOne?null:t[3].name,o="debtorCode"===pe.groupOne?t[3].name:t[4].name,c=(pe.data[1],pe.field[1]),i=c[1].name,s=c[2].name,m=c[4].name,d=c[5].name,u=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[],a=new Date(new Date(pe.dateStart).getFullYear(),new Date(pe.dateStart).getMonth(),new Date(pe.dateStart).getDate(),0),n=new Date(new Date(pe.dateEnd).getFullYear(),new Date(pe.dateEnd).getMonth(),new Date(pe.dateEnd).getDate(),0);if(n<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0))"itemCode"===pe.groupOne&&t.push(r.a.createElement("h6",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===pe.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear(),style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===pe.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear()));else{var l=new Date(a);for("itemCode"===pe.groupOne&&t.push(r.a.createElement("h6",{key:e[a.getMonth()]+" "+a.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[a.getMonth()]+" "+a.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===pe.groupOne?e[a.getMonth()]+" "+a.getFullYear()+" Total":e[a.getMonth()]+" "+a.getFullYear(),style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===pe.groupOne?e[a.getMonth()]+" "+a.getFullYear()+" Total":e[a.getMonth()]+" "+a.getFullYear()));n>new Date(new Date(l).getFullYear(),new Date(l).getMonth()+1+1,0);)l.setMonth(l.getMonth()+1,1),"itemCode"===pe.groupOne&&t.push(r.a.createElement("h6",{key:e[l.getMonth()]+" "+l.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[l.getMonth()]+" "+l.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===pe.groupOne?e[l.getMonth()]+" "+l.getFullYear()+" Total":e[l.getMonth()]+" "+l.getFullYear(),style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===pe.groupOne?e[l.getMonth()]+" "+l.getFullYear()+" Total":e[l.getMonth()]+" "+l.getFullYear()));"itemCode"===pe.groupOne&&t.push(r.a.createElement("h6",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===pe.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear(),style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===pe.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear()))}return t}(),p="debtorCode"===pe.groupOne?379+150*u.length+100:379+100*u.length+100+100;return r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{width:p,transform:"rotateX(180deg)"}},r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"0 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),pe.data[0]=x(pe.data[0],a,e.target.getAttribute("data-order")),ge(Object(D.a)({},pe)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("num").classList.remove("fa-caret-up"),document.getElementById("num").classList.add("fa-caret-down")):(document.getElementById("num").classList.remove("fa-caret-down"),document.getElementById("num").classList.add("fa-caret-up"))}},"debtorCode"===pe.groupOne?"Debtor No.":"Stock No.",r.a.createElement("i",{id:"num",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"0 0 225px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),pe.data[0]=x(pe.data[0],n,e.target.getAttribute("data-order")),ge(Object(D.a)({},pe)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("name").classList.remove("fa-caret-up"),document.getElementById("name").classList.add("fa-caret-down")):(document.getElementById("name").classList.remove("fa-caret-down"),document.getElementById("name").classList.add("fa-caret-up"))}},"Name",r.a.createElement("i",{id:"name",className:"fa fa-caret-down ml-2"})),u,"debtorCode"===pe.groupOne?null:r.a.createElement("h6",{style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},"Qty"),r.a.createElement("h6",{style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},"Total")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(){var u=[],p=[];return e.forEach((function(g){var f=[];-1===u.indexOf(g[a])&&(u.push(g[a]),p.push(r.a.createElement("div",{key:g[a]},r.a.createElement("div",{className:"d-flex",style:pe.groupTwo?{cursor:"pointer"}:null,"data-toggle":"collapse","data-target":"#"+g[a].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:pe.groupTwo?"fa fa-plus-square mt-1":"",style:pe.groupTwo?{flex:"0 0 14px",paddingLeft:10,paddingRight:10}:{flex:"0 0 34px"},id:"plusminus"+g[a].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10}},g[a]),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 225px",paddingLeft:10,paddingRight:10}},g[n]),function(e,t,a){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=[],o=a[0].name,c=a[2].name,i="debtorCode"===pe.groupOne?null:a[3].name,s="debtorCode"===pe.groupOne?a[3].name:a[4].name,m=new Date(new Date(pe.dateStart).getFullYear(),new Date(pe.dateStart).getMonth(),new Date(pe.dateStart).getDate(),0),d=new Date(new Date(pe.dateEnd).getFullYear(),new Date(pe.dateEnd).getMonth(),new Date(pe.dateEnd).getDate(),0);return d<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?("itemCode"===pe.groupOne&&l.push(r.a.createElement("p",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===pe.groupOne?n[d.getMonth()]+" "+d.getFullYear()+" Total":n[d.getMonth()]+" "+d.getFullYear(),className:"mb-0",style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[s]:t}),0))))):function(){var a=new Date(m);for("itemCode"===pe.groupOne&&l.push(r.a.createElement("p",{key:n[m.getMonth()]+" "+m.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===pe.groupOne?n[m.getMonth()]+" "+m.getFullYear()+" Total":n[m.getMonth()]+" "+m.getFullYear(),className:"mb-0",style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[s]:t}),0))));d>new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1+1,0);)a.setMonth(a.getMonth()+1,1),"itemCode"===pe.groupOne&&l.push(r.a.createElement("p",{key:n[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===pe.groupOne?n[a.getMonth()]+" "+a.getFullYear()+" Total":n[a.getMonth()]+" "+a.getFullYear(),className:"mb-0",style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[s]:t}),0))));"itemCode"===pe.groupOne&&l.push(r.a.createElement("p",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===pe.groupOne?n[d.getMonth()]+" "+d.getFullYear()+" Total":n[d.getMonth()]+" "+d.getFullYear(),className:"mb-0",style:"itemCode"===pe.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[s]:t}),0))))}(),l}(g,e,t),"itemCode"===pe.groupOne?r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(e.reduce((function(e,t){return t[a]===g[a]?e+t[l]:e}),0))):null,r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(e.reduce((function(e,t){return t[a]===g[a]?e+t[o]:e}),0)))),pe.groupTwo?r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5",id:g[a].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){if(pe[g[a]]){var t="subNum"+g[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[g[a]]=x(pe[g[a]],i,e.target.getAttribute("data-order")),ge(Object.assign({},pe,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}}},"itemCode"===pe.groupTwo?"Stock No.":"Debtor No.",r.a.createElement("i",{id:"subNum"+g[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"align-top",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){if(pe[g[a]]){var t="subName"+g[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[g[a]]=x(pe[g[a]],s,e.target.getAttribute("data-order")),ge(Object.assign({},pe,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}}},"Name",r.a.createElement("i",{id:"subName"+g[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[],a=new Date(new Date(pe.dateStart).getFullYear(),new Date(pe.dateStart).getMonth(),new Date(pe.dateStart).getDate(),0),n=new Date(new Date(pe.dateEnd).getFullYear(),new Date(pe.dateEnd).getMonth(),new Date(pe.dateEnd).getDate(),0);if(n<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0))t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Total",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Total"));else{var l=new Date(a);for(t.push(r.a.createElement("th",{key:e[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"align-top"},e[a.getMonth()]+" "+a.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[a.getMonth()]+" "+a.getFullYear()+" Total",className:"align-top"},e[a.getMonth()]+" "+a.getFullYear()+" Total"));n>new Date(new Date(l).getFullYear(),new Date(l).getMonth()+1+1,0);)l.setMonth(l.getMonth()+1,1),t.push(r.a.createElement("th",{key:e[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},e[l.getMonth()]+" "+l.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[l.getMonth()]+" "+l.getFullYear()+" Total",className:"align-top"},e[l.getMonth()]+" "+l.getFullYear()+" Total"));t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Total",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Total"))}return t}(),r.a.createElement("th",{className:"align-top"},"Total Qty"),r.a.createElement("th",{className:"align-top"},"Total"))),r.a.createElement("tbody",null,pe[g[a]]?pe[g[a]].map((function(e){if(-1===f.indexOf(e[i]))return f.push(e[i]),r.a.createElement("tr",{key:e[i]},r.a.createElement("td",{className:"align-top"},e[i]),r.a.createElement("td",{className:"align-top"},e[s]),function(e,t,a){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=[],o=a[1].name,c=a[3].name,i=a[4].name,s=a[5].name,m=new Date(new Date(pe.dateStart).getFullYear(),new Date(pe.dateStart).getMonth(),new Date(pe.dateStart).getDate(),0),d=new Date(new Date(pe.dateEnd).getFullYear(),new Date(pe.dateEnd).getMonth(),new Date(pe.dateEnd).getDate(),0);return d<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?(l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[s]:t}),0))))):function(){var a=new Date(m);for(l.push(r.a.createElement("td",{key:n[m.getMonth()]+" "+m.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[m.getMonth()]+" "+m.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[s]:t}),0))));d>new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1+1,0);)a.setMonth(a.getMonth()+1,1),l.push(r.a.createElement("td",{key:n[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[a.getMonth()]+" "+a.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[s]:t}),0))));l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[s]:t}),0))))}(),l}(e,pe[g[a]],c),r.a.createElement("td",{className:"align-top"},pe[g[a]].reduce((function(t,a){return a[i]===e[i]?t+a[m]:t}),0)),r.a.createElement("td",{className:"align-top"},C(pe[g[a]].reduce((function(t,a){return a[i]===e[i]?t+a[d]:t}),0))))})):null))):null)))})),p}())))}()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:Q.path}))}Q.description="Sales Report",Q.path="/SalesReport";var G=Q;var H=function(e){var t=Object(n.useState)(e.url.item&&e.url.id?"UPDATE/DELETE":"INSERT"),a=Object(c.a)(t,1)[0],l=Object(n.useState)("UPDATE/DELETE"===a),o=Object(c.a)(l,2),s=o[0],m=o[1],d=O("UPDATE/DELETE"===a?{url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.url.item,id:e.url.id}),credentials:"include"}}:null),u=Object(c.a)(d,1)[0],g=u.data,f=u.error,E=O({url:"./getIDList",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item}),credentials:"include"}}),h=Object(c.a)(E,1)[0],b=h.data,N=h.error,v=O(null),y=Object(c.a)(v,2),x=y[0],C=x.data,S=x.error,I=y[1],L=O(null),j=Object(c.a)(L,2),k=j[0],R=k.data,F=k.error,A=j[1],T=O(null),P=Object(c.a)(T,2),M=P[0],Y=M.data,B=M.error,q=P[1],_=Object(n.useState)({IDPrefix:[],IDPrefixLatestNumber:[],currentIDPrefix:"",minIDNumber:1}),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(n.useContext)(p).changeAuth,G=Object(i.g)();Object(n.useEffect)((function(){if(g&&!1===g.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Q(!1);else if(g&&g.field&&g.data[0]){var t=[];g.field.forEach((function(e,a){t=[].concat(Object(w.a)(t.slice(0,a)),[g.data[0][e.name]?g.data[0][e.name]:""],Object(w.a)(t.slice(a+1,t.length)))})),V((function(t){return Object(D.a)({},t,{currentIDPrefix:g.data[0][e.item.toUpperCase()+"_NUM"].substring(0,g.data[0][e.item.toUpperCase()+"_NUM"].indexOf("-"))})})),e.changeInputState(t),e.changeParamOutstanding&&e.changeParamOutstanding(e.paramOutstanding(t[e.debtorCreditorNumPosition],t[e.oldNumPosition]))}}),[g,f]),Object(n.useEffect)((function(){if(b&&!1===b.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Q(!1);else if(b&&b.data&&b.field){var t=[],a=[];b.data.forEach((function(e){var n=e[b.field[0].name].match(/[^-]+/)[0],r=parseInt(e[b.field[0].name].substring(e[b.field[0].name].indexOf("-")+1));-1===t.indexOf(n)?(t.push(n),a.push(r)):r&&r>a[t.indexOf(n)]&&(a[t.indexOf(n)]=r)})),V((function(e){return Object(D.a)({},e,{IDPrefix:t,IDPrefixLatestNumber:a})}))}C&&!1===C.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Q(!1)):C&&!C.error&&(alert("Insert Successful!"),G.push(e.successPath)),Y&&!1===Y.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Q(!1)):Y&&!Y.error&&(alert("Update Successful!"),G.push(e.successPath)),R&&!1===R.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Q(!1)):R&&!R.error&&(alert("Delete Successful!"),G.push(e.successPath))}),[b,N,C,S,Y,B,R,F]);var H=null;return(g&&g.error||f||b&&b.error||N||C&&C.error||S||R&&R.error||F||Y&&Y.error||B)&&(H=r.a.createElement("div",{className:"alert alert-warning"},g&&g.error?"Data RETRIEVAL for item failed errno: "+g.error.errno+" code: "+g.error.code+" message: "+g.error.sqlMessage:null,f?"Data RETRIEVAL for item failed "+f:null,C&&C.error?"Data INSERT for item failed errno: "+C.error.errno+" code: "+C.error.code+" message: "+C.error.sqlMessage:null,S?"Data INSERT for item failed "+S:null,Y&&Y.error?"Data UPDATE for item failed errno: "+Y.error.errno+" code: "+Y.error.code+" message: "+Y.error.sqlMessage:null,B?"Data UPDATE for item failed "+B:null,R&&R.error?"Data DELETE for item failed errno: "+R.error.errno+" code: "+R.error.code+" message: "+R.error.sqlMessage:null,F?"Data DELETE for item failed "+F:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"ID RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"ID RETRIEVAL for item failed "+N:null)),e.children({usage:a,disabled:s,changeDisabled:m,onInsert:function(){I({url:"./InsertItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,param:e.inputState}),credentials:"include"}})},onUpdate:function(){q({url:"./UpdateItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,param:e.inputState}),credentials:"include"}})},onDelete:function(){window.confirm("Confirm Delete?")&&A({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:e.item,id:[e.url.id]}),credentials:"include"}})},errorDisplay:H,inputNumberRender:function(t){return r.a.createElement("div",{className:t.layout+" input-group"},r.a.createElement("input",{type:"text",maxLength:10,value:J.currentIDPrefix,required:!0,className:"form-control \r col-5 col-md-4",pattern:"[A-Za-z]+",title:"Use Alphabets only (Max 4)",disabled:s,onChange:function(e){var a=J.IDPrefix.indexOf(e.target.value);-1!==a?(V(Object(D.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:J.IDPrefixLatestNumber[a]+1})),t.onChange("",t.position)):(V(Object(D.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:1})),t.onChange("",t.position))}}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:s,onChange:function(e){var a=J.IDPrefix.indexOf(e.target.value);-1!==a?(V(Object(D.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:J.IDPrefixLatestNumber[a]+1})),t.onChange("",t.position)):(V(Object(D.a)({},J,{currentIDPrefix:e.target.value,minIDNumber:1})),t.onChange("",t.position))}},r.a.createElement("option",{value:""},"-select an option- "),J.IDPrefix.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e+" | Latest Number: "+J.IDPrefixLatestNumber[t])}))),r.a.createElement("input",{type:"number",id:t.labelID,max:"999999999",value:e.inputState[t.position].substring(e.inputState[t.position].indexOf("-")+1),onChange:function(e){return t.onChange(J.currentIDPrefix+"-"+e.target.value,t.position)},disabled:s,required:!0,className:"form-control",placeholder:"Next Number : "+J.minIDNumber,min:J.minIDNumber}))}})};var X=function(e){var t=Object(i.g)();return r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-1 my-1"},"Submit"),"UPDATE/DELETE"===e.usage?r.a.createElement("button",{type:"button",onClick:function(t){e.changeDisabled(!1)},className:"btn btn-outline-primary mx-1 my-1"},"Edit"):null,"UPDATE/DELETE"===e.usage?r.a.createElement("button",{type:"button",onClick:function(t){e.onDelete()},className:"btn btn-danger mx-1 my-1"},"Delete"):null,e.path?r.a.createElement("button",{type:"button",onClick:function(a){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.5"),t.push(e.path)},className:"btn btn-info mx-1 my-1"},"Preview"):null)};var z=function(e){var t=Object(i.g)(),a=e.topLeftInput?e.topLeftInput.map((function(e,t){return r.a.createElement("p",{className:"my-2",key:t},e)})):null,n=e.topRightField&&e.topRightInput?e.topRightField.map((function(t,a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"col-6 h6"},t),r.a.createElement("div",{className:"col-1"},":"),r.a.createElement("div",{className:"col-4 h6"},e.topRightInput[a]))})):null,l=e.bottomField?e.bottomField.map((function(e){return r.a.createElement("th",{className:"text-nowrap",key:e},e)})):null,o=e.bottomInput?e.bottomInput.map((function(t,a){return r.a.createElement("tr",{key:a},t.map((function(e,t){return r.a.createElement("td",{key:t},e)})),e.calculateSubtotal?r.a.createElement("td",null,C(e.calculateSubtotal(a))):null)})):null;return r.a.createElement("div",{className:"container py-5",style:{maxWidth:"800px"}},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),t.push(e.backPath)}},"Back"),r.a.createElement("div",{className:"jumbotron",style:{padding:0}},r.a.createElement("h1",{className:"text-center"},e.description)),r.a.createElement("div",{className:"row",style:{margin:0}},r.a.createElement("div",{className:"col-6 jumbotron h5",style:{marginBottom:0}},a),r.a.createElement("div",{className:"col-6 py-5"},n)),r.a.createElement("hr",{className:"border border-secondary my-3"}),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,l)),r.a.createElement("tbody",null,o)),r.a.createElement("h3",{className:"text-right px-3"},"Total: "+C(e.calculateTotal())),r.a.createElement("hr",{className:"border border-secondary"}),r.a.createElement("p",{className:"text-center"},e.footer))};var W=function(e){var t=e.dataSelectStock?e.dataSelectStock.field[0].name:null,a=e.dataSelectStock?e.dataSelectStock.field[1].name:null,n=e.dataSelectStock?e.dataSelectStock.field[8].name:null;function l(t,a,n,r){e.changeInputState((function(e){return e.slice(0,a).concat([e[a].slice(0,n).concat([e[a][n].slice(0,r).concat(t).concat(e[a][n].slice(r+1))]).concat(e[a].slice(n+1))]).concat(e.slice(a+1))}))}function o(t,a,n){var r=e.inputState[e.stockControlPosition].findIndex((function(e){return e[0]-1===t}));r>=0?e.changeInputState((function(l){return[].concat(Object(w.a)(l.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(l[e.stockControlPosition].slice(0,r)),[[t+1,a,n]],Object(w.a)(l[e.stockControlPosition].slice(r+1)))],Object(w.a)(l.slice(e.stockControlPosition+1)))})):e.changeInputState((function(r){return[].concat(Object(w.a)(r.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(r[e.stockControlPosition]),[[t+1,a,n]])],Object(w.a)(r.slice(e.stockControlPosition+1)))}))}function c(t){var a=e.inputState[e.stockControlPosition].findIndex((function(e){return e[0]-1===t}));a>=0&&e.changeInputState((function(t){return[].concat(Object(w.a)(t.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(t[e.stockControlPosition].slice(0,a)),Object(w.a)(t[e.stockControlPosition].slice(a+1)))],Object(w.a)(t.slice(e.stockControlPosition+1)))}))}function i(a){return"out"===e.stockDirection?e.dataSelectStock.data.find((function(e){return e[t]===a[1]}))[n]-e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===a[1]?e+Number(t[2]):e}),0):"in"===e.stockDirection?e.dataSelectStock.data.find((function(e){return e[t]===a[1]}))[n]+e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===a[1]?e+Number(t[2]):e}),0):void 0}return console.log(e.inputState),r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-12 col-md-6 offset-md-3 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:e.disabled,onClick:function(){return e.changeInputState(e.inputState.slice(0,e.linePosition).concat([e.inputState[e.linePosition].slice(0).concat([[e.inputState[e.linePosition].length+1,"","",""]])]).concat(e.inputState.slice(e.linePosition+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},e.lineDescription),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:e.disabled,onClick:function(){c(e.inputState[e.linePosition].length-1),e.changeInputState((function(t){return t.slice(0,e.linePosition).concat([t[e.linePosition].slice(0,t[e.linePosition].length-1)]).concat(t.slice(e.linePosition+1))}))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col text-nowrap",style:{flex:"1 0 80px",paddingLeft:10,paddingRight:10}},"Line No."),r.a.createElement("h6",{className:"col text-nowrap",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Stock Control"),r.a.createElement("h6",{className:"col text-nowrap",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col text-nowrap",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty")),e.inputState[e.linePosition].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNo",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNo",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][0],onChange:function(e){return e},style:{flex:"1 0 80px",paddingLeft:10,paddingRight:0},disabled:e.disabled}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",className:"form-control rounded-0",disabled:e.disabled,style:{paddingLeft:10},value:e.inputState[e.linePosition][a][1]?e.inputState[e.linePosition][a][1]:"",onChange:function(t){l(t.target.value,e.linePosition,a,1),e.dataSelectStock.data.some((function(a){return a[e.dataSelectStock.field[0].name]===t.target.value}))?o(a,t.target.value,e.inputState[e.linePosition][a][3]):c(a)}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e.disabled,onChange:function(t){var n="",r=t.target.value;e.dataSelectStock.data.forEach((function(a){a[e.dataSelectStock.field[0].name]===t.target.value&&(n=a[e.dataSelectStock.field[1].name]?a[e.dataSelectStock.field[1].name]:"")})),e.changeInputState((function(t){return t.slice(0,e.linePosition).concat([t[e.linePosition].slice(0,a).concat([t[e.linePosition][a].slice(0,1).concat(r).concat(n).concat(t[e.linePosition][a].slice(3))]).concat(t[e.linePosition].slice(a+1))]).concat(t.slice(e.linePosition+1))})),""!==t.target.value?o(a,t.target.value,e.inputState[e.linePosition][a][3]):c(a)}},r.a.createElement("option",{value:""},"-select an option- "),e.stockList)),r.a.createElement("div",{className:"text-center",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10,paddingTop:7,border:"1px solid #ced4da",backgroundColor:e.disabled?"#e9ecef":e.dataSelectStock&&e.dataSelectStock.data.every((function(t){return t[e.dataSelectStock.field[0].name]!==e.inputState[e.linePosition][a][1]}))?"#e9ecef":"transparent"}},r.a.createElement("label",{htmlFor:"stockControl",className:"sr-only"}),r.a.createElement("input",{id:"stockControl",type:"checkbox",disabled:!!e.disabled||!(!e.dataSelectStock||!e.dataSelectStock.data.every((function(t){return t[e.dataSelectStock.field[0].name]!==e.inputState[e.linePosition][a][1]}))),checked:e.inputState[e.stockControlPosition].some((function(e){return e[0]-1===a})),onChange:function(t){t.target.checked?o(a,e.inputState[e.linePosition][a][1],e.inputState[e.linePosition][a][3]):c(a)}})),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][2],onChange:function(t){return l(t.target.value,e.linePosition,a,2)},disabled:e.disabled,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:"1",id:"qty",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][3],disabled:e.disabled,style:{flex:"1 0 75px",paddingLeft:10,paddingRight:0},onChange:function(t){l(t.target.value,e.linePosition,a,3),e.inputState[e.stockControlPosition].some((function(e){return e[0]-1===a}))&&o(a,e.inputState[e.linePosition][a][1],t.target.value)}}))})),e.dataSelectStock&&e.inputState[e.stockControlPosition].some((function(e){return i(e)<0}))&&!e.disabled?r.a.createElement("div",{style:{minWidth:575}},r.a.createElement("div",{className:"alert alert-warning mt-3",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#negativeStockBal"},"Negative Stock Balance"),r.a.createElement("div",{className:"collapse navbar-collapse pl-3 pl-md-5",id:"negativeStockBal"},r.a.createElement("table",{className:"table table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"Item Code"),r.a.createElement("th",{className:"text-nowrap"},"Description"),r.a.createElement("th",{className:"text-nowrap"},"Bal Qty"),r.a.createElement("th",{className:"text-nowrap"},"out"===e.stockDirection?"Out":"In"),r.a.createElement("th",{className:"text-nowrap"},"Final Qty"))),r.a.createElement("tbody",null,function(){var l=[];return e.dataSelectStock?(e.inputState[e.stockControlPosition].forEach((function(e){i(e)<0&&-1===l.indexOf(e[1])&&l.push(e[1])})),l.map((function(l){return r.a.createElement("tr",{key:l},r.a.createElement("td",null,l),r.a.createElement("td",null,e.dataSelectStock.data.find((function(e){return e[t]===l}))[a]),r.a.createElement("td",null,e.dataSelectStock.data.find((function(e){return e[t]===l}))[n]),r.a.createElement("td",null,e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===l?e+Number(t[2]):e}),0)),r.a.createElement("td",null,i(e.inputState[e.stockControlPosition].find((function(e){return e[1]===l})))))}))):null}())))):null))};function $(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=7,E=Object(n.useState)(null),b=Object(c.a)(E,2),N=b[0],v=b[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),x=D[0],I=D[1],L=Object(n.useState)(["","","","","","","",[],[]]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(i.h)().path,A=Object(n.useContext)(p).changeAuth;function T(e,t){R([].concat(Object(w.a)(k.slice(0,t)),[e],Object(w.a)(k.slice(t+1))))}function P(){var e=0;return k[f].forEach((function(t,a){""!==k[f][a][3]&&(e+=parseInt(k[f][a][3]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;I(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}}),[o,s,u,g]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||g)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null)),r.a.createElement(H,{inputState:k,changeInputState:R,url:t,item:"delivery_order",successPath:"/DeliveryOrder"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(F,"/Preview")},r.a.createElement(z,{description:$.description,backPath:$.path,topLeftInput:[k[1],k[2]],topRightField:[$.description+" No","Date","Other Description"],topRightInput:[k[3],S(k[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:k[f],calculateTotal:P,footer:"Goods sold are neither returnable or refundable. Otherwise a cancellation fee of 20% on purchase price will be imposed."})),r.a.createElement(i.b,{exact:!0,path:F},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+$.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:k[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),R([e.target.value,t,a].concat(Object(w.a)(k.slice(3,k.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:k[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:k[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"deliveryOrderNumber",className:"mt-3"},"Delivery Order Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:T,layout:"",position:3,labelID:"deliveryOrderNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:k[4],onChange:function(e){return T(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return T(e.target.value,5)},value:k[5],disabled:a,className:"form-control"})),r.a.createElement(W,{linePosition:f,stockControlPosition:8,disabled:a,inputState:k,changeInputState:R,dataSelectStock:u,stockList:x,stockDirection:"out",lineDescription:"Delivery Order Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(P()))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(F,"/Preview")}))))),r.a.createElement(i.a,{to:$.path}))}))}$.description="Delivery Order",$.path="/DeliveryOrderItem";var Z=$;function K(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=7,E=Object(n.useState)(null),b=Object(c.a)(E,2),N=b[0],v=b[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),x=D[0],I=D[1],L=Object(n.useState)(["","","","","","","",[],[]]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(i.h)().path,A=Object(n.useContext)(p).changeAuth;function T(e,t){R([].concat(Object(w.a)(k.slice(0,t)),[e],Object(w.a)(k.slice(t+1))))}function P(){var e=0;return k[f].forEach((function(t,a){""!==k[f][a][3]&&(e+=parseInt(k[f][a][3]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;I(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}}),[o,s,u,g]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||g)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null)),r.a.createElement(H,{inputState:k,changeInputState:R,url:t,item:"delivery_return",successPath:"/DeliveryReturn"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(F,"/Preview")},r.a.createElement(z,{description:K.description,backPath:K.path,topLeftInput:[k[1],k[2]],topRightField:[K.description+" No","Date","Other Description"],topRightInput:[k[3],S(k[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:k[f],calculateTotal:P,footer:"Goods sold are neither returnable or refundable. Otherwise a cancellation fee of 20% on purchase price will be imposed."})),r.a.createElement(i.b,{exact:!0,path:F},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+K.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:k[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),R([e.target.value,t,a].concat(Object(w.a)(k.slice(3,k.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:k[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:k[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"deliveryReturnNumber",className:"mt-3"},"Delivery Return Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:T,layout:"",position:3,labelID:"deliveryReturnNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:k[4],onChange:function(e){return T(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return T(e.target.value,5)},value:k[5],disabled:a,className:"form-control"})),r.a.createElement(W,{linePosition:f,stockControlPosition:8,disabled:a,inputState:k,changeInputState:R,dataSelectStock:u,stockList:x,stockDirection:"in",lineDescription:"Delivery Return Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(P()))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(F,"/Preview")}))))),r.a.createElement(i.a,{to:K.path}))}))}K.description="Delivery Return",K.path="/DeliveryReturnItem";var ee=K;var te=function(e){var t=e.dataSelectStock?e.dataSelectStock.field[0].name:null,a=e.dataSelectStock?e.dataSelectStock.field[1].name:null,n=e.dataSelectStock?e.dataSelectStock.field[8].name:null;function l(t,a,n,r){e.changeInputState((function(e){return e.slice(0,a).concat([e[a].slice(0,n).concat([e[a][n].slice(0,r).concat(t).concat(e[a][n].slice(r+1))]).concat(e[a].slice(n+1))]).concat(e.slice(a+1))}))}function o(t,a,n){var r=e.inputState[e.stockControlPosition].findIndex((function(e){return e[0]-1===t}));r>=0?e.changeInputState((function(l){return[].concat(Object(w.a)(l.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(l[e.stockControlPosition].slice(0,r)),[[t+1,a,n]],Object(w.a)(l[e.stockControlPosition].slice(r+1)))],Object(w.a)(l.slice(e.stockControlPosition+1)))})):e.changeInputState((function(r){return[].concat(Object(w.a)(r.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(r[e.stockControlPosition]),[[t+1,a,n]])],Object(w.a)(r.slice(e.stockControlPosition+1)))}))}function c(t){var a=e.inputState[e.stockControlPosition].findIndex((function(e){return e[0]-1===t}));a>=0&&e.changeInputState((function(t){return[].concat(Object(w.a)(t.slice(0,e.stockControlPosition)),[[].concat(Object(w.a)(t[e.stockControlPosition].slice(0,a)),Object(w.a)(t[e.stockControlPosition].slice(a+1)))],Object(w.a)(t.slice(e.stockControlPosition+1)))}))}function i(a){return"out"===e.stockDirection?e.dataSelectStock.data.find((function(e){return e[t]===a[1]}))[n]-e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===a[1]?e+Number(t[2]):e}),0):"in"===e.stockDirection?e.dataSelectStock.data.find((function(e){return e[t]===a[1]}))[n]+e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===a[1]?e+Number(t[2]):e}),0):void 0}return r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-12 col-md-6 offset-md-3 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:e.disabled,onClick:function(){return e.changeInputState(e.inputState.slice(0,e.linePosition).concat([e.inputState[e.linePosition].slice(0).concat([[e.inputState[e.linePosition].length+1,"","","",0,0]])]).concat(e.inputState.slice(e.linePosition+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},e.lineDescription),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:e.disabled,onClick:function(){c(e.inputState[e.linePosition].length-1),e.changeInputState((function(t){return t.slice(0,e.linePosition).concat([t[e.linePosition].slice(0,t[e.linePosition].length-1)]).concat(t.slice(e.linePosition+1))}))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 80px",paddingLeft:10,paddingRight:10}},"Line No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Stock Control"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Price"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Discount"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Subtotal")),e.inputState[e.linePosition].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNo",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNo",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][0],onChange:function(e){return e},style:{flex:"1 0 80px",paddingLeft:10,paddingRight:0},disabled:e.disabled}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",className:"form-control rounded-0",disabled:e.disabled,style:{paddingLeft:10},value:e.inputState[e.linePosition][a][1]?e.inputState[e.linePosition][a][1]:"",onChange:function(t){l(t.target.value,e.linePosition,a,1),e.dataSelectStock.data.some((function(a){return a[e.dataSelectStock.field[0].name]===t.target.value}))?o(a,t.target.value,e.inputState[e.linePosition][a][4]):c(a)}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e.disabled,onChange:function(t){var n="",r="",l=t.target.value;e.dataSelectStock.data.forEach((function(a){a[e.dataSelectStock.field[0].name]===t.target.value&&(n=a[e.dataSelectStock.field[1].name]?a[e.dataSelectStock.field[1].name]:"",r=a[e.dataSelectStock.field[2].name]?a[e.dataSelectStock.field[2].name]:"")})),e.changeInputState((function(t){return t.slice(0,e.linePosition).concat([t[e.linePosition].slice(0,a).concat([t[e.linePosition][a].slice(0,1).concat(l).concat(n).concat(r).concat(t[e.linePosition][a].slice(4))]).concat(t[e.linePosition].slice(a+1))]).concat(t.slice(e.linePosition+1))})),""!==t.target.value?o(a,t.target.value,e.inputState[e.linePosition][a][4]):c(a)}},r.a.createElement("option",{value:""},"-select an option- "),e.stockList)),r.a.createElement("div",{className:"text-center",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10,paddingTop:7,border:"1px solid #ced4da",backgroundColor:e.disabled?"#e9ecef":e.dataSelectStock&&e.dataSelectStock.data.every((function(t){return t[e.dataSelectStock.field[0].name]!==e.inputState[e.linePosition][a][1]}))?"#e9ecef":"transparent"}},r.a.createElement("label",{htmlFor:"stockControl",className:"sr-only"}),r.a.createElement("input",{id:"stockControl",type:"checkbox",disabled:!!e.disabled||!(!e.dataSelectStock||!e.dataSelectStock.data.every((function(t){return t[e.dataSelectStock.field[0].name]!==e.inputState[e.linePosition][a][1]}))),checked:e.inputState[e.stockControlPosition].some((function(e){return e[0]-1===a})),onChange:function(t){t.target.checked?o(a,e.inputState[e.linePosition][a][1],e.inputState[e.linePosition][a][4]):c(a)}})),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][2],onChange:function(t){return l(t.target.value,e.linePosition,a,2)},disabled:e.disabled,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"price",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:".01",id:"price",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][3],onChange:function(t){return l(t.target.value,e.linePosition,a,3)},disabled:e.disabled,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:"1",id:"qty",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][4],disabled:e.disabled,style:{flex:"1 0 75px",paddingLeft:10,paddingRight:0},onChange:function(t){l(t.target.value,e.linePosition,a,4),e.inputState[e.stockControlPosition].some((function(e){return e[0]-1===a}))&&o(a,e.inputState[e.linePosition][a][1],t.target.value)}}),r.a.createElement("label",{htmlFor:"discount",className:"sr-only"}),r.a.createElement("input",{type:"number",required:!0,min:"0",step:".01",id:"discount",className:"col form-control rounded-0",value:e.inputState[e.linePosition][a][5],onChange:function(t){return l(t.target.value,e.linePosition,a,5)},disabled:e.disabled,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"subtotal",className:"sr-only"}),r.a.createElement("input",{type:"text",step:".01",disabled:!0,id:"subtotal",className:"col form-control rounded-0",value:C(e.calculateSubtotal(a)),style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}))})),e.dataSelectStock&&e.inputState[e.stockControlPosition].some((function(e){return i(e)<0}))&&!e.disabled?r.a.createElement("div",{style:{minWidth:845}},r.a.createElement("div",{className:"alert alert-warning mt-3",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#negativeStockBal"},"Negative Stock Balance"),r.a.createElement("div",{className:"collapse navbar-collapse pl-3 pl-md-5",id:"negativeStockBal"},r.a.createElement("table",{className:"table table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"Item Code"),r.a.createElement("th",{className:"text-nowrap"},"Description"),r.a.createElement("th",{className:"text-nowrap"},"Bal Qty"),r.a.createElement("th",{className:"text-nowrap"},"out"===e.stockDirection?"Out":"In"),r.a.createElement("th",{className:"text-nowrap"},"Final Qty"))),r.a.createElement("tbody",null,function(){var l=[];return e.dataSelectStock?(e.inputState[e.stockControlPosition].forEach((function(e){i(e)<0&&-1===l.indexOf(e[1])&&l.push(e[1])})),l.map((function(l){return r.a.createElement("tr",{key:l},r.a.createElement("td",null,l),r.a.createElement("td",null,e.dataSelectStock.data.find((function(e){return e[t]===l}))[a]),r.a.createElement("td",null,e.dataSelectStock.data.find((function(e){return e[t]===l}))[n]),r.a.createElement("td",null,e.inputState[e.stockControlPosition].reduce((function(e,t){return t[1]===l?e+Number(t[2]):e}),0)),r.a.createElement("td",null,i(e.inputState[e.stockControlPosition].find((function(e){return e[1]===l})))))}))):null}())))):null))};var ae=function(e){var t=e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.field[0].name:null,a=e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.field[1].name:null,n=e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.field[2].name:null,l=e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.field[3].name:null,o=e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.field[4].name:null,c=Object(i.g)();return r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-8 offset-2 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},e.historyDescription)),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap ",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Doc No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Date"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Type"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Amount")),e.dataSelectReceiptPaymentHistory?e.dataSelectReceiptPaymentHistory.data.map((function(i){return r.a.createElement("div",{className:"row flex-nowrap",style:e.disabled?{marginLeft:0,marginRight:0}:{cursor:"pointer",marginLeft:0,marginRight:0},key:i[t],onClick:function(a){e.disabled||c.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(i[n].toLowerCase(),i[t]))}},r.a.createElement("p",{className:"col border my-0",style:e.disabled?{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem",backgroundColor:"#e9ecef"}:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},i[t]),r.a.createElement("p",{className:"col border my-0",style:e.disabled?{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem",backgroundColor:"#e9ecef"}:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},S(i[a])),r.a.createElement("p",{className:"col border my-0",style:e.disabled?{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem",backgroundColor:"#e9ecef"}:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},i[n]),r.a.createElement("p",{className:"col border my-0 text-truncate",style:e.disabled?{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem",backgroundColor:"#e9ecef"}:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},i[l]),r.a.createElement("p",{className:"col border my-0",style:e.disabled?{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem",backgroundColor:"#e9ecef"}:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},C(i[o])))})):null))};function ne(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"sales_invoice"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(t.item&&t.id?{url:"./getReceiptHistory",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"sales_invoice",param:[t.id]}),credentials:"include"}}:null),y=Object(c.a)(v,1)[0],D=y.data,x=y.error,I=9,L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(["","","","","","","COD","","",[],[]]),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(i.h)().path,G=Object(n.useContext)(p).changeAuth;function W(e,t){V([].concat(Object(w.a)(J.slice(0,t)),[e],Object(w.a)(J.slice(t+1))))}function $(e){return""!==J[I][e][3]&&""!==J[I][e][4]&&""!==J[I][e][5]?parseFloat(J[I][e][3])*parseFloat(J[I][e][4])-parseFloat(J[I][e][5]):""}function Z(){var e=0;return J[I].forEach((function(t,a){""!==J[I][a][3]&&""!==J[I][a][4]&&""!==J[I][a][5]&&(e+=parseFloat(J[I][a][3])*parseFloat(J[I][a][4])-parseFloat(J[I][a][5]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):o&&o.data&&o.field&&R(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;P(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):b&&b.data&&b.field&&q(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))}))),D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1))}),[o,s,u,g,b,N,D,x]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var K=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||D&&D.error||x)&&(K=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Receipt History RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,x?"Receipt History RETRIEVAL for item failed "+x:null)),r.a.createElement(H,{inputState:J,changeInputState:V,url:t,item:"sales_invoice",successPath:"/SalesInvoice"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Q,"/Preview")},r.a.createElement(z,{description:ne.description,backPath:ne.path,topLeftInput:[J[1],J[2]],topRightField:[ne.description+" No","Date","Credit Term","Other Description"],topRightInput:[J[3],S(J[4]),"COD"===J[6]?"C.O.D.":J[6]+" Days",J[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:J[I],calculateSubtotal:$,calculateTotal:Z,footer:"NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days."})),r.a.createElement(i.b,{exact:!0,path:Q},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ne.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,K,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:J[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(w.a)(J.slice(3,6)),[n],Object(w.a)(J.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),k)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:J[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:J[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"invoiceNumber",className:"mt-3"},"Invoice Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:W,layout:"",position:3,labelID:"invoiceNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:J[4],onChange:function(e){return W(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:J[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){W(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),B)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return W(e.target.value,6)},value:J[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return W(e.target.value,5)},value:J[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:I,stockControlPosition:10,disabled:a,inputState:J,changeInputState:V,dataSelectStock:u,stockList:T,stockDirection:"out",calculateSubtotal:$,lineDescription:"Sales Invoice Line"}),r.a.createElement("h5",{className:"text-right mt-3 mb-4 col-12"},"Total: "+C(Z())),"INSERT"===t?null:r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Outstanding Amount: "+C(function(){var e=D?D.field[4].name:null;return Z()-(D?D.data.reduce((function(t,a){return t+a[e]}),0):0)}()))),"INSERT"===t?null:r.a.createElement(ae,{dataSelectReceiptPaymentHistory:D,disabled:a,historyDescription:"Receipt History"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(Q,"/Preview")}))))),r.a.createElement(i.a,{to:ne.path}))}))}ne.description="Sales Invoice",ne.path="/SalesInvoiceItem";var re=ne;function le(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debit_note"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(t.item&&t.id?{url:"./getReceiptHistory",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debit_note",param:[t.id]}),credentials:"include"}}:null),y=Object(c.a)(v,1)[0],D=y.data,x=y.error,I=9,L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(["","","","","","","COD","","",[],[]]),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(i.h)().path,G=Object(n.useContext)(p).changeAuth;function W(e,t){V([].concat(Object(w.a)(J.slice(0,t)),[e],Object(w.a)(J.slice(t+1))))}function $(e){return""!==J[I][e][3]&&""!==J[I][e][4]&&""!==J[I][e][5]?parseFloat(J[I][e][3])*parseFloat(J[I][e][4])-parseFloat(J[I][e][5]):""}function Z(){var e=0;return J[I].forEach((function(t,a){""!==J[I][a][3]&&""!==J[I][a][4]&&""!==J[I][a][5]&&(e+=parseFloat(J[I][a][3])*parseFloat(J[I][a][4])-parseFloat(J[I][a][5]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):o&&o.data&&o.field&&R(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;P(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):b&&b.data&&b.field&&q(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))}))),D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1))}),[o,s,u,g,b,N,D,x]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var K=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||D&&D.error||x)&&(K=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Receipt History RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,x?"Receipt History RETRIEVAL for item failed "+x:null)),r.a.createElement(H,{inputState:J,changeInputState:V,url:t,item:"debit_note",successPath:"/DebitNote"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Q,"/Preview")},r.a.createElement(z,{description:le.description,backPath:le.path,topLeftInput:[J[1],J[2]],topRightField:[le.description+" No","Date","Credit Term","Other Description"],topRightInput:[J[3],S(J[4]),"COD"===J[6]?"C.O.D.":J[6]+" Days",J[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:J[I],calculateSubtotal:$,calculateTotal:Z,footer:"NET 30 Days. Finance Charge of 1.5% will be made on unpaid balances after 30 days."})),r.a.createElement(i.b,{exact:!0,path:Q},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+le.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,K,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:J[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(w.a)(J.slice(3,6)),[n],Object(w.a)(J.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),k)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:J[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:J[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"debitNoteNumber",className:"mt-3"},"Debit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:W,layout:"",position:3,labelID:"debitNoteNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:J[4],onChange:function(e){return W(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:J[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){W(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),B)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return W(e.target.value,6)},value:J[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return W(e.target.value,5)},value:J[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:I,stockControlPosition:10,disabled:a,inputState:J,changeInputState:V,dataSelectStock:u,stockList:T,stockDirection:"out",calculateSubtotal:$,lineDescription:"Debit Note Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(Z())),"INSERT"===t?null:r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Outstanding Amount: "+C(function(){var e=D?D.field[4].name:null;return Z()-(D?D.data.reduce((function(t,a){return t+a[e]}),0):0)}()))),"INSERT"===t?null:r.a.createElement(ae,{dataSelectReceiptPaymentHistory:D,disabled:a,historyDescription:"Receipt History"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(Q,"/Preview")}))))),r.a.createElement(i.a,{to:le.path}))}))}le.description="Debit Note",le.path="/DebitNoteItem";var oe=le;var ce=function(e){var t=e.dataSelectOutstanding?e.dataSelectOutstanding.field[0].name:null,a=e.dataSelectOutstanding?e.dataSelectOutstanding.field[1].name:null,n=e.dataSelectOutstanding?e.dataSelectOutstanding.field[2].name:null,l=e.dataSelectOutstanding?e.dataSelectOutstanding.field[3].name:null,o=e.dataSelectOutstanding?e.dataSelectOutstanding.field[4].name:null,c=e.dataSelectOutstanding?e.dataSelectOutstanding.field[5].name:null,i=0,s=1;function m(t,a,n,r){e.changeInputState(e.inputState.slice(0,a).concat([e.inputState[a].slice(0,n).concat([e.inputState[a][n].slice(0,r).concat(t).concat(e.inputState[a][n].slice(r+1))]).concat(e.inputState[a].slice(n+1))]).concat(e.inputState.slice(a+1)))}function d(t,a){e.changeInputState(e.inputState.slice(0,a).concat([e.inputState[a].slice(0,e.inputState[a].length).concat([t])]).concat(e.inputState.slice(a+1)))}function u(t,a){e.changeInputState(e.inputState.slice(0,t).concat([e.inputState[t].slice(0,a).concat(e.inputState[t].slice(a+1))]).concat(e.inputState.slice(t+1)))}function p(a,n){e.inputState[n].length>1?e.inputState[n].forEach((function(r,l){r[i]===a[t]?a[c]>e.calculateUnappliedAmount()?m(e.calculateUnappliedAmount(),n,l,s):m(a[c],n,l,s):a[c]>e.calculateUnappliedAmount()?d([a[t],e.calculateUnappliedAmount()],n):d([a[t],a[c]],n)})):a[c]>e.calculateUnappliedAmount()?d([a[t],e.calculateUnappliedAmount()],n):d([a[t],a[c]],n)}function g(a,n){var r=!0;return e.inputState[n].forEach((function(n){n[i]!==a[t]||e.disabled||(r=!1)})),r}function f(a,n){var r=null;return e.inputState[n].forEach((function(e,n){e[i]===a[t]&&(r=n)})),r}function E(a,n){var r=!1;return e.inputState[n]&&e.inputState[n].forEach((function(e){e[i]===a[t]&&(r=!0)})),r}return r.a.createElement("fieldset",{className:"form-group col-md-12 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-12 col-md-6 offset-md-3 text-center"},r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"OFFSET ",r.a.createElement("br",null)," ",e.offsetDescription)),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap ",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Doc No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10}},"Name"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},"Type"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Date"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Original"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Outstanding"),r.a.createElement("h6",{className:"col mx-2",style:{flex:"0 0 15px",paddingLeft:0,paddingRight:0}}),r.a.createElement("h6",{className:"col",style:{flex:"1 0 100px",paddingLeft:10,paddingRight:10}},"Pay")),e.dataSelectOutstanding?e.dataSelectOutstanding.data.map((function(d,h){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:d[t]},r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[t]),r.a.createElement("p",{className:"col border my-0 text-truncate",style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[a]),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},d[n]),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},S(d[l])),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},C(d[o])),r.a.createElement("p",{className:"col border my-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,paddingTop:"0.375rem",paddingBottom:"0.375rem"}},C(d[c])),r.a.createElement("label",{htmlFor:"pay",className:"sr-only"}),r.a.createElement("input",{type:"checkbox",id:"pay",style:{flex:"0 0 15px"},checked:d[n]===e.offsetDescriptionOne?E(d,e.offsetPositionOne):E(d,e.offsetPositionTwo),disabled:e.disabled,className:"col form-control mx-2",onChange:function(a){e.changeErrorUnappliedAmount(null),a.target.checked?e.calculateUnappliedAmount()>0&&(d[n]===e.offsetDescriptionOne?p(d,e.offsetPositionOne):p(d,e.offsetPositionTwo)):d[n]===e.offsetDescriptionOne?e.inputState[e.offsetPositionOne].forEach((function(a,n){a[i]===d[t]&&u(e.offsetPositionOne,n)})):e.inputState[e.offsetPositionTwo].forEach((function(a,n){a[i]===d[t]&&u(e.offsetPositionTwo,n)}))}}),r.a.createElement("label",{htmlFor:"payAmount",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"payAmount",style:{flex:"1 0 90px",height:"auto",paddingLeft:10,paddingRight:10},className:"col form-control",min:"0",step:".01",value:d[n]===e.offsetDescriptionOne?e.inputState[e.offsetPositionOne][f(d,e.offsetPositionOne)]?""+e.inputState[e.offsetPositionOne][f(d,e.offsetPositionOne)][s]:"":e.inputState[e.offsetPositionTwo][f(d,e.offsetPositionTwo)]?""+e.inputState[e.offsetPositionTwo][f(d,e.offsetPositionTwo)][s]:"",disabled:d[n]===e.offsetDescriptionOne?g(d,e.offsetPositionOne):g(d,e.offsetPositionTwo),onChange:function(a){e.changeErrorUnappliedAmount(null),parseFloat(a.target.value)>e.calculateUnappliedAmount(d[t])?d[n]===e.offsetDescriptionOne?m(e.calculateUnappliedAmount(d[t]),e.offsetPositionOne,f(d,e.offsetPositionOne),s):m(e.calculateUnappliedAmount(d[t]),e.offsetPositionTwo,f(d,e.offsetPositionTwo),s):d[n]===e.offsetDescriptionOne?m(parseFloat(a.target.value),e.offsetPositionOne,f(d,e.offsetPositionOne),s):m(parseFloat(a.target.value),e.offsetPositionTwo,f(d,e.offsetPositionTwo),s)}}))})):null))};function ie(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"credit_note"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(null),y=Object(c.a)(v,2),D=y[0],x=D.data,I=D.error,L=y[1],j=9,k=10,R=11,F=0,A=1,T=Object(n.useState)(null),P=Object(c.a)(T,2),M=P[0],Y=P[1],B=Object(n.useState)(null),q=Object(c.a)(B,2),_=q[0],U=q[1],J=Object(n.useState)(null),V=Object(c.a)(J,2),Q=V[0],G=V[1],W=Object(n.useState)(null),$=Object(c.a)(W,2),Z=$[0],K=$[1],ee=Object(n.useState)(["","","","","","","COD","","",[],[],[],[]]),ae=Object(c.a)(ee,2),ne=ae[0],re=ae[1],le=Object(i.h)().path,oe=Object(n.useContext)(p).changeAuth;function se(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function me(e,t){re([].concat(Object(w.a)(ne.slice(0,t)),[e],Object(w.a)(ne.slice(t+1))))}function de(e){return""!==ne[j][e][3]&&""!==ne[j][e][4]&&""!==ne[j][e][5]?parseFloat(ne[j][e][3])*parseFloat(ne[j][e][4])-parseFloat(ne[j][e][5]):""}function ue(){var e=0;return ne[j].forEach((function(t,a){""!==ne[j][a][3]&&""!==ne[j][a][4]&&""!==ne[j][a][5]&&(e+=parseFloat(ne[j][a][3])*parseFloat(ne[j][a][4])-parseFloat(ne[j][a][5]))})),e}function pe(e){return ne[R].reduce((function(t,a){return e===a[F]?t:t-a[A]}),ne[k].reduce((function(t,a){return e===a[F]?t:t-a[A]}),ue()))}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):o&&o.data&&o.field&&Y(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;U(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):b&&b.data&&b.field&&G(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))})))}),[o,s,u,g,b,N]),Object(n.useEffect)((function(){x&&!1===x.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1))}),[x,I]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var ge=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||x&&x.error||I)&&(ge=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),x&&x.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+x.error.errno+" code: "+x.error.code+" message: "+x.error.sqlMessage:null,I?"Debtor Outstanding List RETRIEVAL for item failed "+I:null)),r.a.createElement(H,{inputState:ne,changeInputState:re,url:t,item:"credit_note",successPath:"/CreditNote",paramOutstanding:se,changeParamOutstanding:L,debtorCreditorNumPosition:0,oldNumPosition:8},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(le,"/Preview")},r.a.createElement(z,{description:ie.description,backPath:ie.path,topLeftInput:[ne[1],ne[2]],topRightField:[ie.description+" No","Date","Credit Term","Other Description"],topRightInput:[ne[3],S(ne[4]),"COD"===ne[6]?"C.O.D.":ne[6]+" Days",ne[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:ne[j],calculateSubtotal:de,calculateTotal:ue})),r.a.createElement(i.b,{exact:!0,path:le},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ie.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,ge,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:ne[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),re([e.target.value,t,a].concat(Object(w.a)(ne.slice(3,6)),[n],Object(w.a)(ne.slice(7)))),L(se(e.target.value,ne[8]))}},r.a.createElement("option",{value:""}," -select an option- "),M)),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorName"},"Debtor Name"),r.a.createElement("input",{id:"debtorName",value:ne[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorAddress"},"Debtor Address"),r.a.createElement("textarea",{id:"debtorAddress",value:ne[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"creditNoteNumber",className:"mt-3"},"Credit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:me,layout:"",position:3,labelID:"creditNoteNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:ne[4],onChange:function(e){return me(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:ne[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){me(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),Q)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return me(e.target.value,6)},value:ne[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return me(e.target.value,5)},value:ne[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:j,stockControlPosition:12,disabled:a,inputState:ne,changeInputState:re,dataSelectStock:u,stockList:_,stockDirection:"in",calculateSubtotal:de,lineDescription:"Credit Note Line"}),r.a.createElement("h5",{className:"text-right mt-3 mb-4 col-12"},"Total: "+C(ue())),r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(pe()))),Z,r.a.createElement(ce,{dataSelectOutstanding:x,inputState:ne,changeInputState:re,disabled:a,calculateUnappliedAmount:pe,calculateTotal:ue,offsetPositionOne:k,offsetPositionTwo:R,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:K,offsetDescription:"Sales Invoice / Debit Note"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(le,"/Preview")}))))),r.a.createElement(i.a,{to:ie.path}))}))}ie.description="Credit Note",ie.path="/CreditNoteItem";var se=ie,me=a(25),de=a.n(me);function ue(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./GoodsReceivedNoteItem",item:"goods_received_note",render:function(e){return r.a.createElement(L,Object.assign({description:"Goods Received Note (GRN)",listname:ue.description},e))}}))}ue.description="Goods Received Note",ue.path="/GoodsReceivedNote";var pe=ue;function ge(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./PurchaseReturnItem",item:"purchase_return",render:function(e){return r.a.createElement(L,Object.assign({description:ge.description,listname:ge.description},e))}}))}ge.description="Purchase Return",ge.path="/PurchaseReturn";var fe=ge;function Ee(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./PurchaseInvoiceItem",item:"purchase_invoice",render:function(e){return r.a.createElement(L,Object.assign({description:Ee.description,listname:Ee.description},e))}}))}Ee.description="Purchase Invoice",Ee.path="/PurchaseInvoice";var he=Ee;function be(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./PurchaseDebitNoteItem",item:"purchase_debit_note",render:function(e){return r.a.createElement(L,Object.assign({description:be.description,listname:be.description},e))}}))}be.description="Purchase Debit Note",be.path="/PurchaseDebitNote";var Ne=be;function ve(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./PurchaseCreditNoteItem",item:"purchase_credit_note",render:function(e){return r.a.createElement(L,Object.assign({description:ve.description,listname:ve.description},e))}}))}ve.description="Purchase Credit Note",ve.path="/PurchaseCreditNote";var ye=ve;var we=function(e){var t=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),J("a4 portrait"),t.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" from "+S(e.resultInput.dateStart)+" to "+S(e.resultInput.dateEnd)),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",{className:"border-top border-bottom border-secondary"},r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"creditorCode"===e.resultInput.groupOne?"Creditor No.":"Item Code"),r.a.createElement("th",{className:"align-top"},"Name"),function(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=[],n=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),l=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);if(l<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0))("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},t[l.getMonth()]+" "+l.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear()));else{var o=new Date(n);for(("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},t[n.getMonth()]+" "+n.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[n.getMonth()]+" "+n.getFullYear()+" Total":t[n.getMonth()]+" "+n.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[n.getMonth()]+" "+n.getFullYear()+" Total":t[n.getMonth()]+" "+n.getFullYear()));l>new Date(new Date(o).getFullYear(),new Date(o).getMonth()+1+1,0);)o.setMonth(o.getMonth()+1,1),("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[o.getMonth()]+" "+o.getFullYear()+" Qty",className:"align-top"},t[o.getMonth()]+" "+o.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[o.getMonth()]+" "+o.getFullYear()+" Total":t[o.getMonth()]+" "+o.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[o.getMonth()]+" "+o.getFullYear()+" Total":t[o.getMonth()]+" "+o.getFullYear()));("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&a.push(r.a.createElement("th",{key:t[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},t[l.getMonth()]+" "+l.getFullYear()+" Qty")),a.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear(),className:"align-top"},"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?t[l.getMonth()]+" "+l.getFullYear()+" Total":t[l.getMonth()]+" "+l.getFullYear()))}return a}(),"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?r.a.createElement("th",{className:"align-top"},"Qty"):null,r.a.createElement("th",{className:"align-top"},"Total")),e.withDetails&&e.resultInput.groupTwo?r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"creditorCode"===e.resultInput.groupTwo?"Creditor No.":"Item Code"),r.a.createElement("th",{className:"align-top"},"Name")):null),function(){var t=e.data,a=e.field[0],n=a[0].name,l=a[1].name,o="creditorCode"===e.resultInput.groupOne?null:a[3].name,c="creditorCode"===e.resultInput.groupOne?a[3].name:a[4].name,i=e.dataDetail,s=e.field[1],m=s[1].name,d=s[2].name,u=s[4].name,p=s[5].name,g=[],f=[];return t.forEach((function(E){var h=[];-1===g.indexOf(E[n])&&(g.push(E[n]),f.push(r.a.createElement("tbody",{key:E[n],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},E[n]),r.a.createElement("th",{className:"align-top"},E[l]),function(t,a,n){var l=["January","February","March","April","May","June","July","August","September","October","November","December"],o=[],c=n[0].name,i=n[2].name,s="creditorCode"===e.resultInput.groupOne?null:n[3].name,m="creditorCode"===e.resultInput.groupOne?n[3].name:n[4].name,d=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),u=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);return u<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?(("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[u.getMonth()]+" "+u.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){return a[c]===t[c]?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[u.getMonth()]+" "+u.getFullYear()+" Total":l[u.getMonth()]+" "+u.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){return a[c]===t[c]?e+a[m]:e}),0))))):function(){var n=new Date(d);for(("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[d.getMonth()]+" "+d.getFullYear()+" Total":l[d.getMonth()]+" "+d.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n<=new Date(new Date(d).getFullYear(),new Date(d).getMonth()+1,0)?e+a[m]:e}),0))));u>new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1+1,0);)n.setMonth(n.getMonth()+1,1),("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var r=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&r>new Date(new Date(n).getFullYear(),new Date(n).getMonth(),0)&&r<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0)?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[n.getMonth()]+" "+n.getFullYear()+" Total":l[n.getMonth()]+" "+n.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var r=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&r>new Date(new Date(n).getFullYear(),new Date(n).getMonth(),0)&&r<=new Date(new Date(n).getFullYear(),new Date(n).getMonth()+1,0)?e+a[m]:e}),0))));("itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails)&&o.push(r.a.createElement("th",{key:l[u.getMonth()]+" "+u.getFullYear()+" Qty",className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n>new Date(new Date(u).getFullYear(),new Date(u).getMonth(),0)&&n<=u?e+a[s]:e}),0)))),o.push(r.a.createElement("th",{key:"itemCode"===e.resultInput.groupOne?l[u.getMonth()]+" "+u.getFullYear()+" Total":l[u.getMonth()]+" "+u.getFullYear(),className:"align-top"},C(a.reduce((function(e,a){var n=new Date(new Date(a[i]).getFullYear(),new Date(a[i]).getMonth(),new Date(a[i]).getDate(),0);return a[c]===t[c]&&n>new Date(new Date(u).getFullYear(),new Date(u).getMonth(),0)&&n<=u?e+a[m]:e}),0))))}(),o}(E,t,a),"itemCode"===e.resultInput.groupOne||"creditorCode"===e.resultInput.groupOne&&"itemCode"===e.resultInput.groupTwo&&e.withDetails?r.a.createElement("th",{className:"align-top"},C(t.reduce((function(e,t){return t[n]===E[n]?e+t[o]:e}),0))):null,r.a.createElement("th",{className:"align-top"},C(t.reduce((function(e,t){return t[n]===E[n]?e+t[c]:e}),0)))),e.resultInput.groupTwo&&e.withDetails?i.map((function(t){if(-1===h.indexOf(t[m]))return h.push(t[m]),r.a.createElement("tr",{key:t[m]},r.a.createElement("td",{className:"align-top"},t[m]),r.a.createElement("td",{className:"align-top"},t[d]),function(t,a,n,l){var o=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[],i=l[0].name,s=l[1].name,m=l[3].name,d=l[4].name,u=l[5].name,p=new Date(new Date(e.resultInput.dateStart).getFullYear(),new Date(e.resultInput.dateStart).getMonth(),new Date(e.resultInput.dateStart).getDate(),0),g=new Date(new Date(e.resultInput.dateEnd).getFullYear(),new Date(e.resultInput.dateEnd).getMonth(),new Date(e.resultInput.dateEnd).getDate(),0);return g<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?(c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){return n[i]===t[i]&&n[s]===a[s]?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){return n[i]===t[i]&&n[s]===a[s]?e+n[u]:e}),0))))):function(){var e=new Date(p);for(c.push(r.a.createElement("td",{key:o[p.getMonth()]+" "+p.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[p.getMonth()]+" "+p.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r<=new Date(new Date(p).getFullYear(),new Date(p).getMonth()+1,0)?e+n[u]:e}),0))));g>new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1+1,0);)e.setMonth(e.getMonth()+1,1),c.push(r.a.createElement("td",{key:o[e.getMonth()]+" "+e.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(n,r){var l=new Date(new Date(r[m]).getFullYear(),new Date(r[m]).getMonth(),new Date(r[m]).getDate(),0);return r[i]===t[i]&&r[s]===a[s]&&l>new Date(new Date(e).getFullYear(),new Date(e).getMonth(),0)&&l<=new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1,0)?n+r[d]:n}),0)))),c.push(r.a.createElement("td",{key:o[e.getMonth()]+" "+e.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(n,r){var l=new Date(new Date(r[m]).getFullYear(),new Date(r[m]).getMonth(),new Date(r[m]).getDate(),0);return r[i]===t[i]&&r[s]===a[s]&&l>new Date(new Date(e).getFullYear(),new Date(e).getMonth(),0)&&l<=new Date(new Date(e).getFullYear(),new Date(e).getMonth()+1,0)?n+r[u]:n}),0))));c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Qty",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r>new Date(new Date(g).getFullYear(),new Date(g).getMonth(),0)&&r<=g?e+n[d]:e}),0)))),c.push(r.a.createElement("td",{key:o[g.getMonth()]+" "+g.getFullYear()+" Total",className:"align-top"},C(n.reduce((function(e,n){var r=new Date(new Date(n[m]).getFullYear(),new Date(n[m]).getMonth(),new Date(n[m]).getDate(),0);return n[i]===t[i]&&n[s]===a[s]&&r>new Date(new Date(g).getFullYear(),new Date(g).getMonth(),0)&&r<=g?e+n[u]:e}),0))))}(),c}(E,t,i,s),r.a.createElement("td",{className:"align-top"},i.reduce((function(e,a){return a[m]===t[m]&&a[n]===E[n]?e+a[u]:e}),0)),r.a.createElement("td",{className:"align-top"},C(i.reduce((function(e,a){return a[m]===t[m]&&a[n]===E[n]?e+a[p]:e}),0))))})):null)))})),f}()),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function De(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),u=Object(c.a)(d,1)[0],g=u.data,f=u.error,E=O(null),b=Object(c.a)(E,2),N=b[0],v=N.data,y=N.error,S=b[1],I=Object(n.useState)("creditorCode"),L=Object(c.a)(I,2),j=L[0],k=L[1],R=Object(n.useState)(""),F=Object(c.a)(R,2),A=F[0],T=F[1],P=Object(n.useState)(null),M=Object(c.a)(P,2),Y=M[0],B=M[1],_=Object(n.useState)(null),V=Object(c.a)(_,2),Q=V[0],G=V[1],H=Object(n.useState)([]),X=Object(c.a)(H,2),z=X[0],W=X[1],$=Object(n.useState)([]),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)((new Date).getFullYear()+"-01-01"),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(Ge(new Date)),oe=Object(c.a)(le,2),ce=oe[0],ie=oe[1],se=Object(n.useState)(null),me=Object(c.a)(se,2),de=me[0],ue=me[1],pe=Object(n.useState)([]),ge=Object(c.a)(pe,2),fe=ge[0],Ee=ge[1],he=Object(n.useState)(!1),be=Object(c.a)(he,2),Ne=be[0],ve=be[1],ye=Object(n.useState)(null),Oe=Object(c.a)(ye,2),xe=Oe[0],Ce=Oe[1],Se=Object(n.useState)(null),Ie=Object(c.a)(Se,2),Le=Ie[0],je=Ie[1],ke=Object(n.useState)(""),Re=Object(c.a)(ke,2),Fe=Re[0],Ae=Re[1],Te=Object(n.useState)(""),Pe=Object(c.a)(Te,2),Me=Pe[0],Ye=Pe[1],Be=Object(n.useState)(!1),qe=Object(c.a)(Be,2),_e=qe[0],Ue=qe[1],Je=Object(i.h)().path,Ve=Object(n.useContext)(p).changeAuth,Qe=Object(i.g)();function Ge(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}return Object(n.useEffect)((function(){if(s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1)):s&&s.data&&s.field&&B(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" | "+(e[s.field[1].name]?e[s.field[1].name]:""))}))),g&&!1===g.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1);else if(g&&g.data&&g.field){var e=g.field[0].name,t=g.field[1].name;G(g.data.map((function(a){return r.a.createElement("option",{key:a[e],value:a[e]},a[e]+" | "+(a[t]?a[t]:""))})))}}),[s,m,g,f]),Object(n.useEffect)((function(){if(v&&!1===v.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),Ve(!1);else if(v&&v.data&&v.field){var e=v.data[0],t=v.field[0],a=t[0].name,n=t[1].name,l=[],o=v.data[1],c=v.field[1],i=c[1].name,s=c[2].name;ue((function(e){})),e.forEach((function(e){var t={};-1===l.indexOf(e[a])&&(l.push(e[a]),t[e[a]]=o.filter((function(t){return t[a]===e[a]})),ue((function(e){return Object.assign({},e,t)})))})),ue((function(e){return Object(D.a)({},e,{data:v.data,dataPreview:Object(w.a)(v.data),field:v.field,dateStart:ne,dateEnd:ce,groupOne:j,groupTwo:A})})),Ce(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:a},"creditorCode"===j?"Creditor No.":"Stock No."),r.a.createElement("option",{value:n},"Name"))),je(A?r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:i},"creditorCode"===A?"Creditor No.":"Stock No."),r.a.createElement("option",{value:s},"Name")):null),Ee(l.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}}),[v,y]),Object(n.useEffect)((function(){fe&&fe.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[de]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Je,"/Preview")},de?r.a.createElement(we,{backPath:De.path,description:De.description,resultInput:de,withDetails:Ne,data:x(de.dataPreview[0],Fe,"asc"),dataDetail:x(de.dataPreview[1],Me,"asc"),field:de.field,getFormattedDate:Ge}):r.a.createElement(i.a,{to:De.path})),r.a.createElement(i.b,{exact:!0,path:Je},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,De.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),Ue(!1),S("creditorCode"===j?{url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_analysis_creditor_stock",param:[ne,ce,z,K]}),credentials:"include"}}:{url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_analysis_stock_creditor",param:[ne,ce,z,K]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group form-row mx-0 col-12"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(ce)?(alert("Invalid Date Start Entry"),re((new Date).getFullYear()+"-01-01")):re(e.target.value)},value:ne},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(ne)?(alert("Invalid Date End Entry"),ie(Ge(new Date))):ie(e.target.value)},value:ce},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("fieldset",{className:"form-group border py-3 px-4 border-secondary rounded col-md-7"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Options")),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"groupOne"},"Group One"),r.a.createElement("select",{className:"form-control col-md-2",required:!0,id:"groupOne",value:j,onChange:function(e){k(e.target.value),T(""),W([]),ee([])}},r.a.createElement("option",{value:"creditorCode"},"Creditor Code"),r.a.createElement("option",{value:"itemCode"},"Item Code")),r.a.createElement("label",{className:"col-md-2 col-form-label pl-3",htmlFor:"groupOneID"},"creditorCode"===j?"Creditor ID":"Stock ID"),r.a.createElement("select",{className:"form-control col-md-6",required:!0,size:"3",id:"groupOneID",value:z,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),W(t)}},"creditorCode"===j?Y:Q)),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("div",{className:"form-check offset-md-6"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"groupOneAllID",checked:"creditorCode"===j?!(!s||s.data.length!==z.length):!(!g||g.data.length!==z.length),onChange:function(e){e.target.checked?W("creditorCode"===j?s.data.map((function(e){return e[s.field[0].name]})):g.data.map((function(e){return e[g.field[0].name]}))):W([])}}),r.a.createElement("label",{htmlFor:"groupOneAllID",style:{paddingLeft:0},className:"form-check-label"},"creditorCode"===j?"All Creditor ID":"All Stock ID"))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"groupTwo"},"Group Two"),r.a.createElement("select",{className:"form-control col-md-2",id:"groupTwo",value:A,onChange:function(e){T(e.target.value),ee([])}},r.a.createElement("option",{value:""}," -select an option- "),r.a.createElement("option",{value:"creditorCode"===j?"itemCode":"creditorCode"},"creditorCode"===j?"Item Code":"Creditor Code")),A?r.a.createElement("label",{className:"col-md-2 col-form-label pl-3",htmlFor:"groupTwoID"},"creditorCode"===A?"Creditor ID":"Stock ID"):null,A?r.a.createElement("select",{className:"form-control col-md-6",required:!0,size:"3",id:"groupTwoID",disabled:!A,value:K,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),ee(t)}},"creditorCode"===A?Y:Q):null),A?r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("div",{className:"form-check offset-md-6"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"groupTwoAllID",checked:"creditorCode"===A?!(!s||s.data.length!==K.length):!(!g||g.data.length!==K.length),onChange:function(e){e.target.checked?ee("creditorCode"===A?s.data.map((function(e){return e[s.field[0].name]})):g.data.map((function(e){return e[g.field[0].name]}))):ee([])}}),r.a.createElement("label",{htmlFor:"groupTwoAllID",style:{paddingLeft:0},className:"form-check-label"},"creditorCode"===A?"All Creditor ID":"All Stock ID"))):null),r.a.createElement("fieldset",{className:"form-group py-2 px-4 border border-secondary rounded col-md-3 offset-md-1"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-check col-md-12 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withDetails",onChange:function(e){e.target.checked?ve(!0):ve(!1)},checked:Ne}),r.a.createElement("label",{htmlFor:"withDetails",className:"form-check-label"},"With Details")),r.a.createElement("div",{className:"form-group form-row col-md-12"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-8",value:Fe,onChange:function(e){return Ae(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),xe)),r.a.createElement("div",{className:"form-group col-md-12 form-row"},r.a.createElement("label",{className:"col-md-6 col-form-label ",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:Me,onChange:function(e){return Ye(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),Le)))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return ue(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){de?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),Qe.push("./PurchaseReport/Preview")):Ue(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),_e?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null))),r.a.createElement("hr",null),de?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return fe.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return fe.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),function(){var e=de.data[0],t=de.field[0],a=t[0].name,n=t[1].name,l="creditorCode"===de.groupOne?null:t[3].name,o="creditorCode"===de.groupOne?t[3].name:t[4].name,c=(de.data[1],de.field[1]),i=c[1].name,s=c[2].name,m=c[4].name,d=c[5].name,u=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[],a=new Date(new Date(de.dateStart).getFullYear(),new Date(de.dateStart).getMonth(),new Date(de.dateStart).getDate(),0),n=new Date(new Date(de.dateEnd).getFullYear(),new Date(de.dateEnd).getMonth(),new Date(de.dateEnd).getDate(),0);if(n<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0))"itemCode"===de.groupOne&&t.push(r.a.createElement("h6",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===de.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear(),style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===de.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear()));else{var l=new Date(a);for("itemCode"===de.groupOne&&t.push(r.a.createElement("h6",{key:e[a.getMonth()]+" "+a.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[a.getMonth()]+" "+a.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===de.groupOne?e[a.getMonth()]+" "+a.getFullYear()+" Total":e[a.getMonth()]+" "+a.getFullYear(),style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===de.groupOne?e[a.getMonth()]+" "+a.getFullYear()+" Total":e[a.getMonth()]+" "+a.getFullYear()));n>new Date(new Date(l).getFullYear(),new Date(l).getMonth()+1+1,0);)l.setMonth(l.getMonth()+1,1),"itemCode"===de.groupOne&&t.push(r.a.createElement("h6",{key:e[l.getMonth()]+" "+l.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[l.getMonth()]+" "+l.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===de.groupOne?e[l.getMonth()]+" "+l.getFullYear()+" Total":e[l.getMonth()]+" "+l.getFullYear(),style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===de.groupOne?e[l.getMonth()]+" "+l.getFullYear()+" Total":e[l.getMonth()]+" "+l.getFullYear()));"itemCode"===de.groupOne&&t.push(r.a.createElement("h6",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("h6",{key:"itemCode"===de.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear(),style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"itemCode"===de.groupOne?e[n.getMonth()]+" "+n.getFullYear()+" Total":e[n.getMonth()]+" "+n.getFullYear()))}return t}(),p="creditorCode"===de.groupOne?379+150*u.length+100:379+100*u.length+100+100;return r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{width:p,transform:"rotateX(180deg)"}},r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"0 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),de.data[0]=x(de.data[0],a,e.target.getAttribute("data-order")),ue(Object(D.a)({},de)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("num").classList.remove("fa-caret-up"),document.getElementById("num").classList.add("fa-caret-down")):(document.getElementById("num").classList.remove("fa-caret-down"),document.getElementById("num").classList.add("fa-caret-up"))}},"creditorCode"===de.groupOne?"Creditor No.":"Stock No.",r.a.createElement("i",{id:"num",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"0 0 225px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),de.data[0]=x(de.data[0],n,e.target.getAttribute("data-order")),ue(Object(D.a)({},de)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("name").classList.remove("fa-caret-up"),document.getElementById("name").classList.add("fa-caret-down")):(document.getElementById("name").classList.remove("fa-caret-down"),document.getElementById("name").classList.add("fa-caret-up"))}},"Name",r.a.createElement("i",{id:"name",className:"fa fa-caret-down ml-2"})),u,"creditorCode"===de.groupOne?null:r.a.createElement("h6",{style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},"Qty"),r.a.createElement("h6",{style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},"Total")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(){var u=[],p=[];return e.forEach((function(g){var f=[];-1===u.indexOf(g[a])&&(u.push(g[a]),p.push(r.a.createElement("div",{key:g[a]},r.a.createElement("div",{className:"d-flex",style:de.groupTwo?{cursor:"pointer"}:null,"data-toggle":"collapse","data-target":"#"+g[a].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:de.groupTwo?"fa fa-plus-square mt-1":"",style:de.groupTwo?{flex:"0 0 14px",paddingLeft:10,paddingRight:10}:{flex:"0 0 34px"},id:"plusminus"+g[a].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10}},g[a]),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 225px",paddingLeft:10,paddingRight:10}},g[n]),function(e,t,a){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=[],o=a[0].name,c=a[2].name,i="creditorCode"===de.groupOne?null:a[3].name,s="creditorCode"===de.groupOne?a[3].name:a[4].name,m=new Date(new Date(de.dateStart).getFullYear(),new Date(de.dateStart).getMonth(),new Date(de.dateStart).getDate(),0),d=new Date(new Date(de.dateEnd).getFullYear(),new Date(de.dateEnd).getMonth(),new Date(de.dateEnd).getDate(),0);return d<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?("itemCode"===de.groupOne&&l.push(r.a.createElement("p",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===de.groupOne?n[d.getMonth()]+" "+d.getFullYear()+" Total":n[d.getMonth()]+" "+d.getFullYear(),className:"mb-0",style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[s]:t}),0))))):function(){var a=new Date(m);for("itemCode"===de.groupOne&&l.push(r.a.createElement("p",{key:n[m.getMonth()]+" "+m.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===de.groupOne?n[m.getMonth()]+" "+m.getFullYear()+" Total":n[m.getMonth()]+" "+m.getFullYear(),className:"mb-0",style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[s]:t}),0))));d>new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1+1,0);)a.setMonth(a.getMonth()+1,1),"itemCode"===de.groupOne&&l.push(r.a.createElement("p",{key:n[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===de.groupOne?n[a.getMonth()]+" "+a.getFullYear()+" Total":n[a.getMonth()]+" "+a.getFullYear(),className:"mb-0",style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[s]:t}),0))));"itemCode"===de.groupOne&&l.push(r.a.createElement("p",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[i]:t}),0)))),l.push(r.a.createElement("p",{key:"itemCode"===de.groupOne?n[d.getMonth()]+" "+d.getFullYear()+" Total":n[d.getMonth()]+" "+d.getFullYear(),className:"mb-0",style:"itemCode"===de.groupOne?{flex:"0 0 100px",paddingLeft:10,paddingRight:10}:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[s]:t}),0))))}(),l}(g,e,t),"itemCode"===de.groupOne?r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(e.reduce((function(e,t){return t[a]===g[a]?e+t[l]:e}),0))):null,r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 100px",paddingLeft:10,paddingRight:10}},C(e.reduce((function(e,t){return t[a]===g[a]?e+t[o]:e}),0)))),de.groupTwo?r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5",id:g[a].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){if(de[g[a]]){var t="subNum"+g[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[g[a]]=x(de[g[a]],i,e.target.getAttribute("data-order")),ue(Object.assign({},de,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}}},"itemCode"===de.groupTwo?"Stock No.":"Creditor No.",r.a.createElement("i",{id:"subNum"+g[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"align-top",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){if(de[g[a]]){var t="subName"+g[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[g[a]]=x(de[g[a]],s,e.target.getAttribute("data-order")),ue(Object.assign({},de,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}}},"Name",r.a.createElement("i",{id:"subName"+g[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[],a=new Date(new Date(de.dateStart).getFullYear(),new Date(de.dateStart).getMonth(),new Date(de.dateStart).getDate(),0),n=new Date(new Date(de.dateEnd).getFullYear(),new Date(de.dateEnd).getMonth(),new Date(de.dateEnd).getDate(),0);if(n<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0))t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Total",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Total"));else{var l=new Date(a);for(t.push(r.a.createElement("th",{key:e[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"align-top"},e[a.getMonth()]+" "+a.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[a.getMonth()]+" "+a.getFullYear()+" Total",className:"align-top"},e[a.getMonth()]+" "+a.getFullYear()+" Total"));n>new Date(new Date(l).getFullYear(),new Date(l).getMonth()+1+1,0);)l.setMonth(l.getMonth()+1,1),t.push(r.a.createElement("th",{key:e[l.getMonth()]+" "+l.getFullYear()+" Qty",className:"align-top"},e[l.getMonth()]+" "+l.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[l.getMonth()]+" "+l.getFullYear()+" Total",className:"align-top"},e[l.getMonth()]+" "+l.getFullYear()+" Total"));t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Qty",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Qty")),t.push(r.a.createElement("th",{key:e[n.getMonth()]+" "+n.getFullYear()+" Total",className:"align-top"},e[n.getMonth()]+" "+n.getFullYear()+" Total"))}return t}(),r.a.createElement("th",{className:"align-top"},"Total Qty"),r.a.createElement("th",{className:"align-top"},"Total"))),r.a.createElement("tbody",null,de[g[a]]?de[g[a]].map((function(e){if(-1===f.indexOf(e[i]))return f.push(e[i]),r.a.createElement("tr",{key:e[i]},r.a.createElement("td",{className:"align-top"},e[i]),r.a.createElement("td",{className:"align-top"},e[s]),function(e,t,a){var n=["January","February","March","April","May","June","July","August","September","October","November","December"],l=[],o=a[1].name,c=a[3].name,i=a[4].name,s=a[5].name,m=new Date(new Date(de.dateStart).getFullYear(),new Date(de.dateStart).getMonth(),new Date(de.dateStart).getDate(),0),d=new Date(new Date(de.dateEnd).getFullYear(),new Date(de.dateEnd).getMonth(),new Date(de.dateEnd).getDate(),0);return d<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?(l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){return a[o]===e[o]?t+a[s]:t}),0))))):function(){var a=new Date(m);for(l.push(r.a.createElement("td",{key:n[m.getMonth()]+" "+m.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[m.getMonth()]+" "+m.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n<=new Date(new Date(m).getFullYear(),new Date(m).getMonth()+1,0)?t+a[s]:t}),0))));d>new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1+1,0);)a.setMonth(a.getMonth()+1,1),l.push(r.a.createElement("td",{key:n[a.getMonth()]+" "+a.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[a.getMonth()]+" "+a.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,n){var r=new Date(new Date(n[c]).getFullYear(),new Date(n[c]).getMonth(),new Date(n[c]).getDate(),0);return n[o]===e[o]&&r>new Date(new Date(a).getFullYear(),new Date(a).getMonth(),0)&&r<=new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0)?t+n[s]:t}),0))));l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Qty",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[i]:t}),0)))),l.push(r.a.createElement("td",{key:n[d.getMonth()]+" "+d.getFullYear()+" Total",className:"align-top"},C(t.reduce((function(t,a){var n=new Date(new Date(a[c]).getFullYear(),new Date(a[c]).getMonth(),new Date(a[c]).getDate(),0);return a[o]===e[o]&&n>new Date(new Date(d).getFullYear(),new Date(d).getMonth(),0)&&n<=d?t+a[s]:t}),0))))}(),l}(e,de[g[a]],c),r.a.createElement("td",{className:"align-top"},de[g[a]].reduce((function(t,a){return a[i]===e[i]?t+a[m]:t}),0)),r.a.createElement("td",{className:"align-top"},C(de[g[a]].reduce((function(t,a){return a[i]===e[i]?t+a[d]:t}),0))))})):null))):null)))})),p}())))}()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:De.path}))}De.description="Purchase Report",De.path="/PurchaseReport";var Oe=De;function xe(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=7,E=Object(n.useState)(null),b=Object(c.a)(E,2),N=b[0],v=b[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),x=D[0],I=D[1],L=Object(n.useState)(["","","","","","","",[],[]]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(i.h)().path,A=Object(n.useContext)(p).changeAuth;function T(e,t){R([].concat(Object(w.a)(k.slice(0,t)),[e],Object(w.a)(k.slice(t+1))))}function P(){var e=0;return k[f].forEach((function(t,a){""!==k[f][a][3]&&(e+=parseInt(k[f][a][3]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;I(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}}),[o,s,u,g]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||g)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null)),r.a.createElement(H,{inputState:k,changeInputState:R,url:t,item:"goods_received_note",successPath:"/GoodsReceivedNote"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(F,"/Preview")},r.a.createElement(z,{description:xe.description,backPath:xe.path,topLeftInput:[k[1],k[2]],topRightField:[xe.description+" No","Date","Other Description"],topRightInput:[k[3],S(k[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:k[f],calculateTotal:P,footer:""})),r.a.createElement(i.b,{exact:!0,path:F},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+xe.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:k[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),R([e.target.value,t,a].concat(Object(w.a)(k.slice(3,k.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:k[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:k[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"goodsReceivedNoteNumber",className:"mt-3"},"Goods Received Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:T,layout:"",position:3,labelID:"goodsReceivedNoteNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:k[4],onChange:function(e){return T(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return T(e.target.value,5)},value:k[5],disabled:a,className:"form-control"})),r.a.createElement(W,{linePosition:f,stockControlPosition:8,disabled:a,inputState:k,changeInputState:R,dataSelectStock:u,stockList:x,stockDirection:"in",lineDescription:"GRN Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(P()))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(F,"/Preview")}))))),r.a.createElement(i.a,{to:xe.path}))}))}xe.description="Goods Received Note",xe.path="/GoodsReceivedNoteItem";var Ce=xe;function Se(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=7,E=Object(n.useState)(null),b=Object(c.a)(E,2),N=b[0],v=b[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),x=D[0],I=D[1],L=Object(n.useState)(["","","","","","","",[],[]]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(i.h)().path,A=Object(n.useContext)(p).changeAuth;function T(e,t){R([].concat(Object(w.a)(k.slice(0,t)),[e],Object(w.a)(k.slice(t+1))))}function P(){var e=0;return k[f].forEach((function(t,a){""!==k[f][a][3]&&(e+=parseInt(k[f][a][3]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1)):o&&o.data&&o.field&&v(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),A(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;I(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}}),[o,s,u,g]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var M=null;return(o&&o.error||s||u&&u.error||g)&&(M=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null)),r.a.createElement(H,{inputState:k,changeInputState:R,url:t,item:"purchase_return",successPath:"/PurchaseReturn"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(F,"/Preview")},r.a.createElement(z,{description:Se.description,backPath:Se.path,topLeftInput:[k[1],k[2]],topRightField:[Se.description+" No","Date","Other Description"],topRightInput:[k[3],S(k[4])],bottomField:["","Item Code","Description","Qty"],bottomInput:k[f],calculateTotal:P,footer:""})),r.a.createElement(i.b,{exact:!0,path:F},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Se.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,M,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:k[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="";o.data.forEach((function(n){n[o.field[0].name]===e.target.value&&(t=n[o.field[1].name]?n[o.field[1].name]:"",a=n[o.field[2].name]?n[o.field[2].name]:"")})),R([e.target.value,t,a].concat(Object(w.a)(k.slice(3,k.length))))}},r.a.createElement("option",{value:""}," -select an option- "),N)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:k[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:k[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseReturnNumber",className:"mt-3"},"Purchase Return Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:T,layout:"",position:3,labelID:"purchaseReturnNumber"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:k[4],onChange:function(e){return T(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return T(e.target.value,5)},value:k[5],disabled:a,className:"form-control"})),r.a.createElement(W,{linePosition:f,stockControlPosition:8,disabled:a,inputState:k,changeInputState:R,dataSelectStock:u,stockList:x,stockDirection:"out",lineDescription:"Purchase Return Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(P()))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(F,"/Preview")}))))),r.a.createElement(i.a,{to:Se.path}))}))}Se.description="Purchase Return",Se.path="/PurchaseReturnItem";var Ie=Se;function Le(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_invoice"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(t.item&&t.id?{url:"./getPaymentHistory",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_invoice",param:[t.id]}),credentials:"include"}}:null),y=Object(c.a)(v,1)[0],D=y.data,x=y.error,I=9,L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(["","","","","","","COD","","",[],[]]),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(i.h)().path,G=Object(n.useContext)(p).changeAuth;function W(e,t){V([].concat(Object(w.a)(J.slice(0,t)),[e],Object(w.a)(J.slice(t+1,J.length))))}function $(e){return""!==J[I][e][3]&&""!==J[I][e][4]&&""!==J[I][e][5]?parseFloat(J[I][e][3])*parseFloat(J[I][e][4])-parseFloat(J[I][e][5]):""}function Z(){var e=0;return J[I].forEach((function(t,a){""!==J[I][a][3]&&""!==J[I][a][4]&&""!==J[I][a][5]&&(e+=parseFloat(J[I][a][3])*parseFloat(J[I][a][4])-parseFloat(J[I][a][5]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):o&&o.data&&o.field&&R(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},(e[o.field[0].name]?e[o.field[0].name]:"")+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;P(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):b&&b.data&&b.field&&q(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))}))),D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1))}),[o,s,u,g,b,N,D,x]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var K=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||D&&D.error||x)&&(K=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Payment History RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,x?"Payment History RETRIEVAL for item failed "+x:null)),r.a.createElement(H,{inputState:J,changeInputState:V,url:t,item:"purchase_invoice",successPath:"/PurchaseInvoice"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Q,"/Preview")},r.a.createElement(z,{description:Le.description,backPath:Le.path,topLeftInput:[J[1],J[2]],topRightField:[Le.description+" No","Date","Credit Term","Other Description"],topRightInput:[J[3],S(J[4]),"COD"===J[6]?"C.O.D.":J[6]+" Days",J[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:J[I],calculateSubtotal:$,calculateTotal:Z})),r.a.createElement(i.b,{exact:!0,path:Q},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Le.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,K,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:J[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(w.a)(J.slice(3,6)),[n],Object(w.a)(J.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),k)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:J[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:J[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseInvoiceNumber",className:"mt-3"},"Purchase Invoice Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseInvoiceNumber",maxLength:"50",value:J[3],onChange:function(e){return W(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:J[4],onChange:function(e){return W(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"GLCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"GLCode",value:J[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){return W(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),B)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return W(e.target.value,6)},value:J[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return W(e.target.value,5)},value:J[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:I,stockControlPosition:10,disabled:a,inputState:J,changeInputState:V,dataSelectStock:u,stockList:T,stockDirection:"in",calculateSubtotal:$,lineDescription:"Purchase Invoice Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(Z())),"INSERT"===t?null:r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Outstanding Amount: "+C(function(){var e=D?D.field[4].name:null;return Z()-(D?D.data.reduce((function(t,a){return t+a[e]}),0):0)}()))),"INSERT"===t?null:r.a.createElement(ae,{dataSelectReceiptPaymentHistory:D,disabled:a,historyDescription:"Payment History"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(Q,"/Preview")}))))),r.a.createElement(i.a,{to:Le.path}))}))}Le.description="Purchase Invoice",Le.path="/PurchaseInvoiceItem";var je=Le;function ke(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_debit_note"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(t.item&&t.id?{url:"./getPaymentHistory",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_debit_note",param:[t.id]}),credentials:"include"}}:null),y=Object(c.a)(v,1)[0],D=y.data,x=y.error,I=9,L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(["","","","","","","COD","","",[],[]]),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(i.h)().path,G=Object(n.useContext)(p).changeAuth;function W(e,t){V([].concat(Object(w.a)(J.slice(0,t)),[e],Object(w.a)(J.slice(t+1))))}function $(e){return""!==J[I][e][3]&&""!==J[I][e][4]&&""!==J[I][e][5]?parseFloat(J[I][e][3])*parseFloat(J[I][e][4])-parseFloat(J[I][e][5]):""}function Z(){var e=0;return J[I].forEach((function(t,a){""!==J[I][a][3]&&""!==J[I][a][4]&&""!==J[I][a][5]&&(e+=parseFloat(J[I][a][3])*parseFloat(J[I][a][4])-parseFloat(J[I][a][5]))})),e}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):o&&o.data&&o.field&&R(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;P(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1)):b&&b.data&&b.field&&q(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))}))),D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),G(!1))}),[o,s,u,g,b,N,D,x]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var K=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||D&&D.error||x)&&(K=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Payment History RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,x?"Payment History RETRIEVAL for item failed "+x:null)),r.a.createElement(H,{inputState:J,changeInputState:V,url:t,item:"purchase_debit_note",successPath:"/PurchaseDebitNote"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(Q,"/Preview")},r.a.createElement(z,{description:ke.description,backPath:ke.path,topLeftInput:[J[1],J[2]],topRightField:[ke.description+" No","Date","Credit Term","Other Description"],topRightInput:[J[3],S(J[4]),"COD"===J[6]?"C.O.D.":J[6]+" Days",J[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:J[I],calculateSubtotal:$,calculateTotal:Z})),r.a.createElement(i.b,{exact:!0,path:Q},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ke.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,K,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:J[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),V([e.target.value,t,a].concat(Object(w.a)(J.slice(3,6)),[n],Object(w.a)(J.slice(7))))}},r.a.createElement("option",{value:""}," -select an option- "),k)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:J[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:J[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseDebitNoteNumber",className:"mt-3"},"Purchase Debit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseDebitNoteNumber",maxLength:"50",value:J[3],onChange:function(e){return W(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:J[4],onChange:function(e){return W(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:J[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){W(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),B)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return W(e.target.value,6)},value:J[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return W(e.target.value,5)},value:J[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:I,stockControlPosition:10,disabled:a,inputState:J,changeInputState:V,dataSelectStock:u,stockList:T,stockDirection:"in",calculateSubtotal:$,lineDescription:"Purchase Debit Note Line"}),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(Z())),"INSERT"===t?null:r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Outstanding Amount: "+C(function(){var e=D?D.field[4].name:null;return Z()-(D?D.data.reduce((function(t,a){return t+a[e]}),0):0)}()))),"INSERT"===t?null:r.a.createElement(ae,{dataSelectReceiptPaymentHistory:D,disabled:a,historyDescription:"Payment History"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(Q,"/Preview")}))))),r.a.createElement(i.a,{to:ke.path}))}))}ke.description="Purchase Debit Note",ke.path="/PurchaseDebitNoteItem";var Re=ke;function Fe(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),d=Object(c.a)(m,1)[0],u=d.data,g=d.error,f=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"purchase_credit_note"}),credentials:"include"}}),E=Object(c.a)(f,1)[0],b=E.data,N=E.error,v=O(null),y=Object(c.a)(v,2),D=y[0],x=D.data,I=D.error,L=y[1],j=9,k=10,R=11,F=0,A=1,T=Object(n.useState)(null),P=Object(c.a)(T,2),M=P[0],Y=P[1],B=Object(n.useState)(null),q=Object(c.a)(B,2),_=q[0],U=q[1],J=Object(n.useState)(null),V=Object(c.a)(J,2),Q=V[0],G=V[1],W=Object(n.useState)(null),$=Object(c.a)(W,2),Z=$[0],K=$[1],ee=Object(n.useState)(["","","","","","","COD","","",[],[],[],[]]),ae=Object(c.a)(ee,2),ne=ae[0],re=ae[1],le=Object(i.h)().path,oe=Object(n.useContext)(p).changeAuth;function ie(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function se(e,t){re([].concat(Object(w.a)(ne.slice(0,t)),[e],Object(w.a)(ne.slice(t+1))))}function me(e){return""!==ne[j][e][3]&&""!==ne[j][e][4]&&""!==ne[j][e][5]?parseFloat(ne[j][e][3])*parseFloat(ne[j][e][4])-parseFloat(ne[j][e][5]):""}function de(){var e=0;return ne[j].forEach((function(t,a){""!==ne[j][a][3]&&""!==ne[j][a][4]&&""!==ne[j][a][5]&&(e+=parseFloat(ne[j][a][3])*parseFloat(ne[j][a][4])-parseFloat(ne[j][a][5]))})),e}function ue(e){return ne[R].reduce((function(t,a){return e===a[F]?t:t-a[A]}),ne[k].reduce((function(t,a){return e===a[F]?t:t-a[A]}),de()))}Object(n.useEffect)((function(){if(o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):o&&o.data&&o.field&&Y(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),u&&!1===u.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1);else if(u&&u.data&&u.field){var e=u.field[0].name,t=u.field[1].name,a=u.field[2].name,n=u.field[8].name;U(u.data.map((function(l){return r.a.createElement("option",{key:l[e],value:l[e]},l[e]+" | "+(l[t]?l[t]:"")+" | Price = "+(l[a]?l[a]:"")+" | Bal Qty = "+(l[n]?l[n]:"0"))})))}b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):b&&b.data&&b.field&&G(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))})))}),[o,s,u,g,b,N]),Object(n.useEffect)((function(){x&&!1===x.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1))}),[x,I]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var pe=null;return(o&&o.error||s||u&&u.error||g||b&&b.error||N||x&&x.error||I)&&(pe=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),u&&u.error?"Stock List RETRIEVAL for item failed errno: "+u.error.errno+" code: "+u.error.code+" message: "+u.error.sqlMessage:null,g?"Stock List RETRIEVAL for item failed "+g:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"GL Code List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"GL Code List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),x&&x.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+x.error.errno+" code: "+x.error.code+" message: "+x.error.sqlMessage:null,I?"Creditor Outstanding List RETRIEVAL for item failed "+I:null)),r.a.createElement(H,{inputState:ne,changeInputState:re,url:t,item:"purchase_credit_note",successPath:"/PurchaseCreditNote",paramOutstanding:ie,changeParamOutstanding:L,debtorCreditorNumPosition:0,oldNumPosition:8},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,s=e.onDelete,m=e.errorDisplay;return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"".concat(le,"/Preview")},r.a.createElement(z,{description:Fe.description,backPath:"."+Fe.path,topLeftInput:[ne[1],ne[2]],topRightField:[Fe.description+" No","Date","Credit Term","Other Description"],topRightInput:[ne[3],S(ne[4]),"COD"===ne[6]?"C.O.D.":ne[6]+" Days",ne[5]],bottomField:["","Item Code","Description","Price","Qty","Discount","Subtotal"],bottomInput:ne[j],calculateSubtotal:me,calculateTotal:de})),r.a.createElement(i.b,{exact:!0,path:le},r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Fe.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,pe,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:a},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor ",r.a.createElement("span",{className:"text-warning"},"*"))),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:ne[0],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){var t="",a="",n="";o.data.forEach((function(r){r[o.field[0].name]===e.target.value&&(t=r[o.field[1].name]?r[o.field[1].name]:"",a=r[o.field[2].name]?r[o.field[2].name]:"",n=r[o.field[7].name]?r[o.field[7].name]:"")})),re([e.target.value,t,a].concat(Object(w.a)(ne.slice(3,6)),[n],Object(w.a)(ne.slice(7)))),L(ie(e.target.value,ne[8]))}},r.a.createElement("option",{value:""}," -select an option- "),M)),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorName"},"Creditor Name"),r.a.createElement("input",{id:"creditorName",value:ne[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorAddress"},"Creditor Address"),r.a.createElement("textarea",{id:"creditorAddress",value:ne[2],onChange:function(e){return e},required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"purchaseCreditNoteNumber",className:"mt-3"},"Purchase Credit Note Number ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"text",id:"purchaseCreditNoteNumber",maxLength:"50",value:ne[3],onChange:function(e){return se(e.target.value,3)},disabled:a,required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"date",className:"mt-3"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:ne[4],onChange:function(e){return se(e.target.value,4)},className:"form-control"}),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:ne[7],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},disabled:a,onChange:function(e){se(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),Q)),r.a.createElement("label",{htmlFor:"creditTerm",className:"mt-3"},"Credit Term"),r.a.createElement("select",{id:"creditTerm",onChange:function(e){return se(e.target.value,6)},value:ne[6],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")),r.a.createElement("label",{htmlFor:"description",className:"mt-3"},"Description"),r.a.createElement("textarea",{id:"description",onChange:function(e){return se(e.target.value,5)},value:ne[5],disabled:a,className:"form-control"})),r.a.createElement(te,{linePosition:j,stockControlPosition:12,disabled:a,inputState:ne,changeInputState:re,dataSelectStock:u,stockList:_,stockDirection:"out",calculateSubtotal:me,lineDescription:"Purchase Credit Note Line"}),r.a.createElement("h5",{className:"text-right mt-3 mb-4 col-12"},"Total: "+C(de())),r.a.createElement("h6",{className:"text-right mb-4 col-12"},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(ue()))),Z,r.a.createElement(ce,{dataSelectOutstanding:x,inputState:ne,changeInputState:re,disabled:a,calculateUnappliedAmount:ue,calculateTotal:de,offsetPositionOne:k,offsetPositionTwo:R,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:K,offsetDescription:"Purchase Invoice / Purchase Debit Note"})),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:s,changeDisabled:n,path:"".concat(le,"/Preview")}))))),r.a.createElement(i.a,{to:Fe.path}))}))}Fe.description="Purchase Credit Note",Fe.path="/PurchaseCreditNoteItem";var Ae=Fe,Te=a(26),Pe=a.n(Te);function Me(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./StockItem",item:"stock",render:function(e){return r.a.createElement(L,Object.assign({description:Me.description,listname:"Stock Item"},e))}}))}Me.description="Stock Item Maintenance",Me.path="/StockItemMaintenance";var Ye=Me;function Be(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./StockAdjustmentItem",item:"stock_adjustment",render:function(e){return r.a.createElement(L,Object.assign({description:Be.description,listname:"Stock Adjustment"},e))}}))}Be.description="Stock Adjustment",Be.path="/StockAdjustment";var qe=Be;var _e=function(e){var t=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),J("a4 portrait"),t.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" from "+S(e.resultInput.dateStart)+" to "+S(e.resultInput.dateEnd)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},"Item Code"),r.a.createElement("th",{className:"align-top",colSpan:3},"Description"),r.a.createElement("th",{className:"align-top"},"B/F Qty"),r.a.createElement("th",{className:"align-top"},"Balance Qty")),e.withDetails?r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"Doc No."),r.a.createElement("th",{className:"align-top"},"Date"),r.a.createElement("th",{className:"align-top"},"Type"),r.a.createElement("th",{className:"align-top"},"In"),r.a.createElement("th",{className:"align-top"},"Out"),r.a.createElement("th",{className:"align-top"},"Bal Qty")):null,r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-secondary",colSpan:6}))),function(){var t=e.broughtForwardData,a=e.broughtForwardField,n=e.data,l=(e.dataDetail,e.field),o=l[0].name,c=l[1].name,i=l[2].name,s=l[3].name,m=l[4].name,d=l[5].name,u=l[6].name,p=a[1].name,g=[],f=[],E=0;return n.forEach((function(a){-1===g.indexOf(a[o])&&(g.push(a[o]),E=t.find((function(e){return e[o]===a[o]}))[p],f.push(r.a.createElement("tbody",{key:a[o],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},a[o]),r.a.createElement("th",{className:"align-top"},a[c]),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",{className:"align-top"},C(t.find((function(e){return e[o]===a[o]}))[p])),r.a.createElement("th",{className:"align-top"},C(t.find((function(e){return e[o]===a[o]}))[p]+n.reduce((function(e,t){return t[o]===a[o]?e+t[d]+t[u]:e}),0)))),e.withDetails?e.dataDetail.map((function(e){if(e[o]===a[o])return r.a.createElement("tr",{key:e[i]},r.a.createElement("td",{className:"align-top"},e[i]),r.a.createElement("td",{className:"align-top"},S(e[s])),r.a.createElement("td",{className:"align-top"},e[m]),r.a.createElement("td",{className:"align-top"},e[d]),r.a.createElement("td",{className:"align-top"},e[u]),r.a.createElement("td",{className:"align-top"},E+=e[d]+e[u]))})):null)))})),f}()),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function Ue(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O(null),u=Object(c.a)(d,2),g=u[0],f=g.data,E=g.error,b=u[1],N=Object(n.useState)(null),v=Object(c.a)(N,2),y=v[0],I=v[1],L=Object(n.useState)([]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)((new Date).getFullYear()+"-01-01"),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(Ce(new Date)),Y=Object(c.a)(M,2),B=Y[0],_=Y[1],V=Object(n.useState)(null),Q=Object(c.a)(V,2),G=Q[0],H=Q[1],X=Object(n.useState)([]),z=Object(c.a)(X,2),W=z[0],$=z[1],Z=Object(n.useState)(!1),K=Object(c.a)(Z,2),ee=K[0],te=K[1],ae=Object(n.useState)(null),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],oe=Object(n.useState)(null),ce=Object(c.a)(oe,2),ie=ce[0],se=ce[1],me=Object(n.useState)(""),de=Object(c.a)(me,2),ue=de[0],pe=de[1],ge=Object(n.useState)(""),fe=Object(c.a)(ge,2),Ee=fe[0],he=fe[1],be=Object(n.useState)(!1),Ne=Object(c.a)(be,2),ve=Ne[0],ye=Ne[1],we=Object(i.h)().path,De=Object(n.useContext)(p).changeAuth,Oe=Object(i.g)(),xe=700;function Ce(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}Object(n.useEffect)((function(){s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),De(!1)):s&&s.data&&s.field&&I(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" "+(e[s.field[1].name]?e[s.field[1].name]:""))})))}),[s,m]),Object(n.useEffect)((function(){if(f&&!1===f.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),De(!1);else if(f&&f.data&&f.field){var e=[],t=f.data[1],a=f.field[1],n=a[0].name,l=a[1].name,o=a[2].name,c=a[3].name,i=a[4].name,s=a[5].name,m=a[6].name;H((function(e){})),t.forEach((function(a){var r={};-1===e.indexOf(a[n])&&(e.push(a[n]),r[a[n]]=t.filter((function(e){return e[n]===a[n]})),H((function(e){return Object.assign({},e,r)})))})),H((function(e){return Object(D.a)({},e,{data:f.data,dataPreview:Object(w.a)(f.data),field:f.field,dateStart:T,dateEnd:B,stockID:k})})),le(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:n},"Item Code"),r.a.createElement("option",{value:l},"Description"))),se(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:o},"Doc No."),r.a.createElement("option",{value:c},"Doc Date"),r.a.createElement("option",{value:i},"Type"),r.a.createElement("option",{value:s},"In"),r.a.createElement("option",{value:m},"Out"))),$(e.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}}),[f,E]),Object(n.useEffect)((function(){W&&W.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[G]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(s&&s.error||m||f&&f.error||E)&&r.a.createElement("div",{className:"alert alert-warning"},s&&s.error?"Stock List RETRIEVAL for item failed errno: "+s.error.errno+" code: "+s.error.code+" message: "+s.error.sqlMessage:null,m?"Stock List RETRIEVAL for item failed "+m:null,r.a.createElement("br",null),r.a.createElement("br",null),f&&f.error?"Stock Card RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"Stock Card RETRIEVAL for item failed "+E:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(we,"/Preview")},G?r.a.createElement(_e,{backPath:Ue.path,description:Ue.description,resultInput:G,withDetails:ee,data:x(G.dataPreview[1],ue,"asc"),dataDetail:x(G.dataPreview[1],Ee,"asc"),field:G.field[1],broughtForwardData:G.dataPreview[0],broughtForwardField:f.field[0],getFormattedDate:Ce}):r.a.createElement(i.a,{to:Ue.path})),r.a.createElement(i.b,{exact:!0,path:we},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,Ue.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ye(!1),b({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock_card",param:[T,B,k]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(B)?(alert("Invalid Date Start Entry"),P((new Date).getFullYear()+"-01-01")):P(e.target.value)},value:T},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(T)?(alert("Invalid Date End Entry"),_(Ce(new Date))):_(e.target.value)},value:B},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"stockID"},"Stock ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,size:"3",id:"stockID",value:k,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),R(t)}},y)),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("div",{className:"form-check offset-md-2"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"allStockID",onChange:function(e){e.target.checked?R(s.data.map((function(e){return e[s.field[0].name]}))):R([])}}),r.a.createElement("label",{htmlFor:"allStockID",style:{paddingLeft:0},className:"form-check-label"},"All Stock ID"))),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-8"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-check col-md-12 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withDetails",onChange:function(e){e.target.checked?te(!0):te(!1)},checked:ee}),r.a.createElement("label",{htmlFor:"withDetails",className:"form-check-label"},"With Details")),r.a.createElement("div",{className:"form-group form-row col-md-6"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:ue,onChange:function(e){return pe(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),re)),r.a.createElement("div",{className:"form-group col-md-6 form-row"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:Ee,onChange:function(e){return he(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ie)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return H(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){G?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),Oe.push("./StockCardReport/Preview")):ye(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),ve?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),G?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return W.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return W.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),function(){var e=G.data[0],t=G.field[0],a=G.data[1],n=G.field[1],l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=n[6].name,u=t[1].name;return r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{minWidth:xe,transform:"rotateX(180deg)"}},r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"0 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G.data[1]=x(G.data[1],l,e.target.getAttribute("data-order")),H(Object(D.a)({},G)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("stockNo").classList.remove("fa-caret-up"),document.getElementById("stockNo").classList.add("fa-caret-down")):(document.getElementById("stockNo").classList.remove("fa-caret-down"),document.getElementById("stockNo").classList.add("fa-caret-up"))}},"Stock No.",r.a.createElement("i",{id:"stockNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G.data[1]=x(G.data[1],o,e.target.getAttribute("data-order")),H(Object(D.a)({},G)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("description").classList.remove("fa-caret-up"),document.getElementById("description").classList.add("fa-caret-down")):(document.getElementById("description").classList.remove("fa-caret-down"),document.getElementById("description").classList.add("fa-caret-up"))}},"Description",r.a.createElement("i",{id:"description",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"B/F Qty"),r.a.createElement("h6",{style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"Balance Qty")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(){var t=[],n=[],p=0;return a.forEach((function(g){-1===t.indexOf(g[l])&&(t.push(g[l]),p=e.find((function(e){return e[l]===g[l]}))[u],n.push(r.a.createElement("div",{key:g[l]},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+g[l].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1",style:{flex:"0 0 14px",paddingLeft:10,paddingRight:10},id:"plusminus"+g[l].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10}},g[l]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},g[o]),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(e.find((function(e){return e[l]===g[l]}))[u])),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(e.find((function(e){return e[l]===g[l]}))[u]+a.reduce((function(e,t){return t[l]===g[l]?e+t[m]+t[d]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5",id:g[l].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="docNum"+g[l].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var a={};a[g[l]]=x(G[g[l]],c,e.target.getAttribute("data-order")),H(Object.assign({},G,a)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Doc No.",r.a.createElement("i",{id:"docNum"+g[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="date"+g[l].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var a={};a[g[l]]=x(G[g[l]],i,e.target.getAttribute("data-order")),H(Object.assign({},G,a)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Date",r.a.createElement("i",{id:"date"+g[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="type"+g[l].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var a={};a[g[l]]=x(G[g[l]],s,e.target.getAttribute("data-order")),H(Object.assign({},G,a)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Type",r.a.createElement("i",{id:"type"+g[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="IN"+g[l].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var a={};a[g[l]]=x(G[g[l]],m,e.target.getAttribute("data-order")),H(Object.assign({},G,a)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"In",r.a.createElement("i",{id:"IN"+g[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="OUT"+g[l].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var a={};a[g[l]]=x(G[g[l]],d,e.target.getAttribute("data-order")),H(Object.assign({},G,a)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Out",r.a.createElement("i",{id:"OUT"+g[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap"},"Bal Qty"))),r.a.createElement("tbody",null,G[g[l]].map((function(e){if(e[l]===g[l])return r.a.createElement("tr",{key:e[c],style:{cursor:"pointer"},onClick:function(t){return Oe.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(e[s].toLowerCase(),e[c]))}},r.a.createElement("td",{className:"text-nowrap"},e[c]),r.a.createElement("td",{className:"text-nowrap"},S(e[i])),r.a.createElement("td",{className:"text-nowrap"},e[s]),r.a.createElement("td",{className:"text-nowrap"},e[m]),r.a.createElement("td",{className:"text-nowrap"},e[d]),r.a.createElement("td",{className:"text-nowrap"},p+=e[m]+e[d]))}))))))))})),n}())))}()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:Ue.path}))}Ue.description="Stock Card Report",Ue.path="/StockCardReport";var Je=Ue;function Ve(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(w.a)(o.slice(0,t)),[e],Object(w.a)(o.slice(t+1,o.length))))}return r.a.createElement(H,{inputState:o,changeInputState:i,url:t,item:"stock",successPath:"/StockItemMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ve.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"itemNumber"},"Item Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"itemNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"description"},"Description ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"description",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Price")),r.a.createElement("label",{htmlFor:"sellingPrice",className:"col-12"},"Selling Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"sellingPrice",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"minPrice",className:"col-12"},"Min Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"minPrice",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"maxPrice",className:"col-12"},"Max Price:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"maxPrice",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,className:"form-control"})),r.a.createElement("small",{className:"text-warning"},"2 decimal places only")),r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Cost")),r.a.createElement("label",{htmlFor:"standardCost",className:"col-12"},"Standard Cost:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:".01",id:"standardCost",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("small",{className:"text-warning"},"2 decimal places only")),r.a.createElement("fieldset",{className:"form-group col-md-5 mx-3 border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Stock Level")),r.a.createElement("label",{htmlFor:"minQTY",className:"col-12"},"Min Quantity(Re-order Level):"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:"1",id:"minQTY",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"maxQTY",className:"col-12"},"Max Quantity:"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",min:"0",step:"1",id:"maxQTY",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"})),r.a.createElement("label",{htmlFor:"balanceQTY",className:"col-12"},"Balance Quantity: "),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{type:"number",id:"balanceQTY",onChange:function(e){return e},value:o[8],disabled:!0,required:!0,className:"form-control"})))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Ve.description="Stock Item",Ve.path="/StockItem";var Qe=Ve;function Ge(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"stock",param:t.id?[t.id]:null}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=4,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],g=d[1],f=Object(n.useState)(["","","","",[]]),E=Object(c.a)(f,2),b=E[0],N=E[1],v=Object(n.useContext)(p).changeAuth;function y(e,t){N([].concat(Object(w.a)(b.slice(0,t)),[e],Object(w.a)(b.slice(t+1))))}function D(e){return b[s].map((function(t,a){var n;return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNo",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNo",className:"col form-control rounded-0 text-center",value:b[s][a][0]?b[s][a][0]:"",onChange:function(e){return e},style:{flex:"1 0 80px",paddingLeft:10,paddingRight:0},disabled:e}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"itemCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"itemCode",required:!0,className:"form-control rounded-0",disabled:e,style:{paddingLeft:10},value:b[s][a][1]?b[s][a][1]:"",onChange:function(e){return e}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e,onChange:function(e){var t="",n=e.target.value;o.data.forEach((function(a){a[o.field[0].name]===e.target.value&&(t=a[o.field[1].name]?a[o.field[1].name]:"")})),N((function(e){return e.slice(0,s).concat([e[s].slice(0,a).concat([e[s][a].slice(0,1).concat(n).concat(t).concat(e[s][a].slice(3))]).concat(e[s].slice(a+1))]).concat(e.slice(s+1))}))}},r.a.createElement("option",{value:""},"-select an option- "),u)),r.a.createElement("label",{htmlFor:"description",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"description",required:!0,className:"col form-control rounded-0",value:b[s][a][2]?b[s][a][2]:"",onChange:function(e){return e},disabled:e,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"qty",className:"sr-only"}),r.a.createElement("input",(n={type:"number",required:!0,step:"1",min:"-1000000",max:"1000000",id:"qty"},Object(q.a)(n,"required",!0),Object(q.a)(n,"className","col form-control rounded-0"),Object(q.a)(n,"value",b[s][a][3]),Object(q.a)(n,"disabled",e),Object(q.a)(n,"style",{flex:"1 0 75px",paddingLeft:10,paddingRight:0}),Object(q.a)(n,"onChange",(function(e){return function(e,t,a,n){N(b.slice(0,t).concat([b[t].slice(0,a).concat([b[t][a].slice(0,n).concat(e).concat(b[t][a].slice(n+1))]).concat(b[t].slice(a+1))]).concat(b.slice(t+1)))}(e.target.value,s,a,3)})),n)))}))}Object(n.useEffect)((function(){if(o&&!1===o.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),v(!1);else if(o&&o.data&&o.field){var e=o.field[0].name,t=o.field[1].name,a=o.field[8].name;g(o.data.map((function(n){return r.a.createElement("option",{key:n[e],value:n[e]},n[e]+" | "+(n[t]?n[t]:"")+" | Bal Qty = "+(n[a]?n[a]:"0"))})))}}),[o,i]);var x=null;return(o&&o.error||i)&&(x=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Stock List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Stock List RETRIEVAL for item failed "+i:null)),r.a.createElement(H,{inputState:b,changeInputState:N,url:t,item:"stock_adjustment",successPath:"/StockAdjustment"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,m=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Ge.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,x,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"stockAdjustmentNumber"},"Stock Adjustment Number ",r.a.createElement("span",{className:"text-warning"},"*")),m({onChange:y,layout:"col-md-4",position:0,labelID:"stockAdjustmentNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"data"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return y(e.target.value,1)},value:b[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"description",onChange:function(e){return y(e.target.value,2)},value:b[2],disabled:a,className:"form-control"}))),r.a.createElement("fieldset",{className:"form-group border border-secondary pb-4 rounded px-3"},r.a.createElement("legend",{className:"col-form-label col-12 col-md-6 offset-md-3 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return N(b.slice(0,s).concat([b[s].slice(0).concat([[b[s].length+1,"","",""]])]).concat(b.slice(s+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Stock Adjustment Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return N(b.slice(0,s).concat([b[s].slice(0,b[s].length-1)]).concat(b.slice(s+1)))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 80px",paddingLeft:10,paddingRight:10}},"Line No."),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"Item Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 75px",paddingLeft:10,paddingRight:10}},"Qty")),D(a))),r.a.createElement("h5",{className:"text-right my-3 col-12"},"Total: "+C(function(){var e=0;return b[s].forEach((function(t,a){""!==b[s][a][3]&&(e+=parseInt(b[s][a][3]))})),e}())),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}Ge.description="Stock Adjustment",Ge.path="/StockAdjustmentItem";var He=Ge,Xe=a(27),ze=a.n(Xe);function We(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./BankItem",item:"bank",render:function(e){return r.a.createElement(L,Object.assign({description:We.description,listname:"Bank"},e))}}))}We.description="Bank Maintenance",We.path="/BankMaintenance";var $e=We;function Ze(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./BankReceiptItem",item:"bank_receipt",render:function(e){return r.a.createElement(L,Object.assign({description:Ze.description,listname:Ze.description},e))}}))}Ze.description="Bank Receipt",Ze.path="/BankReceipt";var Ke=Ze;function et(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./BankPaymentItem",item:"bank_payment",render:function(e){return r.a.createElement(L,Object.assign({description:et.description,listname:et.description},e))}}))}et.description="Bank Payment",et.path="/BankPayment";var tt=et;function at(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./CashReceiptItem",item:"cash_receipt",render:function(e){return r.a.createElement(L,Object.assign({description:at.description,listname:at.description},e))}}))}at.description="Cash Receipt",at.path="/CashReceipt";var nt=at;function rt(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./CashPaymentItem",item:"cash_payment",render:function(e){return r.a.createElement(L,Object.assign({description:rt.description,listname:rt.description},e))}}))}rt.description="Cash Payment",rt.path="/CashPayment";var lt=rt;function ot(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(w.a)(o.slice(0,t)),[e],Object(w.a)(o.slice(t+1,o.length))))}return r.a.createElement(H,{inputState:o,changeInputState:i,url:t,item:"bank",successPath:"/BankMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ot.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"bankCode"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankName"},"Bank Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"bankName",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankAddress"},"Bank Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"bankAddress",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"bankPostcode"},"Bank Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"bankPostcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"}))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}ot.description="Bank Item",ot.path="/BankItem";var ct=ot;function it(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank_receipt"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,g=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank"}),credentials:"include"}}),f=Object(c.a)(g,1)[0],E=f.data,b=f.error,N=O(null),v=Object(c.a)(N,2),y=v[0],D=y.data,x=y.error,S=v[1],I=7,L=10,j=11,k=0,R=1,F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(null),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(n.useState)(null),G=Object(c.a)(Q,2),z=G[0],W=G[1],$=Object(n.useState)(!0),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)(["","","","","","","","","","",[],[]]),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useContext)(p).changeAuth;function oe(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function ie(e,t){re([].concat(Object(w.a)(ne.slice(0,t)),[e],Object(w.a)(ne.slice(t+1,ne.length))))}function se(){return+ne[I]}function me(e){return ne[j].reduce((function(t,a){return e===a[k]?t:t-a[R]}),ne[L].reduce((function(t,a){return e===a[k]?t:t-a[R]}),se()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),le(!1)):o&&o.data&&o.field&&P(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),le(!1)):d&&d.data&&d.field&&q(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),E&&!1===E.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),le(!1)):E&&E.data&&E.field&&V(E.data.map((function(e){return r.a.createElement("option",{key:e[E.field[0].name],value:e[E.field[0].name]},(e[E.field[0].name]?e[E.field[0].name]:"")+" | "+(e[E.field[1].name]?e[E.field[1].name]:""))}))),""!==ne[8]&&ee(!1)}),[o,i,d,u,E,b,ne[8]]),Object(n.useEffect)((function(){D&&!1===D.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),le(!1))}),[D,x]);var de=null;return(o&&o.error||i||d&&d.error||u||E&&E.error||b||D&&D.error||x)&&(de=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Debtor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),E&&E.error?"Bank List RETRIEVAL for item failed errno: "+E.error.errno+" code: "+E.error.code+" message: "+E.error.sqlMessage:null,b?"Bank List RETRIEVAL for item failed "+b:null,r.a.createElement("br",null),r.a.createElement("br",null),D&&D.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+D.error.errno+" code: "+D.error.code+" message: "+D.error.sqlMessage:null,x?"Debtor Outstanding List RETRIEVAL for item failed "+x:null)),r.a.createElement(H,{inputState:ne,changeInputState:re,url:t,item:"bank_receipt",successPath:"/BankReceipt",paramOutstanding:oe,changeParamOutstanding:S,debtorCreditorNumPosition:2,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+it.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,de,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==me()&&K?W(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:K,disabled:a,id:"isDebtorPayment",onChange:function(e){ee(!K),re([].concat(Object(w.a)(ne.slice(0,2)),[""],Object(w.a)(ne.slice(3,8)),[""],Object(w.a)(ne.slice(9,L)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isDebtorPayment"},"Debtor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!K},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor")),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:ne[2],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:ne[2],onChange:function(e){ie(e.target.value,2),S(oe(e.target.value,ne[9]))}},r.a.createElement("option",{value:""}," -select an option- "),T))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||K},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:ne[8],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ie(e.target.value,8)}},r.a.createElement("option",{value:""}," -select an option- "),B))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:ie,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"bankCode",value:ne[1],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){ie(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),J))),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:ne[3],onChange:function(e){return ie(e.target.value,3)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return ie(e.target.value,4)},value:ne[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return ie(e.target.value,5)},value:ne[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return ie(e.target.value,6)},value:ne[6],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return ie(e.target.value,7)},value:ne[7],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),K?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(me()))):null,z,K?r.a.createElement(ce,{dataSelectOutstanding:D,inputState:ne,changeInputState:re,disabled:a,calculateUnappliedAmount:me,calculateTotal:se,offsetPositionOne:L,offsetPositionTwo:j,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:W,offsetDescription:"Sales Invoice / Debit Note"}):null),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}it.description="Bank Receipt",it.path="/BankReceiptItem";var st=it;function mt(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank_payment"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,g=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"bank"}),credentials:"include"}}),f=Object(c.a)(g,2),E=f[0],b=E.data,N=E.error,v=(f[1],O(null)),y=Object(c.a)(v,2),D=y[0],x=D.data,S=D.error,I=y[1],L=7,j=10,k=11,R=0,F=1,A=Object(n.useState)(null),T=Object(c.a)(A,2),P=T[0],M=T[1],Y=Object(n.useState)(null),B=Object(c.a)(Y,2),q=B[0],_=B[1],U=Object(n.useState)(null),J=Object(c.a)(U,2),V=J[0],Q=J[1],G=Object(n.useState)(null),z=Object(c.a)(G,2),W=z[0],$=z[1],Z=Object(n.useState)(!0),K=Object(c.a)(Z,2),ee=K[0],te=K[1],ae=Object(n.useState)(["","","","","","","","","","",[],[]]),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],oe=Object(n.useContext)(p).changeAuth;function ie(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function se(e,t){le([].concat(Object(w.a)(re.slice(0,t)),[e],Object(w.a)(re.slice(t+1,re.length))))}function me(){return+re[L]}function de(e){return re[k].reduce((function(t,a){return e===a[R]?t:t-a[F]}),re[j].reduce((function(t,a){return e===a[R]?t:t-a[F]}),me()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):o&&o.data&&o.field&&M(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):d&&d.data&&d.field&&_(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),b&&!1===b.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1)):b&&b.data&&b.field&&Q(b.data.map((function(e){return r.a.createElement("option",{key:e[b.field[0].name],value:e[b.field[0].name]},(e[b.field[0].name]?e[b.field[0].name]:"")+" | "+(e[b.field[1].name]?e[b.field[1].name]:""))}))),""!==re[8]&&te(!1)}),[o,i,d,u,b,N,re[8]]),Object(n.useEffect)((function(){x&&!1===x.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),oe(!1))}),[x,S]);var ue=null;return(o&&o.error||i||d&&d.error||u||b&&b.error||N||x&&x.error||S)&&(ue=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Creditor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"Bank List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"Bank List RETRIEVAL for item failed "+N:null,r.a.createElement("br",null),r.a.createElement("br",null),x&&x.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+x.error.errno+" code: "+x.error.code+" message: "+x.error.sqlMessage:null,S?"Creditor Outstanding List RETRIEVAL for item failed "+S:null)),r.a.createElement(H,{inputState:re,changeInputState:le,url:t,item:"bank_payment",successPath:"/BankPayment",paramOutstanding:ie,changeParamOutstanding:I,debtorCreditorNumPosition:2,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+mt.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,ue,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==de()&&ee?$(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:ee,disabled:a,id:"isCreditorPayment",onChange:function(e){te(!ee),le([].concat(Object(w.a)(re.slice(0,2)),[""],Object(w.a)(re.slice(3,8)),[""],Object(w.a)(re.slice(9,j)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isCreditorPayment"},"Creditor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!ee},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor")),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:re[2],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:re[2],onChange:function(e){se(e.target.value,2),I(ie(e.target.value,re[9]))}},r.a.createElement("option",{value:""}," -select an option- "),P))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||ee},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:re[8],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){se(e.target.value,8)}},r.a.createElement("option",{value:""}," -select an option- "),q))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:se,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"bankCode"},"Bank Code ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"bankCode",value:re[1],onChange:function(e){return e},required:!0,className:"form-control",disabled:a}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){se(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),V))),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:re[3],onChange:function(e){return se(e.target.value,3)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return se(e.target.value,4)},value:re[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return se(e.target.value,5)},value:re[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return se(e.target.value,6)},value:re[6],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return se(e.target.value,7)},value:re[7],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),ee?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(de()))):null,W,ee?r.a.createElement(ce,{dataSelectOutstanding:x,inputState:re,changeInputState:le,disabled:a,calculateUnappliedAmount:de,calculateTotal:me,offsetPositionOne:j,offsetPositionTwo:k,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:$,offsetDescription:"Purchase Invoice / Purchase Debit Note"}):null),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}mt.description="Bank Payment",mt.path="/BankPaymentItem";var dt=mt;function ut(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"cash_receipt"}),credentials:"include"}}),m=Object(c.a)(s,1)[0],d=m.data,u=m.error,g=O(null),f=Object(c.a)(g,2),E=f[0],b=E.data,N=E.error,v=f[1],y=6,D=10,x=11,S=0,I=1,L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(null),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(null),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(!0),U=Object(c.a)(_,2),J=U[0],V=U[1],Q=Object(n.useState)(["","","","","","","","","","",[],[]]),G=Object(c.a)(Q,2),z=G[0],W=G[1],$=Object(n.useContext)(p).changeAuth;function Z(e,t){return{url:"./getDebtorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({debtorNum:e,oldNum:t}),credentials:"include"}}}function K(e,t){W([].concat(Object(w.a)(z.slice(0,t)),[e],Object(w.a)(z.slice(t+1,z.length))))}function ee(){return+z[y]}function te(e){return z[x].reduce((function(t,a){return e===a[S]?t:t-a[I]}),z[D].reduce((function(t,a){return e===a[S]?t:t-a[I]}),ee()))}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),$(!1)):o&&o.data&&o.field&&R(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))}))),d&&!1===d.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),$(!1)):d&&d.data&&d.field&&P(d.data.map((function(e){return r.a.createElement("option",{key:e[d.field[0].name],value:e[d.field[0].name]},(e[d.field[0].name]?e[d.field[0].name]:"")+" | "+(e[d.field[1].name]?e[d.field[1].name]:""))}))),""!==z[7]&&V(!1)}),[o,i,d,u,z[7]]),Object(n.useEffect)((function(){b&&!1===b.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),$(!1))}),[b,N]);var ae=null;return(o&&o.error||i||d&&d.error||u||b&&b.error||N)&&(ae=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"Debtor List RETRIEVAL for item failed "+i:null,r.a.createElement("br",null),r.a.createElement("br",null),d&&d.error?"GL Code List RETRIEVAL for item failed errno: "+d.error.errno+" code: "+d.error.code+" message: "+d.error.sqlMessage:null,u?"GL Code List RETRIEVAL for item failed "+u:null,r.a.createElement("br",null),r.a.createElement("br",null),b&&b.error?"Debtor Outstanding List RETRIEVAL for item failed errno: "+b.error.errno+" code: "+b.error.code+" message: "+b.error.sqlMessage:null,N?"Debtor Outstanding List RETRIEVAL for item failed "+N:null)),r.a.createElement(H,{inputState:z,changeInputState:W,url:t,item:"cash_receipt",successPath:"/CashReceipt",paramOutstanding:Z,changeParamOutstanding:v,debtorCreditorNumPosition:1,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+ut.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,ae,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==te()&&J?q(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:J,disabled:a,id:"isDebtorPayment",onChange:function(e){V(!J),W([].concat(Object(w.a)(z.slice(0,1)),[""],Object(w.a)(z.slice(2,7)),[""],Object(w.a)(z.slice(8,D)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isDebtorPayment"},"Debtor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!J},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Debtor")),r.a.createElement("label",{className:"mt-3",htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"debtorID",value:z[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:z[1],onChange:function(e){K(e.target.value,1),v(Z(e.target.value,z[9]))}},r.a.createElement("option",{value:""}," -select an option- "),k))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||J},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:z[7],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){K(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),T))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:K,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:z[2],onChange:function(e){return K(e.target.value,2)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return K(e.target.value,3)},value:z[3],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return K(e.target.value,4)},value:z[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return K(e.target.value,5)},value:z[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return K(e.target.value,6)},value:z[6],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),J?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(te()))):null,B,J?r.a.createElement(ce,{dataSelectOutstanding:b,inputState:z,changeInputState:W,disabled:a,calculateUnappliedAmount:te,calculateTotal:ee,offsetPositionOne:D,offsetPositionTwo:x,offsetDescriptionOne:"INVOICE",offsetDescriptionTwo:"DEBIT NOTE",changeErrorUnappliedAmount:q,offsetDescription:"Sales Invoice / Debit Note"}):null),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}ut.description="Cash Receipt",ut.path="/CashReceiptItem";var pt=ut;function gt(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,2),o=l[0],i=o.data,s=o.error,m=(l[1],O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"cash_payment"}),credentials:"include"}})),d=Object(c.a)(m,2),u=d[0],g=u.data,f=u.error,E=(d[1],O(null)),b=Object(c.a)(E,2),N=b[0],v=N.data,y=N.error,D=b[1],x=6,S=10,I=11,L=0,j=1,k=Object(n.useState)(null),R=Object(c.a)(k,2),F=R[0],A=R[1],T=Object(n.useState)(null),P=Object(c.a)(T,2),M=P[0],Y=P[1],B=Object(n.useState)(null),q=Object(c.a)(B,2),_=q[0],U=q[1],J=Object(n.useState)(!0),V=Object(c.a)(J,2),Q=V[0],G=V[1],z=Object(n.useState)(["","","","","","","","","","",[],[]]),W=Object(c.a)(z,2),$=W[0],Z=W[1],K=Object(n.useContext)(p).changeAuth;function ee(e,t){return{url:"./getCreditorOutstanding",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creditorNum:e,oldNum:t}),credentials:"include"}}}function te(e,t){Z([].concat(Object(w.a)($.slice(0,t)),[e],Object(w.a)($.slice(t+1,$.length))))}function ae(){return+$[x]}function ne(e){return $[I].reduce((function(t,a){return e===a[L]?t:t-a[j]}),$[S].reduce((function(t,a){return e===a[L]?t:t-a[j]}),ae()))}Object(n.useEffect)((function(){i&&!1===i.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),K(!1)):i&&i.data&&i.field&&A(i.data.map((function(e){return r.a.createElement("option",{key:e[i.field[0].name],value:e[i.field[0].name]},e[i.field[0].name]+" | "+(e[i.field[1].name]?e[i.field[1].name]:""))}))),g&&!1===g.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),K(!1)):g&&g.data&&g.field&&Y(g.data.map((function(e){return r.a.createElement("option",{key:e[g.field[0].name],value:e[g.field[0].name]},(e[g.field[0].name]?e[g.field[0].name]:"")+" | "+(e[g.field[1].name]?e[g.field[1].name]:""))}))),""!==$[7]&&G(!1)}),[i,s,g,f,$[7]]),Object(n.useEffect)((function(){v&&!1===v.auth&&(alert("Cookies Expired or Authorisation invalid. Please Login again!"),K(!1))}),[v,y]);var re=null;return(i&&i.error||s||g&&g.error||f||v&&v.error||y)&&(re=r.a.createElement("div",{className:"alert alert-warning"},i&&i.error?"Creditor List RETRIEVAL for item failed errno: "+i.error.errno+" code: "+i.error.code+" message: "+i.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),g&&g.error?"GL Code List RETRIEVAL for item failed errno: "+g.error.errno+" code: "+g.error.code+" message: "+g.error.sqlMessage:null,f?"GL Code List RETRIEVAL for item failed "+f:null,r.a.createElement("br",null),r.a.createElement("br",null),v&&v.error?"Creditor Outstanding List RETRIEVAL for item failed errno: "+v.error.errno+" code: "+v.error.code+" message: "+v.error.sqlMessage:null,y?"Creditor Outstanding List RETRIEVAL for item failed "+y:null)),r.a.createElement(H,{inputState:$,changeInputState:Z,url:t,item:"cash_payment",successPath:"/CashPayment",paramOutstanding:ee,changeParamOutstanding:D,debtorCreditorNumPosition:1,oldNumPosition:9},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,o=e.onUpdate,c=e.onDelete,i=e.errorDisplay,s=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+gt.description),r.a.createElement("small",{className:"text-warning"},"* required"),i,re,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==ne()&&Q?U(r.a.createElement("p",{className:"col-md-12 text-right alert alert-warning mx-3"},"Total not fully offset. Please amend.")):"INSERT"===t?l():o()}},r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:Q,disabled:a,id:"isCreditorPayment",onChange:function(e){G(!Q),Z([].concat(Object(w.a)($.slice(0,1)),[""],Object(w.a)($.slice(2,7)),[""],Object(w.a)($.slice(8,S)),[[],[]]))}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"isCreditorPayment"},"Creditor Payment?")),r.a.createElement("div",{className:"row"},r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||!Q},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Creditor")),r.a.createElement("label",{className:"mt-3",htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"creditorID",value:$[1],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},value:$[1],onChange:function(e){te(e.target.value,1),D(ee(e.target.value,$[9]))}},r.a.createElement("option",{value:""}," -select an option- "),F))),r.a.createElement("fieldset",{className:"form-group form-row col-md-5 mx-3 border border-secondary pb-4 rounded",disabled:!!a||Q},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"GL Code")),r.a.createElement("label",{className:"mt-3",htmlFor:"glCode"},"GL Code"),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"text",id:"glCode",value:$[7],onChange:function(e){return e},required:!0,className:"form-control"}),r.a.createElement("select",{className:"form-control",style:{flex:"0 1 0"},onChange:function(e){te(e.target.value,7)}},r.a.createElement("option",{value:""}," -select an option- "),M))),r.a.createElement("div",{className:"form-group col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"documentNumber"},"Document Number ",r.a.createElement("span",{className:"text-warning"},"*")),s({onChange:te,layout:"",position:0,labelID:"documentNumber"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"date",disabled:a,required:!0,value:$[2],onChange:function(e){return te(e.target.value,2)},className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"paymentMethod"},"Payment Method"),r.a.createElement("input",{type:"text",id:"paymentMethod",onChange:function(e){return te(e.target.value,3)},value:$[3],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"transactionID"},"Transaction ID"),r.a.createElement("input",{type:"text",id:"transactionID",onChange:function(e){return te(e.target.value,4)},value:$[4],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{type:"text",id:"description",onChange:function(e){return te(e.target.value,5)},value:$[5],disabled:a,className:"form-control"})),r.a.createElement("div",{className:"form-group form-row col-md-5 mx-3"},r.a.createElement("label",{htmlFor:"amount"},"Amount ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("input",{type:"number",id:"amount",onChange:function(e){return te(e.target.value,6)},value:$[6],disabled:a,required:!0,min:"0",step:".01",className:"form-control"})),Q?r.a.createElement("h6",{className:"text-right my-4 col-12",style:{paddingRight:30}},r.a.createElement("span",{className:"alert alert-secondary"},"Unapplied Amount: "+C(ne()))):null,_,Q?r.a.createElement(ce,{dataSelectOutstanding:v,inputState:$,changeInputState:Z,disabled:a,calculateUnappliedAmount:ne,calculateTotal:ae,offsetPositionOne:S,offsetPositionTwo:I,offsetDescriptionOne:"PURCHASE INVOICE",offsetDescriptionTwo:"PURCHASE DEBIT NOTE",changeErrorUnappliedAmount:U,offsetDescription:"Purchase Invoice / Purchase Debit Note"}):null),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:o,onDelete:c,changeDisabled:n}))))}))}gt.description="Cash Payment",gt.path="/CashPaymentItem";var ft=gt,Et=a(28),ht=a.n(Et);function bt(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./DebtorItem",item:"debtor",render:function(e){return r.a.createElement(L,Object.assign({description:bt.description,listname:"Debtor"},e))}}))}bt.description="Debtor Maintenance",bt.path="/DebtorMaintenance";var Nt=bt;var vt=function(e){var t=e.resultInput,a=t.currDate,n=t.agingMonths,l=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),J("a4 portrait"),l.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" as at "+S(e.resultInput.currDate)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},"Debtor No."),r.a.createElement("th",{className:"align-top"},"Name"),e.withDetails?r.a.createElement("th",null):null,e.withDetails?r.a.createElement("th",null):null,r.a.createElement("th",{className:"align-top"},"Current"),e.populateTableMonthsHeader(e.resultInput.agingMonths),r.a.createElement("th",{className:"align-top"},"> "+e.resultInput.agingMonths+" Month"),r.a.createElement("th",{className:"align-top"},"Total Overdue"),r.a.createElement("th",{className:"align-top"},"Balance")),e.withDetails?r.a.createElement("tr",{className:"border-bottom border-secondary text-secondary"},r.a.createElement("th",{className:"align-top"},"Doc No."),r.a.createElement("th",{className:"align-top"},"Doc Date"),r.a.createElement("th",{className:"align-top"},"Type"),r.a.createElement("th",{className:"align-top"},"Due Date"),r.a.createElement("th",{colSpan:4+e.resultInput.agingMonths})):null,e.withDetails?r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-secondary",colSpan:8+e.resultInput.agingMonths})):r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-top border-secondary",colSpan:6+e.resultInput.agingMonths}))),function(t,a){var n=e.data,l=e.dataDetail,o=e.field,c=o[0].name,i=o[1].name,s=o[2].name,m=o[3].name,d=o[4].name,u=o[5].name,p=o[6].name,g=[],f=[];return n.forEach((function(o){-1===g.indexOf(o[c])&&(g.push(o[c]),f.push(r.a.createElement("tbody",{key:o[c],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},o[c]),r.a.createElement("th",{className:"align-top"},o[i]),e.withDetails?r.a.createElement("th",null):null,e.withDetails?r.a.createElement("th",null):null,r.a.createElement("th",{className:"align-top"},C(n.reduce((function(a,n){return n[c]===o[c]&&e.calculateAgingCurrentAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u])?a+n[u]:a}),0))),e.populateMonthsAmount(t,o[c],Number(a),"table"),r.a.createElement("th",{className:"align-top"},C(n.reduce((function(n,r){return r[c]===o[c]&&e.calculateAgingRemainderAmount(t,r[p]&&"COD"!==r[p]?e.getFormattedDate(new Date(new Date(r[m]).setDate(new Date(r[m]).getDate()+Number(r[p])))):r[m],r[u],Number(a))?n+r[u]:n}),0))),r.a.createElement("th",{className:"align-top"},C(n.reduce((function(e,t){return t[c]===o[c]?e+t[u]:e}),0)-n.reduce((function(a,n){return n[c]===o[c]&&e.calculateAgingCurrentAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u])?a+n[u]:a}),0))),r.a.createElement("th",{className:"align-top"},C(n.reduce((function(e,t){return t[c]===o[c]?e+t[u]:e}),0)))),e.withDetails?l.map((function(n,l){return n[c]===o[c]?r.a.createElement("tr",{key:n[s]},r.a.createElement("td",{className:"align-top"},n[s]),r.a.createElement("td",{className:"align-top"},S(n[m])),r.a.createElement("td",{className:"align-top"},n[d]),r.a.createElement("td",{className:"align-top"},n[p]&&"COD"!==n[p]?S(e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p]))))):S(n[m])),r.a.createElement("td",{className:"align-top"},C(e.calculateAgingCurrentAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u]))),e.populateTableMonthsAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u],Number(a)),r.a.createElement("td",{className:"align-top"},C(e.calculateAgingRemainderAmount(t,n[p]&&"COD"!==n[p]?e.getFormattedDate(new Date(new Date(n[m]).setDate(new Date(n[m]).getDate()+Number(n[p])))):n[m],n[u],Number(a)))),r.a.createElement("td",{className:"align-top"}),r.a.createElement("td",{className:"align-top"})):null})):null)))})),f}(a,n)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function yt(e){var t,a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O(null),d=Object(c.a)(m,2),u=d[0],g=u.data,f=u.error,E=d[1],b=Object(n.useState)(null),N=Object(c.a)(b,2),v=N[0],y=N[1],I=Object(n.useState)(xe(new Date)),L=Object(c.a)(I,2),j=L[0],k=L[1],R=Object(n.useState)([]),F=Object(c.a)(R,2),A=F[0],T=F[1],P=Object(n.useState)(3),M=Object(c.a)(P,2),Y=M[0],B=M[1],_=Object(n.useState)(null),V=Object(c.a)(_,2),Q=V[0],G=V[1],H=Object(n.useState)([]),X=Object(c.a)(H,2),z=X[0],W=X[1],$=Object(n.useState)(!1),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)(null),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(null),oe=Object(c.a)(le,2),ce=oe[0],ie=oe[1],se=Object(n.useState)(""),me=Object(c.a)(se,2),de=me[0],ue=me[1],pe=Object(n.useState)(""),ge=Object(c.a)(pe,2),fe=ge[0],Ee=ge[1],he=Object(n.useState)(!1),be=Object(c.a)(he,2),Ne=be[0],ve=be[1],ye=Object(i.h)().path,we=Object(n.useContext)(p).changeAuth,De=Object(i.g)(),Oe=Q&&Q.agingMonths?714+90*Q.agingMonths:"auto";function xe(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function Ce(e,t,a,n){for(var l=[],o=Q.data,c=Q.field,i=c[0].name,s=c[3].name,m=c[5].name,d=c[6].name,u=function(a){var c=o.reduce((function(n,r){return r[i]===t&&je(e,r[d]&&"COD"!==r[d]?xe(new Date(new Date(r[s]).setDate(new Date(r[s]).getDate()+Number(r[d])))):r[s],r[m],a)?n+r[m]:n}),0);"table"!==n?l.push(r.a.createElement("p",{className:"mb-0",key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},c?C(c):"")):l.push(r.a.createElement("th",{className:"align-top",key:a},c?C(c):""))},p=1;p<+a+1;p++)u(p);return l}function Se(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("th",{key:a,className:"text-nowrap align-top"},a+" Month"));return t}function Ie(e,t,a,n){for(var l=[],o=1;o<+n+1;o++)l.push(r.a.createElement("td",{className:"text-nowrap align-top",key:o},C(je(e,t,a,o))));return l}function Le(e,t,a){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1,0)?a:""}function je(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1+n,0)&&e>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n,0)?a:""}function ke(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n+1,0)?a:""}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),we(!1)):o&&o.data&&o.field&&y(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" "+(e[o.field[1].name]?e[o.field[1].name]:""))})))}),[o,s]),Object(n.useEffect)((function(){if(g&&!1===g.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),we(!1);else if(g&&g.data&&g.field){var e=[],t=g.data,a=g.field,n=a[0].name,l=a[1].name,o=a[2].name,c=a[3].name,i=a[4].name;G((function(e){})),t.forEach((function(a){var r={};-1===e.indexOf(a[n])&&(e.push(a[n]),r[a[n]]=t.filter((function(e){return e[n]===a[n]})),G((function(e){return Object.assign({},e,r)})))})),G((function(e){return Object(D.a)({},e,{data:g.data,dataPreview:Object(w.a)(g.data),field:g.field,currDate:j,agingMonths:Y})})),re(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:n},"Debtor No."),r.a.createElement("option",{value:l},"Name"))),ie(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:o},"Doc No."),r.a.createElement("option",{value:c},"Doc Date"),r.a.createElement("option",{value:i},"Type"))),W(e.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}}),[g,f]),Object(n.useEffect)((function(){z&&z.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[Q]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var Re=null;return(o&&o.error||s||g&&g.error||f)&&(Re=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Debtor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Debtor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),g&&g.error?"Debtor Aging RETRIEVAL for item failed errno: "+g.error.errno+" code: "+g.error.code+" message: "+g.error.sqlMessage:null,f?"Debtor Aging RETRIEVAL for item failed "+f:null)),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(ye,"/Preview")},Q?r.a.createElement(vt,{backPath:yt.path,description:yt.description,resultInput:Q,withDetails:K,data:x(Q.dataPreview,de,"asc"),field:Q.field,dataDetail:x(Q.dataPreview,fe,"asc"),populateTableMonthsHeader:Se,populateTableMonthsAmount:Ie,calculateAgingCurrentAmount:Le,populateMonthsAmount:Ce,calculateAgingRemainderAmount:ke,getFormattedDate:xe}):r.a.createElement(i.a,{to:yt.path})),r.a.createElement(i.b,{exact:!0,path:ye},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,yt.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ve(!1),E({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor_aging",param:[A,j]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"date"},"Date"),r.a.createElement("input",(t={type:"date",id:"date",required:!0,onChange:function(e){return k(e.target.value)},value:j},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-2 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"agingMonths"},"Aging Month(s)"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-md-2",required:!0,value:Y,onChange:function(e){return B(e.target.value)}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,size:"3",value:A,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),T(t)}},v)),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("div",{className:"form-check offset-md-2"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"allDebtorID",onChange:function(e){e.target.checked?T(o.data.map((function(e){return e[o.field[0].name]}))):T([])}}),r.a.createElement("label",{htmlFor:"allDebtorID",style:{paddingLeft:0},className:"form-check-label"},"All Debtor ID"))),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-7"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group form-row col-md-12"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-5",value:de,onChange:function(e){return ue(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ne)),r.a.createElement("div",{className:"form-check col-md-4 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withDetails",onChange:function(e){e.target.checked?ee(!0):ee(!1)},checked:K}),r.a.createElement("label",{htmlFor:"withDetails",className:"form-check-label"},"With Details")),r.a.createElement("div",{className:"col-md-7 form-row form-group"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-8",value:fe,onChange:function(e){return Ee(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ce)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return G(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){Q?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),De.push("./DebtorAgingReport/Preview")):ve(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),Ne?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),Re,Q?r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{width:Oe,transform:"rotateX(180deg)"}},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return z.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return z.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"1 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G(Object(D.a)({},Q,{data:x(Q.data,"DEBTOR_NUM",e.target.getAttribute("data-order"))})),"asc"===e.target.getAttribute("data-order")?(document.getElementById("debtorNo").classList.remove("fa-caret-up"),document.getElementById("debtorNo").classList.add("fa-caret-down")):(document.getElementById("debtorNo").classList.remove("fa-caret-down"),document.getElementById("debtorNo").classList.add("fa-caret-up"))}},"Debtor No.",r.a.createElement("i",{id:"debtorNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G(Object(D.a)({},Q,{data:x(Q.data,"NAME",e.target.getAttribute("data-order"))})),"asc"===e.target.getAttribute("data-order")?(document.getElementById("name").classList.remove("fa-caret-up"),document.getElementById("name").classList.add("fa-caret-down")):(document.getElementById("name").classList.remove("fa-caret-down"),document.getElementById("name").classList.add("fa-caret-up"))}},"Name",r.a.createElement("i",{id:"name",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Current"),function(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("h6",{key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},a+" Month"));return t}(Q.agingMonths),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"> "+Q.agingMonths+" Month"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Total Overdue"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Balance")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(e,t){var a=Q.data,n=Q.field,l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=n[6].name,u=[],p=[];return a.forEach((function(n){-1===u.indexOf(n[l])&&(u.push(n[l]),p.push(r.a.createElement("div",{key:n[l]},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+n[l].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1",style:{flex:"1 0 14px",paddingLeft:10,paddingRight:10},id:"plusminus"+n[l].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},n[l]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},n[o]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(t,a){return a[l]===n[l]&&Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m])?t+a[m]:t}),0))),Ce(e,n[l],Number(t)),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(a,r){return r[l]===n[l]&&ke(e,r[d]&&"COD"!==r[d]?xe(new Date(new Date(r[i]).setDate(new Date(r[i]).getDate()+Number(r[d])))):r[i],r[m],Number(t))?a+r[m]:a}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(e,t){return t[l]===n[l]?e+t[m]:e}),0)-a.reduce((function(t,a){return a[l]===n[l]&&Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m])?t+a[m]:t}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(e,t){return t[l]===n[l]?e+t[m]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:n[l].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{id:"table",className:"table-dark table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],c,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Doc No.",r.a.createElement("i",{id:"docNo"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],i,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Doc Date",r.a.createElement("i",{id:"docDate"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],s,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Type",r.a.createElement("i",{id:"type"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap"},"Due Date"),r.a.createElement("th",{className:"text-nowrap"},"Current"),Se(t),r.a.createElement("th",{className:"text-nowrap"},"> "+t+" Month"))),r.a.createElement("tbody",null,Q[n[l]].map((function(a){return r.a.createElement("tr",{key:a[c],style:{cursor:"pointer"},onClick:function(e){return De.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(a[s].toLowerCase(),a[c]))}},r.a.createElement("td",{className:"text-nowrap"},a[c]),r.a.createElement("td",{className:"text-nowrap"},S(a[i])),r.a.createElement("td",{className:"text-nowrap"},a[s]),r.a.createElement("td",{className:"text-nowrap"},a[d]&&"COD"!==a[d]?S(xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d]))))):S(a[i])),r.a.createElement("td",{className:"text-nowrap"},C(Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m]))),Ie(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m],Number(t)),r.a.createElement("td",{className:"text-nowrap"},C(ke(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m],Number(t)))))}))))))))})),p}(Q.currDate,Q.agingMonths)))):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:yt.path}))}yt.description="Debtor Aging Report",yt.path="/DebtorAgingReport";var wt=yt;var Dt=function(e){var t,a=Object(i.g)(),n=e.topLeftInput?e.topLeftInput.map((function(e,t){return r.a.createElement("p",{className:"my-2",key:t},e)})):null,l=e.topRightField&&e.topRightInput?e.topRightField.map((function(t,a){return r.a.createElement("div",{className:"row",key:a},r.a.createElement("div",{className:"col-5 h6"},t),r.a.createElement("div",{className:"col-1"},":"),r.a.createElement("div",{className:"col-5 h6"},e.topRightInput[a]))})):null;function o(e,t){for(var a=[],n=t+1;n<+e+1;n++)a.push(r.a.createElement("th",{key:n,className:"text-nowrap text-center"},n+" Month"));return a}function c(e,t){for(var a=[],n=t+1;n<+e+1;n++)a.push(r.a.createElement("td",{key:n,className:"text-nowrap text-center"},C(s(n))));return a}function s(t){var a=e.data,n=e.field,r=n[0].name,l=n[4].name,o=n[5].name;return a.reduce((function(a,n){var c=new Date(new Date(e.dateEnd).getFullYear(),new Date(e.dateEnd).getMonth(),new Date(e.dateEnd).getDate(),0),i=new Date(new Date(n[r]).getFullYear(),new Date(n[r]).getMonth(),new Date(n[r]).getDate(),0);return i<=new Date(c.getFullYear(),Number(c.getMonth())+1-t,0)&&i>new Date(c.getFullYear(),Number(c.getMonth())-t,0)?n[l]?a+n[l]:a-n[o]:a}),0)}function m(t){for(var a,n,r=0,l=+t+1;l<(a=new Date(e.dateStartForAging),(n=new Date(e.dateEnd)).getMonth()-a.getMonth()+12*(n.getFullYear()-a.getFullYear())+1);l++)r+=s(l);return r+e.dbBroughtForwardAmount}return r.a.createElement("div",{className:"container py-5",style:{maxWidth:800}},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),a.push(e.backPath)}},"Back"),r.a.createElement("div",{className:"jumbotron",style:{padding:0}},r.a.createElement("h3",{className:"text-center"},e.description)),r.a.createElement("div",{className:"row",style:{margin:0}},r.a.createElement("div",{className:"col-6 jumbotron h6 py-4",style:{marginBottom:0}},n),r.a.createElement("div",{className:"col-6 py-4"},l)),r.a.createElement("hr",null),e.populateDebtorCreditor(!0),r.a.createElement("h6",{className:"text-center"},"Aged Analysis"),(t=e.agingMonths,r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap text-center"},"Current"),o(t<=6?t:6,0),t<=6?r.a.createElement("th",{className:"text-nowrap text-center"},"> "+t+" Month"):null)),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-nowrap text-center"},C(s(0))),c(t<=6?t:6,0),t<=6?r.a.createElement("td",{className:"text-nowrap text-center"},C(m(t))):null)),r.a.createElement("thead",null,r.a.createElement("tr",null,t<=6?null:o(t,6),t<=6?null:r.a.createElement("th",{className:"text-nowrap text-center"},"> "+t+" Month"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,t<=6?null:c(t,6),t<=6?null:r.a.createElement("td",{className:"text-nowrap text-center"},C(m(t))))))))};function Ot(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O(null),u=Object(c.a)(d,2),g=u[0],f=g.data,E=g.error,b=u[1],N=Object(n.useState)(null),v=Object(c.a)(N,2),y=v[0],I=v[1],L=Object(n.useState)(""),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)((new Date).getFullYear()+"-01-01"),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(Ee(new Date)),Y=Object(c.a)(M,2),B=Y[0],_=Y[1],U=Object(n.useState)(null),J=Object(c.a)(U,2),V=J[0],Q=J[1],G=12,H=Object(n.useState)(6),X=Object(c.a)(H,2),z=X[0],W=X[1],$=Object(n.useState)(null),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)(null),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(""),oe=Object(c.a)(le,2),ce=oe[0],ie=oe[1],se=Object(n.useState)(!1),me=Object(c.a)(se,2),de=me[0],ue=me[1],pe=Object(i.h)().path,ge=Object(n.useContext)(p).changeAuth,fe=Object(i.g)();function Ee(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function he(e,t){return new Date(e)<new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1)?e:Ee(new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1))}function be(e){var t=V.data[0][0][V.field[0][0].name],a=e?x(V.dataPreview[1],ce,"asc"):V.data[1],n=V.field[1],l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=a.reduce((function(e,t){return new Date(t[l])<new Date(V.dateStart)?t[s]?e+t[s]:e-t[m]:e}),0)+t;return r.a.createElement("div",null,r.a.createElement("table",{className:"table table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],l,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("date").classList.remove("fa-caret-up"),document.getElementById("date").classList.add("fa-caret-down")):(document.getElementById("date").classList.remove("fa-caret-down"),document.getElementById("date").classList.add("fa-caret-up")))}},"Date",e?null:r.a.createElement("i",{id:"date",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],o,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("docNo").classList.remove("fa-caret-up"),document.getElementById("docNo").classList.add("fa-caret-down")):(document.getElementById("docNo").classList.remove("fa-caret-down"),document.getElementById("docNo").classList.add("fa-caret-up")))}},"Doc No.",e?null:r.a.createElement("i",{id:"docNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],c,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("ref").classList.remove("fa-caret-up"),document.getElementById("ref").classList.add("fa-caret-down")):(document.getElementById("ref").classList.remove("fa-caret-down"),document.getElementById("ref").classList.add("fa-caret-up")))}},"Ref.",e?null:r.a.createElement("i",{id:"ref",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],i,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("type").classList.remove("fa-caret-up"),document.getElementById("type").classList.add("fa-caret-down")):(document.getElementById("type").classList.remove("fa-caret-down"),document.getElementById("type").classList.add("fa-caret-up")))}},"Type",e?null:r.a.createElement("i",{id:"type",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],s,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("dr").classList.remove("fa-caret-up"),document.getElementById("dr").classList.add("fa-caret-down")):(document.getElementById("dr").classList.remove("fa-caret-down"),document.getElementById("dr").classList.add("fa-caret-up")))}},"Dr",e?null:r.a.createElement("i",{id:"dr",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],m,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("cr").classList.remove("fa-caret-up"),document.getElementById("cr").classList.add("fa-caret-down")):(document.getElementById("cr").classList.remove("fa-caret-down"),document.getElementById("cr").classList.add("fa-caret-up")))}},"Cr",e?null:r.a.createElement("i",{id:"cr",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap"},"Balance"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6"},"B/F"),r.a.createElement("td",null,C(d))),a.map((function(t,a){if(new Date(t[l])>=new Date(V.dateStart)&&new Date(t[l])<=new Date(V.dateEnd))return t[s]&&(d+=t[s]),t[m]&&(d-=t[m]),r.a.createElement("tr",{key:a,style:e?null:{cursor:"pointer"},onClick:function(a){e?a.preventDefault():fe.push("/"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(t[i].toLowerCase(),t[o]))}},r.a.createElement("td",{className:"text-nowrap"},S(t[l])),r.a.createElement("td",{className:"text-nowrap"},t[o]),r.a.createElement("td",{className:"text-nowrap"},t[c]),r.a.createElement("td",{className:"text-nowrap"},t[i]),r.a.createElement("td",{className:"text-nowrap"},C(t[s])),r.a.createElement("td",{className:"text-nowrap"},C(t[m])),r.a.createElement("td",{className:"text-nowrap"},C(d)))})))),e?r.a.createElement("p",{className:"h5 text-right jumbotron py-2"},r.a.createElement("span",null,"Account Balance: "),r.a.createElement("span",null,C(d))):null)}Object(n.useEffect)((function(){s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ge(!1)):s&&s.data&&s.field&&I(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" "+(e[s.field[1].name]?e[s.field[1].name]:""))})))}),[s,m]),Object(n.useEffect)((function(){if(f&&!1===f.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),ge(!1);else if(f&&f.data&&f.field){var e=f.field[1],t=e[0].name,a=e[1].name,n=e[2].name,l=e[3].name,o=e[4].name,c=e[5].name;Q({data:f.data,dataPreview:Object(w.a)(f.data),field:f.field,dateStart:T,dateEnd:B,debtorID:k}),re(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:t},"Date"),r.a.createElement("option",{value:a},"Doc No."),r.a.createElement("option",{value:n},"Ref."),r.a.createElement("option",{value:l},"Type"),r.a.createElement("option",{value:o},"Dr"),r.a.createElement("option",{value:c},"Cr")))}}),[f,E]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(s&&s.error||m||f&&f.error||E)&&r.a.createElement("div",{className:"alert alert-warning"},s&&s.error?"Debtor List RETRIEVAL for item failed errno: "+s.error.errno+" code: "+s.error.code+" message: "+s.error.sqlMessage:null,m?"Debtor List RETRIEVAL for item failed "+m:null,r.a.createElement("br",null),r.a.createElement("br",null),f&&f.error?"Debtor Statement RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"Debtor Statement RETRIEVAL for item failed "+E:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(pe,"/Preview")},V?r.a.createElement(Dt,{backPath:Ot.path,description:"Debtor Statement",topLeftInput:Object(w.a)(K.slice(0,2)),topRightField:["Statement Date","Credit Term"],topRightInput:[S(V.dateStart)+" to "+S(V.dateEnd),"COD"===K[2]?"C.O.D.":K[2]+" days"],populateDebtorCreditor:be,data:V.dataPreview[1],field:V.field[1],dateEnd:V.dateEnd,agingMonths:z,dateStartForAging:he(V.dateStart,V.dateEnd),dbBroughtForwardAmount:V.dataPreview[0][0][V.field[0][0].name]}):r.a.createElement(i.a,{to:Ot.path})),r.a.createElement(i.b,{exact:!0,path:pe},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,Ot.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ue(!1),b({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor_statement",param:[he(T,B),B,k]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(B)?(alert("Invalid Date Start Entry"),P((new Date).getFullYear()+"-01-01")):P(e.target.value)},value:T},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(T)?(alert("Invalid Date End Entry"),_(Ee(new Date))):_(e.target.value)},value:B},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,value:k,onChange:function(e){var t="",a="",n="";s.data.forEach((function(r){r[s.field[0].name]===e.target.value&&(t=r[s.field[1].name]?r[s.field[1].name]:"",a=r[s.field[2].name]?r[s.field[2].name]:"",n=r[s.field[7].name]?r[s.field[7].name]:"")})),R(e.target.value),ee([t,a,n])}},r.a.createElement("option",{value:""}," -select an option- "),y)),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-7 mx-0"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6 form-row"},r.a.createElement("label",{className:"col-6 col-md-6 col-form-label",htmlFor:"agingMonths"},"Aging Months"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-3 col-md-3",required:!0,value:z,onChange:function(e){return W(e.target.value)}},r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"9"},"9"),r.a.createElement("option",{value:"12"},"12"))),r.a.createElement("div",{className:"form-group col-md-6 form-row "},r.a.createElement("label",{className:"col-3 col-md-3 col-form-label",htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-8 col-md-8",value:ce,onChange:function(e){return ie(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ne)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return Q(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){V?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),fe.push("./DebtorStatementReport/Preview")):ue(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),de?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),V?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result"),be()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:Ot.path}))}Ot.description="Debtor Statement Report",Ot.path="/DebtorStatementReport";var xt=Ot;var Ct=function(e){var t=Object(i.g)();return r.a.createElement("div",{className:"container-fluid py-1"},r.a.createElement("button",{type:"click",className:"btn btn-secondary d-print-none mb-2",onClick:function(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0"),J("a4 portrait"),t.push(e.backPath)}},"Back"),r.a.createElement("h2",{className:"text-center mb-3"},e.description+" from "+S(e.resultInput.dateStart)+" to "+S(e.resultInput.dateEnd)),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("table",{className:"table table-borderless"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},"Debtor No."),r.a.createElement("th",{className:"align-top",colSpan:e.withReceiptDetails?5:4},"Name"),r.a.createElement("th",{className:"align-top"},"Receipt Amount")),r.a.createElement("tr",null,r.a.createElement("th",{className:"align-top"},"Receipt No."),r.a.createElement("th",{className:"align-top"},"Date"),r.a.createElement("th",{className:"align-top"},"Type"),r.a.createElement("th",{className:"align-top"},"Method"),r.a.createElement("th",{className:"align-top",colSpan:e.withReceiptDetails?2:null},"Transaction ID"),r.a.createElement("th",{className:"align-top"},"Amount")),e.withReceiptDetails?r.a.createElement("tr",{className:"border-bottom border-secondary text-secondary"},r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Doc No.")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Type")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Doc Date")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Due Date")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Credit Term")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Doc Amount")),r.a.createElement("th",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"Receipt Amount"))):null,e.withReceiptDetails?r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-secondary",colSpan:7})):r.a.createElement("tr",null,r.a.createElement("th",{className:"border-bottom border-top border-secondary",colSpan:6}))),function(){var t=e.data,a=e.field,n=a[0].name,l=a[1].name,o=a[2].name,c=a[3].name,i=a[4].name,s=a[5].name,m=a[6].name,d=a[7].name,u=e.receiptData,p=e.receiptField,g=p[0].name,f=p[1].name,E=p[2].name,h=p[3].name,b=p[4].name,N=p[5].name,v=p[6].name,y=[],w=[];return t.forEach((function(a){-1===y.indexOf(a[n])&&(y.push(a[n]),w.push(r.a.createElement("tbody",{key:a[n],className:"border-bottom border-secondary"},r.a.createElement("tr",{className:"border-top border-secondary"},r.a.createElement("th",{className:"align-top"},a[n]),r.a.createElement("th",{className:"align-top",colSpan:e.withReceiptDetails?5:4},a[l]),r.a.createElement("th",{className:"align-top"},C(t.reduce((function(e,t){return t[n]===a[n]?e+t[d]:e}),0)))),e.dataDetail.map((function(t){if(t[n]===a[n])return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:t[o]},r.a.createElement("td",{className:"align-top"},t[o]),r.a.createElement("td",{className:"align-top"},S(t[c])),r.a.createElement("td",{className:"align-top"},t[i]),r.a.createElement("td",{className:"align-top"},t[s]),r.a.createElement("td",{className:"align-top",colSpan:e.withReceiptDetails?2:null},t[m]),r.a.createElement("td",{className:"align-top"},C(t[d]))),e.withReceiptDetails?u.map((function(a){if(a[g]===t[o])return r.a.createElement("tr",{key:a[f],className:"text-secondary"},r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,a[f])),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,a[E])),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,S(a[h]))),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,a[b]&&"COD"!==a[b]?S(e.getFormattedDate(new Date(new Date(a[h]).setDate(new Date(a[h]).getDate()+Number(a[b]))))):S(a[h]))),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,"COD"===a[b]?"C.O.D.":a[b]+" days")),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,C(a[N]))),r.a.createElement("td",{className:"align-top pl-5 pr-0"},r.a.createElement("i",null,C(a[v]))))})):null)})))))})),w}()),r.a.createElement("hr",{className:"border border-dark"}),r.a.createElement("small",{className:"d-block text-center"},"End of Report"))};function St(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O(null),u=Object(c.a)(d,2),g=u[0],f=g.data,E=g.error,b=u[1],N=Object(n.useState)(null),v=Object(c.a)(N,2),y=v[0],I=v[1],L=Object(n.useState)([]),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)((new Date).getFullYear()+"-01-01"),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(Ce(new Date)),Y=Object(c.a)(M,2),B=Y[0],_=Y[1],V=Object(n.useState)(null),Q=Object(c.a)(V,2),G=Q[0],H=Q[1],X=Object(n.useState)([]),z=Object(c.a)(X,2),W=z[0],$=z[1],Z=Object(n.useState)(!1),K=Object(c.a)(Z,2),ee=K[0],te=K[1],ae=Object(n.useState)(null),ne=Object(c.a)(ae,2),re=ne[0],le=ne[1],oe=Object(n.useState)(null),ce=Object(c.a)(oe,2),ie=ce[0],se=ce[1],me=Object(n.useState)(""),de=Object(c.a)(me,2),ue=de[0],pe=de[1],ge=Object(n.useState)(""),fe=Object(c.a)(ge,2),Ee=fe[0],he=fe[1],be=Object(n.useState)(!1),Ne=Object(c.a)(be,2),ve=Ne[0],ye=Ne[1],we=Object(i.h)().path,De=Object(n.useContext)(p).changeAuth,Oe=Object(i.g)(),xe=950;function Ce(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function Se(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}Object(n.useEffect)((function(){s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),De(!1)):s&&s.data&&s.field&&I(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" "+(e[s.field[1].name]?e[s.field[1].name]:""))})))}),[s,m]),Object(n.useEffect)((function(){if(f&&!1===f.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),De(!1);else if(f&&f.data&&f.field){var e=[],t=[],a=f.data[0],n=f.field[0],l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=n[6].name,u=n[7].name;H((function(e){})),a.forEach((function(t){var n={};-1===e.indexOf(t[l])&&(e.push(t[l]),n[t[l]]=a.filter((function(e){return e[l]===t[l]})),H((function(e){return Object.assign({},e,n)})))})),H((function(e){return Object(D.a)({},e,{data:f.data,dataPreview:Object(w.a)(f.data),field:f.field,dateStart:T,dateEnd:B,debtorID:k})})),le(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:l},"Debtor No."),r.a.createElement("option",{value:o},"Name"))),se(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:c},"Doc No."),r.a.createElement("option",{value:i},"Doc Date"),r.a.createElement("option",{value:s},"Type"),r.a.createElement("option",{value:m},"Method"),r.a.createElement("option",{value:d},"Transaction ID"),r.a.createElement("option",{value:u},"Amount"))),a.forEach((function(e){-1===t.indexOf(e[c])&&t.push(e[c])})),$(e.map((function(e){return e.replace(/[ ._\-()]/g,"")})).concat(t.map((function(e){return e.replace(/[ ._\-()]/g,"")}))))}}),[f,E]),Object(n.useEffect)((function(){W&&W.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[G]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(s&&s.error||m||f&&f.error||E)&&r.a.createElement("div",{className:"alert alert-warning"},s&&s.error?"Debtor List RETRIEVAL for item failed errno: "+s.error.errno+" code: "+s.error.code+" message: "+s.error.sqlMessage:null,m?"Debtor List RETRIEVAL for item failed "+m:null,r.a.createElement("br",null),r.a.createElement("br",null),f&&f.error?"Debtor Collection RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"Debtor Collection RETRIEVAL for item failed "+E:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(we,"/Preview")},G?r.a.createElement(Ct,{backPath:St.path,description:St.description,resultInput:G,withReceiptDetails:ee,data:x(G.dataPreview[0],ue,"asc"),dataDetail:x(G.dataPreview[0],Ee,"asc"),field:G.field[0],receiptData:G.dataPreview[1],receiptField:G.field[1],getFormattedDate:Ce}):r.a.createElement(i.a,{to:St.path})),r.a.createElement(i.b,{exact:!0,path:we},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,St.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ye(!1),b({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"debtor_collection",param:[T,B,k]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(B)?(alert("Invalid Date Start Entry"),P((new Date).getFullYear()+"-01-01")):P(e.target.value)},value:T},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(T)?(alert("Invalid Date End Entry"),_(Ce(new Date))):_(e.target.value)},value:B},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"debtorID"},"Debtor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,size:"3",value:k,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),R(t)}},y)),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("div",{className:"form-check offset-md-2"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"allDebtorID",onChange:function(e){e.target.checked?R(s.data.map((function(e){return e[s.field[0].name]}))):R([])}}),r.a.createElement("label",{htmlFor:"allDebtorID",style:{paddingLeft:0},className:"form-check-label"},"All Debtor ID"))),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-8"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-check col-md-12 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withReceiptDetails",onChange:function(e){e.target.checked?te(!0):te(!1)},checked:ee}),r.a.createElement("label",{htmlFor:"withReceiptDetails",className:"form-check-label"},"With Receipt Details")),r.a.createElement("div",{className:"form-group form-row col-md-6"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:ue,onChange:function(e){return pe(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),re)),r.a.createElement("div",{className:"form-group col-md-6 form-row"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-6",value:Ee,onChange:function(e){return he(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ie)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return H(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){G?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),Oe.push("./DebtorCollectionReport/Preview")):ye(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),ve?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),G?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return W.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return W.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),function(){var e=G.data[0],t=G.field[0],a=t[0].name,n=t[1].name,l=t[2].name,o=t[3].name,c=t[4].name,i=t[5].name,s=t[6].name,m=t[7].name,d=G.data[1],u=G.field[1],p=u[0].name,g=u[1].name,f=u[2].name,E=u[3].name,h=u[4].name,b=u[5].name,N=u[6].name;return r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{width:xe,transform:"rotateX(180deg)"}},r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"0 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G.data[0]=x(G.data[0],a,e.target.getAttribute("data-order")),H(Object(D.a)({},G)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("debtorNo").classList.remove("fa-caret-up"),document.getElementById("debtorNo").classList.add("fa-caret-down")):(document.getElementById("debtorNo").classList.remove("fa-caret-down"),document.getElementById("debtorNo").classList.add("fa-caret-up"))}},"Debtor No.",r.a.createElement("i",{id:"debtorNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{className:"col",style:{paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G.data[0]=x(G.data[0],n,e.target.getAttribute("data-order")),H(Object(D.a)({},G)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("name").classList.remove("fa-caret-up"),document.getElementById("name").classList.add("fa-caret-down")):(document.getElementById("name").classList.remove("fa-caret-down"),document.getElementById("name").classList.add("fa-caret-up"))}},"Name",r.a.createElement("i",{id:"name",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},"Receipt Amount")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(){var t=[],u=[];return e.forEach((function(v){-1===t.indexOf(v[a])&&(t.push(v[a]),u.push(r.a.createElement("div",{key:v[a]},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+v[a].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1",style:{flex:"0 0 14px",paddingLeft:10,paddingRight:10},id:"plusminus"+v[a].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 120px",paddingLeft:10,paddingRight:10}},v[a]),r.a.createElement("p",{className:"mb-0 col",style:{paddingLeft:10,paddingRight:10}},v[n]),r.a.createElement("p",{className:"mb-0",style:{flex:"0 0 150px",paddingLeft:10,paddingRight:10}},C(e.reduce((function(e,t){return t[a]===v[a]?e+t[m]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5",id:v[a].replace(/[ ._\-()]/g,"")},r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"0 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"1 0 70px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"1 0 130px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="receiptNo"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],l,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Receipt No.",r.a.createElement("i",{id:"receiptNo"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="date"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],o,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Date",r.a.createElement("i",{id:"date"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="type"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],c,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Type",r.a.createElement("i",{id:"type"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="method"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],i,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Method",r.a.createElement("i",{id:"method"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="transactionID"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],s,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Transaction ID",r.a.createElement("i",{id:"transactionID"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="amount"+v[a].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var n={};n[v[a]]=x(G[v[a]],m,e.target.getAttribute("data-order")),H(Object.assign({},G,n)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"Amount",r.a.createElement("i",{id:"amount"+v[a].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"}))),G[v[a]].map((function(e){return r.a.createElement("div",{key:e[l]},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+e[l].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square pt-2",style:{flex:"0 0 14px",paddingLeft:10,paddingRight:10,cursor:"pointer"},id:"plusminus"+e[l].replace(/[ ._\-()]/g,"")}),r.a.createElement("button",{className:"btn btn-dark btn-sm my-1",style:{flex:"1 0 50px",marginLeft:10,marginRight:10},onClick:function(t){return Oe.push("./"+Se(e[c].toLowerCase(),e[l]))}},"VIEW"),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 130px",paddingLeft:10,paddingRight:10}},e[l]),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},S(e[o])),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},e[c]),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},e[i]),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 150px",paddingLeft:10,paddingRight:10}},e[s]),r.a.createElement("p",{className:"py-2 mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},e[m])),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5",id:e[l].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap"},"Doc No."),r.a.createElement("th",{className:"text-nowrap"},"Type"),r.a.createElement("th",{className:"text-nowrap"},"Doc Date"),r.a.createElement("th",{className:"text-nowrap"},"Due Date"),r.a.createElement("th",{className:"text-nowrap"},"Credit Term"),r.a.createElement("th",{className:"text-nowrap"},"Doc Amount"),r.a.createElement("th",{className:"text-nowrap"},"Receipt Amount"))),r.a.createElement("tbody",null,d.map((function(t){if(t[p]===e[l])return r.a.createElement("tr",{key:t[g],style:{cursor:"pointer"},onClick:function(e){return Oe.push("./"+Se(t[f].toLowerCase(),t[g]))}},r.a.createElement("td",{className:"text-nowrap"},t[g]),r.a.createElement("td",{className:"text-nowrap"},t[f]),r.a.createElement("td",{className:"text-nowrap"},S(t[E])),r.a.createElement("td",{className:"text-nowrap"},t[h]&&"COD"!==t[h]?S(Ce(new Date(new Date(t[E]).setDate(new Date(t[E]).getDate()+Number(t[h]))))):S(t[E])),r.a.createElement("td",{className:"text-nowrap"},"COD"===t[h]?"C.O.D.":t[h]+" days"),r.a.createElement("td",{className:"text-nowrap"},C(t[b])),r.a.createElement("td",{className:"text-nowrap"},C(t[N])))}))))))}))))))})),u}())))}()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:St.path}))}St.description="Debtor Collection Report",St.path="/DebtorCollectionReport";var It=St;function Lt(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","COD","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(w.a)(o.slice(0,t)),[e],Object(w.a)(o.slice(t+1,o.length))))}return r.a.createElement(H,{inputState:o,changeInputState:i,url:t,item:"debtor",successPath:"/DebtorMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Lt.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"debtorNumber"},"Debtor Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"debtorNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"name"},"Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"address"},"Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"address",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"postcode"},"Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"postcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"phone"},"Phone ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"phone",maxLength:"15",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"fax"},"Fax"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"fax",maxLength:"15",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"creditTerm"},"Credit Term"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{id:"creditTerm",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"otherDesc"},"Other Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"otherDesc",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"}))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Lt.description="Debtor Item",Lt.path="/DebtorItem";var jt=Lt,kt=a(29),Rt=a.n(kt);function Ft(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./CreditorItem",item:"creditor",render:function(e){return r.a.createElement(L,Object.assign({description:Ft.description,listname:"Creditor"},e))}}))}Ft.description="Creditor Maintenance",Ft.path="/CreditorMaintenance";var At=Ft;function Tt(e){var t,a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=O(null),d=Object(c.a)(m,2),u=d[0],g=u.data,f=u.error,E=d[1],b=Object(n.useState)(null),N=Object(c.a)(b,2),v=N[0],y=N[1],I=Object(n.useState)(xe(new Date)),L=Object(c.a)(I,2),j=L[0],k=L[1],R=Object(n.useState)([]),F=Object(c.a)(R,2),A=F[0],T=F[1],P=Object(n.useState)(3),M=Object(c.a)(P,2),Y=M[0],B=M[1],_=Object(n.useState)(null),V=Object(c.a)(_,2),Q=V[0],G=V[1],H=Object(n.useState)([]),X=Object(c.a)(H,2),z=X[0],W=X[1],$=Object(n.useState)(!1),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)(null),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(null),oe=Object(c.a)(le,2),ce=oe[0],ie=oe[1],se=Object(n.useState)(""),me=Object(c.a)(se,2),de=me[0],ue=me[1],pe=Object(n.useState)(""),ge=Object(c.a)(pe,2),fe=ge[0],Ee=ge[1],he=Object(n.useState)(!1),be=Object(c.a)(he,2),Ne=be[0],ve=be[1],ye=Object(i.h)().path,we=Object(n.useContext)(p).changeAuth,De=Object(i.g)(),Oe=Q&&Q.agingMonths?714+90*Q.agingMonths:"auto";function xe(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function Ce(e,t,a,n){for(var l=[],o=Q.data,c=Q.field,i=c[0].name,s=c[3].name,m=c[5].name,d=c[6].name,u=function(a){var c=o.reduce((function(n,r){return r[i]===t&&je(e,r[d]&&"COD"!==r[d]?xe(new Date(new Date(r[s]).setDate(new Date(r[s]).getDate()+Number(r[d])))):r[s],r[m],a)?n+r[m]:n}),0);"table"!==n?l.push(r.a.createElement("p",{className:"mb-0",key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},c?C(c):"")):l.push(r.a.createElement("th",{className:"align-top",key:a},c?C(c):""))},p=1;p<+a+1;p++)u(p);return l}function Se(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("th",{key:a,className:"text-nowrap align-top"},a+" Month"));return t}function Ie(e,t,a,n){for(var l=[],o=1;o<+n+1;o++)l.push(r.a.createElement("td",{className:"text-nowrap align-top",key:o},C(je(e,t,a,o))));return l}function Le(e,t,a){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1,0)?a:""}function je(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))<=new Date(new Date(t).getFullYear(),new Date(t).getMonth()+1+n,0)&&e>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n,0)?a:""}function ke(e,t,a,n){return(e=new Date(new Date(e).getFullYear(),new Date(e).getMonth(),new Date(e).getDate(),0))>new Date(new Date(t).getFullYear(),new Date(t).getMonth()+n+1,0)?a:""}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),we(!1)):o&&o.data&&o.field&&y(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},e[o.field[0].name]+" "+(e[o.field[1].name]?e[o.field[1].name]:""))})))}),[o,s]),Object(n.useEffect)((function(){if(g&&!1===g.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),we(!1);else if(g&&g.data&&g.field){var e=[],t=g.data,a=g.field,n=a[0].name,l=a[1].name,o=a[2].name,c=a[3].name,i=a[4].name;G((function(e){})),t.forEach((function(a){var r={};-1===e.indexOf(a[n])&&(e.push(a[n]),r[a[n]]=t.filter((function(e){return e[n]===a[n]})),G((function(e){return Object.assign({},e,r)})))})),G((function(e){return Object(D.a)({},e,{data:g.data,dataPreview:Object(w.a)(g.data),field:g.field,currDate:j,agingMonths:Y})})),re(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:n},"Creditor No."),r.a.createElement("option",{value:l},"Name"))),ie(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:o},"Doc No."),r.a.createElement("option",{value:c},"Doc Date"),r.a.createElement("option",{value:i},"Type"))),W(e.map((function(e){return e.replace(/[ ._\-()]/g,"")})))}}),[g,f]),Object(n.useEffect)((function(){z&&z.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[Q]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]),Object(n.useEffect)((function(){function e(){J("a4 portrait")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);var Re=null;return(o&&o.error||s||g&&g.error||f)&&(Re=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Creditor List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Creditor List RETRIEVAL for item failed "+s:null,r.a.createElement("br",null),r.a.createElement("br",null),g&&g.error?"Creditor Aging RETRIEVAL for item failed errno: "+g.error.errno+" code: "+g.error.code+" message: "+g.error.sqlMessage:null,f?"Creditor Aging RETRIEVAL for item failed "+f:null)),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(ye,"/Preview")},Q?r.a.createElement(vt,{backPath:Tt.path,description:Tt.description,resultInput:Q,withDetails:K,data:x(Q.dataPreview,de,"asc"),field:Q.field,dataDetail:x(Q.dataPreview,fe,"asc"),populateTableMonthsHeader:Se,populateTableMonthsAmount:Ie,calculateAgingCurrentAmount:Le,populateMonthsAmount:Ce,calculateAgingRemainderAmount:ke,getFormattedDate:xe}):r.a.createElement(i.a,{to:Tt.path})),r.a.createElement(i.b,{exact:!0,path:ye},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,Tt.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ve(!1),E({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor_aging",param:[A,j]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"date"},"Date"),r.a.createElement("input",(t={type:"date",id:"date",required:!0,onChange:function(e){return k(e.target.value)},value:j},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-2 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"agingMonths"},"Aging Month(s)"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-md-2",required:!0,value:Y,onChange:function(e){return B(e.target.value)}},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"6"},"6"))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,size:"3",value:A,multiple:!0,onChange:function(e){var t=[];Array.from(e.target.options).map((function(e){!0===e.selected&&t.push(e.value)})),T(t)}},v)),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("div",{className:"form-check offset-md-2"},r.a.createElement("input",{type:"checkbox",className:" form-check-input",id:"allcreditorID",onChange:function(e){e.target.checked?T(o.data.map((function(e){return e[o.field[0].name]}))):T([])}}),r.a.createElement("label",{htmlFor:"allcreditorID",style:{paddingLeft:0},className:"form-check-label"},"All Creditor ID"))),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-7"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group form-row col-md-12"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-5",value:de,onChange:function(e){return ue(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ne)),r.a.createElement("div",{className:"form-check col-md-4 form-group col-form-label",style:{paddingLeft:20}},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"withDetails",onChange:function(e){e.target.checked?ee(!0):ee(!1)},checked:K}),r.a.createElement("label",{htmlFor:"withDetails",className:"form-check-label"},"With Details")),r.a.createElement("div",{className:"col-md-7 form-row form-group"},r.a.createElement("label",{className:"col-md-4 col-form-label",style:{paddingLeft:0},htmlFor:"sort"},"Detail Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-md-8",value:fe,onChange:function(e){return Ee(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ce)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return G(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){Q?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),J("a4 landscape"),De.push("./CreditorAgingReport/Preview")):ve(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),Ne?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),Re,Q?r.a.createElement("div",{className:"overflow-auto mb-5 pt-3",style:{transform:"rotateX(180deg)"}},r.a.createElement("div",{style:{width:Oe,transform:"rotateX(180deg)"}},r.a.createElement("h5",{className:"py-2"},"Result",r.a.createElement("button",{className:"btn btn-dark mx-2",onClick:function(e){return z.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return z.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),r.a.createElement("div",{className:"row flex-nowrap text-white bg-secondary pt-2 pb-1",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{style:{flex:"1 0 34px",paddingLeft:10,paddingRight:10}}),r.a.createElement("h6",{style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G(Object(D.a)({},Q,{data:x(Q.data,"CREDITOR_NUM",e.target.getAttribute("data-order"))})),"asc"===e.target.getAttribute("data-order")?(document.getElementById("creditorNo").classList.remove("fa-caret-up"),document.getElementById("creditorNo").classList.add("fa-caret-down")):(document.getElementById("creditorNo").classList.remove("fa-caret-down"),document.getElementById("creditorNo").classList.add("fa-caret-up"))}},"Creditor No.",r.a.createElement("i",{id:"creditorNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10,cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),G(Object(D.a)({},Q,{data:x(Q.data,"NAME",e.target.getAttribute("data-order"))})),"asc"===e.target.getAttribute("data-order")?(document.getElementById("name").classList.remove("fa-caret-up"),document.getElementById("name").classList.add("fa-caret-down")):(document.getElementById("name").classList.remove("fa-caret-down"),document.getElementById("name").classList.add("fa-caret-up"))}},"Name",r.a.createElement("i",{id:"name",className:"fa fa-caret-down ml-2"})),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Current"),function(e){for(var t=[],a=1;a<+e+1;a++)t.push(r.a.createElement("h6",{key:a,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},a+" Month"));return t}(Q.agingMonths),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"> "+Q.agingMonths+" Month"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Total Overdue"),r.a.createElement("h6",{style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Balance")),r.a.createElement("div",{style:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},function(e,t){var a=Q.data,n=Q.field,l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=n[6].name,u=[],p=[];return a.forEach((function(n){-1===u.indexOf(n[l])&&(u.push(n[l]),p.push(r.a.createElement("div",{key:n[l]},r.a.createElement("div",{className:"d-flex",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+n[l].replace(/[ ._\-()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1",style:{flex:"1 0 14px",paddingLeft:10,paddingRight:10},id:"plusminus"+n[l].replace(/[ ._\-()]/g,"")}),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},n[l]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 200px",paddingLeft:10,paddingRight:10}},n[o]),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(t,a){return a[l]===n[l]&&Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m])?t+a[m]:t}),0))),Ce(e,n[l],Number(t)),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(a,r){return r[l]===n[l]&&ke(e,r[d]&&"COD"!==r[d]?xe(new Date(new Date(r[i]).setDate(new Date(r[i]).getDate()+Number(r[d])))):r[i],r[m],Number(t))?a+r[m]:a}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(e,t){return t[l]===n[l]?e+t[m]:e}),0)-a.reduce((function(t,a){return a[l]===n[l]&&Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m])?t+a[m]:t}),0))),r.a.createElement("p",{className:"mb-0",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},C(a.reduce((function(e,t){return t[l]===n[l]?e+t[m]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:n[l].replace(/[ ._\-()]/g,"")},r.a.createElement("table",{id:"table",className:"table-dark table table-hover table-responsive"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],c,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("docNo"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Doc No.",r.a.createElement("i",{id:"docNo"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],i,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("docDate"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Doc Date",r.a.createElement("i",{id:"docDate"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc");var t={};t[n[l]]=x(Q[n[l]],s,e.target.getAttribute("data-order")),G(Object.assign({},Q,t)),"asc"===e.target.getAttribute("data-order")?(document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-up"),document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-down")):(document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.remove("fa-caret-down"),document.getElementById("type"+n[l].replace(/[ ._\-()]/g,"")).classList.add("fa-caret-up"))}},"Type",r.a.createElement("i",{id:"type"+n[l].replace(/[ ._\-()]/g,""),className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap"},"Due Date"),r.a.createElement("th",{className:"text-nowrap"},"Current"),Se(t),r.a.createElement("th",{className:"text-nowrap"},"> "+t+" Month"))),r.a.createElement("tbody",null,Q[n[l]].map((function(a){return r.a.createElement("tr",{key:a[c],style:{cursor:"pointer"},onClick:function(e){return De.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(a[s].toLowerCase(),a[c]))}},r.a.createElement("td",{className:"text-nowrap"},a[c]),r.a.createElement("td",{className:"text-nowrap"},S(a[i])),r.a.createElement("td",{className:"text-nowrap"},a[s]),r.a.createElement("td",{className:"text-nowrap"},a[d]&&"COD"!==a[d]?S(xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d]))))):S(a[i])),r.a.createElement("td",{className:"text-nowrap"},C(Le(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m]))),Ie(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m],Number(t)),r.a.createElement("td",{className:"text-nowrap"},C(ke(e,a[d]&&"COD"!==a[d]?xe(new Date(new Date(a[i]).setDate(new Date(a[i]).getDate()+Number(a[d])))):a[i],a[m],Number(t)))))}))))))))})),p}(Q.currDate,Q.agingMonths)))):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:Tt.path}))}Tt.description="Creditor Aging Report",Tt.path="/CreditorAgingReport";var Pt=Tt;function Mt(e){var t,a,l=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor"}),credentials:"include"}}),o=Object(c.a)(l,1)[0],s=o.data,m=o.error,d=O(null),u=Object(c.a)(d,2),g=u[0],f=g.data,E=g.error,b=u[1],N=Object(n.useState)(null),v=Object(c.a)(N,2),y=v[0],I=v[1],L=Object(n.useState)(""),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)((new Date).getFullYear()+"-01-01"),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(Ee(new Date)),Y=Object(c.a)(M,2),B=Y[0],_=Y[1],U=Object(n.useState)(null),J=Object(c.a)(U,2),V=J[0],Q=J[1],G=12,H=Object(n.useState)(6),X=Object(c.a)(H,2),z=X[0],W=X[1],$=Object(n.useState)(null),Z=Object(c.a)($,2),K=Z[0],ee=Z[1],te=Object(n.useState)(null),ae=Object(c.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)(""),oe=Object(c.a)(le,2),ce=oe[0],ie=oe[1],se=Object(n.useState)(!1),me=Object(c.a)(se,2),de=me[0],ue=me[1],pe=Object(i.h)().path,ge=Object(n.useContext)(p).changeAuth,fe=Object(i.g)();function Ee(e){var t=new Date(e);return t.getFullYear()+(t.getMonth()+1<10?"-0"+(t.getMonth()+1):"-"+(t.getMonth()+1))+(t.getDate()<10?"-0"+t.getDate():"-"+t.getDate())}function he(e,t){return new Date(e)<new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1)?e:Ee(new Date(new Date(t).getFullYear(),Number(new Date(t).getMonth())-G,1))}function be(e){var t=V.data[0][0][V.field[0][0].name],a=e?x(V.dataPreview[1],ce,"asc"):V.data[1],n=V.field[1],l=n[0].name,o=n[1].name,c=n[2].name,i=n[3].name,s=n[4].name,m=n[5].name,d=a.reduce((function(e,t){return new Date(t[l])<new Date(V.dateStart)?t[s]?e+t[s]:e-t[m]:e}),0)+t;return r.a.createElement("div",null,r.a.createElement("table",{className:"table table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],l,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("date").classList.remove("fa-caret-up"),document.getElementById("date").classList.add("fa-caret-down")):(document.getElementById("date").classList.remove("fa-caret-down"),document.getElementById("date").classList.add("fa-caret-up")))}},"Date",e?null:r.a.createElement("i",{id:"date",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],o,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("docNo").classList.remove("fa-caret-up"),document.getElementById("docNo").classList.add("fa-caret-down")):(document.getElementById("docNo").classList.remove("fa-caret-down"),document.getElementById("docNo").classList.add("fa-caret-up")))}},"Doc No.",e?null:r.a.createElement("i",{id:"docNo",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],c,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("ref").classList.remove("fa-caret-up"),document.getElementById("ref").classList.add("fa-caret-down")):(document.getElementById("ref").classList.remove("fa-caret-down"),document.getElementById("ref").classList.add("fa-caret-up")))}},"Ref.",e?null:r.a.createElement("i",{id:"ref",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],i,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("type").classList.remove("fa-caret-up"),document.getElementById("type").classList.add("fa-caret-down")):(document.getElementById("type").classList.remove("fa-caret-down"),document.getElementById("type").classList.add("fa-caret-up")))}},"Type",e?null:r.a.createElement("i",{id:"type",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],s,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("dr").classList.remove("fa-caret-up"),document.getElementById("dr").classList.add("fa-caret-down")):(document.getElementById("dr").classList.remove("fa-caret-down"),document.getElementById("dr").classList.add("fa-caret-up")))}},"Dr",e?null:r.a.createElement("i",{id:"dr",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:e?null:{cursor:"pointer"},"data-order":"asc",onClick:function(t){e||(t.target.setAttribute("data-order","asc"===t.target.getAttribute("data-order")?"desc":"asc"),V.data[1]=x(V.data[1],m,t.target.getAttribute("data-order")),Q(Object(D.a)({},V)),"asc"===t.target.getAttribute("data-order")?(document.getElementById("cr").classList.remove("fa-caret-up"),document.getElementById("cr").classList.add("fa-caret-down")):(document.getElementById("cr").classList.remove("fa-caret-down"),document.getElementById("cr").classList.add("fa-caret-up")))}},"Cr",e?null:r.a.createElement("i",{id:"cr",className:"fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap"},"Balance"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6"},"B/F"),r.a.createElement("td",null,C(d))),a.map((function(t,a){if(new Date(t[l])>=new Date(V.dateStart)&&new Date(t[l])<=new Date(V.dateEnd))return t[s]&&(d+=t[s]),t[m]&&(d-=t[m]),r.a.createElement("tr",{key:a,style:e?null:{cursor:"pointer"},onClick:function(a){e?a.preventDefault():fe.push("/"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(t[i].toLowerCase(),t[o]))}},r.a.createElement("td",{className:"text-nowrap"},S(t[l])),r.a.createElement("td",{className:"text-nowrap"},t[o]),r.a.createElement("td",{className:"text-nowrap"},t[c]),r.a.createElement("td",{className:"text-nowrap"},t[i]),r.a.createElement("td",{className:"text-nowrap"},C(t[s])),r.a.createElement("td",{className:"text-nowrap"},C(t[m])),r.a.createElement("td",{className:"text-nowrap"},C(d)))})))),e?r.a.createElement("p",{className:"h5 text-right jumbotron py-2"},r.a.createElement("span",null,"Account Balance: "),r.a.createElement("span",null,C(d))):null)}Object(n.useEffect)((function(){s&&!1===s.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),ge(!1)):s&&s.data&&s.field&&I(s.data.map((function(e){return r.a.createElement("option",{key:e[s.field[0].name],value:e[s.field[0].name]},e[s.field[0].name]+" "+(e[s.field[1].name]?e[s.field[1].name]:""))})))}),[s,m]),Object(n.useEffect)((function(){if(f&&!1===f.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),ge(!1);else if(f&&f.data&&f.field){var e=f.field[1],t=e[0].name,a=e[1].name,n=e[2].name,l=e[3].name,o=e[4].name,c=e[5].name;Q({data:f.data,dataPreview:Object(w.a)(f.data),field:f.field,dateStart:T,dateEnd:B,creditorID:k}),re(r.a.createElement(r.a.Fragment,null,r.a.createElement("option",{value:t},"Date"),r.a.createElement("option",{value:a},"Doc No."),r.a.createElement("option",{value:n},"Ref."),r.a.createElement("option",{value:l},"Type"),r.a.createElement("option",{value:o},"Dr"),r.a.createElement("option",{value:c},"Cr")))}}),[f,E]),Object(n.useEffect)((function(){function e(){document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0")}return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}}),[]);return(s&&s.error||m||f&&f.error||E)&&r.a.createElement("div",{className:"alert alert-warning"},s&&s.error?"Creditor List RETRIEVAL for item failed errno: "+s.error.errno+" code: "+s.error.code+" message: "+s.error.sqlMessage:null,m?"Creditor List RETRIEVAL for item failed "+m:null,r.a.createElement("br",null),r.a.createElement("br",null),f&&f.error?"Creditor Statement RETRIEVAL for item failed errno: "+f.error.errno+" code: "+f.error.code+" message: "+f.error.sqlMessage:null,E?"Creditor Statement RETRIEVAL for item failed "+E:null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"".concat(pe,"/Preview")},V?r.a.createElement(Dt,{backPath:Mt.path,description:"Creditor Statement",topLeftInput:Object(w.a)(K.slice(0,2)),topRightField:["Statement Date","Credit Term"],topRightInput:[S(V.dateStart)+" to "+S(V.dateEnd),"COD"===K[2]?"C.O.D.":K[2]+" days"],populateDebtorCreditor:be,data:V.dataPreview[1],field:V.field[1],dateEnd:V.dateEnd,agingMonths:z,dateStartForAging:he(V.dateStart,V.dateEnd),dbBroughtForwardAmount:V.dataPreview[0][0][V.field[0][0].name]}):r.a.createElement(i.a,{to:Mt.path})),r.a.createElement(i.b,{exact:!0,path:pe},r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3",style:{paddingLeft:20,paddingRight:20}},r.a.createElement("h3",null,Mt.description),r.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),ue(!1),b({url:"./ReportItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"creditor_statement",param:[he(T,B),B,k]}),credentials:"include"}})}},r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateStart"},"Date Start"),r.a.createElement("input",(t={type:"date",id:"dateStart",required:!0,onChange:function(e){new Date(e.target.value)>new Date(B)?(alert("Invalid Date Start Entry"),P((new Date).getFullYear()+"-01-01")):P(e.target.value)},value:T},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control col-md-3 mb-3 mb-md-0"),t)),r.a.createElement("label",{className:"offset-md-1 col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"dateEnd"},"Date End"),r.a.createElement("input",(a={type:"date",id:"dateEnd",required:!0,onChange:function(e){new Date(e.target.value)<new Date(T)?(alert("Invalid Date End Entry"),_(Ee(new Date))):_(e.target.value)},value:B},Object(q.a)(a,"required",!0),Object(q.a)(a,"className","form-control col-md-3 mb-3 mb-md-0"),a))),r.a.createElement("div",{className:"form-group form-row mx-0"},r.a.createElement("label",{className:"col-md-2 col-form-label",style:{paddingLeft:0},htmlFor:"creditorID"},"Creditor ID"),r.a.createElement("select",{className:"form-control col-md-4",required:!0,value:k,onChange:function(e){var t="",a="",n="";s.data.forEach((function(r){r[s.field[0].name]===e.target.value&&(t=r[s.field[1].name]?r[s.field[1].name]:"",a=r[s.field[2].name]?r[s.field[2].name]:"",n=r[s.field[7].name]?r[s.field[7].name]:"")})),R(e.target.value),ee([t,a,n])}},r.a.createElement("option",{value:""}," -select an option- "),y)),r.a.createElement("fieldset",{className:"form-group pl-4 pb-3 border border-secondary rounded col-md-7 mx-0"},r.a.createElement("legend",{className:"col-form-label col-md-6 offset-md-3 col-8 offset-2 text-center"},r.a.createElement("h6",null,"Preview Options")),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-6 form-row"},r.a.createElement("label",{className:"col-6 col-md-6 col-form-label",htmlFor:"agingMonths"},"Aging Months"),r.a.createElement("select",{id:"agingMonths",className:"form-control col-3 col-md-3",required:!0,value:z,onChange:function(e){return W(e.target.value)}},r.a.createElement("option",{value:"6"},"6"),r.a.createElement("option",{value:"9"},"9"),r.a.createElement("option",{value:"12"},"12"))),r.a.createElement("div",{className:"form-group col-md-6 form-row "},r.a.createElement("label",{className:"col-3 col-md-3 col-form-label",htmlFor:"sort"},"Sort"),r.a.createElement("select",{id:"sort",className:"form-control col-8 col-md-8",value:ce,onChange:function(e){return ie(e.target.value)}},r.a.createElement("option",{value:""}," -select an option- "),ne)))),r.a.createElement("button",{type:"submit",className:"btn btn-primary mx-2"},"Generate"),r.a.createElement("button",{type:"button",className:"btn btn-warning",onClick:function(e){return Q(null)}},"Clear"),r.a.createElement("button",{type:"button",onClick:function(e){V?(document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=0.4"),fe.push("./CreditorStatementReport/Preview")):ue(!0)},className:"btn btn-info mx-1 my-1"},"Preview"),de?r.a.createElement("div",{className:"alert alert-warning"},"Please generate report first!"):null),r.a.createElement("hr",null),V?r.a.createElement("div",{className:"mb-5"},r.a.createElement("h5",{className:"py-2"},"Result"),be()):null,r.a.createElement("hr",{className:"pb-3"})))),r.a.createElement(i.a,{to:Mt.path}))}Mt.description="Creditor Statement Report",Mt.path="/CreditorStatementReport";var Yt=Mt;function Bt(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=Object(n.useState)(["","","","","","","","COD","",""]),l=Object(c.a)(a,2),o=l[0],i=l[1];function s(e,t){i([].concat(Object(w.a)(o.slice(0,t)),[e],Object(w.a)(o.slice(t+1,o.length))))}return r.a.createElement(H,{inputState:o,changeInputState:i,url:t,item:"creditor",successPath:"/CreditorMaintenance"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+Bt.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"creditorNumber"},"Creditor Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:s,layout:"col-md-4",position:0,labelID:"creditorNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"name"},"Name ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return s(e.target.value,1)},value:o[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"address"},"Address ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"address",onChange:function(e){return s(e.target.value,2)},value:o[2],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"postcode"},"Postcode ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",maxLength:"5",id:"postcode",onChange:function(e){return s(e.target.value,3)},value:o[3],disabled:a,required:!0,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"phone"},"Phone ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"phone",maxLength:"15",onChange:function(e){return s(e.target.value,4)},value:o[4],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"fax"},"Fax"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"text",id:"fax",maxLength:"15",onChange:function(e){return s(e.target.value,5)},value:o[5],disabled:a,className:"form-control"})),r.a.createElement("label",{className:"col-md-2 col-form-label text-md-center",htmlFor:"creditTerm"},"Credit Term"),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("select",{id:"creditTerm",onChange:function(e){return s(e.target.value,7)},value:o[7],disabled:a,className:"form-control"},r.a.createElement("option",{value:"COD"},"C.O.D."),r.a.createElement("option",{value:"30"},"30 Days"),r.a.createElement("option",{value:"45"},"45 Days"),r.a.createElement("option",{value:"60"},"60 Days"),r.a.createElement("option",{value:"90"},"90 Days")))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"otherDesc"},"Other Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"otherDesc",onChange:function(e){return s(e.target.value,6)},value:o[6],disabled:a,className:"form-control"}))),r.a.createElement(X,{usage:t,onInsert:l,onUpdate:c,onDelete:i,changeDisabled:n}))))}))}Bt.description="Creditor Item",Bt.path="/CreditorItem";var qt=Bt,_t=a(30),Ut=a.n(_t);function Jt(e){var t,a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}),l=Object(c.a)(a,2),o=l[0],i=o.data,s=o.error,m=l[1],d=Object(n.useState)(null),u=Object(c.a)(d,2),g=u[0],f=u[1],E=Object(n.useState)(null),b=Object(c.a)(E,2),N=b[0],v=b[1],y=Object(n.useState)(null),D=Object(c.a)(y,2),x=D[0],C=D[1],S=Object(n.useState)(["","",""]),I=Object(c.a)(S,2),L=I[0],j=I[1],k=Object(n.useState)(["","","",""]),R=Object(c.a)(k,2),F=R[0],A=R[1],T=Object(n.useState)(null),P=Object(c.a)(T,2),M=P[0],Y=P[1],B=Object(n.useState)([]),_=Object(c.a)(B,2),J=_[0],V=_[1],Q=O(null),G=Object(c.a)(Q,2),H=G[0],X=H.data,z=H.error,W=G[1],$=O(null),Z=Object(c.a)($,2),K=Z[0],ee=K.data,te=K.error,ae=Z[1],ne=O(null),re=Object(c.a)(ne,2),le=re[0],oe=le.data,ce=le.error,ie=re[1],se=Object(n.useContext)(p).changeAuth;function me(e,t){j([].concat(Object(w.a)(L.slice(0,t)),[e],Object(w.a)(L.slice(t+1))))}function de(e,t){A([].concat(Object(w.a)(F.slice(0,t)),[e],Object(w.a)(F.slice(t+1))))}Object(n.useEffect)((function(){i&&!1===i.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),se(!1)):i&&i.data&&i.field&&Y(function(e,t){var a=t[0].name,n=t[1].name,l=t[2].name,o=t[3].name,c=[],i=[];return e.forEach((function(t){-1===c.indexOf(t[a])&&(c.push(t[a]),i.push(r.a.createElement("div",{key:t[a]},r.a.createElement("div",{className:"row py-1 bg-dark text-white",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+t[a].replace(/[ ._()]/g,"")},r.a.createElement("p",{className:"col-1"},r.a.createElement("i",{id:"plusminus"+t[a].replace(/[ ._()]/g,""),className:"fa fa-plus-square mt-1 text-white"})),r.a.createElement("p",{className:"col"},t[a])),r.a.createElement("div",{className:"collapse navbar-collapse bg-secondary",style:{marginLeft:"-15px",marginRight:"-15px"},id:t[a].replace(/[ ._()]/g,"")},e.map((function(e,c){if(e[a]===t[a])return r.a.createElement("div",{className:"row py-1 border-bottom border-white text-white",style:{margin:0},key:e[n]},r.a.createElement("div",{className:"offset-1 col-5 col-lg-7"},e[l]),r.a.createElement("p",{className:"col-3 col-lg-2"},e[n]),"NORMAL"===e[o]?r.a.createElement("div",{className:"col-3 col-lg-2"},r.a.createElement("button",{className:"btn btn-info",onClick:function(t){ae({url:"./DeleteItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",id:e[n]}),credentials:"include"}})}},"Del")):null)}))))))})),f(c.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),v(e.map((function(e){if("NORMAL"===e[o])return r.a.createElement("option",{key:e[n]?e[n]:Math.random(),value:e[n]},e[n]+" | "+e[l])}))),V(c.map((function(e){return e.replace(/[ ._()]/g,"")}))),C(e.map((function(e){return e[n]+""}))),i}(i.data[0],i.field[0]))}),[i,s]),Object(n.useEffect)((function(){X&&!1===X.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),se(!1)):X&&!X.error&&(alert("Insert Successful!"),j(["","",""]),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[X,z]),Object(n.useEffect)((function(){oe&&!1===oe.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),se(!1)):oe&&!oe.error&&(alert("Update Successful!"),A(["","","",""]),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[oe,ce]),Object(n.useEffect)((function(){ee&&!1===ee.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),se(!1)):ee&&!ee.error&&(alert("Delete Successful!"),m({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account"}),credentials:"include"}}))}),[ee,te]),Object(n.useEffect)((function(){J&&M&&J.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[M]);var ue=null;return(i&&i.error||s||X&&X.error||z||oe&&oe.error||ce||ee&&ee.error||te)&&(ue=r.a.createElement("div",{className:"alert alert-warning"},i&&i.error?"Account List RETRIEVAL for item failed errno: "+i.error.errno+" code: "+i.error.code+" message: "+i.error.sqlMessage:null,s?"Account List RETRIEVAL for item failed "+s:null,X&&X.error?"Data INSERT for item failed errno: "+X.error.errno+" code: "+X.error.code+" message: "+X.error.sqlMessage:null,z?"Data INSERT for item failed "+z:null,oe&&oe.error?"Data UPDATE for item failed errno: "+oe.error.errno+" code: "+oe.error.code+" message: "+oe.error.sqlMessage:null,ce?"Data UPDATE for item failed "+ce:null,ee&&ee.error?"Data DELETE for item failed errno: "+ee.error.errno+" code: "+ee.error.code+" message: "+ee.error.sqlMessage:null,te?"Data DELETE for item failed "+te:null)),r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Account Maintenance"),ue,r.a.createElement("section",{className:"container px-0"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col-md-6",onSubmit:function(e){e.preventDefault(),-1!==x.indexOf(L[1])&&alert("Account Code Already Exist! Please amend"),W({url:"./InsertItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",param:L}),credentials:"include"}})}},r.a.createElement("fieldset",{className:"px-3 form-group border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Create Account")),r.a.createElement("label",{className:"mt-3",htmlFor:"createGLCategory"},"GL Category"),r.a.createElement("select",{id:"createGLCategory",required:!0,className:"form-control",onChange:function(e){me(e.target.value,0)}},r.a.createElement("option",{value:""}," -select an option- "),g),r.a.createElement("label",{htmlFor:"accountCode",className:"mt-3"},"Account Code"),r.a.createElement("input",{id:"accountCode",type:"number",required:!0,min:"100",max:"999",className:"form-control",value:L[1],onChange:function(e){return me(e.target.value,1)}}),r.a.createElement("label",{htmlFor:"createDescription",className:"mt-3"},"Description"),r.a.createElement("input",(t={id:"createDescription",type:"text",required:!0,maxLength:"45"},Object(q.a)(t,"required",!0),Object(q.a)(t,"className","form-control"),Object(q.a)(t,"value",L[2]),Object(q.a)(t,"onChange",(function(e){return me(e.target.value,2)})),t)),r.a.createElement("button",{type:"submit",className:"btn btn-success text-white mt-3"},"Create"))),r.a.createElement("form",{className:"col-md-6",onSubmit:function(e){e.preventDefault(),-1!==x.indexOf(F[2])&&F[2]!==F[0]&&alert("Account Code Already Exist! Please amend"),ie({url:"./UpdateItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"account",param:F}),credentials:"include"}})}},r.a.createElement("fieldset",{className:"px-3 form-group border border-secondary pb-4 rounded"},r.a.createElement("legend",{className:"col-form-label col-4 offset-4 text-center"},r.a.createElement("h6",null,"Update Account")),r.a.createElement("label",{className:"mt-3",htmlFor:"existingGLCode"},"Existing GL Code"),r.a.createElement("select",{id:"existingGLCode",required:!0,className:"form-control",value:F[0],onChange:function(e){var t="",a="";i.data[0].forEach((function(n){n[i.field[0][1].name]+""===e.target.value&&(t=n[i.field[0][0].name]?n[i.field[0][0].name]:"",a=n[i.field[0][2].name]?n[i.field[0][2].name]:"")})),A([e.target.value,t,e.target.value,a])}},r.a.createElement("option",{value:""}," -select an option- "),N),r.a.createElement("label",{className:"mt-3",htmlFor:"updateGLCategory"},"GL Category"),r.a.createElement("select",{id:"updateGLCategory",required:!0,className:"form-control",value:F[1],onChange:function(e){de(e.target.value,1)}},r.a.createElement("option",{value:""}," -select an option- "),g),r.a.createElement("label",{htmlFor:"newAccountCode",className:"mt-3"},"New Account Code"),r.a.createElement("input",{id:"newAccountCode",type:"number",required:!0,min:"100",max:"999",className:"form-control",value:F[2],onChange:function(e){de(e.target.value,2)}}),r.a.createElement("label",{htmlFor:"updateDescription",className:"mt-3"},"Description"),r.a.createElement("input",{id:"updateDescription",type:"text",required:!0,maxLength:"45",className:"form-control",value:F[3],onChange:function(e){de(e.target.value,3)}}),r.a.createElement("button",{type:"submit",className:"btn btn-warning text-white mt-3"},"Update"))))),r.a.createElement("section",{className:"container my-5"},r.a.createElement("div",{className:"row text-white bg-info rounded-top py-2"},r.a.createElement("button",{className:"col-1 btn btn-info",onClick:function(e){return J.forEach((function(e){return U()("#"+e).collapse("hide")}))}},r.a.createElement("i",{className:"fa fa-minus-square text-white"})),r.a.createElement("h6",{className:"col-5 col-lg-7 pt-2"},"Description"),r.a.createElement("h6",{className:"col-3 col-lg-2 pt-2"},"Account Code"),r.a.createElement("h6",{className:"col-3 col-lg-2 pt-2"},"Delete?")),M)))}Jt.description="Account Maintenance",Jt.path="/AccountMaintenance";var Vt=Jt;function Qt(e){return r.a.createElement(h,null,r.a.createElement(I,{createItemPath:"./JournalItem",item:"journal",render:function(e){return r.a.createElement(L,Object.assign({description:Qt.description,listname:"Journal"},e))}}))}Qt.description="Journal Entry",Qt.path="/JournalEntry";var Gt=Qt;function Ht(e){var t=Object(n.useState)(function(){var e=new Date;return e.getFullYear()+(e.getMonth()+1<10?"-0"+(e.getMonth()+1):"-"+(e.getMonth()+1))+(e.getDate()<10?"-0"+e.getDate():"-"+e.getDate())}()),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),d=m[0],u=m[1],p=Object(i.g)();return r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Profit And Loss Statement"),r.a.createElement("small",{className:"text-warning"},"* required"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.push("./ProfitAndLossItem?date="+l+"&companyTitle="+d)}},r.a.createElement("div",{className:"form-group form-row mt-5"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return o(e.target.value)},value:l,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"companyTitle"},"Company Title"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"companyTitle",onChange:function(e){return u(e.target.value)},value:d,className:"form-control"}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Preview"))))}Ht.description="Profit And Loss",Ht.path="/ProfitAndLoss";var Xt=Ht;function zt(e){var t=Object(n.useState)(function(){var e=new Date;return e.getFullYear()+(e.getMonth()+1<10?"-0"+(e.getMonth()+1):"-"+(e.getMonth()+1))+(e.getDate()<10?"-0"+e.getDate():"-"+e.getDate())}()),a=Object(c.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(""),m=Object(c.a)(s,2),d=m[0],u=m[1],p=Object(i.g)();return r.a.createElement(h,null,r.a.createElement("div",{className:"container pt-3"},r.a.createElement("h3",null,"Balance Sheet Statement"),r.a.createElement("small",{className:"text-warning"},"* required"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p.push("./BalanceSheetItem?date="+l+"&companyTitle="+d)}},r.a.createElement("div",{className:"form-group form-row mt-5"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"date"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return o(e.target.value)},value:l,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"companyTitle"},"Company Title"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",id:"companyTitle",onChange:function(e){return u(e.target.value)},value:d,className:"form-control"}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Preview"))))}zt.description="Balance Sheet",zt.path="/BalanceSheet";var Wt=zt;function $t(e){var t={item:new URLSearchParams(e.location.search).get("item"),id:new URLSearchParams(e.location.search).get("id")},a=O({url:"./getEligibleGLAccount",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"journal"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,i=l.error,s=4,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],g=d[1],f=Object(n.useState)(["","","","",[]]),E=Object(c.a)(f,2),b=E[0],N=E[1],v=Object(n.useState)(!1),y=Object(c.a)(v,2),D=y[0],x=y[1],S=Object(n.useContext)(p).changeAuth;function I(e,t){N([].concat(Object(w.a)(b.slice(0,t)),[e],Object(w.a)(b.slice(t+1))))}function L(e,t,a,n){N(b.slice(0,t).concat([b[t].slice(0,a).concat([b[t][a].slice(0,n).concat(e).concat(b[t][a].slice(n+1))]).concat(b[t].slice(a+1))]).concat(b.slice(t+1)))}function j(){var e=0;return b[s].forEach((function(t,a){b[s][a][4]&&(e+=parseFloat(b[s][a][4]))})),e}function k(){var e=0;return b[s].forEach((function(t,a){b[s][a][5]&&(e+=parseFloat(b[s][a][5]))})),e}Object(n.useEffect)((function(){o&&!1===o.auth?(alert("Cookies Expired or Authorisation invalid. Please Login again!"),S(!1)):o&&o.data&&o.field&&g(o.data.map((function(e){return r.a.createElement("option",{key:e[o.field[0].name],value:e[o.field[0].name]},(e[o.field[0].name]?e[o.field[0].name]:"")+" | "+(e[o.field[1].name]?e[o.field[1].name]:""))})))}),[o,i]);var R=null;return(o&&o.error||i)&&(R=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"GL Code List RETRIEVAL for item failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,i?"GL Code List RETRIEVAL for item failed "+i:null)),r.a.createElement(H,{inputState:b,changeInputState:N,url:t,item:"journal",successPath:"/JournalEntry"},(function(e){var t=e.usage,a=e.disabled,n=e.changeDisabled,l=e.onInsert,c=e.onUpdate,i=e.onDelete,m=e.errorDisplay,d=e.inputNumberRender;return r.a.createElement(h,null,r.a.createElement("div",{className:"container pb-5 px-md-5"},r.a.createElement("h3",{className:"my-3"},("INSERT"===t?"Create":"Update")+" "+$t.description),r.a.createElement("small",{className:"text-warning"},"* required"),m,R,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),"INSERT"===t?l():c()}},r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"journalNumber"},"Journal Number ",r.a.createElement("span",{className:"text-warning"},"*")),d({onChange:I,layout:"col-md-4",position:0,labelID:"journalNumber"})),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"data"},"Date ",r.a.createElement("span",{className:"text-warning"},"*")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("input",{type:"date",id:"date",onChange:function(e){return I(e.target.value,1)},value:b[1],disabled:a,required:!0,className:"form-control"}))),r.a.createElement("div",{className:"form-group form-row"},r.a.createElement("label",{className:"col-md-2 col-form-label",htmlFor:"description"},"Description"),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("textarea",{id:"description",onChange:function(e){return I(e.target.value,2)},value:b[2],disabled:a,className:"form-control"}))),r.a.createElement("fieldset",{className:"form-group border border-secondary pb-4 rounded px-3"},r.a.createElement("legend",{className:"col-form-label col-8 offset-2 col-md-4 offset-md-4 text-center"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:a,onClick:function(){return N(b.slice(0,s).concat([b[s].slice(0).concat([[b[s].length+1,"","","","0","0"]])]).concat(b.slice(s+1)))}},"+"),r.a.createElement("h6",{className:"d-inline-block mx-2 mx-md-4"},"Journal Line"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",disabled:a,onClick:function(){return N(b.slice(0,s).concat([b[s].slice(0,b[s].length-1)]).concat(b.slice(s+1)))}},"-")),r.a.createElement("div",{className:"overflow-auto"},r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0}},r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Line Number"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"GL Code"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 120px",paddingLeft:10,paddingRight:10}},"GL Desc"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 225px",paddingLeft:10,paddingRight:10}},"Other Description"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Debit"),r.a.createElement("h6",{className:"col",style:{flex:"1 0 90px",paddingLeft:10,paddingRight:10}},"Credit")),function(e){return b[s].map((function(t,a){return r.a.createElement("div",{className:"row flex-nowrap",style:{marginLeft:0,marginRight:0},key:a},r.a.createElement("label",{htmlFor:"lineNumber",className:"sr-only"}),r.a.createElement("input",{type:"number",id:"lineNumber",className:"col form-control rounded-0 text-center",value:b[s][a][0]?b[s][a][0]:"",onChange:function(e){return e},style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0},disabled:e}),r.a.createElement("div",{className:"col input-group",style:{flex:"1 0 120px",paddingLeft:0,paddingRight:0}},r.a.createElement("label",{htmlFor:"glCode",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"glCode",required:!0,className:"form-control rounded-0",disabled:e,style:{paddingLeft:10},value:b[s][a][1]?b[s][a][1]:"",onChange:function(e){return e}}),r.a.createElement("select",{className:"form-control rounded-0",style:{flex:"0 1 0"},disabled:e,onChange:function(e){var t="";o.data.forEach((function(a){a[o.field[0].name]==e.target.value&&(t=a[o.field[1].name]?a[o.field[1].name]:"")})),N(b.slice(0,s).concat([b[s].slice(0,a).concat([b[s][a].slice(0,1).concat(e.target.value).concat(t).concat(b[s][a].slice(3))]).concat(b[s].slice(a+1))]).concat(b.slice(s+1)))}},r.a.createElement("option",{value:""},"-select an option- "),u)),r.a.createElement("label",{htmlFor:"glDescription",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"glDescription",required:!0,className:"col form-control rounded-0",value:b[s][a][2]?b[s][a][2]:"",onChange:function(e){return e},disabled:e,style:{flex:"1 0 120px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"otherDescription",className:"sr-only"}),r.a.createElement("input",{type:"text",id:"otherDescription",className:"col form-control rounded-0",value:b[s][a][3]?b[s][a][3]:"",onChange:function(e){return L(e.target.value,s,a,3)},disabled:e,style:{flex:"1 0 225px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"debit",className:"sr-only"}),r.a.createElement("input",{type:"number",min:"0",step:".01",id:"debit",className:"col form-control rounded-0 text-center",value:b[s][a][4]?b[s][a][4]:"",onChange:function(e){return L(e.target.value,s,a,4)},disabled:e,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}),r.a.createElement("label",{htmlFor:"credit",className:"sr-only"}),r.a.createElement("input",{type:"number",min:"0",step:".01",id:"credit",className:"col form-control rounded-0 text-center",value:b[s][a][5]?b[s][a][5]:"",onChange:function(e){return L(e.target.value,s,a,5)},disabled:e,style:{flex:"1 0 90px",paddingLeft:10,paddingRight:0}}))}))}(a)),D?r.a.createElement("div",{className:"alert alert-danger mt-3"},"Journal Debit and Credit Entries not balanced!"):null,r.a.createElement("h5",{className:"text-right my-3"},"Total Debit: "+C(j())),r.a.createElement("h5",{className:"text-right my-3"},"Total Crebit: "+C(k()))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){j()!==k()&&(e.preventDefault(),x(!0))},className:"btn btn-primary mx-1 my-1"},"Submit"),"UPDATE/DELETE"===t?r.a.createElement("button",{type:"button",onClick:function(e){n(!1)},className:"btn btn-outline-primary mx-1 my-1"},"Edit"):null,"UPDATE/DELETE"===t?r.a.createElement("button",{type:"button",onClick:function(e){i()},className:"btn btn-danger mx-1 my-1"},"Delete"):null))))}))}$t.description="Journal",$t.path="/JournalItem";var Zt=$t;function Kt(e){var t={date:new URLSearchParams(e.location.search).get("date"),companyTitle:new URLSearchParams(e.location.search).get("companyTitle")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"profit_and_loss"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],g=d[1],f=Object(n.useState)(null),E=Object(c.a)(f,2),b=E[0],N=E[1],v=Object(n.useState)(0),y=Object(c.a)(v,2),w=y[0],I=y[1],L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(0),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(0),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)([]),J=Object(c.a)(_,2),V=J[0],Q=J[1],G=Object(n.useState)(!1),H=Object(c.a)(G,2),X=H[0],z=H[1],W=Object(n.useContext)(p).changeAuth,$=Object(i.g)();function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=n[0].name,l=n[3].name,o=n[6].name,c=n[7].name;return a.reduce((function(a,n){return new Date(n[l])<=new Date(t.date)&&new Date(n[l])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&-1!==e.indexOf(n[r])?a+n[c]-n[o]:a}),0)}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return e.map((function(e){var o=function(e,a,n,l){var o=l[0].name,c=l[1].name,i=l[2].name,s=l[3].name,m=l[4].name,d=l[5].name,p=l[6].name,f=l[7].name,E=[],h=[];return a.forEach((function(l){l[o]===e&&-1===E.indexOf(l[c])&&new Date(l[s])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(l[s])<=new Date(t.date)&&(E.push(l[c]),h.push(r.a.createElement("div",{key:l[c]},r.a.createElement("div",{className:"row",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+l[i].replace(/[ ._()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1 col-1 d-print-none",id:"plusminus"+l[i].replace(/[ ._()]/g,"")}),r.a.createElement("p",{className:"col-2 mb-0"},l[c]),r.a.createElement("p",{className:"col-6 mb-0"},l[i]),r.a.createElement("i",{className:"col-1 d-none d-print-block"}),r.a.createElement("p",{className:"col-3 text-right mb-0"},C(a.reduce((function(e,a){return a[c]===l[c]&&new Date(a[s])<=new Date(t.date)&&new Date(a[s])>=new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[f]-a[p]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:l[i].replace(/[ ._()]/g,"")},r.a.createElement("div",{style:X?null:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},r.a.createElement("table",{id:"table",className:X?"table table-hover":"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="date"+l[i].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[i]]=x(u[l[i]],s,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DATE",r.a.createElement("i",{id:"date"+l[i].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="type"+l[i].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[i]]=x(u[l[i]],m,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM TYPE",r.a.createElement("i",{id:"type"+l[i].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="number"+l[i].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[i]]=x(u[l[i]],d,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM NUMBER",r.a.createElement("i",{id:"number"+l[i].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="debit"+l[i].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[i]]=x(u[l[i]],p,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DR",r.a.createElement("i",{id:"debit"+l[i].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="credit"+l[i].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[i]]=x(u[l[i]],f,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"CR",r.a.createElement("i",{id:"credit"+l[i].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})))),r.a.createElement("tbody",null,n[l[i]].map((function(e,a){return e[c]===l[c]&&new Date(e[s])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(e[s])<=new Date(t.date)?r.a.createElement("tr",{key:a,style:{cursor:"pointer"},onClick:function(t){return $.push("./"+function(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}(e[m].toLowerCase(),e[d]))}},r.a.createElement("td",{className:"text-nowrap"},S(e[s])),r.a.createElement("td",{className:"text-nowrap"},e[m]),r.a.createElement("td",{className:"text-nowrap"},e[d]),r.a.createElement("td",{className:"text-nowrap"},C(e[p])),r.a.createElement("td",{className:"text-nowrap"},C(e[f]))):null})))))))))})),h}(e,a,n,l);if(o.length>0)return r.a.createElement("section",{key:e},r.a.createElement("h6",null,r.a.createElement("u",null,e)),o,r.a.createElement("p",{className:"h6 text-right "},r.a.createElement("u",null,"TOTAL : "+C(Z([e],a,l)))))}))}Object(n.useEffect)((function(){if(o&&!1===o.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),W(!1);else if(o&&o.data&&o.field){var e=[],t=o.data[1],a=o.field[1][2].name,n=[];t.forEach((function(n){var r={};-1===e.indexOf(n[a])&&(e.push(n[a]),r[n[a]]=t.filter((function(e){return e[a]===n[a]})),g((function(e){return Object.assign({},Object(D.a)({},e),r)})))})),t.forEach((function(e){-1===n.indexOf(e[a].replace(/[ ._()]/g,""))&&n.push(e[a].replace(/[ ._()]/g,""))})),Q(n)}}),[o,s]),Object(n.useEffect)((function(){if(u){var e=o.data[0].map((function(e){return e[o.field[0][0].name]}));N(K(e.slice(0,4),o.data[1],u,o.field[1])),I(C(Z(e.slice(0,4),o.data[1],o.field[1]))),R(K(e.slice(4),o.data[1],u,o.field[1])),P(C(Z(e.slice(4),o.data[1],o.field[1]))),q(C(Z(e,o.data[1],o.field[1])))}}),[u,X]),Object(n.useEffect)((function(){V&&b&&k&&V.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[b,k]);var ee=null;return(o&&o.error||s)&&(ee=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Profit and Loss Data RETRIEVAL failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Profit and Loss Data RETRIEVAL failed "+s:null)),r.a.createElement(h,null,r.a.createElement("div",{className:"container py-3 py-md-5 px-md-5 position-relative"},r.a.createElement("h4",{className:"text-center"},t.companyTitle),r.a.createElement("h4",{className:"text-center mb-4"},"Profit And Loss as at "+S(t.date)),ee,r.a.createElement("div",{className:"text-right d-print-none mb-4"},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"printFormat",checked:X,onChange:function(e){e.target.checked?z(!0):z(!1)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"printFormat"}," Print Format")),r.a.createElement("button",{className:"btn btn-dark mr-1 mr-md-2",onClick:function(e){return V.forEach((function(e){return U()("#"+e).collapse("show")}))}}," ",r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return V.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),b,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.3)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"GROSS PROFIT TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},w)),k,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.3)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"EXPENSES TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},T)),r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET PROFIT"),r.a.createElement("p",{className:"col text-right my-2 h6"},B))))}Kt.description="Profit And Loss",Kt.path="/ProfitAndLossItem";var ea=Kt;function ta(e){var t={date:new URLSearchParams(e.location.search).get("date"),companyTitle:new URLSearchParams(e.location.search).get("companyTitle")},a=O({url:"./SelectItem",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({item:"balance_sheet"}),credentials:"include"}}),l=Object(c.a)(a,1)[0],o=l.data,s=l.error,m=Object(n.useState)(null),d=Object(c.a)(m,2),u=d[0],g=d[1],f=Object(n.useState)(null),E=Object(c.a)(f,2),b=E[0],N=E[1],v=Object(n.useState)(0),y=Object(c.a)(v,2),w=y[0],I=y[1],L=Object(n.useState)(null),j=Object(c.a)(L,2),k=j[0],R=j[1],F=Object(n.useState)(0),A=Object(c.a)(F,2),T=A[0],P=A[1],M=Object(n.useState)(0),Y=Object(c.a)(M,2),B=Y[0],q=Y[1],_=Object(n.useState)(0),J=Object(c.a)(_,2),V=J[0],Q=J[1],G=Object(n.useState)([]),H=Object(c.a)(G,2),X=H[0],z=H[1],W=Object(n.useState)(!1),$=Object(c.a)(W,2),Z=$[0],K=$[1],ee=Object(n.useContext)(p).changeAuth,te=Object(i.g)();function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,l=n[0].name,o=n[4].name,c=n[7].name,i=n[8].name;return a.reduce((function(a,n){return new Date(n[o])<=new Date(t.date)&&-1!==e.indexOf(n[l])?r?a+n[i]-n[c]:a+n[c]-n[i]:a}),0)}function ne(e,t){var a=e.split(" ");return(a=(a=a.map((function(e){return e.toLowerCase()}))).map((function(e){return e[0].toUpperCase().concat(e.substr(1))}))).join("")+"Item?item="+e.replace(/ /g,"_")+"&id="+encodeURIComponent(t)}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return e.map((function(e){var c=function(e,a,n,l,o){var c=l[0].name,i=l[1].name,s=l[2].name,m=l[3].name,d=l[4].name,p=l[5].name,f=l[6].name,E=l[7].name,h=l[8].name,b=[],N=[];function v(e){return a.reduce((function(a,n){return e[m]&&n[m]===e[m]&&new Date(n[d])<new Date(new Date(t.date).getFullYear()+"-01-01")?a+n[E]-n[h]:!e[m]&&n[i]===e[i]&&new Date(n[d])<new Date(new Date(t.date).getFullYear()+"-01-01")?a+n[E]-n[h]:a}),0)}return a.forEach((function(l){l[c]===e&&-1===b.indexOf(l[i])&&(b.push(l[i]),N.push(r.a.createElement("div",{key:l[i]},r.a.createElement("div",{className:"row background",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+l[s].replace(/[ ._()]/g,"")},r.a.createElement("i",{className:"fa fa-plus-square mt-1 col-1 d-print-none",id:"plusminus"+l[s].replace(/[ ._()]/g,"")}),r.a.createElement("p",{className:"col-2 mb-0"},l[i]),r.a.createElement("p",{className:"col-6 mb-0"},l[s]),r.a.createElement("p",{className:"col text-right mb-0"},C(a.reduce((function(e,a){return a[i]===l[i]&&new Date(a[d])<=new Date(t.date)?o?e+a[h]-a[E]:e+a[E]-a[h]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 pl-3 pl-md-5 pr-2",id:l[s].replace(/[ ._()]/g,"")},l[m]?function(e){var l=[];return a.map((function(c){return c[i]===e[i]&&-1===l.indexOf(c[m])?(l.push(c[m]),r.a.createElement("div",{key:c[m]},r.a.createElement("div",{className:"row my-1 py-1 rounded bg-secondary text-white",style:{cursor:"pointer"},"data-toggle":"collapse","data-target":"#"+c[m].replace(/[ ._()]/g,"")},r.a.createElement("p",{className:"col-1"},r.a.createElement("i",{className:"fa fa-plus-square mt-1 d-print-none",id:"plusminus"+c[m].replace(/[ ._()]/g,"")})),r.a.createElement("p",{className:"h6 col-5 mb-0"},c[m]),r.a.createElement("p",{className:"h6 col text-right mb-0"},C(a.reduce((function(e,a){return a[m]===c[m]&&new Date(a[d])<=new Date(t.date)?o?e+a[h]-a[E]:e+a[E]-a[h]:e}),0)))),r.a.createElement("div",{className:"collapse navbar-collapse my-2 row pl-3 pl-md-5 pr-2",id:c[m].replace(/[ ._()]/g,"")},r.a.createElement("div",{style:Z?{width:"100%"}:{width:"100%",overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},r.a.createElement("table",{id:"table",className:Z?"table table-hover":"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="date"+c[m].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[c[m]]=x(u[c[m]],d,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DATE",r.a.createElement("i",{id:"date"+c[m].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="type"+c[m].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[c[m]]=x(u[c[m]],p,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM TYPE",r.a.createElement("i",{id:"type"+c[m].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="number"+c[m].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[c[m]]=x(u[c[m]],f,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM NUMBER",r.a.createElement("i",{id:"number"+c[m].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="dr"+c[m].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[c[m]]=x(u[c[m]],E,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DR",r.a.createElement("i",{id:"dr"+c[m].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="cr"+c[m].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[c[m]]=x(u[c[m]],h,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"CR",r.a.createElement("i",{id:"cr"+c[m].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})))),r.a.createElement("tbody",null,v(c)>=0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},"B/F"),r.a.createElement("td",{colSpan:"2"},C(v(c)))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"B/F"),r.a.createElement("td",{colSpan:"1"},C(-v(c)))),n[c[m]].map((function(a,n){return a[i]===e[i]&&a[m]===c[m]&&new Date(a[d])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(a[d])<=new Date(t.date)?r.a.createElement("tr",{key:n,style:{cursor:"pointer"},onClick:function(e){return te.push("./"+ne(a[p].toLowerCase(),a[f]))}},r.a.createElement("td",{className:"text-nowrap"},S(a[d])),r.a.createElement("td",{className:"text-nowrap"},a[p]),r.a.createElement("td",{className:"text-nowrap"},a[f]),r.a.createElement("td",{className:"text-nowrap"},C(a[E])),r.a.createElement("td",{className:"text-nowrap"},C(a[h]))):null})))))))):null}))}(l):r.a.createElement("div",{style:Z?null:{overflowY:"auto",overflowX:"hidden",maxHeight:"60vh"}},r.a.createElement("table",{id:"table",className:Z?"table table-hover":"table table-hover table-responsive-md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="date"+l[s].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[s]]=x(u[l[s]],d,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DATE",r.a.createElement("i",{id:"date"+l[s].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="type"+l[s].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[s]]=x(u[l[s]],p,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM TYPE",r.a.createElement("i",{id:"type"+l[s].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="number"+l[s].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[s]]=x(u[l[s]],f,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"ITEM NUMBER",r.a.createElement("i",{id:"number"+l[s].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="dr"+l[s].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[s]]=x(u[l[s]],E,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"DR",r.a.createElement("i",{id:"dr"+l[s].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})),r.a.createElement("th",{className:"text-nowrap",style:{cursor:"pointer"},"data-order":"asc",onClick:function(e){var t="cr"+l[s].replace(/[ ._\-()]/g,"");e.target.setAttribute("data-order","asc"===e.target.getAttribute("data-order")?"desc":"asc"),u[l[s]]=x(u[l[s]],h,e.target.getAttribute("data-order")),g(Object(D.a)({},u)),"asc"===e.target.getAttribute("data-order")?(document.getElementById(t).classList.remove("fa-caret-up"),document.getElementById(t).classList.add("fa-caret-down")):(document.getElementById(t).classList.remove("fa-caret-down"),document.getElementById(t).classList.add("fa-caret-up"))}},"CR",r.a.createElement("i",{id:"cr"+l[s].replace(/[ ._\-()]/g,""),className:"d-print-none fa fa-caret-down ml-2"})))),r.a.createElement("tbody",null,v(l)>=0?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"3"},"B/F"),r.a.createElement("td",{colSpan:"2"},C(v(l)))):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"B/F"),r.a.createElement("td",{colSpan:"1"},C(-v(l)))),n[l[s]].map((function(e,a){return e[i]===l[i]&&new Date(e[d])>=new Date(new Date(t.date).getFullYear()+"-01-01")&&new Date(e[d])<=new Date(t.date)?r.a.createElement("tr",{key:a,style:{cursor:"pointer"},onClick:function(t){return te.push("./"+ne(e[p].toLowerCase(),e[f]))}},r.a.createElement("td",{className:"text-nowrap"},S(e[d])),r.a.createElement("td",{className:"text-nowrap"},e[p]),r.a.createElement("td",{className:"text-nowrap"},e[f]),r.a.createElement("td",{className:"text-nowrap"},C(e[E])),r.a.createElement("td",{className:"text-nowrap"},C(e[h]))):null})))))))))})),N}(e,a,n,l,o);if(c.length>0)return r.a.createElement("section",{key:e},r.a.createElement("h6",null,r.a.createElement("u",null,e)),c,r.a.createElement("p",{className:"h6 text-right my-1"},r.a.createElement("u",null,"TOTAL : "+C(ae([e],a,l,o)))))}))}Object(n.useEffect)((function(){if(o&&!1===o.auth)alert("Cookies Expired or Authorisation invalid. Please Login again!"),ee(!1);else if(o&&o.data&&o.field){var e=[],t=[],a=o.data[1],n=o.field[1],r=n[2].name,l=n[3].name,c=[];a.forEach((function(t){var n={};-1===e.indexOf(t[r])&&(e.push(t[r]),n[t[r]]=a.filter((function(e){return e[r]===t[r]})),g((function(e){return Object.assign({},Object(D.a)({},e),n)})))})),a.forEach((function(e){var n={};-1===t.indexOf(e[l])&&null!==e[l]&&(t.push(e[l]),n[e[l]]=a.filter((function(t){return t[l]===e[l]})),g((function(e){return Object.assign({},Object(D.a)({},e),n)})))})),o.data[1].forEach((function(e){-1===c.indexOf(e[r].replace(/[ ._()]/g,""))?c.push(e[r].replace(/[ ._()]/g,"")):e[l]&&-1===c.indexOf(e[l].replace(/[ ._()]/g,""))&&c.push(e[l].replace(/[ ._()]/g,""))})),z(c)}}),[o,s]),Object(n.useEffect)((function(){if(u){var e=o.data[0].map((function(e){return e[o.field[0][0].name]})),a=function(e,a){var n=a[3].name,r=a[6].name,l=a[7].name;return e.reduce((function(e,a){return new Date(a[n])<=new Date(t.date)&&new Date(a[n])>=new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[l]-a[r]:e}),0)}(o.data[2],o.field[2]),n=function(e,a){var n=a[3].name,r=a[6].name,l=a[7].name;return e.reduce((function(e,a){return new Date(a[n])<new Date(new Date(t.date).getFullYear()+"-01-01")?e+a[l]-a[r]:e}),0)}(o.data[2],o.field[2]);N(re(e.slice(0,6),o.data[1],u,o.field[1],!1)),I(C(ae(e.slice(0,6),o.data[1],o.field[1],!1))),R(re(e.slice(6),o.data[1],u,o.field[1],!0)),q(C(a)),Q(C(n)),P(C(ae(e.slice(6),o.data[1],o.field[1],!0)+a+n))}}),[u,Z]),Object(n.useEffect)((function(){X&&b&&k&&X.forEach((function(e){U()("#"+e).on("show.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-plus-square").addClass("fa-minus-square")})),U()("#"+e).on("hide.bs.collapse",(function(t){t.target===t.currentTarget&&U()("#plusminus"+e).removeClass("fa-minus-square").addClass("fa-plus-square")}))}))}),[b,k]);var le=null;return(o&&o.error||s)&&(le=r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?"Balance Sheet Data RETRIEVAL failed errno: "+o.error.errno+" code: "+o.error.code+" message: "+o.error.sqlMessage:null,s?"Balance Sheet Data RETRIEVAL failed "+s:null)),r.a.createElement(h,null,r.a.createElement("div",{className:"container py-3 py-md-5 px-md-5 position-relative"},r.a.createElement("h4",{className:"text-center"},t.companyTitle),r.a.createElement("h4",{className:"text-center mb-4"},"Balance Sheet as at "+S(t.date)),le,r.a.createElement("div",{className:"text-right d-print-none mb-4"},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"printFormat",checked:Z,onChange:function(e){e.target.checked?K(!0):K(!1)}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"printFormat"}," Print Format")),r.a.createElement("button",{className:"btn btn-dark mr-1 mr-md-2",onClick:function(e){return X.forEach((function(e){return U()("#"+e).collapse("show")}))}},r.a.createElement("i",{className:"fa fa-plus-square"})," Expand"),r.a.createElement("button",{className:"btn btn-light",onClick:function(e){return X.forEach((function(e){return U()("#"+e).collapse("hide")}))}}," ",r.a.createElement("i",{className:"fa fa-minus-square"})," Collapse")),b,r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET ASSETS TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},w)),k,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col mb-0"},"PROFIT AND LOSS"),r.a.createElement("p",{className:"col mb-0 text-right"},B)),r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col mb-0"},"RETAINED EARNINGS"),r.a.createElement("p",{className:"col mb-0 text-right"},V)),r.a.createElement("div",{className:"row my-3 rounded",style:{backgroundColor:"rgba(248,222,126,0.6)"}},r.a.createElement("p",{className:"col text-left my-2 h6"},"NET EQUITY TOTAL"),r.a.createElement("p",{className:"col text-right my-2 h6"},T))))}ta.description="Balance Sheet",ta.path="/BalanceSheetItem";var aa=ta,na=a(31),ra=a.n(na),la=[{name:"Dashboard",svg:y.a,process:[N],item:[],report:[]},{name:"Sales",svg:de.a,process:[k,F,T,M,B],item:[Z,ee,re,oe,se],report:[G]},{name:"Purchase",svg:Pe.a,process:[pe,fe,he,Ne,ye],item:[Ce,Ie,je,Re,Ae],report:[Oe]},{name:"Inventory",svg:ze.a,process:[Ye,qe],item:[Qe,He],report:[Je]},{name:"Bank and Cash",svg:ht.a,process:[$e,Ke,tt,nt,lt],item:[ct,st,dt,pt,ft],report:[]},{name:"Accounts Receivable",svg:Rt.a,process:[Nt],item:[jt],report:[wt,xt,It]},{name:"Accounts Payable",svg:Ut.a,process:[At],item:[qt],report:[Pt,Yt]},{name:"General Ledger",svg:ra.a,process:[Vt,Gt,Xt,Wt],item:[Zt,ea,aa],report:[]}];var oa=function(e){var t=la.map((function(e){var t=[],a=[];return e.process.forEach((function(e){return t.push(e.description)})),e.report.forEach((function(e){return a.push(e.description)})),r.a.createElement(f,{key:e.name,name:e.name,img:e.svg,parent:"accordion",items:t,reportItems:a})}));return r.a.createElement("aside",{id:"accordion",className:"accordion "+(e.largeScreenStyle?"d-none":"d-block")+" d-md-block bg-dark "+(e.largeScreenStyle?"position-sticky vh-100 overflow-auto":""),style:{top:"0"}},r.a.createElement("h2",{className:"text-warning d-none d-md-block ",style:{padding:"0.75rem 1.25rem"}},"Accounting ",r.a.createElement("span",{className:"text-info"},"Software "),r.a.createElement("small",{className:"text-light d-block",style:{fontSize:"40%"}},"@coded by Mseong")),r.a.createElement("h4",{className:"text-warning d-md-none",style:{padding:"0.75rem 1.25rem"}},"Accounting ",r.a.createElement("span",{className:"text-info"},"Software "),r.a.createElement("small",{className:"text-light d-block",style:{fontSize:"40%"}},"@coded by Mseong")),t)};var ca=function(e){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 order-md-last px-0"},r.a.createElement(g,null)),r.a.createElement("div",{className:"col-md-3 order-md-first px-0"},r.a.createElement(oa,null))))};var ia=function(e){var t=O(null),a=Object(c.a)(t,2),l=a[0],o=l.data,i=l.error,s=a[1],m=Object(n.useContext)(p).changeAuth,d=Object(n.useContext)(E).isLoading,g=Object(n.useState)(""),f=Object(c.a)(g,2),h=f[0],b=f[1],N=Object(n.useState)(""),v=Object(c.a)(N,2),y=v[0],w=v[1];return Object(n.useEffect)((function(){o&&!0===o.auth&&m(!0)}),[o,i]),r.a.createElement("section",{className:"container"},r.a.createElement("div",{className:"row"},d?r.a.createElement("div",{className:"position-fixed d-flex justify-content-center align-items-center vh-100 vw-100",style:{top:0,left:0,zIndex:"100000",backgroundColor:"rgba(255,255,255,0.6"}},r.a.createElement("div",{className:"spinner-grow",style:{width:"4rem",height:"4rem"}},r.a.createElement("span",{className:"sr-only"}))):null,r.a.createElement("div",{className:"col-10 offset-1 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},r.a.createElement("div",{className:"jumbotron min-vh-100",style:{marginBottom:0}},r.a.createElement("h1",{className:"my-5"},"Login",r.a.createElement("img",{src:u.a,alt:"logo",style:{width:"35px",height:"35px"},className:"d-inline-block mx-3"})),o&&!1===o.auth||i?r.a.createElement("div",{className:"alert alert-warning"},o&&o.error?o.error.code+o.error.type:null,o&&o.message?o.message:null,i?i.name+" "+i.message:null):null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s({url:"./userAuth",init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,password:y}),credentials:"include"}})}},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{type:"text",id:"username",value:h,onChange:function(e){return b(e.target.value)},required:!0,className:"form-control"}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"password",id:"password",value:y,onChange:function(e){return w(e.target.value)},required:!0,className:"form-control"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary my-3"},"Submit"))))))};var sa=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),d=Object(c.a)(o,2),u=d[0],g=d[1],f=[];return la.forEach((function(e){e.process.forEach((function(e){return f.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))})),e.item.forEach((function(e){return f.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))})),e.report.forEach((function(e){return f.push(r.a.createElement(i.b,{key:e.path,path:e.path,component:e}))}))})),r.a.createElement(s.a,null,r.a.createElement(p.Provider,{value:{auth:a,changeAuth:l}},r.a.createElement(E.Provider,{value:{isLoading:u,changeIsLoading:g}},r.a.createElement(m,{render:function(e){return r.a.createElement(i.d,null,a?null:r.a.createElement(i.b,{path:"/Login"},r.a.createElement(ia,null)),a?null:r.a.createElement(i.a,{to:"/Login"}),f,e?r.a.createElement(i.b,{path:"/",render:ca}):r.a.createElement(i.a,{to:"/DashBoard"}))}}))))};a(41),a(43),a(44);o.a.render(r.a.createElement(sa,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ddf27d20.chunk.js.map